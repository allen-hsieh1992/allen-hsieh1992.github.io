<!doctype html><html class=position-relative itemscope itemtype=https://schema.org/WebPage lang=zh-tw data-bs-theme=dark data-palette=blue><head><script src=/assets/init/bundle.min.8f368cdebb6d999bc47f8451c7caa07f8babe013aaaf736020df6ce5c851cedd.js integrity="sha256-jzaM3rttmZvEf4RRx8qgf4ur4BOqr3NgIN9s5chRzt0=" crossorigin=anonymous></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Java Optional 基本 & 心得分享 - 艾倫的開發心路歷程</title><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_16x16_resize_box_3.png sizes=16x16 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_32x32_resize_box_3.png sizes=32x32 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_150x150_resize_box_3.png sizes=150x150 type=image/png><link rel=apple-touch-icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_180x180_resize_box_3.png sizes=180x180 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_192x192_resize_box_3.png sizes=192x192 type=image/png><link rel=mask-icon href=/safari-pinned-tab.svg color=#6f42c1><meta name=keywords content="艾倫,AWS,Allen,Note"><meta name=description content="最近我們部門在開發新的微服務都是使用 Java，但許多同事都是寫習慣 PHP 且之前沒有使用過 Java 。由於像 PHP 這種 Script Language 在處理 Undefined Variable 時，只是提示Warning，導致有的同事沒有良好的檢查 null 的習慣。有的同事抱怨 Null Pointer Exception 花了許多的時間在尋找，所以我決定在這次的新專案中，使用 Optional 來減少 Null Pointer Exception。"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://allenhsieh1992.com/images/java.webp"><meta name=twitter:title content="Java Optional 基本 & 心得分享"><meta name=twitter:description content="最近我們部門在開發新的微服務都是使用 Java，但許多同事都是寫習慣 PHP 且之前沒有使用過 Java 。由於像 PHP 這種 Script Language 在處理 Undefined Variable 時，只是提示Warning，導致有的同事沒有良好的檢查 null 的習慣。有的同事抱怨 Null Pointer Exception 花了許多的時間在尋找，所以我決定在這次的新專案中，使用 Optional 來減少 Null Pointer Exception。"><meta property="og:title" content="Java Optional 基本 & 心得分享"><meta property="og:description" content="最近我們部門在開發新的微服務都是使用 Java，但許多同事都是寫習慣 PHP 且之前沒有使用過 Java 。由於像 PHP 這種 Script Language 在處理 Undefined Variable 時，只是提示Warning，導致有的同事沒有良好的檢查 null 的習慣。有的同事抱怨 Null Pointer Exception 花了許多的時間在尋找，所以我決定在這次的新專案中，使用 Optional 來減少 Null Pointer Exception。"><meta property="og:type" content="article"><meta property="og:url" content="https://allenhsieh1992.com/posts/java/java-optional-basic/"><meta property="og:image" content="https://allenhsieh1992.com/images/java.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-27T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-27T00:00:00+00:00"><meta itemprop=name content="Java Optional 基本 & 心得分享"><meta itemprop=description content="最近我們部門在開發新的微服務都是使用 Java，但許多同事都是寫習慣 PHP 且之前沒有使用過 Java 。由於像 PHP 這種 Script Language 在處理 Undefined Variable 時，只是提示Warning，導致有的同事沒有良好的檢查 null 的習慣。有的同事抱怨 Null Pointer Exception 花了許多的時間在尋找，所以我決定在這次的新專案中，使用 Optional 來減少 Null Pointer Exception。"><meta itemprop=datePublished content="2021-06-27T00:00:00+00:00"><meta itemprop=dateModified content="2021-06-27T00:00:00+00:00"><meta itemprop=wordCount content="2221"><meta itemprop=image content="https://allenhsieh1992.com/images/java.webp"><meta itemprop=keywords content="JavaCore,"><meta property="og:image:alt" content="Java Optional 基本 & 心得分享"><meta name=twitter:image:alt content="Java Optional 基本 & 心得分享"><link rel=manifest href=/manifest.json><script async src="https://www.googletagmanager.com/gtag/js?id=G-N4B4L4M6SX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-N4B4L4M6SX",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2699261588864109"></script>
<link data-precache rel=stylesheet href="/assets/main/bundle.min.e236bf66f82638e6f8bb19ce8a7bcfafb2153885d0fd1451aa784e143f8eeb41.css" integrity="sha256-4ja/ZvgmOOb4uxnOinvPr7IVOIXQ/RRRqnhOFD+O60E=" crossorigin=anonymous><link data-precache rel=stylesheet href=/assets/viewer/bundle.min.6d0fc65b8b058ac563091dc5c36f61afba5dd705058680aa24f1d5a3bcf0064d.css integrity="sha256-bQ/GW4sFisVjCR3Fw29hr7pd1wUFhoCqJPHVo7zwBk0=" crossorigin=anonymous></head><body><header class="mb-4 sticky-top"><nav class="top-app-bar shadow navbar navbar-expand-xxl"><div class=container><a class="navbar-brand d-flex align-items-center flex-grow-1 flex-xxl-grow-0 justify-content-xxl-start ms-2 ms-xxl-0 mx-auto me-xxl-2" href=https://allenhsieh1992.com/><picture><img class=logo alt=Logo src=https://allenhsieh1992.com/images/logo.png loading=lazy width=136 height=70></picture>
艾倫的開發心路歷程</a><div class="offcanvas-xxl offcanvas-end flex-grow-1" data-bs-scroll=true tabindex=-1 id=navbarMenus aria-labelledby=navbarMenusLabel><div class="offcanvas-header px-4 pb-0"><div class="offcanvas-title h5" id=navbarMenusLabel>艾倫的開發心路歷程</div><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas data-bs-target=#navbarMenus aria-label=Close></button></div><div class="offcanvas-body p-4 pt-0 p-xxl-0"><hr class=d-xxl-none><ul class="navbar-nav flex-row flex-wrap align-items-center me-auto"><li class="nav-item col-12 col-xxl-auto dropdown px-0"><a href=# class="nav-link dropdown-toggle" id=navbarDropdownTech role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-chevron-circle-down"></i>技術</a><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=navbarDropdownTech data-bs-popper=none><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/aws><div class=dropdown-item-content><p class="dropdown-item-title mb-0">AWS</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/java><div class=dropdown-item-content><p class="dropdown-item-title mb-0">JAVA</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/container><div class=dropdown-item-content><p class="dropdown-item-title mb-0">CONTAINER</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/tools><div class=dropdown-item-content><p class="dropdown-item-title mb-0">TOOLS</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/leetcode><div class=dropdown-item-content><p class="dropdown-item-title mb-0">LEETCODE</p></div></a></li></ul></li><li class="nav-item col-12 col-xxl-auto dropdown px-0"><a href=# class="nav-link dropdown-toggle" id=navbarDropdownLife role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-chevron-circle-down"></i>生活</a><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=navbarDropdownLife data-bs-popper=none><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/travel><div class=dropdown-item-content><p class="dropdown-item-title mb-0">旅遊</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/unboxing><div class=dropdown-item-content><p class="dropdown-item-title mb-0">開箱</p></div></a></li></ul></li><li class="nav-item col-6 col-xxl-auto"><a class="nav-link py-2 px-0 px-xxl-2" href=https://allenhsieh1992.com/archives/><i class="fas fa-fw fa-file-archive"></i>歸檔</a></li><li class="nav-item col-6 col-xxl-auto"><a class="nav-link py-2 px-0 px-xxl-2" href=https://allenhsieh1992.com/categories/><i class="fas fa-fw fa-folder"></i>分類</a></li></ul><hr class=d-xxl-none><form class="search-bar ms-auto my-auto" action=/search/ novalidate><div class="input-group input-group-sm align-items-center"><span class="btn btn-search disabled position-absolute left-0 border-0 px-1"><i class="fas fa-fw fa-search fa-lg"></i></span>
<input class="my-1 form-control border-white rounded-5 search-input bg-body" name=q type=search placeholder=搜尋 aria-label=Search required>
<span class="search-shortcut position-absolute end-0 top-0 me-2"><kbd class="bg-primary rounded shadow">/</kbd></span></div></form><hr class=d-xxl-none><ul class="navbar-nav flex-row flex-wrap align-items-center ms-md-auto"><li class="nav-item py-2 py-xxl-1 col-12 col-xxl-auto"><nav class="social-links nav justify-content-center flex-row"><a class="nav-link social-link col-6 col-xxl-auto p-1" target=_blank href=https://linkedin.com/in/chang-lin-hsieh title=領英 rel=me><i class="fa-fw fab fa-linkedin-in"></i>
<span class="ms-1 d-xxl-none">Linkedin</span></a></nav></li><li class="nav-item py-2 py-xxl-1 col-12 col-xxl-auto"><div class="vr d-none d-xxl-flex h-100 mx-xxl-2 text-white"></div><hr class="d-xxl-none my-2"></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=fontSizeDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-font"></i>
<span class=d-xxl-none>字體大小</span></a><ul class="font-size-dropdown-menu dropdown-menu dropdown-menu-end" aria-labelledby=fontSizeDropdown><li><button class="font-size-item dropdown-item" data-size=xs>
特小號</button></li><li><button class="font-size-item dropdown-item" data-size=sm>
小號</button></li><li><button class="font-size-item dropdown-item active" data-size=md>
中等</button></li><li><button class="font-size-item dropdown-item" data-size=lg>
大號</button></li><li><button class="font-size-item dropdown-item" data-size=xl>
特大號</button></li></ul></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=paletteDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-palette"></i>
<span class=d-xxl-none>配色</span></a><ul class="palette-dropdown-menu dropdown-menu dropdown-menu-end px-2 row g-2" aria-labelledby=paletteDropdown><li class="col-4 my-1"><a role=button id=palette-blue aria-label=藍色 class="btn btn-sm w-100 palette text-bg-blue" data-palette=blue></a></li><li class="col-4 my-1"><a role=button id=palette-blue-gray aria-label=藍灰色 class="btn btn-sm w-100 palette text-bg-blue-gray" data-palette=blue-gray></a></li><li class="col-4 my-1"><a role=button id=palette-brown aria-label=棕色 class="btn btn-sm w-100 palette text-bg-brown" data-palette=brown></a></li><li class="col-4 my-1"><a role=button id=palette-cyan aria-label=青色 class="btn btn-sm w-100 palette text-bg-cyan" data-palette=cyan></a></li><li class="col-4 my-1"><a role=button id=palette-green aria-label=綠色 class="btn btn-sm w-100 palette text-bg-green" data-palette=green></a></li><li class="col-4 my-1"><a role=button id=palette-indigo aria-label=靛青色 class="btn btn-sm w-100 palette text-bg-indigo" data-palette=indigo></a></li><li class="col-4 my-1"><a role=button id=palette-orange aria-label=橙色 class="btn btn-sm w-100 palette text-bg-orange" data-palette=orange></a></li><li class="col-4 my-1"><a role=button id=palette-pink aria-label=粉色 class="btn btn-sm w-100 palette text-bg-pink" data-palette=pink></a></li><li class="col-4 my-1"><a role=button id=palette-purple aria-label=紫色 class="btn btn-sm w-100 palette text-bg-purple" data-palette=purple></a></li><li class="col-4 my-1"><a role=button id=palette-red aria-label=紅色 class="btn btn-sm w-100 palette text-bg-red" data-palette=red></a></li><li class="col-4 my-1"><a role=button id=palette-teal aria-label=藍綠色 class="btn btn-sm w-100 palette text-bg-teal" data-palette=teal></a></li><li class="col-4 my-1"><a role=button id=palette-yellow aria-label=黃色 class="btn btn-sm w-100 palette text-bg-yellow" data-palette=yellow></a></li></ul></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=modeDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="mode-icon fas fa-fw fa-moon" id=modeIcon></i>
<span class=d-xxl-none>模式</span></a><ul class="mode-dropdown-menu dropdown-menu dropdown-menu-end" aria-labelledby=modeDropdown><li class=mode-item data-color-mode=light data-icon=sun><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-sun"></i> 淺色</button></li><li class="mode-item active" data-color-mode=dark data-icon=moon><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-moon"></i> 深色</button></li><li class=mode-item data-color-mode=auto data-icon=adjust><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-adjust"></i> 自動</button></li></ul></li></ul></div></div><div class=d-flex><button class="navbar-toggler order-5 border-0" type=button data-bs-toggle=offcanvas data-bs-target=#navbarMenus aria-controls=navbarMenus aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-ellipsis-h"></i></button></div></div></nav><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></header><main class=container><div class="row content"><noscript><div class="alert alert-danger" role=alert>你的瀏覽器不支持 JavaScript。</div></noscript><div class=col-xxl-8><div class=container><nav class="row card component" aria-label=breadcrumb><div class="card-body pb-0"><ol class="hbs-breadcrumb breadcrumb flex-nowrap"><li class="breadcrumb-item text-surface"><a href=/>主頁</a></li><li class="breadcrumb-item text-surface"><a href=/posts/>文章</a></li><li class="breadcrumb-item text-surface"><a href=/posts/java/>JAVA</a></li><li class="breadcrumb-item active">Java Optional 基本 & 心得分享</li></ol></div></nav><div class="post-panel-wrapper position-relative d-flex justify-content-center"><div class="d-flex flex-row justify-content-center rounded-5 border post-panel position-fixed px-3 py-1 surface shadow-1"><div class="action btn-group dropup"><button type=button class="btn btn-link p-0" data-bs-toggle=dropdown aria-expanded=false title=打賞>
<i class="fas fa-fw fa-coffee"></i></button><ul class=dropdown-menu><li><a href=https://paypal.me/ChangLinH target=_blank rel="noopener noreferrer" role=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light><i class="fab fa-fw fa-paypal me-1"></i>Paypal</a></li></ul></div><a class="action action-toc d-none d-xxl-block" href=#postTOC role=button title="Table of contents"><i class="fas fa-fw fa-list-alt"></i></a>
<a class="action action-toc d-block d-xxl-none" href=#post-toc-container role=button title="Table of contents"><i class="fas fa-fw fa-list-alt"></i></a>
<a class="action action-copyright" href=#post-copyright role=button aria-label=Copyright title=Copyright><i class="fas fa-fw fa-copyright"></i></a>
<a class="action action-post-comments" href=#post-comments role=button aria-label=Comments title=Comments><i class="fas fa-fw fa-comments"></i></a>
<a id=sidebarToggler class="action action-sidebar-toggler d-none d-xxl-block" role=button title="Sidebar toggler"><i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i></a></div></div><article class="row card component mb-4 post"><div class=card-header><h1 class="card-title post-title my-2">Java Optional 基本 & 心得分享</h1></div><div class=card-body><div class="post-meta mb-3"><span class="post-date me-1 mb-1" title="創建於 2021-06-27 08:00:00 +0800 CST。">June 27, 2021</span><a href=/categories/java/ class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-taxonomy-sm post-category">
<i class="fas fa-fw fa-folder me-1"></i>JAVA</a><a href=/tags/javacore/ class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-taxonomy-sm post-tag">JavaCore</a></div><p class="lead mb-3 text-body-emphasis">最近我們部門在開發新的微服務都是使用 Java，但許多同事都是寫習慣 PHP 且之前沒有使用過 Java 。由於像 PHP 這種 Script Language 在處理 Undefined Variable 時，只是提示Warning，導致有的同事沒有良好的檢查 null 的習慣。有的同事抱怨 Null Pointer Exception 花了許多的時間在尋找，所以我決定在這次的新專案中，使用 Optional 來減少 Null Pointer Exception。</p><div class="mt-2 mb-3 d-block d-xxl-none"><h2 class="text-surface mb-3">目錄</h2><div id=post-toc-container></div><hr class=text-secondary></div><div class="post-content mb-3" data-bs-spy=scroll data-bs-target=#TableOfContents tabindex=0><div id=post-content-body><p>最近我們部門在開發新的微服務都是使用 Java，但許多同事都是寫習慣 PHP 且之前沒有使用過 Java 。由於像 PHP 這種 Script Language 在處理 Undefined Variable 時，只是提示Warning，導致有的同事沒有良好的檢查 null 的習慣。有的同事抱怨 Null Pointer Exception 花了許多的時間在尋找，所以我決定在這次的新專案中，使用 Optional 來減少 Null Pointer Exception。這邊要特別注意，如果沒有正確的使用 Optional 的話，還是有可能會造成 Null Pointer Exception 喔！</p><blockquote><p>Null Reference is the Billion Dollar Mistake - Tony Hoare</p></blockquote><h2 id=建立optional-物件 data-numberify>建立Optional 物件<a class="anchor ms-1" href=#建立optional-物件></a></h2><hr><p>大家認為下面的 Example1 運行的結果會是什麼樣的呢？</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example1</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>optionalSentence</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>9</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>執行結果會是 &ldquo;I am Optional String&rdquo;，這邊可以看到 line 6 透過 of() method 建立了 一個 Optional 的物件。但如果 sentence 是 null 的時候，會怎麼樣呢？結果會是 Null Pointer Exception! 因為 of() method 這邊所帶入的 Value 必須是 non-null的，所以建議大家在使用 Optional 時，應該避開使用 of() method，而是使用 ofNullable() method。</p><p>現在我們將 Example1 中的 sentence 改成 null 並且使用 ofNullAble() method 來運行，這時大家覺得結果是怎樣呢？</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example2</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>optionalSentence</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>9</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>大家是否會認為跟 Example1 一樣，會列印出"I am Optional String"？但實際執行的結果會是 NoSuchElementException : No value present，因為在 call get() method 時內部檢查 Value 是否存在，所以這邊建議在實際使用中，不要使用 get() method，除非你能確認 Value 一定不等於 null。
這邊要順便介紹 Optional 中特別的物件: Optional.empty() ，這邊要特別注意 Optional empty 還是 Optional 物件，只是裡面的 value 是 null，所以 Optional empty 跟 null 是不同的東西。</p><h2 id=optional-安全取得value data-numberify>Optional 安全取得Value<a class="anchor ms-1" href=#optional-安全取得value></a></h2><hr><p>這邊一開始要介紹Optional 中的 isPresent()，透過 isPresent 我們可以安全地確認 Value 是否存在</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example3</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>optionalSentence</span><span class=o>.</span><span class=na>isPresent</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>optionalSentence</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;value is empty&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Example3 因為我們確認了 Value 已經存在 Optional 中了，所以會正常運行，但是否會覺得這樣寫法跟我們以前自己檢查一些值是否是 null 是一樣的呢？
這邊要介紹 orElse()</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example4</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>String</span> <span class=n>defaultValue</span> <span class=o>=</span> <span class=s>&#34;value is empty&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>optionalSentence</span><span class=o>.</span><span class=na>orElse</span><span class=o>(</span><span class=n>defaultValue</span><span class=o>));</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>大家可以看到 orElse() 當 Optional 物件的 value 是空的時候，會返回 defaultValue，這樣我們就可以不用寫 if else 了。
但有的人想 return 的 defaultValue 比較複雜怎麼辦? 我們也可以使用 orElseGet() 執行一個函示取得想要的預設值。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example5</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>optionalSentence</span><span class=o>.</span><span class=na>orElseGet</span><span class=o>(()-&gt;</span> <span class=n>getDefaultValue</span><span class=o>()));</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>getDefaultValue</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=k>return</span> <span class=s>&#34;I am default value&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>大家以前也一定會經常做一些必要的欄位檢查，如果都些值是 Null 就要丟特定的 Exception，這邊可以使用 orElseThrow()</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example6</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>optionalSentence</span><span class=o>.</span><span class=na>orElseThrow</span><span class=o>(()-&gt;</span> <span class=k>new</span> <span class=n>myCustomException</span><span class=o>()));</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>9</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=optional-安全執行特定函式 data-numberify>Optional 安全執行特定函式<a class="anchor ms-1" href=#optional-安全執行特定函式></a></h2><hr><p>在之前的例子中，我們只是單純的想要正確的執行 System.out.println，這邊介紹ifPresent()。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example7</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>optionalSentence</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>value</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=o>});</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>這邊想稍微提一下 eta-conversion 的概念，但細節大家可以參考這篇 <a href=https://read01.com/zh-tw/BJaAPOg.html#.YTMyBtMzZhF target=_blank rel="noopener noreferrer">如何理解並使用Java中雙冒號(::)運算操作符<i class="fas fa-external-link-square-alt ms-1"></i></a>
根據eta-conversion 可以寫成以下code</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example8</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=c1>//原本
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=c1></span>        <span class=n>optionalSentence</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>value</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=o>});</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=c1>//因為只執行一個函式，所以可以將 {} 拿掉
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=c1></span>        <span class=n>optionalSentence</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>value</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>value</span><span class=o>));</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=c1>//因為只有的函式只有一個參數，透過 eta-conversion 可以寫成
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=c1></span>        <span class=n>optionalSentence</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>ifPresent() 只能在 Optional 有 value 時執行，有時候我們也希望如果 Optional 有 value 時執行 函式 A，沒有值時 執行函式 B，這時我們就可以透過 ifPresentOrElse()</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example9</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>optionalSentence</span><span class=o>.</span><span class=na>ifPresentOrElse</span><span class=o>(</span><span class=n>Example9</span><span class=o>::</span><span class=n>methodA</span><span class=o>,</span> <span class=n>Example9</span><span class=o>::</span><span class=n>methodB</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>methodA</span><span class=o>(</span><span class=n>String</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=c1>//do something with value
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>methodB</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=c1>//do something without value
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=optional-進階函式 data-numberify>Optional 進階函式<a class="anchor ms-1" href=#optional-進階函式></a></h2><hr><p>Filter : 如果 isContainOptional return false，filter 的結果會是 Optional empty</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Locale</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example10</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>String</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s>&#34;I am Optional String&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalSentence</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>sentence</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>optionalSentence</span><span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>Example10</span><span class=o>::</span><span class=n>isContainOptional</span><span class=o>));</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>boolean</span> <span class=nf>isContainOptional</span><span class=o>(</span><span class=n>String</span> <span class=n>input</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=k>return</span> <span class=n>input</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>(</span><span class=n>Locale</span><span class=o>.</span><span class=na>ENGLISH</span><span class=o>).</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;optional&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=cm>/* output
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=cm>Optional[I am Optional String]
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=cm>*/</span>
</span></span></code></pre></div><p>Map: 如果 Optional 的 Value 有值，這邊才會執行你所定義的 Mapping Function，如果沒有就直接返回 Optional Empty。 我在工作中，經常需要將 DTO 轉換成 Response 物件，會使用 Map 來使用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Getter</span><span class=o>;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nd>@Getter</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=kd>class</span> <span class=nc>Person</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>firstName</span><span class=o>;</span>
</span></span><span class=line><span class=ln>8</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>lastName</span><span class=o>;</span>
</span></span><span class=line><span class=ln>9</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Getter</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.ToString</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=nd>@Getter</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=nd>@ToString</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>FullNamePerson</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>fullName</span><span class=o>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example11</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Person</span><span class=o>&gt;</span> <span class=n>person</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=k>new</span> <span class=n>Person</span><span class=o>(</span><span class=s>&#34;allen&#34;</span><span class=o>,</span> <span class=s>&#34;hsieh&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>FullNamePerson</span><span class=o>&gt;</span> <span class=n>fullNamePerson</span> <span class=o>=</span> <span class=n>person</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>Example11</span><span class=o>::</span><span class=n>convert</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>fullNamePerson</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>FullNamePerson</span> <span class=nf>convert</span><span class=o>(</span><span class=n>Person</span> <span class=n>person</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>FullNamePerson</span><span class=o>(</span><span class=n>person</span><span class=o>.</span><span class=na>getFirstName</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34; &#34;</span> <span class=o>+</span> <span class=n>person</span><span class=o>.</span><span class=na>getLastName</span><span class=o>());</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=cm>/* output
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=cm>FullNamePerson(fullName=allen hsieh)
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=cm>*/</span>
</span></span></code></pre></div><p>flatMap: 這邊我比較常用在取得 Optional 物件中的 Optional</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.AllArgsConstructor</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kd>class</span> <span class=nc>Person</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>firstName</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>lastName</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kd>public</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=nf>getFirstName</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=k>return</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>firstName</span><span class=o>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getLastName</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=k>return</span> <span class=n>lastName</span><span class=o>;</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example12</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Person</span><span class=o>&gt;</span> <span class=n>person</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=k>new</span> <span class=n>Person</span><span class=o>(</span><span class=s>&#34;allen&#34;</span><span class=o>,</span> <span class=s>&#34;hsieh&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>person</span><span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>Person</span><span class=o>::</span><span class=n>getFirstName</span><span class=o>));</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>person</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>Person</span><span class=o>::</span><span class=n>getLastName</span><span class=o>));</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=cm>/* output
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=cm>Optional[allen]
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=cm>Optional[hsieh]
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=cm>*/</span>
</span></span></code></pre></div><h2 id=class-field-是否使用-optional data-numberify>Class Field 是否使用 Optional<a class="anchor ms-1" href=#class-field-是否使用-optional></a></h2><p>一開始我正在嘗試使用 Optional 時，由於Lombok 的 Getter 不可以設定將正常的 Object 返回 Optional，那時我曾經有在考慮是否要將 Class Field 直接需告成 Optional。最後在研究了一番以後，我發現 class field 不應該須告成 Optional ，以下兩個原因</p><ol><li>Optional is not Serializable，這邊有 <a href=https://stackoverflow.com/questions/24547673/why-java-util-optional-is-not-serializable-how-to-serialize-the-object-with-suc target=_blank rel="noopener noreferrer">Stack Overflow<i class="fas fa-external-link-square-alt ms-1"></i></a> 的討論，大家可以參考</li><li>你不能避免別人將 Instance variable set 成 null ，還是有可能造成 Null Pointer Exception</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>lombok.Data</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kd>class</span> <span class=nc>Person</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=kd>private</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=n>Person</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Example13</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>        <span class=n>Person</span> <span class=n>person</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Person</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=n>person</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>optionalName</span> <span class=o>=</span> <span class=n>person</span><span class=o>.</span><span class=na>getName</span><span class=o>();</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=n>optionalName</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>這邊由於 getName return 的 Optional 是由外面帶入的，並不能控制返回的物件一定是 Optional，所以在 Line 8 的 optionalName 會是 null。當 Line 9 的 ifPresent() 執行時，會造成 Null Pointer Exception。 Optional 的使用是為了減少 null 的情況，所以好的設計是在拿到 Optional 物件時，不需要在檢查是否是 null。這也同時表示函示的參數，不應該有 Optional 帶入，因為有可能會是 Null 的情況</p><h2 id=總結 data-numberify>總結<a class="anchor ms-1" href=#總結></a></h2><hr><p>這邊小小的總結一下我目前使用 Optional 的規則</p><ol><li>避免使用 of() & get() 以免造成 null pointer exception</li><li>函式返回的物件，有可能是 null 的情況，選擇使用 Optional 物件返回</li><li>Class Field 不使用 Optional</li><li>函式參數不已 Optional 物件帶入</li></ol></div></div></div><div class=card-footer><div class="post-navs d-flex justify-content-evenly"><div class="post-nav post-next"><a href=/posts/java/java-jersey-client-log-request-duration/>Java Jersey Client 取得每個 Request Duration</a>
<i class="fas fa-fw fa-chevron-down post-next-icon ms-1" data-fa-transform=rotate-270></i></div></div></div></article><div class="post-copyright mb-3 row card component" id=post-copyright><div class=card-header><h2 class="card-title fs-4 my-2 text-surface">版權</h2></div><div class=card-body><a class="d-flex align-items-center flex-column" target=_blank rel="license noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh_TW><span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i><i class="fab fa-fw fa-2x fa-creative-commons-nd"></i></span>
CC BY-NC-ND 4.0</a></div></div><div class="card component row post-comments" id=post-comments><div class=card-header><h2 class="card-title my-2 fs-4 text-surface">評論</h2></div><div class=card-body><script src=https://utteranc.es/client.js repo=allen-hsieh1992/allen-hsieh1992.github.io issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div><aside class="col-xxl-4 sidebar d-flex"><div class="container d-flex flex-column"><div class="accordion profile"><div class="accordion-item card row text-center component"><div class="accordion-header card-header border-0" id=profile-header><a class="accordion-button d-lg-none mb-2 shadow-none p-0 bg-transparent text-surface" role=button data-bs-toggle=collapse href=#profile aria-expanded=true aria-controls=profile>Profile</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=profile aria-labelledby=profile-header><div class="col-12 d-flex align-items-center justify-content-center"><picture><img class="profile-avatar rounded-circle" alt="Allen Hsieh" src=https://allenhsieh1992.com/images/icon.gif loading=lazy data-viewer-invisible width=154 height=153></picture></div><div class="col-12 profile-meta"><div class="profile-name fw-fold fs-lg">Allen Hsieh</div><div class=profile-bio>AWS Community Builder | 7x AWS Certified | Senior Backend Software Engineer</div><div class=profile-company><i class="fas fa-fw fa-building"></i><a href=https://www.yahooinc.com/ target=_blank rel="noopener noreferrer">Yahoo Inc</a></div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i><a href=https://www.google.com/maps/search/Taiwan>Taiwan</a></div></div></div></div></div><div class="accordion taxonomies-toggle"><div class="row card component accordion-item"><div class="accordion-header card-header border-0"><a class="accordion-button d-lg-none mb-1 shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#taxonomies-toggle aria-expanded=true aria-controls=taxonomies-toggle>Taxonomies</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=taxonomies-toggle><ul class="nav nav-pills nav-fill" role=tablist><li class=nav-item role=presentation><button class="nav-link active" id=taxonomyCategoriesTab data-bs-toggle=tab data-bs-target=#taxonomyCategories type=button role=tab aria-controls=taxonomyCategories aria-selected=true>
分類</button></li><li class=nav-item role=presentation><button class=nav-link id=taxonomyTagsTab data-bs-toggle=tab data-bs-target=#taxonomyTags type=button role=tab aria-controls=taxonomyTags aria-selected=true>
標籤</button></li><li class=nav-item role=presentation><button class=nav-link id=taxonomyArchivesTab data-bs-toggle=tab data-bs-target=#taxonomyArchives type=button role=tab aria-controls=taxonomyArchives aria-selected=true>
歸檔</button></li></ul><div class="tab-content mt-3"><div class="tab-pane active" id=taxonomyCategories role=tabpanel aria-labelledby=taxonomyCategoriesTab tabindex=0><a href=/categories/aws/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=AWS>AWS</a>
<a href=/categories/leetcode/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=LEETCODE>LEETCODE</a>
<a href=/categories/life/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=LIFE>LIFE</a>
<a href=/categories/java/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=JAVA>JAVA</a>
<a href=/categories/spring/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=SPRING>SPRING</a>
<a href=/categories/container/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=CONTAINER>CONTAINER</a>
<a href=/categories/tools/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=TOOLS>TOOLS</a></div><div class=tab-pane id=taxonomyTags role=tabpanel aria-labelledby=taxonomyTagsTab tabindex=0><a href=/tags/leetcode/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=LEETCODE>LEETCODE</a>
<a href=/tags/lambda/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=LAMBDA>LAMBDA</a>
<a href=/tags/travel/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=TRAVEL>TRAVEL</a>
<a href=/tags/sam/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=SAM>SAM</a>
<a href=/tags/firehose/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=FIREHOSE>FIREHOSE</a>
<a href=/tags/javacore/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=JavaCore>JavaCore</a>
<a href=/tags/cloudformation/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=CloudFormation>CloudFormation</a>
<a href=/tags/route53/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Route53>Route53</a>
<a href=/tags/spring/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=SPRING>SPRING</a>
<a href=/tags/beanstalk/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Beanstalk>Beanstalk</a>
<a href=https://allenhsieh1992.com/tags class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=全部>全部
<span class="badge badge-sm text-secondary bg-white ms-1">27</span></a></div><div class=tab-pane id=taxonomyArchives role=tabpanel aria-labelledby=taxonomyArchivesTab tabindex=0><a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2025>2025 <span class="badge badge-sm text-secondary bg-white ms-1">1</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2024>2024 <span class="badge badge-sm text-secondary bg-white ms-1">5</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2023>2023 <span class="badge badge-sm text-secondary bg-white ms-1">18</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2022>2022 <span class="badge badge-sm text-secondary bg-white ms-1">21</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2021>2021 <span class="badge badge-sm text-secondary bg-white ms-1">2</span></a></div></div></div></div></div><div class="accordion posts-toggle"><div class="row card component accordion-item"><div class="accordion-header card-header border-0"><a class="accordion-button d-lg-none mb-1 shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#posts-toggle aria-expanded=true aria-controls=posts-toggle>文章</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=posts-toggle><ul class="nav nav-pills nav-fill" role=tablist><li class=nav-item role=presentation><button class="nav-link active" id=recent-posts-tab data-bs-toggle=tab data-bs-target=#recent-posts type=button role=tab aria-controls=recent-posts aria-selected=true>
最近文章</button></li></ul><div class="tab-content mt-3"><div class="tab-pane active" id=recent-posts role=tabpanel aria-labelledby=recent-posts-tab tabindex=0><ul class="post-list list-unstyled ms-1"><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Firehose 專案分享" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/firehose-part4-production-use-case/>Firehose 專案分享</a><div class="post-meta mt-2"><span class=post-date>February 13, 2025</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Firehose Dynamic Partitioning" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/firehose-part3-dynamic-partitioning/>Firehose Dynamic Partitioning</a><div class="post-meta mt-2"><span class=post-date>December 12, 2024</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Firehose 建置" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/firehose-part2-stream-creation/>Firehose 建置</a><div class="post-meta mt-2"><span class=post-date>October 6, 2024</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Firehose 101" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/firehose-part1-intro/>Firehose 101</a><div class="post-meta mt-2"><span class=post-date>July 13, 2024</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="SAM Part5: 部署 Dynamodb" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/sam-part5-dynamodb/>SAM Part5: 部署 Dynamodb</a><div class="post-meta mt-2"><span class=post-date>February 15, 2024</span></div></div></div></li></ul></div></div></div></div></div><div class="accordion post-toc d-none d-lg-block"><div class="accordion-item row mb-4 card component" id=postTOC><div class="card-header accordion-header"><h2 class="card-title fs-4 my-2 text-surface d-none d-lg-block">目錄</h2><a class="accordion-button d-lg-none mb-1 collapsed shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#post-toc aria-expanded=false aria-controls=post-toc>目錄</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block" id=post-toc><nav id=TableOfContents><ul><li><a href=#建立optional-物件>建立Optional 物件</a></li><li><a href=#optional-安全取得value>Optional 安全取得Value</a></li><li><a href=#optional-安全執行特定函式>Optional 安全執行特定函式</a></li><li><a href=#optional-進階函式>Optional 進階函式</a></li><li><a href=#class-field-是否使用-optional>Class Field 是否使用 Optional</a></li><li><a href=#總結>總結</a></li></ul></nav></div></div></div></div></aside></div></main><footer class="footer mt-auto py-3 text-center container"><div class="row text-center"><div class="col-12 mt-2"><span id=busuanzi_container_site_pv><p class=mb-2>總瀏覽: <span id=busuanzi_value_site_pv></span>次</p></span><div class="copyright mb-2 text-secondary"><small>Copyright © 2021-2025 Allen Hsieh. All Rights Reserved.</small></div><nav class="social-links nav justify-content-center mb-2 mt-3"></nav></div><div class="col-12 col-lg-8 offset-0 offset-lg-1"></div></div></footer><script data-precache src=/assets/main/bundle.min.cb5662470b8c11aeca70d9d975f65f3a3adde55470efc9c090713a90cf6d4e9c.js integrity="sha256-y1ZiRwuMEa7KcNnZdfZfOjrd5VRw78nAkHE6kM9tTpw=" crossorigin=anonymous async></script><script data-precache src=/assets/icons/bundle.min.691458a56c2eef480bec8d31c967801a416b6445459ae901fe213e7870a0dd83.js integrity="sha256-aRRYpWwu70gL7I0xyWeAGkFrZEVFmukB/iE+eHCg3YM=" crossorigin=anonymous defer></script>
<script data-precache src=/assets/viewer/bundle.min.0866ed96ba6267ca90d45399312388980c7bf8ddd8f980e8dc49ec37376b7b36.js integrity="sha256-CGbtlrpiZ8qQ1FOZMSOImAx7+N3Y+YDo3EnsNzdrezY=" crossorigin=anonymous defer></script>
<script src=/js/sw-register.js defer></script></body></html>