<!doctype html><html class=position-relative itemscope itemtype=https://schema.org/WebPage lang=zh-tw data-bs-theme=dark data-palette=blue><head><script src=/assets/init/bundle.min.8f368cdebb6d999bc47f8451c7caa07f8babe013aaaf736020df6ce5c851cedd.js integrity="sha256-jzaM3rttmZvEf4RRx8qgf4ur4BOqr3NgIN9s5chRzt0=" crossorigin=anonymous></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Java Garbage Collection 基礎演算法 - 艾倫的開發心路歷程</title><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_16x16_resize_box_3.png sizes=16x16 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_32x32_resize_box_3.png sizes=32x32 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_150x150_resize_box_3.png sizes=150x150 type=image/png><link rel=apple-touch-icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_180x180_resize_box_3.png sizes=180x180 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_192x192_resize_box_3.png sizes=192x192 type=image/png><link rel=mask-icon href=/safari-pinned-tab.svg color=#6f42c1><meta name=keywords content="艾倫,AWS,Allen,Note"><meta name=description content="在大學時 Algorithm, OS, 和 Data Structure 等課程都是使用 C 或 C++ 來當作課程教材的語言。而 C 與 C++ 語言可以擁有很大的掌控權力在 Memory 上，但是一處理不好就容易造成 Memory Leak。讓我印象最深刻的是 Operating System 課程，使用 OS161] 來當作做作業的練習， 而最後一個作業就是實作 Memory Management。大家那時候最害怕遇到的錯誤訊息就是“I can't handle this... I think I'll just die now...“，然後就要開始艱辛的 Debug 路程"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://allenhsieh1992.com/images/java.webp"><meta name=twitter:title content="Java Garbage Collection 基礎演算法"><meta name=twitter:description content="在大學時 Algorithm, OS, 和 Data Structure 等課程都是使用 C 或 C++ 來當作課程教材的語言。而 C 與 C++ 語言可以擁有很大的掌控權力在 Memory 上，但是一處理不好就容易造成 Memory Leak。讓我印象最深刻的是 Operating System 課程，使用 OS161] 來當作做作業的練習， 而最後一個作業就是實作 Memory Management。大家那時候最害怕遇到的錯誤訊息就是“I can't handle this... I think I'll just die now...“，然後就要開始艱辛的 Debug 路程"><meta property="og:title" content="Java Garbage Collection 基礎演算法"><meta property="og:description" content="在大學時 Algorithm, OS, 和 Data Structure 等課程都是使用 C 或 C++ 來當作課程教材的語言。而 C 與 C++ 語言可以擁有很大的掌控權力在 Memory 上，但是一處理不好就容易造成 Memory Leak。讓我印象最深刻的是 Operating System 課程，使用 OS161] 來當作做作業的練習， 而最後一個作業就是實作 Memory Management。大家那時候最害怕遇到的錯誤訊息就是“I can't handle this... I think I'll just die now...“，然後就要開始艱辛的 Debug 路程"><meta property="og:type" content="article"><meta property="og:url" content="https://allenhsieh1992.com/posts/java/java-garbage-collection/"><meta property="og:image" content="https://allenhsieh1992.com/images/java.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-26T00:00:00+00:00"><meta property="article:modified_time" content="2022-01-26T00:00:00+00:00"><meta itemprop=name content="Java Garbage Collection 基礎演算法"><meta itemprop=description content="在大學時 Algorithm, OS, 和 Data Structure 等課程都是使用 C 或 C++ 來當作課程教材的語言。而 C 與 C++ 語言可以擁有很大的掌控權力在 Memory 上，但是一處理不好就容易造成 Memory Leak。讓我印象最深刻的是 Operating System 課程，使用 OS161] 來當作做作業的練習， 而最後一個作業就是實作 Memory Management。大家那時候最害怕遇到的錯誤訊息就是“I can't handle this... I think I'll just die now...“，然後就要開始艱辛的 Debug 路程"><meta itemprop=datePublished content="2022-01-26T00:00:00+00:00"><meta itemprop=dateModified content="2022-01-26T00:00:00+00:00"><meta itemprop=wordCount content="1807"><meta itemprop=image content="https://allenhsieh1992.com/images/java.webp"><meta itemprop=keywords content="JavaCore,"><meta property="og:image:alt" content="Java Garbage Collection 基礎演算法"><meta name=twitter:image:alt content="Java Garbage Collection 基礎演算法"><link rel=manifest href=/manifest.json><script async src="https://www.googletagmanager.com/gtag/js?id=G-N4B4L4M6SX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-N4B4L4M6SX",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2699261588864109"></script>
<link data-precache rel=stylesheet href="/assets/main/bundle.min.78242a84a2790620f9f1c2724769e6dbe4b3c9544eaaf71597610c9b8d2b6b10.css" integrity="sha256-eCQqhKJ5BiD58cJyR2nm2+SzyVROqvcVl2EMm40raxA=" crossorigin=anonymous><link data-precache rel=stylesheet href=/assets/viewer/bundle.min.6d0fc65b8b058ac563091dc5c36f61afba5dd705058680aa24f1d5a3bcf0064d.css integrity="sha256-bQ/GW4sFisVjCR3Fw29hr7pd1wUFhoCqJPHVo7zwBk0=" crossorigin=anonymous></head><body><header class="mb-4 sticky-top"><nav class="top-app-bar shadow navbar navbar-expand-xxl"><div class=container><a class="navbar-brand d-flex align-items-center flex-grow-1 flex-xxl-grow-0 justify-content-xxl-start ms-2 ms-xxl-0 mx-auto me-xxl-2" href=https://allenhsieh1992.com/><picture><img class=logo alt=Logo src=https://allenhsieh1992.com/images/logo.png loading=lazy width=136 height=70></picture>
艾倫的開發心路歷程</a><div class="offcanvas-xxl offcanvas-end flex-grow-1" data-bs-scroll=true tabindex=-1 id=navbarMenus aria-labelledby=navbarMenusLabel><div class="offcanvas-header px-4 pb-0"><div class="offcanvas-title h5" id=navbarMenusLabel>艾倫的開發心路歷程</div><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas data-bs-target=#navbarMenus aria-label=Close></button></div><div class="offcanvas-body p-4 pt-0 p-xxl-0"><hr class=d-xxl-none><ul class="navbar-nav flex-row flex-wrap align-items-center me-auto"><li class="nav-item col-12 col-xxl-auto dropdown px-0"><a href=# class="nav-link dropdown-toggle" id=navbarDropdownTech role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-chevron-circle-down"></i>技術</a><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=navbarDropdownTech data-bs-popper=none><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/aws><div class=dropdown-item-content><p class="dropdown-item-title mb-0">AWS</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/java><div class=dropdown-item-content><p class="dropdown-item-title mb-0">JAVA</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/container><div class=dropdown-item-content><p class="dropdown-item-title mb-0">CONTAINER</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/tools><div class=dropdown-item-content><p class="dropdown-item-title mb-0">TOOLS</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/leetcode><div class=dropdown-item-content><p class="dropdown-item-title mb-0">LEETCODE</p></div></a></li></ul></li><li class="nav-item col-12 col-xxl-auto dropdown px-0"><a href=# class="nav-link dropdown-toggle" id=navbarDropdownLife role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-chevron-circle-down"></i>生活</a><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=navbarDropdownLife data-bs-popper=none><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/travel><div class=dropdown-item-content><p class="dropdown-item-title mb-0">旅遊</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/unboxing><div class=dropdown-item-content><p class="dropdown-item-title mb-0">開箱</p></div></a></li></ul></li><li class="nav-item col-6 col-xxl-auto"><a class="nav-link py-2 px-0 px-xxl-2" href=https://allenhsieh1992.com/archives/><i class="fas fa-fw fa-file-archive"></i>歸檔</a></li><li class="nav-item col-6 col-xxl-auto"><a class="nav-link py-2 px-0 px-xxl-2" href=https://allenhsieh1992.com/categories/><i class="fas fa-fw fa-folder"></i>分類</a></li></ul><hr class=d-xxl-none><form class="search-bar ms-auto my-auto" action=/search/ novalidate><div class="input-group input-group-sm align-items-center"><span class="btn btn-search disabled position-absolute left-0 border-0 px-1"><i class="fas fa-fw fa-search fa-lg"></i></span>
<input class="my-1 form-control border-white rounded-5 search-input bg-body" name=q type=search placeholder=搜尋 aria-label=Search required>
<span class="search-shortcut position-absolute end-0 top-0 me-2"><kbd class="bg-primary rounded shadow">/</kbd></span></div></form><hr class=d-xxl-none><ul class="navbar-nav flex-row flex-wrap align-items-center ms-md-auto"><li class="nav-item py-2 py-xxl-1 col-12 col-xxl-auto"><nav class="social-links nav justify-content-center flex-row"><a class="nav-link social-link col-6 col-xxl-auto p-1" target=_blank href=https://linkedin.com/in/chang-lin-hsieh title=領英 rel=me><i class="fa-fw fab fa-linkedin-in"></i>
<span class="ms-1 d-xxl-none">Linkedin</span></a></nav></li><li class="nav-item py-2 py-xxl-1 col-12 col-xxl-auto"><div class="vr d-none d-xxl-flex h-100 mx-xxl-2 text-white"></div><hr class="d-xxl-none my-2"></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=fontSizeDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-font"></i>
<span class=d-xxl-none>字體大小</span></a><ul class="font-size-dropdown-menu dropdown-menu dropdown-menu-end" aria-labelledby=fontSizeDropdown><li><button class="font-size-item dropdown-item" data-size=xs>
特小號</button></li><li><button class="font-size-item dropdown-item" data-size=sm>
小號</button></li><li><button class="font-size-item dropdown-item active" data-size=md>
中等</button></li><li><button class="font-size-item dropdown-item" data-size=lg>
大號</button></li><li><button class="font-size-item dropdown-item" data-size=xl>
特大號</button></li></ul></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=paletteDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-palette"></i>
<span class=d-xxl-none>配色</span></a><ul class="palette-dropdown-menu dropdown-menu dropdown-menu-end px-2 row g-2" aria-labelledby=paletteDropdown><li class="col-4 my-1"><a role=button id=palette-blue aria-label=藍色 class="btn btn-sm w-100 palette text-bg-blue" data-palette=blue></a></li><li class="col-4 my-1"><a role=button id=palette-blue-gray aria-label=藍灰色 class="btn btn-sm w-100 palette text-bg-blue-gray" data-palette=blue-gray></a></li><li class="col-4 my-1"><a role=button id=palette-brown aria-label=棕色 class="btn btn-sm w-100 palette text-bg-brown" data-palette=brown></a></li><li class="col-4 my-1"><a role=button id=palette-cyan aria-label=青色 class="btn btn-sm w-100 palette text-bg-cyan" data-palette=cyan></a></li><li class="col-4 my-1"><a role=button id=palette-green aria-label=綠色 class="btn btn-sm w-100 palette text-bg-green" data-palette=green></a></li><li class="col-4 my-1"><a role=button id=palette-indigo aria-label=靛青色 class="btn btn-sm w-100 palette text-bg-indigo" data-palette=indigo></a></li><li class="col-4 my-1"><a role=button id=palette-orange aria-label=橙色 class="btn btn-sm w-100 palette text-bg-orange" data-palette=orange></a></li><li class="col-4 my-1"><a role=button id=palette-pink aria-label=粉色 class="btn btn-sm w-100 palette text-bg-pink" data-palette=pink></a></li><li class="col-4 my-1"><a role=button id=palette-purple aria-label=紫色 class="btn btn-sm w-100 palette text-bg-purple" data-palette=purple></a></li><li class="col-4 my-1"><a role=button id=palette-red aria-label=紅色 class="btn btn-sm w-100 palette text-bg-red" data-palette=red></a></li><li class="col-4 my-1"><a role=button id=palette-teal aria-label=藍綠色 class="btn btn-sm w-100 palette text-bg-teal" data-palette=teal></a></li><li class="col-4 my-1"><a role=button id=palette-yellow aria-label=黃色 class="btn btn-sm w-100 palette text-bg-yellow" data-palette=yellow></a></li></ul></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=modeDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="mode-icon fas fa-fw fa-moon" id=modeIcon></i>
<span class=d-xxl-none>模式</span></a><ul class="mode-dropdown-menu dropdown-menu dropdown-menu-end" aria-labelledby=modeDropdown><li class=mode-item data-color-mode=light data-icon=sun><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-sun"></i> 淺色</button></li><li class="mode-item active" data-color-mode=dark data-icon=moon><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-moon"></i> 深色</button></li><li class=mode-item data-color-mode=auto data-icon=adjust><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-adjust"></i> 自動</button></li></ul></li></ul></div></div><div class=d-flex><button class="navbar-toggler order-5 border-0" type=button data-bs-toggle=offcanvas data-bs-target=#navbarMenus aria-controls=navbarMenus aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-ellipsis-h"></i></button></div></div></nav><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></header><main class=container><div class="row content"><noscript><div class="alert alert-danger" role=alert>你的瀏覽器不支持 JavaScript。</div></noscript><div class=col-xxl-8><div class=container><nav class="row card component" aria-label=breadcrumb><div class="card-body pb-0"><ol class="hbs-breadcrumb breadcrumb flex-nowrap"><li class="breadcrumb-item text-surface"><a href=/>主頁</a></li><li class="breadcrumb-item text-surface"><a href=/posts/>文章</a></li><li class="breadcrumb-item text-surface"><a href=/posts/java/>JAVA</a></li><li class="breadcrumb-item active">Java Garbage Collection 基礎演算法</li></ol></div></nav><div class="post-panel-wrapper position-relative d-flex justify-content-center"><div class="d-flex flex-row justify-content-center rounded-5 border post-panel position-fixed px-3 py-1 surface shadow-1"><div class="action btn-group dropup"><button type=button class="btn btn-link p-0" data-bs-toggle=dropdown aria-expanded=false title=打賞>
<i class="fas fa-fw fa-coffee"></i></button><ul class=dropdown-menu><li><a href=https://paypal.me/ChangLinH target=_blank rel="noopener noreferrer" role=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light><i class="fab fa-fw fa-paypal me-1"></i>Paypal</a></li></ul></div><a class="action action-toc d-none d-xxl-block" href=#postTOC role=button title="Table of contents"><i class="fas fa-fw fa-list-alt"></i></a>
<a class="action action-toc d-block d-xxl-none" href=#post-toc-container role=button title="Table of contents"><i class="fas fa-fw fa-list-alt"></i></a>
<a class="action action-copyright" href=#post-copyright role=button aria-label=Copyright title=Copyright><i class="fas fa-fw fa-copyright"></i></a>
<a class="action action-post-comments" href=#post-comments role=button aria-label=Comments title=Comments><i class="fas fa-fw fa-comments"></i></a>
<a id=sidebarToggler class="action action-sidebar-toggler d-none d-xxl-block" role=button title="Sidebar toggler"><i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i></a></div></div><article class="row card component mb-4 post"><div class=card-header><h1 class="card-title post-title my-2">Java Garbage Collection 基礎演算法</h1></div><div class=card-body><div class="post-meta mb-3"><span class="post-date me-1 mb-1" title="創建於 2022-01-26 08:00:00 +0800 CST。">January 26, 2022</span><a href=/categories/java/ class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-taxonomy-sm post-category">
<i class="fas fa-fw fa-folder me-1"></i>JAVA</a><a href=/tags/javacore/ class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-taxonomy-sm post-tag">JavaCore</a></div><p class="lead mb-3 text-body-emphasis">在大學時 Algorithm, OS, 和 Data Structure 等課程都是使用 C 或 C++ 來當作課程教材的語言。而 C 與 C++ 語言可以擁有很大的掌控權力在 Memory 上，但是一處理不好就容易造成 Memory Leak。讓我印象最深刻的是 Operating System 課程，使用 OS161] 來當作做作業的練習， 而最後一個作業就是實作 Memory Management。大家那時候最害怕遇到的錯誤訊息就是“I can't handle this... I think I'll just die now...“，然後就要開始艱辛的 Debug 路程</p><div class="mt-2 mb-3 d-block d-xxl-none"><h2 class="text-surface mb-3">目錄</h2><div id=post-toc-container></div><hr class=text-secondary></div><div class="post-content mb-3" data-bs-spy=scroll data-bs-target=#TableOfContents tabindex=0><div id=post-content-body><h2 id=什麼是-garbage-collection data-numberify>什麼是 Garbage Collection<a class="anchor ms-1" href=#什麼是-garbage-collection></a></h2><hr><p>在大學時 Algorithm, OS, 和 Data Structure 等課程都是使用 C 或 C++ 來當作課程教材的語言。而 C 與 C++ 語言可以擁有很大的掌控權力在 Memory 上，但是一處理不好就容易造成 Memory Leak。讓我印象最深刻的是 Operating System 課程，使用 <a href=http://www.os161.org/ target=_blank rel="noopener noreferrer">OS161<i class="fas fa-external-link-square-alt ms-1"></i></a> 來當作做作業的練習， 而最後一個作業就是實作 Memory Management。大家那時候最害怕遇到的錯誤訊息就是 &ldquo;I can&rsquo;t handle this&mldr; I think I&rsquo;ll just die now&mldr;"，然後就要開始艱辛的 Debug 路程。</p><p>之後當我接觸 Java 以後，我就回不去了 C 和 C++ 的世界了。因為 Java 已經有一套非常完善的機制幫我們管理記憶體，那就是 Garbage Collection。 Garbage Collection 是一個演算法，會自動將不需要在使用的內存給釋放出來，而我們就不用在管理複雜的記憶體了萬歲~</p><h2 id=garbage-collection-演算法 data-numberify>Garbage Collection 演算法<a class="anchor ms-1" href=#garbage-collection-演算法></a></h2><hr><h3 id=reference-counting data-numberify>Reference Counting<a class="anchor ms-1" href=#reference-counting></a></h3><p>這是最簡單易懂的演算法，每個物件都有個記地址去紀錄目前被多少引用，當引用數量等於零時，就代表這個物件可以被清除掉。</p><p>Reference Counting演算法的問題是 Cycle Reference。例如A reference B 和 B reference A，這樣 A 和 B 的引用的數量永遠不可能為零，也代表永遠不會被清除。</p><h3 id=mark--sweep data-numberify>Mark & Sweep<a class="anchor ms-1" href=#mark--sweep></a></h3><p>Mark & Sweep 演算法一共用兩個階段，如同英文 Mark 和 Sweep 分別代表不同的階段
階段1. Mark: 就是透過根引用開始一一走過一遍目前的記憶體，將所有有被引用的物件地址標記為正在使用。
階段2. Sweep: 在走過一次將地址將所有沒有被標記為還正在使用的記憶體清除。</p><p>Mark & Sweep 演算法的問題是記憶碎片(fragmentation)，由於被清除的記憶是隨機的，造成剩下還正在使用的記憶地址是非連續性的。</p><h3 id=copying data-numberify>Copying<a class="anchor ms-1" href=#copying></a></h3><p>Copying 演算法是將記憶體切成兩個區塊(Region)，一次只會有一個區塊在使用，這邊分別使用 &ldquo;激活區塊&rdquo; 和 &ldquo;未激活區塊&rdquo; 來表示。當演算法執行時，會將所有在 &ldquo;激活區塊&rdquo; 中還需要使用的物件複製到 &ldquo;未激活區塊中&rdquo;。在複製的過程中，會將地址重新整理，解決了 Mark & Sweep 演算法中的 Fragmentation 的問題。複製完後 &ldquo;未激活區塊&rdquo; 就會變成新的 &ldquo;激活區塊&rdquo;，而 &ldquo;激活區塊&rdquo; 會變成 &ldquo;未激活區塊&rdquo; 這樣一直循環。</p><p>Copying 演算法的問題是</p><ul><li>由於需要兩個區塊，所以使用的記憶體也是兩倍。</li><li>如果每次執行時，需要清理的記憶體很少，那就代表每次需要複製到 &ldquo;未激活區塊&rdquo; 的很多，效能也會很差</li></ul><h3 id=mark-compact data-numberify>Mark-Compact<a class="anchor ms-1" href=#mark-compact></a></h3><p>Mark-Compact 演算法是基於 Mark & Sweep 演算法的優化，多增加一個 Compact 階段，將還需要使用的記憶重新整理，解決了記憶碎片，也不像 Copying 演算法依樣需要使用兩倍的記憶體</p><h2 id=java-garbage-collection data-numberify>Java Garbage Collection<a class="anchor ms-1" href=#java-garbage-collection></a></h2><hr><h3 id=generation-collector data-numberify>Generation Collector<a class="anchor ms-1" href=#generation-collector></a></h3><p>Generation 演算法的核心理論在於大部分的物件很快就是被清掉，如果沒被清掉，就不需要這麼頻繁的一直重複確認是否存在。Generation 演算法會將記憶體分為 Young & Old Generation。Young Generation 用於存放所有新物件，在幾次 GC 後還在 Young Generation 未清除的物件，將被升級到 Old Generation。</p><p><picture><img class="img-fluid mx-auto d-block" alt=heapStructure src=/posts/java/java-garbage-collection/heapStructure_huaad4dffe5f5a7989faf858e4662c687c_28404_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=340></picture></p><p>如上圖 Java 將記憶體資料結構分為</p><ul><li>Young Generation<ul><li>有兩個 <code>survivor</code> 空間，也就是圖上的 S0 & S1<ul><li>這邊使用 Copying 演算法，將物件在 S0 與 S1 之間複製。</li><li>複製到一定次數會被升級到 Olde Generation</li></ul></li><li>Eden Space: 這邊用於存新的物件，在第一次 GC 時，沒有被清除就會移到 S0 or S1</li></ul></li><li>Old Generation<ul><li>這邊使用 Mark-Compact 演算法。</li></ul></li><li>Permanent Generation<ul><li>這邊用於存取 JVM 長期需要使用的資料，例如 Class, Method 等等。這裡的資料不會被 GC 掉</li></ul></li></ul><p>Generation 演算法中有個特別的資料結構叫做 Card Table，想像如果現在要 GC Young Generation，而 Young Generation 萬一有 Old Generation 裡面的記憶體來引用那要怎麼辦？這樣是否每次在 GC Young Generation 時都要去 Full Scan Old Generation 是否有任何索引？但這樣效能就會很差，而 Card Table 就是用於處理這樣的情況。在 Card Table 中會紀錄現在 Old Generation 的地址是否有引用 Young Generation 的，這樣在 Young Generation GC 時可以透過 Card Table 來增加效能。</p><h3 id=region data-numberify>Region<a class="anchor ms-1" href=#region></a></h3><p><picture><img class="img-fluid mx-auto d-block" alt=g1Heap src=/posts/java/java-garbage-collection/g1Heap_hue655378d9fa05e521b27208be68dfa30_17312_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=697></picture></p><p>Java9 現在預設的 Garbage Collection G1 是使用 Region 演算法。如上圖，Region 演算法還是有 Generation 的概念，但跟 Generation 演算法不同的地方是，它將記憶體切成多個不同大小(1 MB 到 32 MB 不等)的 Region。由於更多的區塊，所以可以並發GC，而且也因為每個 Region 更小，所以 GC 的數度更快。</p><h2 id=java-取得-garbage-collection-資訊 data-numberify>Java 取得 Garbage Collection 資訊<a class="anchor ms-1" href=#java-取得-garbage-collection-資訊></a></h2><p>Java 有特別的 Garbage Collection 接口 GarbageCollectorMXBean，以下是範例</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>com.javacore.gc</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.lang.management.GarbageCollectorMXBean</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.lang.management.ManagementFactory</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MxBean</span> <span class=o>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>GarbageCollectorMXBean</span><span class=o>&gt;</span> <span class=n>beanList</span> <span class=o>=</span> <span class=n>ManagementFactory</span><span class=o>.</span><span class=na>getGarbageCollectorMXBeans</span><span class=o>();</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>GarbageCollectorMXBean</span> <span class=n>bean</span><span class=o>:</span> <span class=n>beanList</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Name: &#34;</span> <span class=o>+</span> <span class=n>bean</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Number of Collection Count: &#34;</span> <span class=o>+</span> <span class=n>bean</span><span class=o>.</span><span class=na>getCollectionCount</span><span class=o>());</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Collection Time &#34;</span> <span class=o>+</span> <span class=n>bean</span><span class=o>.</span><span class=na>getCollectionTime</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;ms&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Pool Name &#34;</span> <span class=o>+</span> <span class=n>bean</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>            <span class=k>for</span><span class=o>(</span><span class=n>String</span> <span class=n>pool</span> <span class=o>:</span> <span class=n>bean</span><span class=o>.</span><span class=na>getMemoryPoolNames</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>                <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>pool</span><span class=o>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>();</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>getCollectionCount(): 以執行次數</li><li>getCollectionTime(): 預計以執行 Total 時間，單位為毫秒</li></ul><p>以下是 Open JDK11 預設 G1 執行結果</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=ln> 1</span><span class=cl>Name: G1 Young Generation
</span></span><span class=line><span class=ln> 2</span><span class=cl>Number of Collection Count: <span class=m>0</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>Collection Time <span class=m>0</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>Pool Name G1 Young Generation
</span></span><span class=line><span class=ln> 5</span><span class=cl>G1 Eden Space
</span></span><span class=line><span class=ln> 6</span><span class=cl>G1 Survivor Space
</span></span><span class=line><span class=ln> 7</span><span class=cl>G1 Old Gen
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>Name: G1 Old Generation
</span></span><span class=line><span class=ln>10</span><span class=cl>Number of Collection Count: <span class=m>0</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>Collection Time <span class=m>0</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>Pool Name G1 Old Generation
</span></span><span class=line><span class=ln>13</span><span class=cl>G1 Eden Space
</span></span><span class=line><span class=ln>14</span><span class=cl>G1 Survivor Space
</span></span><span class=line><span class=ln>15</span><span class=cl>G1 Old Gen
</span></span></code></pre></div></div></div></div><div class=card-footer><div class="post-navs d-flex justify-content-evenly"><div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-down post-prev-icon me-1" data-fa-transform=rotate-90></i>
<a href=/posts/java/java-jersey-client-log-request-duration/>Java Jersey Client 取得每個 Request Duration</a></div><div class="post-nav post-next"><a href=/posts/java/java-reference/>你知道 Java 的四個引用嗎？</a>
<i class="fas fa-fw fa-chevron-down post-next-icon ms-1" data-fa-transform=rotate-270></i></div></div></div></article><div class="post-copyright mb-3 row card component" id=post-copyright><div class=card-header><h2 class="card-title fs-4 my-2 text-surface">版權</h2></div><div class=card-body><a class="d-flex align-items-center flex-column" target=_blank rel="license noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh_TW><span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i><i class="fab fa-fw fa-2x fa-creative-commons-nd"></i></span>
CC BY-NC-ND 4.0</a></div></div><section class="related-posts row card component"><div class=card-header><h2 class="card-title fs-4 my-2 text-surface">相關文章</h2></div><div class="card-body slide px-1"><div class="slide-inner row gx-0"><div class="col-12 col-md-6 col-lg-4 me-2"><div class="post-card card card-body p-0 border-0 surface"><picture><img class=img-fluid alt="Java Optional 基本 & 心得分享" src=https://allenhsieh1992.com/images/java.webp loading=lazy width=1200 height=800></picture>
<a class=post-title href=/posts/java/java-optional-basic/>Java Optional 基本 & 心得分享</a><div class="post-meta mb-0">June 27, 2021</div></div></div><div class="col-12 col-md-6 col-lg-4 me-2"><div class="post-card card card-body p-0 border-0 surface"><picture><img class=img-fluid alt="Java Jersey Client 取得每個 Request Duration" src=https://allenhsieh1992.com/images/java.webp loading=lazy width=1200 height=800></picture>
<a class=post-title href=/posts/java/java-jersey-client-log-request-duration/>Java Jersey Client 取得每個 Request Duration</a><div class="post-meta mb-0">June 30, 2021</div></div></div></div><button class=slide-control-left>
<i class="fas fa-2x fa-chevron-circle-down" data-fa-transform=rotate-90></i>
<span class=visually-hidden>Left</span></button>
<button class=slide-control-right>
<i class="fas fa-2x fa-chevron-circle-down" data-fa-transform=rotate-270></i>
<span class=visually-hidden>Right</span></button></div></section><div class="card component row post-comments" id=post-comments><div class=card-header><h2 class="card-title my-2 fs-4 text-surface">評論</h2></div><div class=card-body><script src=https://utteranc.es/client.js repo=allen-hsieh1992/allen-hsieh1992.github.io issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div><aside class="col-xxl-4 sidebar d-flex"><div class="container d-flex flex-column"><div class="accordion profile"><div class="accordion-item card row text-center component"><div class="accordion-header card-header border-0" id=profile-header><a class="accordion-button d-lg-none mb-2 shadow-none p-0 bg-transparent text-surface" role=button data-bs-toggle=collapse href=#profile aria-expanded=true aria-controls=profile>Profile</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=profile aria-labelledby=profile-header><div class="col-12 d-flex align-items-center justify-content-center"><picture><img class="profile-avatar rounded-circle" alt="Allen Hsieh" src=https://allenhsieh1992.com/images/icon.gif loading=lazy data-viewer-invisible width=154 height=153></picture></div><div class="col-12 profile-meta"><div class="profile-name fw-fold fs-lg">Allen Hsieh</div><div class=profile-bio>AWS Community Builder | 7x AWS Certified | Senior Backend Software Engineer</div><div class=profile-company><i class="fas fa-fw fa-building"></i><a href=https://www.yahooinc.com/ target=_blank rel="noopener noreferrer">Yahoo Inc</a></div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i><a href=https://www.google.com/maps/search/Taiwan>Taiwan</a></div></div></div></div></div><div class="accordion taxonomies-toggle"><div class="row card component accordion-item"><div class="accordion-header card-header border-0"><a class="accordion-button d-lg-none mb-1 shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#taxonomies-toggle aria-expanded=true aria-controls=taxonomies-toggle>Taxonomies</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=taxonomies-toggle><ul class="nav nav-pills nav-fill" role=tablist><li class=nav-item role=presentation><button class="nav-link active" id=taxonomyCategoriesTab data-bs-toggle=tab data-bs-target=#taxonomyCategories type=button role=tab aria-controls=taxonomyCategories aria-selected=true>
分類</button></li><li class=nav-item role=presentation><button class=nav-link id=taxonomyTagsTab data-bs-toggle=tab data-bs-target=#taxonomyTags type=button role=tab aria-controls=taxonomyTags aria-selected=true>
標籤</button></li><li class=nav-item role=presentation><button class=nav-link id=taxonomyArchivesTab data-bs-toggle=tab data-bs-target=#taxonomyArchives type=button role=tab aria-controls=taxonomyArchives aria-selected=true>
歸檔</button></li></ul><div class="tab-content mt-3"><div class="tab-pane active" id=taxonomyCategories role=tabpanel aria-labelledby=taxonomyCategoriesTab tabindex=0><a href=/categories/aws/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=AWS>AWS</a>
<a href=/categories/leetcode/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=LEETCODE>LEETCODE</a>
<a href=/categories/life/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=LIFE>LIFE</a>
<a href=/categories/java/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=JAVA>JAVA</a>
<a href=/categories/spring/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=SPRING>SPRING</a>
<a href=/categories/container/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=CONTAINER>CONTAINER</a>
<a href=/categories/tools/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=TOOLS>TOOLS</a></div><div class=tab-pane id=taxonomyTags role=tabpanel aria-labelledby=taxonomyTagsTab tabindex=0><a href=/tags/leetcode/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=LEETCODE>LEETCODE</a>
<a href=/tags/travel/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=TRAVEL>TRAVEL</a>
<a href=/tags/lambda/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Lambda>Lambda</a>
<a href=/tags/sam/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=SAM>SAM</a>
<a href=/tags/javacore/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=JavaCore>JavaCore</a>
<a href=/tags/cloudformation/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=CloudFormation>CloudFormation</a>
<a href=/tags/route53/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Route53>Route53</a>
<a href=/tags/spring/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=SPRING>SPRING</a>
<a href=/tags/beanstalk/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Beanstalk>Beanstalk</a>
<a href=/tags/cloudtail/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=CloudTail>CloudTail</a>
<a href=https://allenhsieh1992.com/tags class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=全部>全部
<span class="badge badge-sm text-secondary bg-white ms-1">26</span></a></div><div class=tab-pane id=taxonomyArchives role=tabpanel aria-labelledby=taxonomyArchivesTab tabindex=0><a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2023>2023 <span class="badge badge-sm text-secondary bg-white ms-1">16</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2022>2022 <span class="badge badge-sm text-secondary bg-white ms-1">21</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2021>2021 <span class="badge badge-sm text-secondary bg-white ms-1">2</span></a></div></div></div></div></div><div class="accordion posts-toggle"><div class="row card component accordion-item"><div class="accordion-header card-header border-0"><a class="accordion-button d-lg-none mb-1 shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#posts-toggle aria-expanded=true aria-controls=posts-toggle>文章</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=posts-toggle><ul class="nav nav-pills nav-fill" role=tablist><li class=nav-item role=presentation><button class="nav-link active" id=recent-posts-tab data-bs-toggle=tab data-bs-target=#recent-posts type=button role=tab aria-controls=recent-posts aria-selected=true>
最近文章</button></li></ul><div class="tab-content mt-3"><div class="tab-pane active" id=recent-posts role=tabpanel aria-labelledby=recent-posts-tab tabindex=0><ul class="post-list list-unstyled ms-1"><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="SAM Part3: Cloud Depolyment" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/sam-part3-deployment/>SAM Part3: Cloud Depolyment</a><div class="post-meta mt-2"><span class=post-date>September 18, 2023</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="SAM Part2: Local Testing" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/sam-part2-local-testing/>SAM Part2: Local Testing</a><div class="post-meta mt-2"><span class=post-date>August 20, 2023</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="SAM Part1: Node Project 初始化" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/sam-part1-init-node-project/>SAM Part1: Node Project 初始化</a><div class="post-meta mt-2"><span class=post-date>July 9, 2023</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="什麼是 AWS Lambda" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/what-is-lambda/>什麼是 AWS Lambda</a><div class="post-meta mt-2"><span class=post-date>June 7, 2023</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Build AWS Lambda Hello World Function By SAM" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/build-aws-lambda-hello-world-function-by-sam/>Build AWS Lambda Hello World Function by SAM</a><div class="post-meta mt-2"><span class=post-date>May 3, 2023</span></div></div></div></li></ul></div></div></div></div></div><div class="accordion post-toc d-none d-lg-block"><div class="accordion-item row mb-4 card component" id=postTOC><div class="card-header accordion-header"><h2 class="card-title fs-4 my-2 text-surface d-none d-lg-block">目錄</h2><a class="accordion-button d-lg-none mb-1 collapsed shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#post-toc aria-expanded=false aria-controls=post-toc>目錄</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block" id=post-toc><nav id=TableOfContents><ul><li><a href=#什麼是-garbage-collection>什麼是 Garbage Collection</a></li><li><a href=#garbage-collection-演算法>Garbage Collection 演算法</a><ul><li><a href=#reference-counting>Reference Counting</a></li><li><a href=#mark--sweep>Mark & Sweep</a></li><li><a href=#copying>Copying</a></li><li><a href=#mark-compact>Mark-Compact</a></li></ul></li><li><a href=#java-garbage-collection>Java Garbage Collection</a><ul><li><a href=#generation-collector>Generation Collector</a></li><li><a href=#region>Region</a></li></ul></li><li><a href=#java-取得-garbage-collection-資訊>Java 取得 Garbage Collection 資訊</a></li></ul></nav></div></div></div></div></aside></div></main><footer class="footer mt-auto py-3 text-center container"><div class="row text-center"><div class="col-12 mt-2"><span id=busuanzi_container_site_pv><p class=mb-2>總瀏覽: <span id=busuanzi_value_site_pv></span>次</p></span><div class="copyright mb-2 text-secondary"><small>Copyright © 2021-2024 Allen Hsieh. All Rights Reserved.</small></div><nav class="social-links nav justify-content-center mb-2 mt-3"></nav></div><div class="col-12 col-lg-8 offset-0 offset-lg-1"></div></div></footer><script data-precache src=/assets/main/bundle.min.cb5662470b8c11aeca70d9d975f65f3a3adde55470efc9c090713a90cf6d4e9c.js integrity="sha256-y1ZiRwuMEa7KcNnZdfZfOjrd5VRw78nAkHE6kM9tTpw=" crossorigin=anonymous async></script><script data-precache src=/assets/icons/bundle.min.691458a56c2eef480bec8d31c967801a416b6445459ae901fe213e7870a0dd83.js integrity="sha256-aRRYpWwu70gL7I0xyWeAGkFrZEVFmukB/iE+eHCg3YM=" crossorigin=anonymous defer></script>
<script data-precache src=/assets/viewer/bundle.min.0866ed96ba6267ca90d45399312388980c7bf8ddd8f980e8dc49ec37376b7b36.js integrity="sha256-CGbtlrpiZ8qQ1FOZMSOImAx7+N3Y+YDo3EnsNzdrezY=" crossorigin=anonymous defer></script>
<script src=/js/sw-register.js defer></script></body></html>