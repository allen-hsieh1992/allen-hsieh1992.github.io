<!doctype html><html class=position-relative itemscope itemtype=https://schema.org/WebPage lang=zh-tw data-bs-theme=dark data-palette=blue><head><script src=/assets/init/bundle.min.8f368cdebb6d999bc47f8451c7caa07f8babe013aaaf736020df6ce5c851cedd.js integrity="sha256-jzaM3rttmZvEf4RRx8qgf4ur4BOqr3NgIN9s5chRzt0=" crossorigin=anonymous></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Build AWS Lambda Hello World Function By SAM - 艾倫的開發心路歷程</title><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_16x16_resize_box_3.png sizes=16x16 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_32x32_resize_box_3.png sizes=32x32 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_150x150_resize_box_3.png sizes=150x150 type=image/png><link rel=apple-touch-icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_180x180_resize_box_3.png sizes=180x180 type=image/png><link rel=icon href=/favicon_hubbf10436b41e9954d01974c62e0df673_759_192x192_resize_box_3.png sizes=192x192 type=image/png><link rel=mask-icon href=/safari-pinned-tab.svg color=#6f42c1><meta name=keywords content="艾倫,AWS,Allen,Note"><meta name=description content="以前當我第一次接觸 AWS Lambda Function 時，是在上 AWS Training 課程，使用 AWS Console 建立了一隻 Hello World。而 SAM (Serverless Application Model) 是一個開源的程式，主要在 CloudFormation 的基礎上擴展，專門用來開發 Serverless"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://allenhsieh1992.com/images/aws.webp"><meta name=twitter:title content="Build AWS Lambda Hello World Function By SAM"><meta name=twitter:description content="以前當我第一次接觸 AWS Lambda Function 時，是在上 AWS Training 課程，使用 AWS Console 建立了一隻 Hello World。而 SAM (Serverless Application Model) 是一個開源的程式，主要在 CloudFormation 的基礎上擴展，專門用來開發 Serverless"><meta property="og:title" content="Build AWS Lambda Hello World Function By SAM"><meta property="og:description" content="以前當我第一次接觸 AWS Lambda Function 時，是在上 AWS Training 課程，使用 AWS Console 建立了一隻 Hello World。而 SAM (Serverless Application Model) 是一個開源的程式，主要在 CloudFormation 的基礎上擴展，專門用來開發 Serverless"><meta property="og:type" content="article"><meta property="og:url" content="https://allenhsieh1992.com/posts/aws/build-aws-lambda-hello-world-function-by-sam/"><meta property="og:image" content="https://allenhsieh1992.com/images/aws.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-03T00:00:00+00:00"><meta property="article:modified_time" content="2023-06-03T00:00:00+00:00"><meta itemprop=name content="Build AWS Lambda Hello World Function By SAM"><meta itemprop=description content="以前當我第一次接觸 AWS Lambda Function 時，是在上 AWS Training 課程，使用 AWS Console 建立了一隻 Hello World。而 SAM (Serverless Application Model) 是一個開源的程式，主要在 CloudFormation 的基礎上擴展，專門用來開發 Serverless"><meta itemprop=datePublished content="2023-06-03T00:00:00+00:00"><meta itemprop=dateModified content="2023-06-03T00:00:00+00:00"><meta itemprop=wordCount content="2391"><meta itemprop=image content="https://allenhsieh1992.com/images/aws.webp"><meta itemprop=keywords content="Lambda,CloudFormation,SAM,"><meta property="og:image:alt" content="Build AWS Lambda Hello World Function By SAM"><meta name=twitter:image:alt content="Build AWS Lambda Hello World Function By SAM"><link rel=manifest href=/manifest.json><script async src="https://www.googletagmanager.com/gtag/js?id=G-N4B4L4M6SX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-N4B4L4M6SX",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2699261588864109"></script>
<link data-precache rel=stylesheet href="/assets/main/bundle.min.e236bf66f82638e6f8bb19ce8a7bcfafb2153885d0fd1451aa784e143f8eeb41.css" integrity="sha256-4ja/ZvgmOOb4uxnOinvPr7IVOIXQ/RRRqnhOFD+O60E=" crossorigin=anonymous><link data-precache rel=stylesheet href=/assets/viewer/bundle.min.6d0fc65b8b058ac563091dc5c36f61afba5dd705058680aa24f1d5a3bcf0064d.css integrity="sha256-bQ/GW4sFisVjCR3Fw29hr7pd1wUFhoCqJPHVo7zwBk0=" crossorigin=anonymous></head><body><header class="mb-4 sticky-top"><nav class="top-app-bar shadow navbar navbar-expand-xxl"><div class=container><a class="navbar-brand d-flex align-items-center flex-grow-1 flex-xxl-grow-0 justify-content-xxl-start ms-2 ms-xxl-0 mx-auto me-xxl-2" href=https://allenhsieh1992.com/><picture><img class=logo alt=Logo src=https://allenhsieh1992.com/images/logo.png loading=lazy width=136 height=70></picture>
艾倫的開發心路歷程</a><div class="offcanvas-xxl offcanvas-end flex-grow-1" data-bs-scroll=true tabindex=-1 id=navbarMenus aria-labelledby=navbarMenusLabel><div class="offcanvas-header px-4 pb-0"><div class="offcanvas-title h5" id=navbarMenusLabel>艾倫的開發心路歷程</div><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas data-bs-target=#navbarMenus aria-label=Close></button></div><div class="offcanvas-body p-4 pt-0 p-xxl-0"><hr class=d-xxl-none><ul class="navbar-nav flex-row flex-wrap align-items-center me-auto"><li class="nav-item col-12 col-xxl-auto dropdown px-0"><a href=# class="nav-link dropdown-toggle" id=navbarDropdownTech role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-chevron-circle-down"></i>技術</a><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=navbarDropdownTech data-bs-popper=none><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/aws><div class=dropdown-item-content><p class="dropdown-item-title mb-0">AWS</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/java><div class=dropdown-item-content><p class="dropdown-item-title mb-0">JAVA</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/container><div class=dropdown-item-content><p class="dropdown-item-title mb-0">CONTAINER</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/tools><div class=dropdown-item-content><p class="dropdown-item-title mb-0">TOOLS</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/leetcode><div class=dropdown-item-content><p class="dropdown-item-title mb-0">LEETCODE</p></div></a></li></ul></li><li class="nav-item col-12 col-xxl-auto dropdown px-0"><a href=# class="nav-link dropdown-toggle" id=navbarDropdownLife role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-chevron-circle-down"></i>生活</a><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=navbarDropdownLife data-bs-popper=none><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/travel><div class=dropdown-item-content><p class="dropdown-item-title mb-0">旅遊</p></div></a></li><li><a class="dropdown-item d-flex align-items-center text-wrap text-xxl-nowrap" href=https://allenhsieh1992.com/posts/unboxing><div class=dropdown-item-content><p class="dropdown-item-title mb-0">開箱</p></div></a></li></ul></li><li class="nav-item col-6 col-xxl-auto"><a class="nav-link py-2 px-0 px-xxl-2" href=https://allenhsieh1992.com/archives/><i class="fas fa-fw fa-file-archive"></i>歸檔</a></li><li class="nav-item col-6 col-xxl-auto"><a class="nav-link py-2 px-0 px-xxl-2" href=https://allenhsieh1992.com/categories/><i class="fas fa-fw fa-folder"></i>分類</a></li></ul><hr class=d-xxl-none><form class="search-bar ms-auto my-auto" action=/search/ novalidate><div class="input-group input-group-sm align-items-center"><span class="btn btn-search disabled position-absolute left-0 border-0 px-1"><i class="fas fa-fw fa-search fa-lg"></i></span>
<input class="my-1 form-control border-white rounded-5 search-input bg-body" name=q type=search placeholder=搜尋 aria-label=Search required>
<span class="search-shortcut position-absolute end-0 top-0 me-2"><kbd class="bg-primary rounded shadow">/</kbd></span></div></form><hr class=d-xxl-none><ul class="navbar-nav flex-row flex-wrap align-items-center ms-md-auto"><li class="nav-item py-2 py-xxl-1 col-12 col-xxl-auto"><nav class="social-links nav justify-content-center flex-row"><a class="nav-link social-link col-6 col-xxl-auto p-1" target=_blank href=https://linkedin.com/in/chang-lin-hsieh title=領英 rel=me><i class="fa-fw fab fa-linkedin-in"></i>
<span class="ms-1 d-xxl-none">Linkedin</span></a></nav></li><li class="nav-item py-2 py-xxl-1 col-12 col-xxl-auto"><div class="vr d-none d-xxl-flex h-100 mx-xxl-2 text-white"></div><hr class="d-xxl-none my-2"></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=fontSizeDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-font"></i>
<span class=d-xxl-none>字體大小</span></a><ul class="font-size-dropdown-menu dropdown-menu dropdown-menu-end" aria-labelledby=fontSizeDropdown><li><button class="font-size-item dropdown-item" data-size=xs>
特小號</button></li><li><button class="font-size-item dropdown-item" data-size=sm>
小號</button></li><li><button class="font-size-item dropdown-item active" data-size=md>
中等</button></li><li><button class="font-size-item dropdown-item" data-size=lg>
大號</button></li><li><button class="font-size-item dropdown-item" data-size=xl>
特大號</button></li></ul></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=paletteDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-fw fa-palette"></i>
<span class=d-xxl-none>配色</span></a><ul class="palette-dropdown-menu dropdown-menu dropdown-menu-end px-2 row g-2" aria-labelledby=paletteDropdown><li class="col-4 my-1"><a role=button id=palette-blue aria-label=藍色 class="btn btn-sm w-100 palette text-bg-blue" data-palette=blue></a></li><li class="col-4 my-1"><a role=button id=palette-blue-gray aria-label=藍灰色 class="btn btn-sm w-100 palette text-bg-blue-gray" data-palette=blue-gray></a></li><li class="col-4 my-1"><a role=button id=palette-brown aria-label=棕色 class="btn btn-sm w-100 palette text-bg-brown" data-palette=brown></a></li><li class="col-4 my-1"><a role=button id=palette-cyan aria-label=青色 class="btn btn-sm w-100 palette text-bg-cyan" data-palette=cyan></a></li><li class="col-4 my-1"><a role=button id=palette-green aria-label=綠色 class="btn btn-sm w-100 palette text-bg-green" data-palette=green></a></li><li class="col-4 my-1"><a role=button id=palette-indigo aria-label=靛青色 class="btn btn-sm w-100 palette text-bg-indigo" data-palette=indigo></a></li><li class="col-4 my-1"><a role=button id=palette-orange aria-label=橙色 class="btn btn-sm w-100 palette text-bg-orange" data-palette=orange></a></li><li class="col-4 my-1"><a role=button id=palette-pink aria-label=粉色 class="btn btn-sm w-100 palette text-bg-pink" data-palette=pink></a></li><li class="col-4 my-1"><a role=button id=palette-purple aria-label=紫色 class="btn btn-sm w-100 palette text-bg-purple" data-palette=purple></a></li><li class="col-4 my-1"><a role=button id=palette-red aria-label=紅色 class="btn btn-sm w-100 palette text-bg-red" data-palette=red></a></li><li class="col-4 my-1"><a role=button id=palette-teal aria-label=藍綠色 class="btn btn-sm w-100 palette text-bg-teal" data-palette=teal></a></li><li class="col-4 my-1"><a role=button id=palette-yellow aria-label=黃色 class="btn btn-sm w-100 palette text-bg-yellow" data-palette=yellow></a></li></ul></li><li class="nav-item dropdown col-6 col-xxl-auto"><a class="nav-link px-0 py-2 px-xxl-1" href=# id=modeDropdown role=button data-bs-toggle=dropdown aria-expanded=false><i class="mode-icon fas fa-fw fa-moon" id=modeIcon></i>
<span class=d-xxl-none>模式</span></a><ul class="mode-dropdown-menu dropdown-menu dropdown-menu-end" aria-labelledby=modeDropdown><li class=mode-item data-color-mode=light data-icon=sun><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-sun"></i> 淺色</button></li><li class="mode-item active" data-color-mode=dark data-icon=moon><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-moon"></i> 深色</button></li><li class=mode-item data-color-mode=auto data-icon=adjust><button class=dropdown-item>
<i class="mode-icon fas fa-fw fa-adjust"></i> 自動</button></li></ul></li></ul></div></div><div class=d-flex><button class="navbar-toggler order-5 border-0" type=button data-bs-toggle=offcanvas data-bs-target=#navbarMenus aria-controls=navbarMenus aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-ellipsis-h"></i></button></div></div></nav><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script></header><main class=container><div class="row content"><noscript><div class="alert alert-danger" role=alert>你的瀏覽器不支持 JavaScript。</div></noscript><div class=col-xxl-8><div class=container><nav class="row card component" aria-label=breadcrumb><div class="card-body pb-0"><ol class="hbs-breadcrumb breadcrumb flex-nowrap"><li class="breadcrumb-item text-surface"><a href=/>主頁</a></li><li class="breadcrumb-item text-surface"><a href=/posts/>文章</a></li><li class="breadcrumb-item text-surface"><a href=/posts/aws/>AWS</a></li><li class="breadcrumb-item active">Build AWS Lambda Hello World Function by SAM</li></ol></div></nav><div class="post-panel-wrapper position-relative d-flex justify-content-center"><div class="d-flex flex-row justify-content-center rounded-5 border post-panel position-fixed px-3 py-1 surface shadow-1"><div class="action btn-group dropup"><button type=button class="btn btn-link p-0" data-bs-toggle=dropdown aria-expanded=false title=打賞>
<i class="fas fa-fw fa-coffee"></i></button><ul class=dropdown-menu><li><a href=https://paypal.me/ChangLinH target=_blank rel="noopener noreferrer" role=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light><i class="fab fa-fw fa-paypal me-1"></i>Paypal</a></li></ul></div><a class="action action-toc d-none d-xxl-block" href=#postTOC role=button title="Table of contents"><i class="fas fa-fw fa-list-alt"></i></a>
<a class="action action-toc d-block d-xxl-none" href=#post-toc-container role=button title="Table of contents"><i class="fas fa-fw fa-list-alt"></i></a>
<a class="action action-copyright" href=#post-copyright role=button aria-label=Copyright title=Copyright><i class="fas fa-fw fa-copyright"></i></a>
<a class="action action-post-comments" href=#post-comments role=button aria-label=Comments title=Comments><i class="fas fa-fw fa-comments"></i></a>
<a id=sidebarToggler class="action action-sidebar-toggler d-none d-xxl-block" role=button title="Sidebar toggler"><i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i></a></div></div><article class="row card component mb-4 post"><div class=card-header><h1 class="card-title post-title my-2">Build AWS Lambda Hello World Function by SAM</h1></div><div class=card-body><div class="post-meta mb-3"><span class="post-date me-1 mb-1" title="創建於 2023-06-03 08:00:00 +0800 CST。">June 3, 2023</span><a href=/categories/aws/ class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-taxonomy-sm post-category">
<i class="fas fa-fw fa-folder me-1"></i>AWS</a><a href=/tags/cloudformation/ class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-taxonomy-sm post-tag">CloudFormation</a><a href=/tags/lambda/ class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-taxonomy-sm post-tag">LAMBDA</a><a href=/tags/sam/ class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-taxonomy-sm post-tag">SAM</a></div><div class="mt-2 mb-3 d-block d-xxl-none"><h2 class="text-surface mb-3">目錄</h2><div id=post-toc-container></div><hr class=text-secondary></div><div class="post-content mb-3" data-bs-spy=scroll data-bs-target=#TableOfContents tabindex=0><div id=post-content-body><p>以前當我第一次接觸 AWS Lambda Function 時，是在上 AWS Training 課程，使用 AWS Console 建立了一隻 Hello World。而 SAM (Serverless Application Model) 是一個開源的程式，主要在 CloudFormation 的基礎上擴展，專門用來開發 Serverless Application。我們可以透過 YAML 去定義我們的系統架構 像是 Endpoint 由哪個handler 處理，額外的 database (DynamoDB) 等等。這次的文章，主要是介紹使用 SAM 建立一個 Java Hello World 的 Lambda Function。</p><h2 id=事前準備 data-numberify>事前準備<a class="anchor ms-1" href=#事前準備></a></h2><hr><ol><li>一個 AWS 帳號</li><li>安裝 AWS CLI 並 設定好，SAM 的權限是根據 AWS CLI喔！所以 SAM 不用額外設定 Access Key ID & Secret Access Key<ul><li>Mac & Linux 可以透過 pip 安裝，其他可以參考這篇<a href=https://docs.aws.amazon.com/zh_tw/cli/latest/userguide/cli-chap-install.html target=_blank rel="noopener noreferrer">官網<i class="fas fa-external-link-square-alt ms-1"></i></a>安裝教學</li><li>如果不知道如何獲取 Access Key ID & Secret Access Key 可以參考這篇<a href=https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_credentials_access-keys.html target=_blank rel="noopener noreferrer">官網<i class="fas fa-external-link-square-alt ms-1"></i></a>設定</li></ul></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl><span class=c1># 安裝 AWS CLI</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>$ pip install awscli
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1># 確認 AWS CLI 安裝成功</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>$ aws --version
</span></span><span class=line><span class=ln> 6</span><span class=cl> aws-cli/1.19.105 Python/2.7.16 Darwin/20.4.0 botocore/1.20.105
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl> <span class=c1># AWS CLI 設定</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl> $ aws configure
</span></span><span class=line><span class=ln>10</span><span class=cl> AWS Access Key ID <span class=o>[</span>****************ASFC<span class=o>]</span>:
</span></span><span class=line><span class=ln>11</span><span class=cl> AWS Secret Access Key <span class=o>[</span>****************fM7z<span class=o>]</span>:
</span></span><span class=line><span class=ln>12</span><span class=cl> Default region name <span class=o>[</span>ap-northeast-1<span class=o>]</span>:
</span></span><span class=line><span class=ln>13</span><span class=cl> Default output format <span class=o>[</span>json<span class=o>]</span>:
</span></span></code></pre></div><ol start=3><li>Java11 JDK & Maven，這邊可以透過 Brew 安裝，如何安裝 Brew 看官網教學</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl><span class=c1># 安裝 open jdk11</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>$ brew install openjdk@11
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1># 確認 Java JDK 安裝成功  </span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>$ java -version 
</span></span><span class=line><span class=ln> 5</span><span class=cl> openjdk version <span class=s2>&#34;11.0.10&#34;</span> 2021-01-19
</span></span><span class=line><span class=ln> 6</span><span class=cl> OpenJDK Runtime Environment <span class=o>(</span>build 11.0.10+9<span class=o>)</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl> OpenJDK 64-Bit Server VM <span class=o>(</span>build 11.0.10+9, mixed mode<span class=o>)</span> 
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=c1># 安裝 maven</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>$ brew install maven
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=c1># 確認 Maven 安裝成功  </span>
</span></span><span class=line><span class=ln>12</span><span class=cl>$ mvn -version
</span></span><span class=line><span class=ln>13</span><span class=cl> Apache Maven 3.8.1 <span class=o>(</span>05c21c65bdfed0f71a2f2ada8b84da59348c4c5d<span class=o>)</span>
</span></span><span class=line><span class=ln>14</span><span class=cl> Maven home: /usr/local/Cellar/maven/3.8.1/libexec
</span></span><span class=line><span class=ln>15</span><span class=cl> Java version: 11.0.10, vendor: Oracle Corporation, runtime:   /usr/local/Cellar/openjdk@11/11.0.10/libexec/openjdk.jdk/Contents/Home
</span></span><span class=line><span class=ln>16</span><span class=cl> Default locale: zh_TW_#Hant, platform encoding: UTF-8
</span></span><span class=line><span class=ln>17</span><span class=cl> OS name: <span class=s2>&#34;mac os x&#34;</span>, version: <span class=s2>&#34;11.3.1&#34;</span>, arch: <span class=s2>&#34;x86_64&#34;</span>, family: <span class=s2>&#34;mac&#34;</span> 
</span></span></code></pre></div><ol start=4><li>Docker ，由於 Docker 安裝比較麻煩，這邊就不寫安裝方式，我個人 MAC 是安裝 <a href=https://docs.docker.com/desktop/mac/install/ target=_blank rel="noopener noreferrer">Docker Desktop<i class="fas fa-external-link-square-alt ms-1"></i></a></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ docker --version
</span></span><span class=line><span class=ln>2</span><span class=cl> Docker version 20.10.7, build f0df350 
</span></span></code></pre></div><ol start=5><li>今日主角，SAM CLI，這邊也是透過 Brew 去安裝</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># 安裝 SAM CLI </span>
</span></span><span class=line><span class=ln>2</span><span class=cl>$ brew tap aws/tap
</span></span><span class=line><span class=ln>3</span><span class=cl>$ brew install aws-sam-cli
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1># 確認 SAM CLI 安裝成功</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>$ sam --version
</span></span><span class=line><span class=ln>6</span><span class=cl> SAM CLI, version 1.25.0 
</span></span></code></pre></div><h2 id=sam-初始化專案 data-numberify>SAM 初始化專案<a class="anchor ms-1" href=#sam-初始化專案></a></h2><hr><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ sam init -r java11 -d maven --app-template hello-world -n demo 
</span></span><span class=line><span class=ln>2</span><span class=cl>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1># -r :  --runtime 的縮寫，執行環境的語言，這邊指定 java11 </span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1># -d : --dependency-manager 的縮寫(軟體套件管理系統)，這邊指定 maven </span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=c1># --app-template : 官方已經有寫好一些 template 提供大家使用</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=c1># -n : --name 的縮寫，這個專案的名稱</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=c1># 如果想瞭解更多參數，和每個參數可以設定的選項，可以使用 </span>
</span></span><span class=line><span class=ln>9</span><span class=cl>$ sam init <span class=nb>help</span>
</span></span></code></pre></div><p>透過 SAM 初始化，會建立以下的檔案</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl>$ tree
</span></span><span class=line><span class=ln> 2</span><span class=cl> .
</span></span><span class=line><span class=ln> 3</span><span class=cl> ├── HelloWorldFunction
</span></span><span class=line><span class=ln> 4</span><span class=cl> │   ├── pom.xml
</span></span><span class=line><span class=ln> 5</span><span class=cl> │   └── src
</span></span><span class=line><span class=ln> 6</span><span class=cl> │       ├── main
</span></span><span class=line><span class=ln> 7</span><span class=cl> │       │   └── java
</span></span><span class=line><span class=ln> 8</span><span class=cl> │       │       └── helloworld
</span></span><span class=line><span class=ln> 9</span><span class=cl> │       │           └── App.java
</span></span><span class=line><span class=ln>10</span><span class=cl> │       └── <span class=nb>test</span>
</span></span><span class=line><span class=ln>11</span><span class=cl> │           └── java
</span></span><span class=line><span class=ln>12</span><span class=cl> │               └── helloworld
</span></span><span class=line><span class=ln>13</span><span class=cl> │                   └── AppTest.java
</span></span><span class=line><span class=ln>14</span><span class=cl> ├── README.md
</span></span><span class=line><span class=ln>15</span><span class=cl> ├── events
</span></span><span class=line><span class=ln>16</span><span class=cl> │   └── event.json
</span></span><span class=line><span class=ln>17</span><span class=cl> └── template.yaml 
</span></span></code></pre></div><p>Template.yaml 是我們設定 Resource 相關的資訊，由於太多這篇就不一一介紹，這邊會在產生出來的 Code 加一些簡單註解</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-YAML data-lang=YAML><span class=line><span class=ln> 1</span><span class=cl><span class=nt>AWSTemplateFormatVersion</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2010-09-09&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>Transform</span><span class=p>:</span><span class=w> </span><span class=l>AWS::Serverless-2016-10-31</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>Description</span><span class=p>:</span><span class=w> </span><span class=p>&gt;</span><span class=sd>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=sd>  demo
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=sd>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=sd>  Sample SAM Template for demo</span><span class=w>  
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w></span><span class=nt>Globals</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>  </span><span class=nt>Function</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>    </span><span class=nt>Timeout</span><span class=p>:</span><span class=w> </span><span class=m>20</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w></span><span class=nt>Resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>  </span><span class=nt>HelloWorldFunction</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>    </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class=l>AWS::Serverless::Function</span><span class=w> </span><span class=c># 這邊是指 Lambda Function</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>    </span><span class=nt>Properties</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>      </span><span class=nt>CodeUri</span><span class=p>:</span><span class=w> </span><span class=l>HelloWorldFunction</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>      </span><span class=nt>Handler</span><span class=p>:</span><span class=w> </span><span class=l>helloworld.App::handleRequest</span><span class=w> </span><span class=c># 這邊指定 Handler</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>      </span><span class=c>#helloworld : java package</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>      </span><span class=c>#App : class name</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>      </span><span class=c>#handleRequest : handle request method</span><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w>      </span><span class=nt>Runtime</span><span class=p>:</span><span class=w> </span><span class=l>java11</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>      </span><span class=nt>MemorySize</span><span class=p>:</span><span class=w> </span><span class=m>512</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w>      </span><span class=nt>Environment</span><span class=p>:</span><span class=w> </span><span class=c># 可以設定系統環境的地方</span><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>        </span><span class=nt>Variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>          </span><span class=nt>PARAM1</span><span class=p>:</span><span class=w> </span><span class=l>VALUE</span><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w>      </span><span class=nt>Events</span><span class=p>:</span><span class=w> </span><span class=c># Trigger 這個 Lambda Function 的 Event</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w>        </span><span class=nt>HelloWorld</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w>          </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class=l>Api</span><span class=w> </span><span class=c># Event 是由 API Gateway 來的</span><span class=w>
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=w>          </span><span class=nt>Properties</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=w>            </span><span class=nt>Path</span><span class=p>:</span><span class=w> </span><span class=l>/hello</span><span class=w> </span><span class=c># Api Gateway Endpoint </span><span class=w>
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=w>            </span><span class=nt>Method</span><span class=p>:</span><span class=w> </span><span class=l>get </span><span class=w> </span><span class=c># Http Method </span><span class=w>
</span></span></span><span class=line><span class=ln>32</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>33</span><span class=cl><span class=w></span><span class=c>#Outputs 就請參考 CloudFormation</span><span class=w>
</span></span></span><span class=line><span class=ln>34</span><span class=cl><span class=w></span><span class=nt>Outputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>35</span><span class=cl><span class=w>  </span><span class=nt>HelloWorldApi</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>36</span><span class=cl><span class=w>    </span><span class=nt>Description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;API Gateway endpoint URL for Prod stage for Hello World function&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>37</span><span class=cl><span class=w>    </span><span class=nt>Value</span><span class=p>:</span><span class=w> </span>!<span class=l>Sub &#34;https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/hello/&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=w>  </span><span class=nt>HelloWorldFunction</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>39</span><span class=cl><span class=w>    </span><span class=nt>Description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Hello World Lambda Function ARN&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>40</span><span class=cl><span class=w>    </span><span class=nt>Value</span><span class=p>:</span><span class=w> </span>!<span class=l>GetAtt HelloWorldFunction.Arn</span><span class=w>
</span></span></span><span class=line><span class=ln>41</span><span class=cl><span class=w>  </span><span class=nt>HelloWorldFunctionIamRole</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>42</span><span class=cl><span class=w>    </span><span class=nt>Description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Implicit IAM Role created for Hello World function&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>43</span><span class=cl><span class=w>    </span><span class=nt>Value</span><span class=p>:</span><span class=w> </span>!<span class=l>GetAtt HelloWorldFunctionRole.Arn</span><span class=w>
</span></span></span></code></pre></div><p>這邊順便介紹主要處理邏輯的 Handler</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nn>helloworld</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.BufferedReader</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=kn>import</span> <span class=nn>java.io.InputStreamReader</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=kn>import</span> <span class=nn>java.net.URL</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=kn>import</span> <span class=nn>java.util.stream.Collectors</span><span class=o>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=kn>import</span> <span class=nn>com.amazonaws.services.lambda.runtime.Context</span><span class=o>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=kn>import</span> <span class=nn>com.amazonaws.services.lambda.runtime.RequestHandler</span><span class=o>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=kn>import</span> <span class=nn>com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent</span><span class=o>;</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=kn>import</span> <span class=nn>com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent</span><span class=o>;</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=cm> * Handler for requests to Lambda function.
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>App</span> <span class=kd>implements</span> <span class=n>RequestHandler</span><span class=o>&lt;</span><span class=n>APIGatewayProxyRequestEvent</span><span class=o>,</span> <span class=n>APIGatewayProxyResponseEvent</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=kd>public</span> <span class=n>APIGatewayProxyResponseEvent</span> <span class=nf>handleRequest</span><span class=o>(</span><span class=kd>final</span> <span class=n>APIGatewayProxyRequestEvent</span> <span class=n>input</span><span class=o>,</span> <span class=kd>final</span> <span class=n>Context</span> <span class=n>context</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=c1>// response 的 header
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=c1></span>        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>headers</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=n>headers</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;Content-Type&#34;</span><span class=o>,</span> <span class=s>&#34;application/json&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=n>headers</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;X-Custom-Header&#34;</span><span class=o>,</span> <span class=s>&#34;application/json&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=n>APIGatewayProxyResponseEvent</span> <span class=n>response</span> <span class=o>=</span> <span class=k>new</span> <span class=n>APIGatewayProxyResponseEvent</span><span class=o>()</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>                <span class=o>.</span><span class=na>withHeaders</span><span class=o>(</span><span class=n>headers</span><span class=o>);</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>            <span class=c1>// call amanzon api 取得系統 IP
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=c1></span>            <span class=kd>final</span> <span class=n>String</span> <span class=n>pageContents</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>getPageContents</span><span class=o>(</span><span class=s>&#34;https://checkip.amazonaws.com&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>            
</span></span><span class=line><span class=ln>33</span><span class=cl>            <span class=c1>// response body
</span></span></span><span class=line><span class=ln>34</span><span class=cl><span class=c1></span>            <span class=n>String</span> <span class=n>output</span> <span class=o>=</span> <span class=n>String</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=s>&#34;{ \&#34;message\&#34;: \&#34;hello world\&#34;, \&#34;location\&#34;: \&#34;%s\&#34; }&#34;</span><span class=o>,</span> <span class=n>pageContents</span><span class=o>);</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>
</span></span><span class=line><span class=ln>36</span><span class=cl>            <span class=k>return</span> <span class=n>response</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>                    <span class=o>.</span><span class=na>withStatusCode</span><span class=o>(</span><span class=mi>200</span><span class=o>)</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>                    <span class=o>.</span><span class=na>withBody</span><span class=o>(</span><span class=n>output</span><span class=o>);</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>IOException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>            <span class=k>return</span> <span class=n>response</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>                    <span class=o>.</span><span class=na>withBody</span><span class=o>(</span><span class=s>&#34;{}&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>                    <span class=o>.</span><span class=na>withStatusCode</span><span class=o>(</span><span class=mi>500</span><span class=o>);</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=nf>getPageContents</span><span class=o>(</span><span class=n>String</span> <span class=n>address</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>IOException</span><span class=o>{</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>        <span class=n>URL</span> <span class=n>url</span> <span class=o>=</span> <span class=k>new</span> <span class=n>URL</span><span class=o>(</span><span class=n>address</span><span class=o>);</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>        <span class=k>try</span><span class=o>(</span><span class=n>BufferedReader</span> <span class=n>br</span> <span class=o>=</span> <span class=k>new</span> <span class=n>BufferedReader</span><span class=o>(</span><span class=k>new</span> <span class=n>InputStreamReader</span><span class=o>(</span><span class=n>url</span><span class=o>.</span><span class=na>openStream</span><span class=o>())))</span> <span class=o>{</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>            <span class=k>return</span> <span class=n>br</span><span class=o>.</span><span class=na>lines</span><span class=o>().</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>joining</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>lineSeparator</span><span class=o>()));</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>所以從以上來看，這邊就是透過 Template.yaml 去指定 環境執行語言， API Endpoint 和 Handler 等等重要資訊。而 App.java 就是我們 Lambda Function 主要計算邏輯。目前透過這兩個 File 就可以產生出基本的 get hello 函示。</p><p>這邊要注意，hello-world Template 建立出的 pom 檔，裡面指定的 Compile Source 是 1.8 ，這邊建議改成 Java 11</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=ln>1</span><span class=cl><span class=nt>&lt;properties&gt;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>    <span class=nt>&lt;maven.compiler.source&gt;</span>11<span class=nt>&lt;/maven.compiler.source&gt;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=nt>&lt;maven.compiler.target&gt;</span>11<span class=nt>&lt;/maven.compiler.target&gt;</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nt>&lt;/properties&gt;</span>
</span></span></code></pre></div><h2 id=sam-本地測試 data-numberify>SAM 本地測試<a class="anchor ms-1" href=#sam-本地測試></a></h2><hr><p>SAM 我個人覺得最方便的就是，它使用了 Docker 的技術，讓我們可以在本地也可以建立起一個環境做測試 API</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ sam <span class=nb>local</span> start-api
</span></span><span class=line><span class=ln>2</span><span class=cl>  
</span></span><span class=line><span class=ln>3</span><span class=cl> Mounting HelloWorldFunction at http://127.0.0.1:3000/hello <span class=o>[</span>GET<span class=o>]</span>
</span></span><span class=line><span class=ln>4</span><span class=cl> You can now browse to the above endpoints to invoke your functions. You <span class=k>do</span> not need to restart/reload SAM CLI <span class=k>while</span> working on your functions, changes will be reflected instantly/automatically. You only need to restart SAM CLI <span class=k>if</span> you update your AWS SAM template
</span></span><span class=line><span class=ln>5</span><span class=cl> 2021-07-03 19:40:16  * Running on http://127.0.0.1:3000/ <span class=o>(</span>Press CTRL+C to quit<span class=o>)</span> 
</span></span></code></pre></div><p>從上面的 Output 可以看到，起了一個環境，並聽本地的3000 port，這邊會在開另一個terminal 來測試 curl 來測試結果</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl>$ curl -v  http://127.0.0.1:3000/hello
</span></span><span class=line><span class=ln> 2</span><span class=cl> * Trying 127.0.0.1...
</span></span><span class=line><span class=ln> 3</span><span class=cl> * TCP_NODELAY <span class=nb>set</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl> * Connected to 127.0.0.1 <span class=o>(</span>127.0.0.1<span class=o>)</span> port <span class=m>3000</span> <span class=o>(</span><span class=c1>#0)</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl> &gt; GET /hello HTTP/1.1
</span></span><span class=line><span class=ln> 6</span><span class=cl> &gt; Host: 127.0.0.1:3000
</span></span><span class=line><span class=ln> 7</span><span class=cl> &gt; User-Agent: curl/7.64.1
</span></span><span class=line><span class=ln> 8</span><span class=cl> &gt; Accept: */*
</span></span><span class=line><span class=ln> 9</span><span class=cl> &gt; 
</span></span><span class=line><span class=ln>10</span><span class=cl> * HTTP 1.0, assume close after body
</span></span><span class=line><span class=ln>11</span><span class=cl> &lt; HTTP/1.0 <span class=m>200</span> OK
</span></span><span class=line><span class=ln>12</span><span class=cl> &lt; X-Custom-Header: application/json
</span></span><span class=line><span class=ln>13</span><span class=cl> &lt; Content-Type: application/json
</span></span><span class=line><span class=ln>14</span><span class=cl> &lt; Content-Length: <span class=m>57</span>
</span></span><span class=line><span class=ln>15</span><span class=cl> &lt; Server: Werkzeug/1.0.1 Python/3.8.11
</span></span><span class=line><span class=ln>16</span><span class=cl> &lt; Date: Sat, <span class=m>03</span> Jul <span class=m>2021</span> 11:47:10 GMT
</span></span><span class=line><span class=ln>17</span><span class=cl> &lt; 
</span></span><span class=line><span class=ln>18</span><span class=cl> * Closing connection <span class=m>0</span>
</span></span><span class=line><span class=ln>19</span><span class=cl> <span class=o>{</span> <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;hello world&#34;</span>, <span class=s2>&#34;location&#34;</span>: <span class=s2>&#34;114.44.114.30&#34;</span> <span class=o>}</span>
</span></span></code></pre></div><p>在原本的 Terminal 可以看到以下資訊</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Mounting /Users/allen/demo/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated inside runtime container
</span></span><span class=line><span class=ln>2</span><span class=cl> END RequestId: 74bd804b-096b-473b-9c3f-2ba1cd847431
</span></span><span class=line><span class=ln>3</span><span class=cl> REPORT RequestId: 74bd804b-096b-473b-9c3f-2ba1cd847431 Init Duration: 0.37 ms Duration: 2255.80 ms Billed Duration: <span class=m>2300</span> ms Memory Size: <span class=m>512</span> MB Max Memory Used: <span class=m>512</span> MB 
</span></span><span class=line><span class=ln>4</span><span class=cl> 2021-07-03 19:44:13 127.0.0.1 - - <span class=o>[</span>03/Jul/2021 19:44:13<span class=o>]</span> <span class=s2>&#34;GET /hello HTTP/1.1&#34;</span> <span class=m>200</span> - 
</span></span></code></pre></div><p>Sam 也可以直接一次性的執行某個 Function</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ sam <span class=nb>local</span> invoke <span class=s2>&#34;HelloWorldFunction&#34;</span>  
</span></span><span class=line><span class=ln>2</span><span class=cl> Invoking helloworld.App::handleRequest <span class=o>(</span>java11<span class=o>)</span>
</span></span><span class=line><span class=ln>3</span><span class=cl> Skip pulling image and use <span class=nb>local</span> one: amazon/aws-sam-cli-emulation-image-java11:rapid-1.25.0.
</span></span><span class=line><span class=ln>4</span><span class=cl> 
</span></span><span class=line><span class=ln>5</span><span class=cl>
</span></span><span class=line><span class=ln>6</span><span class=cl> Mounting /Users/allen/demo/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated inside runtime container
</span></span><span class=line><span class=ln>7</span><span class=cl> END RequestId: 70223332-2a37-4094-bdf2-aa924df0d416
</span></span><span class=line><span class=ln>8</span><span class=cl> REPORT RequestId: 70223332-2a37-4094-bdf2-aa924df0d416 Init Duration: 0.29 ms Duration: 2153.55 ms Billed Duration: <span class=m>2200</span> ms Memory Size: <span class=m>512</span> MB Max Memory Used: <span class=m>512</span> MB 
</span></span><span class=line><span class=ln>9</span><span class=cl> <span class=o>{</span><span class=s2>&#34;statusCode&#34;</span>:200,<span class=s2>&#34;headers&#34;</span>:<span class=o>{</span><span class=s2>&#34;X-Custom-Header&#34;</span>:<span class=s2>&#34;application/json&#34;</span>,<span class=s2>&#34;Content-Type&#34;</span>:<span class=s2>&#34;application/json&#34;</span><span class=o>}</span>,<span class=s2>&#34;body&#34;</span>:<span class=s2>&#34;{ \&#34;message\&#34;: \&#34;hello world\&#34;, \&#34;location\&#34;: \&#34;114.44.114.30\&#34; }&#34;</span><span class=o>}</span> 
</span></span></code></pre></div><h2 id=sam-部署到-aws data-numberify>SAM 部署到 AWS<a class="anchor ms-1" href=#sam-部署到-aws></a></h2><hr><p>這邊可以透過 sam deploy –guided Deploy 到 AWS 上面，由於內容資訊比較多，所以這邊用圖片的方式，在第一次執行時這邊會需要填寫一些預設資料。</p><p><picture><img class="img-fluid mx-auto d-block" alt=Center src=/posts/aws/build-aws-lambda-hello-world-function-by-sam/sam_deploy_hud547d519bc614d42d1f2dd9ad2273a15_38718_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=550></picture></p><p>在填完預設資料後，SAM會一直執行，直到要你確認這次 Deploy 的改動 CloudFormation 的 changeset</p><p><picture><img class="img-fluid mx-auto d-block" alt=Center src=/posts/aws/build-aws-lambda-hello-world-function-by-sam/sam_changeset_hufee57dd0898dafb5a3c2a8c54660daec_33934_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=466></picture></p><p>CloudFormation 這時候會卡在 REVIEW_IN_PROGRESS</p><p><picture><img class="img-fluid mx-auto d-block" alt=Center src=/posts/aws/build-aws-lambda-hello-world-function-by-sam/cloudFormation_review_in_progress_huc6458a5b91948db3ded0f30a66a14f2f_24112_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=186></picture></p><p>這時Change Set 同意以後，這時看 CloudFormation 會正在建立 Resource， Status 是 CREATE_IN_PROGRESS</p><p><picture><img class="img-fluid mx-auto d-block" alt=Center src=/posts/aws/build-aws-lambda-hello-world-function-by-sam/cloudFormation_create_in_progress_hu5edd2532568bcde299c843905ca41d6a_23824_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=188></picture></p><p>SAM CLI 在 Deploy 完以後，會看到類似以下資訊</p><p><picture><img class="img-fluid mx-auto d-block" alt=Center src=/posts/aws/build-aws-lambda-hello-world-function-by-sam/sam_deploy_successfully_hu98aaafb8b4cef59737833ca1cb4b3a0d_33278_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=539></picture></p><p>可以在 API Gateway 看到新的 Endpoint</p><p><picture><img class="img-fluid mx-auto d-block" alt=Center src=/posts/aws/build-aws-lambda-hello-world-function-by-sam/sam_created_api_gateway_hu6e6b8806b3e3ad4a9d9b58b5fcf68448_46796_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=419></picture></p><p>也可以在 Lambda 看到 HelloWorld Lambda Function 建立好了</p><p><picture><img class="img-fluid mx-auto d-block" alt=Center src=/posts/aws/build-aws-lambda-hello-world-function-by-sam/sam_created_lambda_function_hub03e5f2c3be2a636426b49b279563417_35554_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=437></picture></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl>$ curl -v https://rla530b9o1.execute-api.ap-northeast-1.amazonaws.com/Prod/hello/       
</span></span><span class=line><span class=ln> 2</span><span class=cl> * Trying 13.35.7.43...
</span></span><span class=line><span class=ln> 3</span><span class=cl> * TCP_NODELAY <span class=nb>set</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl> * Connected to rla530b9o1.execute-api.ap-northeast-1.amazonaws.com <span class=o>(</span>13.35.7.43<span class=o>)</span> port <span class=m>443</span> <span class=o>(</span><span class=c1>#0)</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl> * ALPN, offering h2
</span></span><span class=line><span class=ln> 6</span><span class=cl> * ALPN, offering http/1.1
</span></span><span class=line><span class=ln> 7</span><span class=cl> * successfully <span class=nb>set</span> certificate verify locations:
</span></span><span class=line><span class=ln> 8</span><span class=cl> *   CAfile: /etc/ssl/cert.pem
</span></span><span class=line><span class=ln> 9</span><span class=cl>   CApath: none
</span></span><span class=line><span class=ln>10</span><span class=cl> * TLSv1.2 <span class=o>(</span>OUT<span class=o>)</span>, TLS handshake, Client hello <span class=o>(</span>1<span class=o>)</span>:
</span></span><span class=line><span class=ln>11</span><span class=cl> * TLSv1.2 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Server hello <span class=o>(</span>2<span class=o>)</span>:
</span></span><span class=line><span class=ln>12</span><span class=cl> * TLSv1.2 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Certificate <span class=o>(</span>11<span class=o>)</span>:
</span></span><span class=line><span class=ln>13</span><span class=cl> * TLSv1.2 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Server key exchange <span class=o>(</span>12<span class=o>)</span>:
</span></span><span class=line><span class=ln>14</span><span class=cl> * TLSv1.2 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Server finished <span class=o>(</span>14<span class=o>)</span>:
</span></span><span class=line><span class=ln>15</span><span class=cl> * TLSv1.2 <span class=o>(</span>OUT<span class=o>)</span>, TLS handshake, Client key exchange <span class=o>(</span>16<span class=o>)</span>:
</span></span><span class=line><span class=ln>16</span><span class=cl> * TLSv1.2 <span class=o>(</span>OUT<span class=o>)</span>, TLS change cipher, Change cipher spec <span class=o>(</span>1<span class=o>)</span>:
</span></span><span class=line><span class=ln>17</span><span class=cl> * TLSv1.2 <span class=o>(</span>OUT<span class=o>)</span>, TLS handshake, Finished <span class=o>(</span>20<span class=o>)</span>:
</span></span><span class=line><span class=ln>18</span><span class=cl> * TLSv1.2 <span class=o>(</span>IN<span class=o>)</span>, TLS change cipher, Change cipher spec <span class=o>(</span>1<span class=o>)</span>:
</span></span><span class=line><span class=ln>19</span><span class=cl> * TLSv1.2 <span class=o>(</span>IN<span class=o>)</span>, TLS handshake, Finished <span class=o>(</span>20<span class=o>)</span>:
</span></span><span class=line><span class=ln>20</span><span class=cl> * SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256
</span></span><span class=line><span class=ln>21</span><span class=cl> * ALPN, server accepted to use h2
</span></span><span class=line><span class=ln>22</span><span class=cl> * Server certificate:
</span></span><span class=line><span class=ln>23</span><span class=cl> *  subject: <span class=nv>CN</span><span class=o>=</span>*.execute-api.ap-northeast-1.amazonaws.com
</span></span><span class=line><span class=ln>24</span><span class=cl> *  start date: May <span class=m>17</span> 00:00:00 <span class=m>2021</span> GMT
</span></span><span class=line><span class=ln>25</span><span class=cl> *  expire date: Jun <span class=m>15</span> 23:59:59 <span class=m>2022</span> GMT
</span></span><span class=line><span class=ln>26</span><span class=cl> *  subjectAltName: host <span class=s2>&#34;rla530b9o1.execute-api.ap-northeast-1.amazonaws.com&#34;</span> matched cert<span class=err>&#39;</span>s <span class=s2>&#34;*.execute-api.ap-northeast-1.amazonaws.com&#34;</span>
</span></span><span class=line><span class=ln>27</span><span class=cl> *  issuer: <span class=nv>C</span><span class=o>=</span>US<span class=p>;</span> <span class=nv>O</span><span class=o>=</span>Amazon<span class=p>;</span> <span class=nv>OU</span><span class=o>=</span>Server CA 1B<span class=p>;</span> <span class=nv>CN</span><span class=o>=</span>Amazon
</span></span><span class=line><span class=ln>28</span><span class=cl> *  SSL certificate verify ok.
</span></span><span class=line><span class=ln>29</span><span class=cl> * Using HTTP2, server supports multi-use
</span></span><span class=line><span class=ln>30</span><span class=cl> * Connection state changed <span class=o>(</span>HTTP/2 confirmed<span class=o>)</span>
</span></span><span class=line><span class=ln>31</span><span class=cl> * Copying HTTP/2 data in stream buffer to connection buffer after upgrade: <span class=nv>len</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=ln>32</span><span class=cl> * Using Stream ID: <span class=m>1</span> <span class=o>(</span>easy handle 0x7f9298809200<span class=o>)</span>
</span></span><span class=line><span class=ln>33</span><span class=cl> &gt; GET /Prod/hello/ HTTP/2
</span></span><span class=line><span class=ln>34</span><span class=cl> &gt; Host: rla530b9o1.execute-api.ap-northeast-1.amazonaws.com
</span></span><span class=line><span class=ln>35</span><span class=cl> &gt; User-Agent: curl/7.64.1
</span></span><span class=line><span class=ln>36</span><span class=cl> &gt; Accept: */*
</span></span><span class=line><span class=ln>37</span><span class=cl> &gt; 
</span></span><span class=line><span class=ln>38</span><span class=cl> * Connection state changed <span class=o>(</span><span class=nv>MAX_CONCURRENT_STREAMS</span> <span class=o>==</span> 128<span class=o>)</span>!
</span></span><span class=line><span class=ln>39</span><span class=cl> 
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl> &lt; HTTP/2 <span class=m>200</span> 
</span></span><span class=line><span class=ln>42</span><span class=cl> &lt; content-type: application/json
</span></span><span class=line><span class=ln>43</span><span class=cl> &lt; content-length: <span class=m>58</span>
</span></span><span class=line><span class=ln>44</span><span class=cl> &lt; date: Sat, <span class=m>03</span> Jul <span class=m>2021</span> 14:28:53 GMT
</span></span><span class=line><span class=ln>45</span><span class=cl> &lt; x-amzn-requestid: fa2fb89a-5379-4167-b13c-0a59269f71e0
</span></span><span class=line><span class=ln>46</span><span class=cl> &lt; x-amz-apigw-id: <span class=nv>B5cU7GWTNjMFc6A</span><span class=o>=</span>
</span></span><span class=line><span class=ln>47</span><span class=cl> &lt; x-custom-header: application/json
</span></span><span class=line><span class=ln>48</span><span class=cl> &lt; x-amzn-trace-id: <span class=nv>Root</span><span class=o>=</span>1-60e0741f-7e93aac373f51300700bbc59<span class=p>;</span><span class=nv>Sampled</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=ln>49</span><span class=cl> &lt; x-cache: Miss from cloudfront
</span></span><span class=line><span class=ln>50</span><span class=cl> &lt; via: 1.1 260a465bf4779e35dde8adbb89981df1.cloudfront.net <span class=o>(</span>CloudFront<span class=o>)</span>
</span></span><span class=line><span class=ln>51</span><span class=cl> &lt; x-amz-cf-pop: TPE52-C1
</span></span><span class=line><span class=ln>52</span><span class=cl> &lt; x-amz-cf-id: <span class=nv>aGy5WF0naNegGjNJM1kaZpBnl5SDcg23eZMy8wYUrd0sxyQnHLnhgg</span><span class=o>==</span>
</span></span><span class=line><span class=ln>53</span><span class=cl> &lt; 
</span></span><span class=line><span class=ln>54</span><span class=cl> * Connection <span class=c1>#0 to host rla530b9o1.execute-api.ap-northeast-1.amazonaws.com left intact</span>
</span></span><span class=line><span class=ln>55</span><span class=cl> <span class=o>{</span> <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;hello world&#34;</span>, <span class=s2>&#34;location&#34;</span>: <span class=s2>&#34;13.231.109.123&#34;</span> <span class=o>}</span>* Closing connection <span class=m>0</span> 
</span></span></code></pre></div><h2 id=清理-sam-建立好的-aws-環境 data-numberify>清理 Sam 建立好的 AWS 環境<a class="anchor ms-1" href=#清理-sam-建立好的-aws-環境></a></h2><hr><p>如果大家有 Deploy 到 AWS 上，最後記得要把 CloudFormation 建立出來的環境給刪除，以免產生額外的費用。這邊可以直接到 AWS CloudFormation 把 Stack 給刪除，或者使用 AWS CLI</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ aws cloudformation delete-stack --stack-name demo  
</span></span></code></pre></div><p>這邊要注意一下， SAM 會建立一個 S3 當作 Artifact ，所以需要先把 S3 裡面的資料手動清掉才可以 delete stack，否則 stack 會刪除失敗。以下是S3 沒有清空時的範例圖</p><p><picture><img class="img-fluid mx-auto d-block" alt=Center src=/posts/aws/build-aws-lambda-hello-world-function-by-sam/cloudformation_delete_fail_hua9f35933c7181c670b4c4522eae433ee_42204_1024x0_resize_q75_h2_box_2.webp loading=lazy width=1024 height=297></picture></p></div></div></div><div class=card-footer><div class="post-navs d-flex justify-content-evenly"><div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-down post-prev-icon me-1" data-fa-transform=rotate-90></i>
<a href=/posts/aws/create-cognito-user-pool-by-aws-cli/>使用 AWS Cognito CLI 建立 User Pool</a></div><div class="post-nav post-next"><a href=/posts/aws/what-is-lambda/>什麼是 AWS Lambda</a>
<i class="fas fa-fw fa-chevron-down post-next-icon ms-1" data-fa-transform=rotate-270></i></div></div></div></article><div class="post-copyright mb-3 row card component" id=post-copyright><div class=card-header><h2 class="card-title fs-4 my-2 text-surface">版權</h2></div><div class=card-body><a class="d-flex align-items-center flex-column" target=_blank rel="license noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh_TW><span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i><i class="fab fa-fw fa-2x fa-creative-commons-nd"></i></span>
CC BY-NC-ND 4.0</a></div></div><section class="related-posts row card component"><div class=card-header><h2 class="card-title fs-4 my-2 text-surface">相關文章</h2></div><div class="card-body slide px-1"><div class="slide-inner row gx-0"><div class="col-12 col-md-6 col-lg-4 me-2"><div class="post-card card card-body p-0 border-0 surface"><picture><img class=img-fluid alt="CloudFormation Certification Note" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture>
<a class=post-title href=/posts/aws/cloudformation-certification-note/>CloudFormation Certification Note</a><div class="post-meta mb-0">January 12, 2023</div></div></div><div class="col-12 col-md-6 col-lg-4 me-2"><div class="post-card card card-body p-0 border-0 surface"><picture><img class=img-fluid alt="Lambda Certification Note" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture>
<a class=post-title href=/posts/aws/lambda-certification-note/>Lambda Certification Note</a><div class="post-meta mb-0">November 13, 2022</div></div></div><div class="col-12 col-md-6 col-lg-4 me-2"><div class="post-card card card-body p-0 border-0 surface"><picture><img class=img-fluid alt="使用 AWS Cognito CLI 建立 User Pool" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture>
<a class=post-title href=/posts/aws/create-cognito-user-pool-by-aws-cli/>使用 AWS Cognito CLI 建立 User Pool</a><div class="post-meta mb-0">May 11, 2023</div></div></div><div class="col-12 col-md-6 col-lg-4 me-2"><div class="post-card card card-body p-0 border-0 surface"><picture><source srcset=/posts/travel/2023_busan_day5/feature_hufd89d48379a3affc1274354adc56097c_221644_500x0_resize_q75_h2_box_2.webp media="(max-width: 576px)" height=333 width=500><img class=img-fluid height=120 width=180 alt=feature.webp src=/posts/travel/2023_busan_day5/feature_hufd89d48379a3affc1274354adc56097c_221644_180x0_resize_q75_h2_box_2.webp data-src=/posts/travel/2023_busan_day5/feature.webp loading=lazy></picture>
<a class=post-title href=/posts/travel/2023_busan_day5/>2023 釜山六天五夜 Day5</a><div class="post-meta mb-0">April 4, 2023</div></div></div><div class="col-12 col-md-6 col-lg-4 me-2"><div class="post-card card card-body p-0 border-0 surface"><picture><img class=img-fluid alt="使用 Lightsail 架設 WordPress 網站" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture>
<a class=post-title href=/posts/aws/use-lightsail-to-create-wordpress-website/>使用 Lightsail 架設 WordPress 網站</a><div class="post-meta mb-0">April 4, 2023</div></div></div></div><button class=slide-control-left>
<i class="fas fa-2x fa-chevron-circle-down" data-fa-transform=rotate-90></i>
<span class=visually-hidden>Left</span></button>
<button class=slide-control-right>
<i class="fas fa-2x fa-chevron-circle-down" data-fa-transform=rotate-270></i>
<span class=visually-hidden>Right</span></button></div></section><div class="card component row post-comments" id=post-comments><div class=card-header><h2 class="card-title my-2 fs-4 text-surface">評論</h2></div><div class=card-body><script src=https://utteranc.es/client.js repo=allen-hsieh1992/allen-hsieh1992.github.io issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div><aside class="col-xxl-4 sidebar d-flex"><div class="container d-flex flex-column"><div class="accordion profile"><div class="accordion-item card row text-center component"><div class="accordion-header card-header border-0" id=profile-header><a class="accordion-button d-lg-none mb-2 shadow-none p-0 bg-transparent text-surface" role=button data-bs-toggle=collapse href=#profile aria-expanded=true aria-controls=profile>Profile</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=profile aria-labelledby=profile-header><div class="col-12 d-flex align-items-center justify-content-center"><picture><img class="profile-avatar rounded-circle" alt="Allen Hsieh" src=https://allenhsieh1992.com/images/icon.gif loading=lazy data-viewer-invisible width=154 height=153></picture></div><div class="col-12 profile-meta"><div class="profile-name fw-fold fs-lg">Allen Hsieh</div><div class=profile-bio>AWS Community Builder | 7x AWS Certified | Senior Backend Software Engineer</div><div class=profile-company><i class="fas fa-fw fa-building"></i><a href=https://www.yahooinc.com/ target=_blank rel="noopener noreferrer">Yahoo Inc</a></div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i><a href=https://www.google.com/maps/search/Taiwan>Taiwan</a></div></div></div></div></div><div class="accordion taxonomies-toggle"><div class="row card component accordion-item"><div class="accordion-header card-header border-0"><a class="accordion-button d-lg-none mb-1 shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#taxonomies-toggle aria-expanded=true aria-controls=taxonomies-toggle>Taxonomies</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=taxonomies-toggle><ul class="nav nav-pills nav-fill" role=tablist><li class=nav-item role=presentation><button class="nav-link active" id=taxonomyCategoriesTab data-bs-toggle=tab data-bs-target=#taxonomyCategories type=button role=tab aria-controls=taxonomyCategories aria-selected=true>
分類</button></li><li class=nav-item role=presentation><button class=nav-link id=taxonomyTagsTab data-bs-toggle=tab data-bs-target=#taxonomyTags type=button role=tab aria-controls=taxonomyTags aria-selected=true>
標籤</button></li><li class=nav-item role=presentation><button class=nav-link id=taxonomyArchivesTab data-bs-toggle=tab data-bs-target=#taxonomyArchives type=button role=tab aria-controls=taxonomyArchives aria-selected=true>
歸檔</button></li></ul><div class="tab-content mt-3"><div class="tab-pane active" id=taxonomyCategories role=tabpanel aria-labelledby=taxonomyCategoriesTab tabindex=0><a href=/categories/aws/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=AWS>AWS</a>
<a href=/categories/leetcode/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=LEETCODE>LEETCODE</a>
<a href=/categories/life/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=LIFE>LIFE</a>
<a href=/categories/java/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=JAVA>JAVA</a>
<a href=/categories/spring/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=SPRING>SPRING</a>
<a href=/categories/container/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=CONTAINER>CONTAINER</a>
<a href=/categories/tools/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title=TOOLS>TOOLS</a></div><div class=tab-pane id=taxonomyTags role=tabpanel aria-labelledby=taxonomyTagsTab tabindex=0><a href=/tags/leetcode/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=LEETCODE>LEETCODE</a>
<a href=/tags/lambda/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=LAMBDA>LAMBDA</a>
<a href=/tags/travel/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=TRAVEL>TRAVEL</a>
<a href=/tags/sam/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=SAM>SAM</a>
<a href=/tags/firehose/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=FIREHOSE>FIREHOSE</a>
<a href=/tags/javacore/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=JavaCore>JavaCore</a>
<a href=/tags/cloudformation/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=CloudFormation>CloudFormation</a>
<a href=/tags/route53/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Route53>Route53</a>
<a href=/tags/spring/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=SPRING>SPRING</a>
<a href=/tags/beanstalk/ class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=Beanstalk>Beanstalk</a>
<a href=https://allenhsieh1992.com/tags class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title=全部>全部
<span class="badge badge-sm text-secondary bg-white ms-1">27</span></a></div><div class=tab-pane id=taxonomyArchives role=tabpanel aria-labelledby=taxonomyArchivesTab tabindex=0><a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2025>2025 <span class="badge badge-sm text-secondary bg-white ms-1">1</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2024>2024 <span class="badge badge-sm text-secondary bg-white ms-1">5</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2023>2023 <span class="badge badge-sm text-secondary bg-white ms-1">18</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2022>2022 <span class="badge badge-sm text-secondary bg-white ms-1">21</span></a>
<a href class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title=2021>2021 <span class="badge badge-sm text-secondary bg-white ms-1">2</span></a></div></div></div></div></div><div class="accordion posts-toggle"><div class="row card component accordion-item"><div class="accordion-header card-header border-0"><a class="accordion-button d-lg-none mb-1 shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#posts-toggle aria-expanded=true aria-controls=posts-toggle>文章</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block show" id=posts-toggle><ul class="nav nav-pills nav-fill" role=tablist><li class=nav-item role=presentation><button class="nav-link active" id=recent-posts-tab data-bs-toggle=tab data-bs-target=#recent-posts type=button role=tab aria-controls=recent-posts aria-selected=true>
最近文章</button></li></ul><div class="tab-content mt-3"><div class="tab-pane active" id=recent-posts role=tabpanel aria-labelledby=recent-posts-tab tabindex=0><ul class="post-list list-unstyled ms-1"><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Firehose 專案分享" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/firehose-part4-production-use-case/>Firehose 專案分享</a><div class="post-meta mt-2"><span class=post-date>February 13, 2025</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Firehose Dynamic Partitioning" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/firehose-part3-dynamic-partitioning/>Firehose Dynamic Partitioning</a><div class="post-meta mt-2"><span class=post-date>December 12, 2024</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Firehose 建置" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/firehose-part2-stream-creation/>Firehose 建置</a><div class="post-meta mt-2"><span class=post-date>October 6, 2024</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="Firehose 101" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/firehose-part1-intro/>Firehose 101</a><div class="post-meta mt-2"><span class=post-date>July 13, 2024</span></div></div></div></li><li class=mb-2><div class=d-flex><div class="flex-shrink-0 d-flex justify-content-center align-items-center" style=max-width:100px><picture><img class=img-fluid alt="SAM Part5: 部署 Dynamodb" src=https://allenhsieh1992.com/images/aws.webp loading=lazy width=425 height=213></picture></div><div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3"><a class=post-title href=/posts/aws/sam-part5-dynamodb/>SAM Part5: 部署 Dynamodb</a><div class="post-meta mt-2"><span class=post-date>February 15, 2024</span></div></div></div></li></ul></div></div></div></div></div><div class="accordion post-toc d-none d-lg-block"><div class="accordion-item row mb-4 card component" id=postTOC><div class="card-header accordion-header"><h2 class="card-title fs-4 my-2 text-surface d-none d-lg-block">目錄</h2><a class="accordion-button d-lg-none mb-1 collapsed shadow-none p-0 bg-transparent" role=button data-bs-toggle=collapse href=#post-toc aria-expanded=false aria-controls=post-toc>目錄</a></div><div class="card-body collapse accordion-collapse accordion-body d-lg-block" id=post-toc><nav id=TableOfContents><ul><li><a href=#事前準備>事前準備</a></li><li><a href=#sam-初始化專案>SAM 初始化專案</a></li><li><a href=#sam-本地測試>SAM 本地測試</a></li><li><a href=#sam-部署到-aws>SAM 部署到 AWS</a></li><li><a href=#清理-sam-建立好的-aws-環境>清理 Sam 建立好的 AWS 環境</a></li></ul></nav></div></div></div></div></aside></div></main><footer class="footer mt-auto py-3 text-center container"><div class="row text-center"><div class="col-12 mt-2"><span id=busuanzi_container_site_pv><p class=mb-2>總瀏覽: <span id=busuanzi_value_site_pv></span>次</p></span><div class="copyright mb-2 text-secondary"><small>Copyright © 2021-2025 Allen Hsieh. All Rights Reserved.</small></div><nav class="social-links nav justify-content-center mb-2 mt-3"></nav></div><div class="col-12 col-lg-8 offset-0 offset-lg-1"></div></div></footer><script data-precache src=/assets/main/bundle.min.cb5662470b8c11aeca70d9d975f65f3a3adde55470efc9c090713a90cf6d4e9c.js integrity="sha256-y1ZiRwuMEa7KcNnZdfZfOjrd5VRw78nAkHE6kM9tTpw=" crossorigin=anonymous async></script><script data-precache src=/assets/icons/bundle.min.691458a56c2eef480bec8d31c967801a416b6445459ae901fe213e7870a0dd83.js integrity="sha256-aRRYpWwu70gL7I0xyWeAGkFrZEVFmukB/iE+eHCg3YM=" crossorigin=anonymous defer></script>
<script data-precache src=/assets/viewer/bundle.min.0866ed96ba6267ca90d45399312388980c7bf8ddd8f980e8dc49ec37376b7b36.js integrity="sha256-CGbtlrpiZ8qQ1FOZMSOImAx7+N3Y+YDo3EnsNzdrezY=" crossorigin=anonymous defer></script>
<script src=/js/sw-register.js defer></script></body></html>