[{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"å‰é¢å·²ç¶“åˆ†äº«äº†ï¼š\nFirehose ä»‹ç´¹ Firehose åŸºç¤å»ºç½® Firehose Dynamic Partitioning POC ç¾åœ¨è¦åˆ†äº«åœ¨å°ˆæ¡ˆä¸­å¯¦éš›ä½¿ç”¨çš„ç¯„ä¾‹ã€‚\nåœ°ç«¯æ¶æ§‹ Web Applicationï¼šå…±æœ‰å…©çµ„ Micro Serviceï¼Œè™•ç†ä¸åŒçš„è«‹æ±‚ï¼Œä¸¦å°‡éœ€è¦çš„è³‡æ–™å¯«å…¥æœ¬åœ°æª”æ¡ˆã€‚ ä¸Šå‚³åˆ° Dropboxï¼šåœ¨ Web Application ä¼ºæœå™¨ä¸Šè¨­å®š CronJobï¼Œå®šæœŸå°‡æª”æ¡ˆä¸Šå‚³è‡³ Dropboxã€‚ ä¸‹è¼‰åˆ° Hadoop ä¸¦åˆ†æã€‚ AWS æ¶æ§‹ æ•´çµ„åœ°ç«¯æœå‹™é·ç§»è‡³ AWS å¾Œï¼Œæ–°æ¶æ§‹å¦‚ä¸‹ï¼š\nWeb Applicationï¼šé·ç§»è‡³ EKSï¼Œé€é SDK å‘¼å« Firehoseã€‚ Firehoseï¼šå³æ™‚æ”¶é›† Eventï¼Œä¸¦è¼¸å‡ºè‡³ S3ã€‚ Hadoopï¼šæ”¹åœ¨ EMR ä¸ŠåŸ·è¡Œï¼Œä¸¦å¾ S3 ä¸‹è¼‰æª”æ¡ˆã€‚ ç›£æ§æ©Ÿåˆ¶ CloudWatchï¼šè¨­ç½® CloudWatch Alertï¼Œç›£æ¸¬ Firehose éŒ¯èª¤ã€‚ SNSï¼šç•¶ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œé€é SNS ç™¼é€ Email é€šçŸ¥ Slackï¼ŒSlack æœƒå³æ™‚æ”¶åˆ°è­¦å ±ã€‚ æ±ºç­–è€ƒé‡èˆ‡ç¶“é©— ä¸€å€‹é‚„æ˜¯å…©å€‹ Firehoseï¼Ÿ æœ€åˆè€ƒæ…®å»ºç«‹å–®ä¸€ Firehose Streamingï¼Œä¸¦é€é Dynamic Partitioning å°‡è³‡æ–™åˆ†é¡è‡³åŒä¸€å€‹ S3ï¼Œä½†ä¸åŒçš„ Folderã€‚\nç„¶è€Œï¼Œè€ƒé‡åˆ° Firehose çš„è¨ˆåƒ¹æ–¹å¼æ˜¯ä¾æ“šè™•ç†æ•¸æ“šé‡ï¼Œå› æ­¤é–‹å•Ÿä¸€å€‹ Firehose å’Œå…©å€‹ Firehose çš„åƒ¹æ ¼ç›¸å·®ä¸å¤§ã€‚æ­¤å¤–ï¼ŒDynamic Partitioning éœ€é¡å¤–ä»˜è²»ï¼Œä¸¦ä¸”éœ€è¦ç¶­è­· Lambda Functionã€‚å› æ­¤ï¼Œæœ€çµ‚é¸æ“‡äº†è¼ƒå–®ç´”çš„é›™ Firehose æ¶æ§‹ã€‚\nFirehose Buffer Hints è¨­å®š Firehose å¯è¨­å®š Buffer Hintsï¼Œä»¥ä¸‹ç‚º S3 ç›®æ¨™çš„è¨­å®šç¯„åœï¼ˆå…¶ä»–ç›®æ¨™è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼‰ï¼š\nBuffer Sizeï¼š1 â€“ 128 MiB Buffer Intervalï¼š0 â€“ 900 ç§’ Firehose åœ¨æ»¿è¶³ä»¥ä¸‹ä»»ä¸€æ¢ä»¶æ™‚ï¼Œä¾¿æœƒå°‡ Buffer å…§çš„è³‡æ–™è¼¸å‡ºè‡³ S3ï¼š\né”åˆ°è¨­å®šçš„ Buffer Sizeï¼ˆä¾‹å¦‚ 128 MiBï¼‰ã€‚ é”åˆ°è¨­å®šçš„ Buffer Intervalï¼ˆä¾‹å¦‚ 900 ç§’ï¼‰ã€‚ èˆ‰ä¾‹ä¾†èªªï¼Œè‹¥æµé‡è¼ƒå¤§ï¼Œå‰‡å¯èƒ½åœ¨ 15 åˆ†é˜å…§é”åˆ° 128 MiBï¼Œé€²è€Œæå‰ç”¢ç”Ÿæª”æ¡ˆã€‚åä¹‹ï¼Œè‹¥æµé‡è¼ƒå°ï¼Œå‰‡ Firehose æœƒæ¯ 15 åˆ†é˜ç”¢ç”Ÿä¸€å€‹æª”æ¡ˆã€‚\nåœ¨åœ°ç«¯æ¶æ§‹æ™‚ï¼Œæª”æ¡ˆæ˜¯æ¯å¤©ä¸Šå‚³ä¸€æ¬¡ã€‚ç„¶è€Œï¼Œé·ç§»è‡³ Firehose å¾Œï¼Œå› ç‚º Buffer Hints æ©Ÿåˆ¶ï¼Œéœ€ç‰¹åˆ¥æ³¨æ„è·¨æ—¥æª”æ¡ˆçš„è™•ç†ã€‚ç¬¬ä¸€å€‹è·¨æ—¥æª”æ¡ˆå¯èƒ½åŒ…å«å‰ä¸€å¤©çš„éƒ¨åˆ†è³‡æ–™ï¼Œå› æ­¤ï¼Œéœ€æŠ“å–ç•¶æ—¥èˆ‡è·¨æ—¥çš„ç¬¬ä¸€å€‹æª”æ¡ˆï¼Œæ‰èƒ½ç¢ºä¿å®Œæ•´çš„æ•¸æ“šã€‚\næ™‚å€è€ƒé‡ Firehose é è¨­ä½¿ç”¨ UTC æ™‚é–“æ ¼å¼ä¾†å¯«å…¥ S3 Prefixã€‚\nè‹¥ç³»çµ±ä¾æ“šæ—¥æœŸåˆ‡å‰²æª”æ¡ˆï¼Œå‰‡æ™‚å€è¨­å®šéå¸¸é‡è¦ã€‚æˆ‘å€‘æœ€çµ‚é¸æ“‡ä½¿ç”¨ 'Asia/Taipei'ï¼Œç¢ºä¿æª”æ¡ˆæ™‚é–“èˆ‡æ¥­å‹™éœ€æ±‚å°æ‡‰ã€‚\né€™äº›ç¶“é©—åˆ†äº«å¸Œæœ›èƒ½å¹«åŠ©åˆ°æœ‰é¡ä¼¼éœ€æ±‚çš„é–‹ç™¼è€…ï¼\n","date":"February 13, 2025","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/firehose-part4-production-use-case/","smallImg":"","tags":[{"title":"FIREHOSE","url":"/tags/firehose/"}],"timestamp":1739404800,"title":"Firehose å°ˆæ¡ˆåˆ†äº«"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘å€‘æœ‰ä»‹ç´¹åˆ°å¦‚ä½•å»ºç«‹ä¸€å€‹æœ€åŸºæœ¬çš„ Firehoseï¼Œé€™ç¯‡ä¸»è¦è¬›é€²éšåŠŸèƒ½ï¼Œä½¿ç”¨ Dynamic Partitioningã€‚\nS3 æ ¹æ“š Folder çš„åˆ†é¡ï¼Œå° performance æ˜¯æœ‰å½±éŸ¿çš„ï¼Œç´°ç¯€å¯ä»¥åƒè€ƒé€™ç¯‡ æ–‡ç« ã€‚\nFirehose é è¨­å‡½å¼ Firehose å·²ç¶“å…§å»ºä¸€äº›å‡½å¼ï¼Œå¯ä»¥ä¸ç”¨é€é Dynamic Partitioning å°±èƒ½åšä¸€äº› S3 åŸºæœ¬çš„ Prefix åˆ†é¡ã€‚\né€™é‚Šæ˜¯ å®˜æ–¹æ–‡ä»¶ã€‚\nä¾‹å¦‚ï¼Œåœ¨å»ºç«‹ Firehose çš„æ™‚å€™ï¼ŒS3 Prefix è¨­å®šä»¥ä¸‹è·¯å¾‘ï¼š\n1!{timestamp:yyyy}/!{timestamp:MM}/!{timestamp:dd}/testing- ç”¢ç”Ÿå‡ºä¾†çš„æª”æ¡ˆæœƒæœ‰å¹´æœˆæ—¥çš„ Folderï¼Œç„¶å¾Œæª”æ¡ˆçš„ prefix æœƒæ˜¯ testing-ï¼Œå¾Œé¢æ¥ Firehose é è¨­çš„æª”æ¡ˆåç¨±ã€‚\nFirehose ä½¿ç”¨ JQ å¦‚æœ Payload æ˜¯ JSON æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ Firehose å…§å»ºçš„ Dynamic Partitioningï¼Œé€™é‚Šä½¿ç”¨ JQ 1.6 ä½œç‚º Parsing Payload çš„å·¥å…·ã€‚\nè‹¥ä½¿ç”¨ JQï¼Œéœ€å•Ÿç”¨ Dynamic Partitioningï¼Œä¸¦ä¸”æ‰“é–‹ Inline Parsing for JSONã€‚\næ¥è‘—è¨­å®š JQ çš„ Key Nameï¼Œé€™å€‹ Key æœƒå°æ‡‰åˆ° Firehose Prefix çš„ Key Nameã€‚\nåœ¨è¨­å®š S3 Prefix çš„åœ°æ–¹ï¼Œnamespace å¿…é ˆå¡« partitionKeyFromQueryï¼Œæ¥è‘—å¡« Key Nameã€‚\né€™é‚Šé™„ä¸Šæˆ‘çš„ S3 Prefixï¼š\n1!{partitionKeyFromQuery:month}/!{partitionKeyFromQuery:day}/!{partitionKeyFromQuery:s3_prefix}- å¦‚æœé…ä¸Šåœ–ç‰‡ä¸Šçš„è¨­å®šï¼ŒåŠ ä¸Šæˆ‘ç”¨ä»¥ä¸‹ Payload æ‰“ Firehoseï¼š\n1aws firehose put-record \\ 2 --cli-binary-format raw-in-base64-out \\ 3 --delivery-stream-name JQ-Example \\ 4 --record \u0026#34;{\\\u0026#34;Data\\\u0026#34;: \\\u0026#34;{\\\\\\\u0026#34;month\\\\\\\u0026#34;:12, \\\\\\\u0026#34;day\\\\\\\u0026#34;:5, \\\\\\\u0026#34;s3Prefix\\\\\\\u0026#34;:\\\\\\\u0026#34;example\\\\\\\u0026#34;}\\\\n\\\u0026#34;}\u0026#34; æœƒçœ‹åˆ° S3 çš„è·¯å¾‘æ˜¯ 12/5/ï¼Œè€Œæª”æ¡ˆåç¨±æ˜¯ example- é–‹é ­çš„ã€‚\nFirehose with Lambda å¦‚æœè¦é€é Lambda åš Dynamic Partitioningï¼Œéœ€è¦æ‰“é–‹ transformation çš„åŠŸèƒ½ã€‚\né€™é‚Šæä¾›ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼š\n1import json 2import logging 3import base64 4 5def lambda_handler(event, context): 6 output = [] 7 logger = logging.getLogger() 8 logger.setLevel(logging.INFO) 9 10 logger.info(\u0026#34;Lambda Start\u0026#34;) 11 logger.info(f\u0026#34;event: {json.dumps(event)}\u0026#34;) 12 13 for record in event[\u0026#39;records\u0026#39;]: 14 logger.info(f\u0026#34;record[\u0026#39;data\u0026#39;]: {record[\u0026#39;data\u0026#39;]}\u0026#34;) 15 decodeResult = base64.b64decode(record[\u0026#39;data\u0026#39;]).decode(\u0026#39;utf-8\u0026#39;) 16 17 logger.info(f\u0026#34;base64 decode : {decodeResult}\u0026#34;) 18 19 payload = json.loads(decodeResult) 20 payload[\u0026#39;firehose\u0026#39;] = \u0026#39;true\u0026#39; 21 partition_key = payload.get(\u0026#39;key\u0026#39;, \u0026#39;default\u0026#39;) 22 newData = json.dumps(payload) 23 logger.info(f\u0026#34;newData : {newData}\u0026#34;) 24 25 output_record = { 26 \u0026#39;recordId\u0026#39;: record[\u0026#39;recordId\u0026#39;], 27 \u0026#39;result\u0026#39;: \u0026#39;Ok\u0026#39;, 28 \u0026#39;data\u0026#39;: base64.b64encode(newData.encode()).decode(), 29 \u0026#39;metadata\u0026#39;: { 30 \u0026#39;partitionKeys\u0026#39;: { 31 \u0026#39;partitionKey\u0026#39;: partition_key, 32 \u0026#39;file_prefix\u0026#39;: payload.get(\u0026#39;file_prefix\u0026#39;, \u0026#39;2024\u0026#39;), 33 \u0026#39;year\u0026#39;: payload.get(\u0026#39;year\u0026#39;, \u0026#39;2024\u0026#39;), 34 \u0026#39;month\u0026#39;: payload.get(\u0026#39;month\u0026#39;, \u0026#39;09\u0026#39;), 35 \u0026#39;day\u0026#39;: payload.get(\u0026#39;day\u0026#39;, \u0026#39;01\u0026#39;), 36 \u0026#39;hour\u0026#39;: payload.get(\u0026#39;hour\u0026#39;, \u0026#39;01\u0026#39;) 37 } 38 } 39 } 40 output.append(output_record) 41 42 return {\u0026#39;records\u0026#39;: output} è§£é‡‹ï¼š Line 15ï¼šé€åˆ° Firehose çš„ Data å¿…é ˆç¶“é Base64 Encodeï¼Œæ‰€ä»¥å–å‡ºæ™‚éœ€è¦ Decodeã€‚ Line 20ï¼šåœ¨ Transformation éç¨‹ä¸­ï¼Œå° Payload æ–°å¢ Keyã€‚ Line 26ï¼šé ˆå°‡åŸæœ¬çš„ Record è¿”å›çµ¦ Firehoseã€‚ Line 27ï¼šresult åƒæ•¸å¯è¨­ç‚º \u0026ldquo;Ok\u0026rdquo;ï¼ˆä¿ç•™ï¼‰æˆ– \u0026ldquo;Dropped\u0026rdquo;ï¼ˆä¸Ÿæ£„ï¼‰ã€‚ Line 28ï¼šdata åƒæ•¸æ˜¯æœ€å¾Œå­˜å…¥æª”æ¡ˆçš„è³‡æ–™ï¼Œéœ€å†æ¬¡é€²è¡Œ Base64 Encodeã€‚ Line 29-36ï¼šmetadata åº•ä¸‹çš„ partitionKeys æ˜¯ç”¨ä¾†è¨­å®š S3 Prefixã€‚ å»ºç«‹å¥½ Lambda ä¹‹å¾Œï¼Œå°±å¯ä»¥åœ¨ transformation è¨­å®šè£¡ï¼Œå¡«å…¥ Lambda çš„ ARNã€‚\nå•Ÿç”¨ Dynamic Partitioningï¼Œé€™æ¬¡ Inline Parsing for JSON ä¸éœ€è¦å‹¾é¸ã€‚\nåœ¨ S3 Prefix çš„ namespace ä½¿ç”¨ partitionKeyFromLambdaï¼Œé€™æ¨£å°±èƒ½å–å‡º Lambda è¿”å›çš„çµæœã€‚\næ³¨æ„ï¼š partitionKeyFromQuery å’Œ partitionKeyFromLambda æ˜¯ä¸åŒçš„ï¼\né€™é‚Šé™„ä¸Šæˆ‘çš„ S3 Prefix è¨­å®šï¼š\n1!{partitionKeyFromLambda:year}/!{partitionKeyFromLambda:month}/!{partitionKeyFromLambda:day}/!{partitionKeyFromLambda:file_prefix}-!{partitionKeyFromLambda:partitionKey}-!{partitionKeyFromLambda:year}-!{partitionKeyFromLambda:month}-!{partitionKeyFromLambda:day}-!{partitionKeyFromLambda:hour} æ¸¬è©¦ Firehose with Lambda ä½¿ç”¨ AWS CLI ä¾†æ”¾å…¥æ¸¬è©¦è³‡æ–™ï¼š\n1aws firehose put-record \\ 2 --cli-binary-format raw-in-base64-out \\ 3 --delivery-stream-name Lambda-Example \\ 4 --record \u0026#34;{\\\u0026#34;Data\\\u0026#34;: \\\u0026#34;{\\\\\\\u0026#34;month\\\\\\\u0026#34;:12, \\\\\\\u0026#34;day\\\\\\\u0026#34;:5, \\\\\\\u0026#34;key\\\\\\\u0026#34;:\\\\\\\u0026#34;example1\\\\\\\u0026#34;}\\\\n\\\u0026#34;}\u0026#34; æª¢æŸ¥ S3 prefix æ˜¯å¦ç¬¦åˆé æœŸï¼š\næª”æ¡ˆå…§å®¹ 1{\u0026#34;month\u0026#34;: 12, \u0026#34;day\u0026#34;: 5, \u0026#34;key\u0026#34;: \u0026#34;example1\u0026#34;, \u0026#34;firehose\u0026#34;: \u0026#34;true\u0026#34;} é€™æ¨£å°±èƒ½æˆåŠŸä½¿ç”¨ Lambda + Firehose é€²è¡Œ Dynamic Partitioningï¼ ğŸš€\n","date":"December 12, 2024","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/firehose-part3-dynamic-partitioning/","smallImg":"","tags":[{"title":"FIREHOSE","url":"/tags/firehose/"}],"timestamp":1733961600,"title":"Firehose Dynamic Partitioning"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"æ¶æ§‹ ä»Šæ—¥æ¶æ§‹ï¼Œæœƒå»ºç«‹ä¸€å€‹ Firehose å’Œ S3ï¼Œä¸¦é€é AWS CLI å‚³é€è³‡æ–™åˆ° Firehose è£¡é¢ï¼Œæœ€å¾Œ Output åˆ° S3 ä¸­ã€‚\nS3 å»ºç½® é€²å…¥åˆ° S3 ç•«é¢ï¼Œä¸¦é»ä¸‹ \u0026ldquo;Create Bucket\u0026rdquo; æŒ‰éˆ•\nå¡«å¯« Bucket nameï¼ˆæ³¨æ„ S3 Bucket æ˜¯ Global Uniqueï¼Œæ‰€ä»¥è·Ÿåˆ¥äººé‡è¤‡äº†æ˜¯ä¸èƒ½å»ºç«‹çš„ï¼‰ï¼Œä¸¦æ»‘åˆ°é é¢æœ€ä¸‹é¢æŒ‰ \u0026ldquo;Create Bucket\u0026rdquo; æŒ‰éˆ•\nå»ºç«‹å®Œæˆï¼Œæœƒåœ¨é é¢æœ€ä¸‹é¢çœ‹åˆ° S3 Bucket\nFirehose å»ºç½® é€²å…¥åˆ° Firehose é é¢ï¼Œé»æ“Š \u0026ldquo;Create Delivery Stream\u0026rdquo;\nSource çš„éƒ¨åˆ†é¸ \u0026ldquo;Direct Put\u0026rdquo;ï¼Œç„¶å¾Œ Destination é¸ \u0026ldquo;S3\u0026rdquo;ï¼Œæ¥è‘—æœƒå±•é–‹æ›´å¤šè³‡è¨Šè¦å¡«å¯«\næ»¾å‹•åˆ°é é¢æœ€ä¸‹é¢ï¼Œç„¶å¾Œé»é¸ \u0026ldquo;Create Delivery Stream\u0026rdquo;ï¼Œå°±æœƒé–‹å§‹å»ºç½®\né¸æ“‡ Configurationï¼Œå¯ä»¥çœ‹åˆ° Service accessï¼ŒAWS å·²ç¶“é è¨­å»ºç«‹å¥½ Service Role\nåœ¨ IAM Role è£¡é¢å¯ä»¥çœ‹åˆ°ï¼Œå·²ç¶“æœ‰æ¬Šé™å¯ä»¥è®“ Firehose output è³‡æ–™åˆ° S3\né€é AWS CLI ä¸Šå‚³ 1aws firehose put-record \\ 2 --delivery-stream-name Basic-Firehose \\ 3 --record \u0026#34;{\\\u0026#34;Data\\\u0026#34;:\\\u0026#34;SGVsbG8gd29ybGQh\\\u0026#34;}\u0026#34; Firehose é è¨­ Buffer Size æ˜¯300 ç§’ï¼Œæ‰€ä»¥äº”åˆ†é˜å¾Œå¯ä»¥åˆ° S3 è£¡é¢å»çœ‹æª”æ¡ˆã€‚\n","date":"October 6, 2024","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/firehose-part2-stream-creation/","smallImg":"","tags":[{"title":"FIREHOSE","url":"/tags/firehose/"}],"timestamp":1728172800,"title":"Firehose å»ºç½®"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"ä»€éº¼æ˜¯ Firehose Amazon Kinesis Data Firehoseï¼ˆç°¡ç¨± Firehoseï¼‰æ˜¯ AWS æä¾›çš„ä¸€ç¨®å¯¦æ™‚æ•¸æ“šæµè™•ç†æœå‹™ï¼Œä¸»è¦ç”¨æ–¼æ”¶é›†ã€è½‰æ›å’ŒåŠ è¼‰æ•¸æ“šåˆ°å„ç¨®å„²å­˜èˆ‡åˆ†æå¹³å°ï¼Œä¾‹å¦‚ Amazon S3ã€Redshiftã€Elasticsearch Serviceã€Splunk ç­‰ã€‚\nFirehose èƒ½å¤ è‡ªå‹•æ“´å±•ã€ç„¡éœ€ç®¡ç†ä¼ºæœå™¨ï¼Œä¸¦æä¾›æ‰¹æ¬¡è™•ç†ã€æ•¸æ“šè½‰æ›å’ŒåŠ å¯†åŠŸèƒ½ï¼Œä½¿å…¶æˆç‚ºæ•¸æ“šç®¡é“ï¼ˆData Pipelineï¼‰ä¸­é—œéµçš„çµ„ä»¶ä¹‹ä¸€ã€‚\nFirehose çš„ä¸»è¦åŠŸèƒ½ æ•¸æ“šæµæ”¶é›†èˆ‡å‚³è¼¸ å¾å„ç¨®ä¾†æºï¼ˆIoT è¨­å‚™ã€æ‡‰ç”¨ç¨‹å¼æ—¥èªŒã€ç›£æ§æ•¸æ“šï¼‰æ¥æ”¶æ•¸æ“šã€‚ ä½å»¶é²åœ°å‚³è¼¸åˆ° Amazon S3ã€Amazon Redshiftã€Amazon OpenSearchã€Splunk ç­‰ã€‚ æ•¸æ“šæ ¼å¼è½‰æ›èˆ‡å£“ç¸® Firehose æ”¯æ´ JSON â†’ Parquet / ORC è½‰æ›ï¼Œä¹Ÿæ”¯æ´ Lambda çš„å‹•æ…‹è½‰æ›ã€‚ æ”¯æ´ Gzipã€Snappyã€ZIP å£“ç¸®æ•¸æ“šï¼Œæ¸›å°‘å„²å­˜æˆæœ¬ã€‚ æ•¸æ“šåŠ å¯†èˆ‡å®‰å…¨æ€§ Firehose å…§å»º AWS KMSï¼ˆKey Management Serviceï¼‰åŠ å¯†ï¼Œç¢ºä¿æ•¸æ“šå®‰å…¨ã€‚ å¯èˆ‡ AWS Identity and Access Managementï¼ˆIAMï¼‰æ•´åˆï¼Œæ§åˆ¶å­˜å–æ¬Šé™ã€‚ ç„¡ä¼ºæœå™¨ã€è‡ªå‹•æ“´å±• Firehose ç„¡éœ€ç®¡ç†åŸºç¤æ¶æ§‹ï¼ŒAWS æœƒæ ¹æ“šæµé‡è‡ªå‹•æ“´å±•ååé‡ã€‚ èˆ‡ AWS æœå‹™æ•´åˆ å¯ä»¥èˆ‡ Amazon CloudWatchã€AWS Lambdaã€Kinesis Data Streams ç­‰ç„¡ç¸«æ•´åˆï¼Œé€²è¡Œå³æ™‚ç›£æ§èˆ‡è™•ç†ã€‚ Firehose å®šåƒ¹æ¨¡å¼ è³‡æ–™æ“·å–ï¼šè³‡æ–™å‚³è¼¸åˆ° Firehose æ™‚ï¼Œæœƒæ ¹æ“šæ“·å–çš„è³‡æ–™é‡æ”¶è²»ã€‚ æ¯ç­†è‡³å°‘ä»¥ 5KB ç‚ºä¸€å€‹å–®ä½ï¼Œä¾‹å¦‚ 13KB æœƒç®— 15KBï¼Œç„¶å¾Œä»¥æ¯ GB è¨ˆåƒ¹ã€‚ æ ¼å¼è½‰æ› (Optional): æ¯ç­†è‡³å°‘ä»¥ 5KB ç‚ºä¸€å€‹å–®ä½ï¼Œä»¥æ¯ GB è¨ˆåƒ¹ã€‚ Dynamic Partitioning JQ æˆ– Lambda ä»¥è¨ˆç®—æ™‚é–“è¨ˆç®—ã€‚ å£“ç¸® ä¹Ÿæ˜¯ä»¥æ¯ GB ç‚ºå–®ä½ã€‚ å¯ä»¥ä½¿ç”¨ AWS è¨ˆç®—æ©Ÿ åšåŸºç¤è¨ˆç®—\nå¯¦éš›æƒ…å¢ƒæ¡ˆä¾‹ ç¯„ä¾‹ 1ï¼š IoT äº‹ä»¶æµï¼šå‡è¨­ä¸€å€‹æ™ºæ…§åŸå¸‚çš„ IoT è¨­å‚™æ”¶é›†ä¾†çš„æ•¸æ“šï¼Œå¦‚ä½•ä½¿ç”¨ Firehose å¯¦æ™‚å°‡æ•¸æ“šå‚³è¼¸åˆ° Amazon S3 é€²è¡Œå„²å­˜å’Œåˆ†æã€‚ ç¯„ä¾‹ 2ï¼š å¯¦æ™‚æ—¥å¿—è™•ç†ï¼šä½¿ç”¨ Firehose å‚³è¼¸æ‡‰ç”¨ç¨‹å¼æ—¥èªŒåˆ° Amazon Elasticsearch Serviceï¼Œç”¨æ–¼å³æ™‚çš„æœå°‹å’Œåˆ†æã€‚ ","date":"July 13, 2024","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/firehose-part1-intro/","smallImg":"","tags":[{"title":"FIREHOSE","url":"/tags/firehose/"}],"timestamp":1720828800,"title":"Firehose 101"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"å»ºç«‹ DynamoDB SAM æœ‰å®šç¾©ä¸€å€‹ AWS::Serverless::SimpleTable çš„ Resource çµ¦ DynamoDbã€‚\næˆ‘åœ¨ template.yaml çš„ Resources ä¸‹å¢åŠ äº†ä»¥ä¸‹çš„ code\n1 Table: 2 Type: AWS::Serverless::SimpleTable # More info about SimpleTable Resource: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-simpletable.html 3 Properties: 4 PrimaryKey: 5 Name: id 6 Type: String 7 TableName: Users æ¥è‘—åœ¨ SAM Deploy æ™‚ï¼Œæœƒçœ‹åˆ°ä»¥ä¸‹çš„ Change Set\n1CloudFormation stack changeset 2----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3Operation LogicalResourceId ResourceType Replacement 4----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5+ Add Table AWS::DynamoDB::Table N/A 6----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 7 8 9Changeset created successfully. arn:aws:cloudformation:ap-northeast-1:129824596365:changeSet/samcli-deploy1711462102/d5561ddb-0426-4de1-be4d-08b4a0ab02aa 10 11 12Previewing CloudFormation changeset before deployment 13====================================================== 14Deploy this changeset? [y/N]: y 15 162024-03-26 22:08:41 - Waiting for stack create/update to complete 17 18CloudFormation events from stack operations (refresh every 5.0 seconds) 19----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 20ResourceStatus ResourceType LogicalResourceId ResourceStatusReason 21----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 22UPDATE_IN_PROGRESS AWS::CloudFormation::Stack sam-app User Initiated 23CREATE_IN_PROGRESS AWS::DynamoDB::Table Table - 24CREATE_IN_PROGRESS AWS::DynamoDB::Table Table Resource creation Initiated 25CREATE_COMPLETE AWS::DynamoDB::Table Table - 26UPDATE_COMPLETE_CLEANUP_IN_PROGRESS AWS::CloudFormation::Stack sam-app - 27UPDATE_COMPLETE AWS::CloudFormation::Stack sam-app - 28----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- å¾ AWS Console å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘å€‘å»ºç«‹çš„DynamoDB Table Users å»ºç«‹ Items é»å…¥ Table Users ä»¥å¾Œï¼Œå³ä¸Šè§’çš„ Action è£¡é¢ï¼Œæœ‰ä¸€å€‹ Create Item æ¥è‘—è‰¾å€«æœƒå»ºç«‹ä¸€å€‹ item ï¼Œid æ˜¯ 1ï¼ŒfirstName æ˜¯ Allen ï¼ŒlastName æ˜¯ Hsieh é»ä¸‹ Create Item ï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨ Table è£¡é¢çœ‹åˆ°æœ‰ç¬¬ä¸€ç­† Item\nå»ºç«‹ Get Users API é€™é‚Šéƒ½æ˜¯åŸºæ–¼ Part1 çš„ Hello World å»ä¿®æ”¹\npackage.json ç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œå…ˆåœ¨ package.json åŠ å…¥ aws-sdk lib (line11)\n1{ 2 \u0026#34;name\u0026#34;: \u0026#34;hello_world\u0026#34;, 3 \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, 4 \u0026#34;description\u0026#34;: \u0026#34;hello world sample for NodeJS\u0026#34;, 5 \u0026#34;main\u0026#34;: \u0026#34;app.js\u0026#34;, 6 \u0026#34;repository\u0026#34;: \u0026#34;https://github.com/awslabs/aws-sam-cli/tree/develop/samcli/local/init/templates/cookiecutter-aws-sam-hello-nodejs\u0026#34;, 7 \u0026#34;author\u0026#34;: \u0026#34;SAM CLI\u0026#34;, 8 \u0026#34;license\u0026#34;: \u0026#34;MIT\u0026#34;, 9 \u0026#34;dependencies\u0026#34;: { 10 \u0026#34;axios\u0026#34;: \u0026#34;\u0026gt;=1.6.0\u0026#34;, 11 \u0026#34;aws-sdk\u0026#34;: \u0026#34;2.1419.0\u0026#34; 12 }, 13 \u0026#34;scripts\u0026#34;: { 14 \u0026#34;test\u0026#34;: \u0026#34;mocha tests/unit/\u0026#34; 15 }, 16 \u0026#34;devDependencies\u0026#34;: { 17 \u0026#34;chai\u0026#34;: \u0026#34;^4.3.6\u0026#34;, 18 \u0026#34;mocha\u0026#34;: \u0026#34;^10.2.0\u0026#34; 19 } 20} ä¿®æ”¹ hello_world è³‡æ–™å¤¾åç¨± æ¥è‘—ä¿®æ”¹ hello_world æ”¹æˆ users\n1$ tree . 2. 3â”œâ”€â”€ README.md 4â”œâ”€â”€ events 5â”‚Â â””â”€â”€ event.json 6â”œâ”€â”€ samconfig.toml 7â”œâ”€â”€ template.yaml 8â””â”€â”€ users 9 â”œâ”€â”€ app.mjs 10 â”œâ”€â”€ package.json 11 â””â”€â”€ tests 12 â””â”€â”€ unit 13 â””â”€â”€ test-handler.mjs ä¿®æ”¹ Lambda Function Line1 : å°‡ DynamoDBClient åŒ¯å…¥ Line16: æ ¹æ“š Http Method ä¾†åˆ¤æ–·åŸ·è¡Œä»€éº¼ Action ï¼Œç”±æ–¼ç¾åœ¨åªè™•ç† Get Method\n1import { DynamoDBClient } from \u0026#34;@aws-sdk/client-dynamodb\u0026#34;; 2import { 3 DynamoDBDocumentClient, 4 ScanCommand 5} from \u0026#34;@aws-sdk/lib-dynamodb\u0026#34;; 6 7const client = new DynamoDBClient({}); 8 9const dynamo = DynamoDBDocumentClient.from(client); 10 11const tableName = \u0026#34;Users\u0026#34;; 12 13export const lambdaHandler = async (event, context) =\u0026gt; { 14 console.log(\u0026#34;EVENT: \\n\u0026#34; + JSON.stringify(event, null, 2)); 15 console.log(\u0026#34;httpmethod\u0026#34; + event.httpMethod); 16 let body; 17 switch(event.httpMethod) { 18 case \u0026#34;GET\u0026#34;: 19 console.log(\u0026#34;Http Get\u0026#34;); 20 body = await dynamo.send( 21 new ScanCommand({ TableName: tableName }) 22 ); 23 body = body.Items; 24 break; 25 } 26 const response = { 27 statusCode: 200, 28 body: JSON.stringify(body) 29 }; 30 31 return response; 32}; template.yaml æ–°å¢ Get Uesr Function åœ¨ Resource ä¸‹é¢ã€‚\n1 GetUsers: 2 Type: AWS::Serverless::Function 3 Properties: 4 CodeUri: users/ 5 Handler: app.lambdaHandler 6 Runtime: nodejs20.x 7 Architectures: 8 - x86_64 9 Events: 10 HelloWorld: 11 Type: Api 12 Properties: 13 Path: /users 14 Method: get é‡æ–°éƒ¨ç½² é€™é‚Šè¨˜å¾—ï¼Œè¦å…ˆ sam build ä¹‹å¾ŒåŸ·è¡Œ sam deploy æ‰æœƒç”Ÿæ•ˆï¼Œæ¥è‘—æˆ‘å€‘ä½¿ç”¨ Curl å»æ‰“ apigateway\n1$ curl https://kxkhl0spi1.execute-api.ap-northeast-1.amazonaws.com/Prod/users 2{\u0026#34;message\u0026#34;: \u0026#34;Internal server error\u0026#34;} é€™é‚Šæœƒç™¼ç¾ï¼Œå¾—åˆ°çš„ message æ˜¯éŒ¯èª¤ï¼Œæ¥è‘—å» CloudWatch çœ‹ Log ï¼Œæœƒç™¼ç¾ Lambda æ²’æœ‰æ¬Šé™å» access DynamoDB.\n1{ 2 \u0026#34;timestamp\u0026#34;: \u0026#34;2024-02-10T14:23:01.191Z\u0026#34;, 3 \u0026#34;level\u0026#34;: \u0026#34;ERROR\u0026#34;, 4 \u0026#34;requestId\u0026#34;: \u0026#34;def17c42-6b0b-4c96-a081-948984ae0c8f\u0026#34;, 5 \u0026#34;message\u0026#34;: { 6 \u0026#34;errorType\u0026#34;: \u0026#34;DynamoDBServiceException\u0026#34;, 7 \u0026#34;errorMessage\u0026#34;: \u0026#34;User: arn:aws:sts::129824596365:assumed-role/sam-app-GetUsersRole-e2VmZDAl4NoY/sam-app-GetUsers-PGeiGDJRikRx is not authorized to perform: dynamodb:Scan on resource: arn:aws:dynamodb:ap-northeast-1:129824596365:table/users because no identity-based policy allows the dynamodb:Scan action\u0026#34;, 8 \u0026#34;stackTrace\u0026#34;: [ 9 \u0026#34;AccessDeniedException: User: arn:aws:sts::129824596365:assumed-role/sam-app-GetUsersRole-e2VmZDAl4NoY/sam-app-GetUsers-PGeiGDJRikRx is not authorized to perform: dynamodb:Scan on resource: arn:aws:dynamodb:ap-northeast-1:129824596365:table/users because no identity-based policy allows the dynamodb:Scan action\u0026#34;, 10 \u0026#34; at throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:838:20)\u0026#34;, 11 \u0026#34; at /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:847:5\u0026#34;, 12 \u0026#34; at de_CommandError (/var/runtime/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2150:14)\u0026#34;, 13 \u0026#34; at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\u0026#34;, 14 \u0026#34; at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20\u0026#34;, 15 \u0026#34; at async /var/runtime/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:174:30\u0026#34;, 16 \u0026#34; at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:165:18\u0026#34;, 17 \u0026#34; at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\u0026#34;, 18 \u0026#34; at async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22\u0026#34;, 19 \u0026#34; at async Runtime.lambdaHandler [as handler] (file:///var/task/app.mjs:34:16)\u0026#34; 20 ], 21 \u0026#34;name\u0026#34;: \u0026#34;AccessDeniedException\u0026#34;, 22 \u0026#34;$fault\u0026#34;: \u0026#34;client\u0026#34;, 23 \u0026#34;$metadata\u0026#34;: { 24 \u0026#34;httpStatusCode\u0026#34;: 400, 25 \u0026#34;requestId\u0026#34;: \u0026#34;ULUQ6S15FJ9GN2KDDMG9EF7NT3VV4KQNSO5AEMVJF66Q9ASUAAJG\u0026#34;, 26 \u0026#34;attempts\u0026#34;: 1, 27 \u0026#34;totalRetryDelay\u0026#34;: 0 28 }, 29 \u0026#34;__type\u0026#34;: \u0026#34;com.amazon.coral.service#AccessDeniedException\u0026#34;, 30 \u0026#34;message\u0026#34;: \u0026#34;User: arn:aws:sts::129824596365:assumed-role/sam-app-GetUsersRole-e2VmZDAl4NoY/sam-app-GetUsers-PGeiGDJRikRx is not authorized to perform: dynamodb:Scan on resource: arn:aws:dynamodb:ap-northeast-1:129824596365:table/users because no identity-based policy allows the dynamodb:Scan action\u0026#34; 31 } 32} ä¿®å¾©æ¬Šé™å•é¡Œ SAM æœ‰å®šç¾©è¨±å¤š policy template ï¼Œè€Œ Get åªéœ€è¦ Read DyanmoDB ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥é¸æ“‡ DynamoDBReadPolicy å°±å¯ä»¥\næœ€çµ‚ template.yaml çš„ Resources æœƒé•·é€™æ¨£\n1Resources: 2 Table: 3 Type: AWS::Serverless::SimpleTable 4 Properties: 5 PrimaryKey: 6 Name: id 7 Type: String 8 TableName: Users 9 GetUsers: 10 Type: AWS::Serverless::Function 11 Properties: 12 CodeUri: users/ 13 Handler: app.lambdaHandler 14 Runtime: nodejs20.x 15 Architectures: 16 - x86_64 17 Events: 18 HelloWorld: 19 Type: Api 20 Properties: 21 Path: /users 22 Method: get 23 Policies: 24 - DynamoDBReadPolicy: 25 TableName: !Ref Table éƒ¨ç½²æ™‚ï¼Œå¾ ChangeSet å¯ä»¥çœ‹åˆ° IAM Role æœ‰ä¿®æ”¹\n1CloudFormation stack changeset 2----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3Operation LogicalResourceId ResourceType Replacement 4----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5* Modify GetUsersRole AWS::IAM::Role False 6* Modify GetUsers AWS::Lambda::Function False 7* Modify ServerlessRestApi AWS::ApiGateway::RestApi False 8----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- éƒ¨ç½²å®Œä»¥å¾Œå†ç”¨ Curl æ‰“ ApiGateway æœƒæ‹¿åˆ°çµæœ\n1$ curl https://kxkhl0spi1.execute-api.ap-northeast-1.amazonaws.com/Prod/users 2[{\u0026#34;id\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;lastName\u0026#34;:\u0026#34;Hsieh\u0026#34;,\u0026#34;firstName\u0026#34;:\u0026#34;Allen\u0026#34;}] å»ºç«‹ Create User API ä¿®æ”¹ Lambda Fuction è‰¾å€«åœ¨ swtich case ä¸­ï¼Œå¤šåŠ äº† Post çš„ case (line19-33)\n1import { DynamoDBClient } from \u0026#34;@aws-sdk/client-dynamodb\u0026#34;; 2import { 3 DynamoDBDocumentClient, 4 ScanCommand, 5 PutCommand 6} from \u0026#34;@aws-sdk/lib-dynamodb\u0026#34;; 7 8const client = new DynamoDBClient({}); 9 10const dynamo = DynamoDBDocumentClient.from(client); 11 12const tableName = \u0026#34;Users\u0026#34;; 13 14export const lambdaHandler = async (event, context) =\u0026gt; { 15 console.log(\u0026#34;EVENT: \\n\u0026#34; + JSON.stringify(event, null, 2)); 16 console.log(\u0026#34;httpmethod\u0026#34; + event.httpMethod); 17 let body; 18 switch(event.httpMethod) { 19 case \u0026#34;POST\u0026#34;: 20 console.log(\u0026#34;Http Post\u0026#34;); 21 let item = JSON.parse(event.body) 22 await dynamo.send( 23 new PutCommand({ 24 TableName: tableName, 25 Item: { 26 id: item.id, 27 lastName: item.lastName, 28 firstName: item.firstName 29 }, 30 }) 31 ); 32 body = \u0026#34;{}\u0026#34;; 33 break; 34 case \u0026#34;GET\u0026#34;: 35 console.log(\u0026#34;Http Get\u0026#34;); 36 body = await dynamo.send( 37 new ScanCommand({ TableName: tableName }) 38 ); 39 body = body.Items; 40 break; 41 } 42 const response = { 43 statusCode: 200, 44 body: JSON.stringify(body) 45 }; 46 47 return response; 48}; ä¿®æ”¹ template.yaml é€™é‚Šè¦æ³¨æ„çš„æ˜¯ï¼Œå› ç‚ºæˆ‘å€‘æ˜¯éœ€è¦å¯«å…¥ DynamoDBï¼Œæ‰€å·²é€™é‚Šä½¿ç”¨çš„ Policies æ˜¯ DynamoDBCrudPolicy\n1 CreateUsers: 2 Type: AWS::Serverless::Function 3 Properties: 4 CodeUri: users/ 5 Handler: app.lambdaHandler 6 Runtime: nodejs20.x 7 Architectures: 8 - x86_64 9 Events: 10 HelloWorld: 11 Type: Api 12 Properties: 13 Path: /users 14 Method: post 15 Policies: 16 - DynamoDBCrudPolicy: 17 TableName: !Ref Table æ¸¬è©¦ åœ¨éƒ¨ç½²å®Œå¾Œï¼Œä½¿ç”¨ curl æ¸¬è©¦ Post ï¼Œå¯ä»¥çœ‹åˆ°æ­£å¸¸çš„å›è¦†ã€‚\n1curl -X POST https://kxkhl0spi1.execute-api.ap-northeast-1.amazonaws.com/Prod/users -d \u0026#39;{\u0026#34;id\u0026#34;:\u0026#34;2\u0026#34;, \u0026#34;lastName\u0026#34; : \u0026#34;Chung\u0026#34;, \u0026#34;firstName\u0026#34;: \u0026#34;Leo\u0026#34;}\u0026#39; 2\u0026#34;{}\u0026#34; å† call ä¸€æ¬¡ï¼Œæˆ‘å€‘åŸå…ˆå¯«å¥½çš„ get ï¼Œå¯ä»¥çœ‹åˆ°å‰›å‰›å»ºç«‹çš„ Item\n1$ curl https://kxkhl0spi1.execute-api.ap-northeast-1.amazonaws.com/Prod/users 2[{\u0026#34;id\u0026#34;:\u0026#34;2\u0026#34;,\u0026#34;lastName\u0026#34;:\u0026#34;Chung\u0026#34;,\u0026#34;firstName\u0026#34;:\u0026#34;Leo\u0026#34;},{\u0026#34;id\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;lastName\u0026#34;:\u0026#34;Hsieh\u0026#34;,\u0026#34;firstName\u0026#34;:\u0026#34;Allen\u0026#34;}] ","date":"February 15, 2024","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/sam-part5-dynamodb/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"},{"title":"SAM","url":"/tags/sam/"}],"timestamp":1707955200,"title":"SAM Part5: éƒ¨ç½² Dynamodb"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"ä»€éº¼æ˜¯ AWS Community Builder Community Builder æ˜¯ AWS ç¤¾ç¾¤ä¸­çš„ä¸€ç¾¤å¿—é¡˜è€…å’Œç†±å¿ƒäººå£«ï¼Œä»–å€‘è‡´åŠ›æ–¼ä¿ƒé€² AWS æŠ€è¡“å’ŒçŸ¥è­˜çš„åˆ†äº«èˆ‡å‚³æ’­ã€‚ä¸»è¦é€ééƒ¨è½æ ¼ã€ç¤¾äº¤åª’é«”ã€æ¼”è¬›ç­‰å¤šç¨®æ–¹å¼èˆ‡ç¤¾ç¾¤äº’å‹•ï¼Œåˆ†äº«ä»–å€‘çš„ç¶“é©—ã€‚\nä»¥å‰ AWS Community Builder æ˜¯ä¸€å¹´æœ‰å…©æ¬¡å¯©æ ¸ï¼Œä½†éš¨è‘— Builder äººæ•¸è®Šå¤šï¼Œ2024 æ”¹ç”±ä¸€å¹´å¯©æ ¸ä¸€æ¬¡ã€‚æ‰€ä»¥ä»Šå¹´éŒ¯éäº†ï¼Œå°±åªèƒ½ç­‰ 2025 å˜ï½\né€™é‚Šæ˜¯å®˜æ–¹çš„ä»‹ç´¹å’Œç”³è«‹é é¢\nå¦å¤–å¯ä»¥åƒè€ƒï¼Œçœ‹çœ‹è‰¾å€« 2023 åšäº†ä»€éº¼ç›¸é—œäº‹æƒ…ï¼Œç”³è«‹ Community Builder ï¼Œç•¶ç„¶ä¸Šé¢çš„äº‹æƒ…ä¸æ˜¯å…¨éƒ¨ï¼Œåƒ…ä¾›åƒè€ƒè€Œå·²\nç¦åˆ© èªè­˜ä¸–ç•Œå„åœ°çš„ Builder \u0026 Heros AWS æœ‰å»ºç«‹ä¸€å€‹ç¾¤çµ„ï¼Œå°‡æ‰€æœ‰çš„ Builder å’Œ Heros éƒ½æ‹‰å…¥åˆ°ç¾¤çµ„ä¸­ã€‚å¤§å®¶å¯ä»¥åœ¨è£¡é¢è©¢å•å’Œäº’ç›¸è¨è«–å•é¡Œï½\nåœ¨é€™é‚Šæœ‰è¨±å¤šå¼·è€…ï¼Œé‚„å¯ä»¥å­¸ç¿’åˆ°ä¸åŒçš„æ–‡åŒ–å’Œæ±è¥¿ã€‚\nBuilder\u0026rsquo;s ç¦®ç‰© ç•¶ç„¶ä¹Ÿä¸èƒ½å°‘äº† AWS Builder ç¦®ç‰©\nCredits AWS æœƒæä¾›ä¸€äº›å›é¥‹è®“ Builder å¯ä»¥å»å¯¦é©—ä¸€äº›è²´è²´æˆ–æ˜¯æ–°çš„æœå‹™ã€‚\nAWS Sharing AWS å…§éƒ¨æœƒå®šæœŸæ´¾å“¡å·¥ä¾†åˆ†äº«ä¸€äº›æ–°çš„åŠŸèƒ½å’Œæœå‹™ï½\nAPJ Community é›–ç„¶å°ç£å’Œä¸­åœ‹ä¸€èµ·è¢«æ­¸é¡åœ¨å¤§ä¸­è¯åœ°å€ï¼Œä½†æˆ‘å€‘é‚„æ˜¯å¯ä»¥è¢«é‚€è«‹ä¸€åŒåƒåŠ  APJ çš„æ´»å‹• è€Œä¸”é‚„æœ‰ APJ é™å®šçš„ç¦®ç‰© å°ç¸½çµ é™¤äº†ä»¥ä¸Šå¥½è™•ç•¶ç„¶é‚„æœ‰å…¶ä»–è¨±å¤šå°ç¦åˆ©ï¼Œé€™é‚Šå°±ä¸ä¸€ä¸€åˆ†äº«ã€‚ å› ç‚ºç•¶ä¸Š AWS Commuity Builder æˆ‘è¦ºå¾—æœ€å¤§çš„å¥½è™•ï¼Œå°±æ˜¯å¯ä»¥èªè­˜ä¸€ç¾¤ç†±æ„› AWS æœå‹™çš„äººï½ ç¦åˆ©çœŸçš„åªæ˜¯æ¬¡è¦ï¼Œæ‰€ä»¥å¦‚æœä½ ä¹Ÿæ˜¯ç†±æ„› AWS ï¼Œä¸å¦¨ç”³è«‹çœ‹çœ‹ï¼Œä¸€èµ·åŠ å…¥ AWS Community Builder å¤§å®¶åº­ï¼\n","date":"January 16, 2024","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/what-is-aws-community-builder/","smallImg":"","tags":[],"timestamp":1705363200,"title":"ä»€éº¼æ˜¯ AWS Community Builder"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"æ–‡ç« å¯«ä½œ åŠªåŠ›ç¶­æŒå¹³å‡ä¸€å€‹æœˆå¯«ä¸€ç¯‡æ–‡ç« ~\nä»Šå¹´ä¸€å…±è²¢ç»äº†12ç¯‡æ–‡ç« ï¼Œä¸ŠåŠå¹´ï¼Œä¸»è¦åœ¨æº–å‚™ AWS åŸ·ç…§ï¼Œæ‰€ä»¥å°±éƒ½å°ˆæ³¨æ–¼åŸ·ç…§çš„ç­†è¨˜ï¼Œè€Œä¸‹åŠå¹´ç”±æ–¼æƒ³åšä¸€äº› side project ï¼Œæ‰€ä»¥å°ˆæ³¨æ–¼ä½¿ç”¨ SAM ä¾†é–‹ç™¼ Lambdaã€‚\nCloudFormation Certification Note Config Certification Note S3 Certification Note DynamoDB Certification Note ä½¿ç”¨ Lightsail æ¶è¨­ WordPress ç¶²ç«™ ä½¿ç”¨ AWS Cognito CLI å»ºç«‹ User Pool Build AWS Lambda Hello World Function by SAM ä»€éº¼æ˜¯ AWS Lambda SAM Part1: Node å°ˆæ¡ˆåˆå§‹åŒ– SAM Part2: åœ°ç«¯æ¸¬è©¦ SAM Part3: é›²ç«¯éƒ¨ç½² SAM Part4: é›²ç«¯æ¸¬è©¦ AWS åŸ·ç…§ ä»Šå¤©ç›®æ¨™åŸæœ¬æ˜¯è€ƒä¸‰å››å¼µçš„ï¼Œä½†ä¸‹åŠå¹´å› ç‚ºå…¬å¸è®ŠåŒ–ï¼Œè½‰äº†éƒ¨é–€ï¼Œæ‰€ä»¥æ²’æœ‰å¤ªå¤šæ™‚é–“æº–å‚™è€ƒæ–°çš„åŸ·ç…§ï¼Œæœ€å¾Œåœ¨å…­æœˆä¸€æ¬¡æ‹¼äº†å…©å¼µè€Œå·²\nCertified Data Analytics AWS Certified Security 8 æœˆ AWS Community Day ä»Šå¹´æ˜¯å°ç£ç¬¬äºŒå±† AWS Community Dayï¼Œç”±æ–¼å…¬å¸åˆ†äº«éœ€è¦ç”³è«‹ï¼Œè‰¾å€«å«Œéº»ç…©ï¼Œæ‰€ä»¥åªå¥½ä¹–ä¹–çš„ç•¶ Jam çš„ä¸»æŒäººï½\nç”±æ–¼ç•¶å¤©è¦çœ‹å ´ï¼Œæ‰€ä»¥æ²’æœ‰å¸¶é›»è…¦ï¼Œçœ‹åˆ°ä¸‹é¢æ¯å€‹äººéƒ½èªçœŸåœ¨åš Jam ï¼Œä¹Ÿæœ‰è‚¡è¡å‹•ï¼Œæƒ³ä¸‹å»ç©ç© QAQ ç•¶å¤©ç†±æƒ…çš„å¿—å·¥å’Œè¬›å¸«å€‘ï½ æ­¡è¿å¤§å®¶æ˜å¹´ä¸€èµ·ä¾†åŠ å…¥æˆ‘å€‘ å¦å¤–è¶…é–‹å¿ƒçš„æ˜¯ç²å¾—äº† AWS æ¡ŒéŠï½ æ‰“å®Œä¸€æ¬¡ä»¥å¾Œå°±è¦ºå¾—è¶…å¥½ç©ï¼Œè‰¾å€«é‚„æœ‰å¸¶å»å…¬å¸å’ŒåŒäº‹ä¸€èµ·æ‰“ ä¹æœˆ AWS Community Builder åœ¨åæœˆçš„æ™‚å€™ï¼Œå¾ˆé–‹å¿ƒçš„ç”³è«‹ä¸Šçš„ Community Buidler ï¼Œå°ç£å‰›å¥½åä½ Builders ï¼Œå¸Œæœ›æ˜å¹´å¯ä»¥ç¹¼çºŒçºŒç´„ï½ æ˜å¹´å†ä¾†åˆ†äº«ä¸€ç¯‡ä»€éº¼æ˜¯ AWS Community Builder å¥½äº†ã€‚\nåæœˆ AWS Traning è‰¾å€«çš„å…¬å¸æœ‰è´ŠåŠ©å“¡å·¥ä¸Š AWS åŸå» çš„èª²ç¨‹ï¼Œæ‰€ä»¥åœ¨åæœˆæ™‚ï¼Œä¸Šäº† AWS EKS çš„èª²ç¨‹ã€‚\nç¸½çµ 2023 éå¾—å¾ˆå……å¯¦ï¼Œé›–ç„¶å¾ˆå¤šäº‹æƒ…æ²’æœ‰é”åˆ°åŸæœ¬çš„ç›®æ¨™è¦åŠƒï¼Œä½†è‡³å°‘é‚„æ˜¯æœ‰é”æˆä¸€åŠä»¥ä¸Šï½\nAWS Summit æœ‰é»å¯æƒœï¼Œç”±æ–¼è‰¾å€«æ—©å°±è¨‚å¥½æ©Ÿç¥¨å»æ²–ç¹©ï¼Œæ²’ä¸‹åˆ°è·Ÿ Summit è¡çªåˆ°ï¼Œå¸Œæœ› 2024 ä¸æœƒå†éŒ¯éäº†\n","date":"December 12, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/2023-aws-review/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"},{"title":"SAM","url":"/tags/sam/"}],"timestamp":1702339200,"title":"2023 å›é¡§"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"ç›´æ¥æ‰“ API Gateway åœ¨ Part3 ä¸­ï¼ŒDeployment å®Œæ™‚ï¼ŒCloudFomration çš„ Output å¯ä»¥çœ‹åˆ° ApiGateway çš„ URIã€‚å¦‚æœæ²’æœ‰è¨˜ä½ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥åœ¨ AWS Console ä¸­çš„ API Gateway Stage æ‰¾åˆ° URI æ‰¾åˆ° URI ä»¥å¾Œï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ CURL åšæ¸¬è©¦\n1$ curl https://t3faydf1rb.execute-api.ap-northeast-1.amazonaws.com/Prod/hello 2{\u0026#34;message\u0026#34;:\u0026#34;hello world\u0026#34;}% å–å¾—åŸ·è¡Œ Log é€é AWS Console AWS Lambda é è¨­æœƒå»ºç«‹ CloudWatch Log Groupï¼Œæˆ‘å€‘å¯ä»¥åœ¨ CloudWatch ä¸­çš„ Log Group æ‰¾åˆ° Lambda åŸ·è¡Œçš„ Logã€‚ é è¨­çš„ Log Group åå­—æ˜¯ /aws/lambda/\u0026lt;function name\u0026gt; åœ¨ Log Steam è£¡é¢ï¼Œå¯ä»¥æ‰¾åˆ°è‰¾å€«åœ¨ Part3 ä¸­ï¼Œä¿®æ”¹ Lambda Function Code æ™‚ï¼Œæ‰€å°å‡º Event çš„ Log SAM Log 1$ sam logs -n HelloWorldFunction --stack-name sam-app --tail 2You can now use \u0026#39;sam logs\u0026#39; without --name parameter, which will pull the logs from all supported resources in your stack. 3 42024/03/26/[$LATEST]a0274c6a05404868b3fb3c15d3443312 2024-03-26T13:12:19.327000 { 5 \u0026#34;time\u0026#34;: \u0026#34;2024-03-26T13:12:19.327Z\u0026#34;, 6 \u0026#34;type\u0026#34;: \u0026#34;platform.initStart\u0026#34;, 7 \u0026#34;record\u0026#34;: { 8 \u0026#34;initializationType\u0026#34;: \u0026#34;on-demand\u0026#34;, 9 \u0026#34;phase\u0026#34;: \u0026#34;init\u0026#34;, 10 \u0026#34;runtimeVersion\u0026#34;: \u0026#34;nodejs:20.v19\u0026#34;, 11 \u0026#34;runtimeVersionArn\u0026#34;: \u0026#34;arn:aws:lambda:ap-northeast-1::runtime:ecf83feba464e64dae4dc1a80327f8f786abd91aed7e0d884474a062cd1a7d63\u0026#34;, 12 \u0026#34;functionName\u0026#34;: \u0026#34;sam-app-HelloWorldFunction-Qiut5gK4QT6I\u0026#34;, 13 \u0026#34;functionVersion\u0026#34;: \u0026#34;$LATEST\u0026#34; 14 } 15} 162024/03/26/[$LATEST]a0274c6a05404868b3fb3c15d3443312 2024-03-26T13:12:19.468000 { 17 \u0026#34;time\u0026#34;: \u0026#34;2024-03-26T13:12:19.468Z\u0026#34;, 18 \u0026#34;type\u0026#34;: \u0026#34;platform.start\u0026#34;, 19 \u0026#34;record\u0026#34;: { 20 \u0026#34;requestId\u0026#34;: \u0026#34;baf81fc5-767d-43e9-a780-6f96f0955a6c\u0026#34;, 21 \u0026#34;version\u0026#34;: \u0026#34;$LATEST\u0026#34;, 22 \u0026#34;tracing\u0026#34;: { 23 \u0026#34;spanId\u0026#34;: \u0026#34;6c72e2f7121224ce\u0026#34;, 24 \u0026#34;type\u0026#34;: \u0026#34;X-Amzn-Trace-Id\u0026#34;, 25 \u0026#34;value\u0026#34;: \u0026#34;Root=1-6602c9b3-1f608cce18790dbc0c64ca6e;Parent=7621c3d74d395e42;Sampled=1\u0026#34; 26 } 27 } 28} 292024/03/26/[$LATEST]a0274c6a05404868b3fb3c15d3443312 2024-03-26T13:12:19.469000 { 30 \u0026#34;timestamp\u0026#34;: \u0026#34;2024-03-26T13:12:19.469Z\u0026#34;, 31 \u0026#34;level\u0026#34;: \u0026#34;INFO\u0026#34;, 32 \u0026#34;requestId\u0026#34;: \u0026#34;baf81fc5-767d-43e9-a780-6f96f0955a6c\u0026#34;, 33 \u0026#34;message\u0026#34;: \u0026#34;EVENT: \\n{}\u0026#34; 34} 352024/03/26/[$LATEST]a0274c6a05404868b3fb3c15d3443312 2024-03-26T13:12:19.514000 { 36 \u0026#34;time\u0026#34;: \u0026#34;2024-03-26T13:12:19.514Z\u0026#34;, 37 \u0026#34;type\u0026#34;: \u0026#34;platform.report\u0026#34;, 38 \u0026#34;record\u0026#34;: { 39 \u0026#34;requestId\u0026#34;: \u0026#34;baf81fc5-767d-43e9-a780-6f96f0955a6c\u0026#34;, 40 \u0026#34;metrics\u0026#34;: { 41 \u0026#34;durationMs\u0026#34;: 44.002, 42 \u0026#34;billedDurationMs\u0026#34;: 45, 43 \u0026#34;memorySizeMB\u0026#34;: 128, 44 \u0026#34;maxMemoryUsedMB\u0026#34;: 66, 45 \u0026#34;initDurationMs\u0026#34;: 139.993 46 }, 47 \u0026#34;tracing\u0026#34;: { 48 \u0026#34;spanId\u0026#34;: \u0026#34;6c72e2f7121224ce\u0026#34;, 49 \u0026#34;type\u0026#34;: \u0026#34;X-Amzn-Trace-Id\u0026#34;, 50 \u0026#34;value\u0026#34;: \u0026#34;Root=1-6602c9b3-1f608cce18790dbc0c64ca6e;Parent=7621c3d74d395e42;Sampled=1\u0026#34; 51 }, 52 \u0026#34;status\u0026#34;: \u0026#34;success\u0026#34; 53 } 54} ä½¿ç”¨ SAM æ¸¬è©¦é›²ä¸Š Lambda Function é™¤äº†ä½¿ç”¨åŸºæœ¬çš„ Curl ä»¥å¤–ï¼Œ SAM remote è®“æˆ‘å€‘å¯ä»¥ç›´æ¥åœ¨åœ°ç«¯è§¸ç™¼é›²ä¸Šçš„ Lambda Function ï¼Œä¸¦ä¸”æä¾›ä¸€äº›é¡å¤–çš„è³‡è¨Šï¼Œä¾‹å¦‚ billedDurationMs ç­‰\n1$ sam remote invoke 2 3Invoking Lambda Function HelloWorldFunction 4{\u0026#34;time\u0026#34;:\u0026#34;2024-03-26T13:12:19.327Z\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;platform.initStart\u0026#34;,\u0026#34;record\u0026#34;:{\u0026#34;initializationType\u0026#34;:\u0026#34;on-demand\u0026#34;,\u0026#34;phase\u0026#34;:\u0026#34;init\u0026#34;,\u0026#34;runtimeVersion\u0026#34;:\u0026#34;nodejs:20.v19\u0026#34;,\u0026#34;runtimeVersionArn\u0026#34;:\u0026#34;arn:aws:lambda:ap-northeast-1::runtime:ecf83feba464e64dae4dc1a80327f8f786abd91aed7e0d884474a062cd1a7d63\u0026#34;,\u0026#34;functionName\u0026#34;:\u0026#34;sam-app-HelloWorldFunction-Qiut5gK4QT6I\u0026#34;,\u0026#34;functionVersion\u0026#34;:\u0026#34;$LATEST\u0026#34;}} 5{\u0026#34;time\u0026#34;:\u0026#34;2024-03-26T13:12:19.466Z\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;platform.initRuntimeDone\u0026#34;,\u0026#34;record\u0026#34;:{\u0026#34;initializationType\u0026#34;:\u0026#34;on-demand\u0026#34;,\u0026#34;phase\u0026#34;:\u0026#34;init\u0026#34;,\u0026#34;status\u0026#34;:\u0026#34;success\u0026#34;}} 6{\u0026#34;time\u0026#34;:\u0026#34;2024-03-26T13:12:19.466Z\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;platform.initReport\u0026#34;,\u0026#34;record\u0026#34;:{\u0026#34;initializationType\u0026#34;:\u0026#34;on-demand\u0026#34;,\u0026#34;phase\u0026#34;:\u0026#34;init\u0026#34;,\u0026#34;status\u0026#34;:\u0026#34;success\u0026#34;,\u0026#34;metrics\u0026#34;:{\u0026#34;durationMs\u0026#34;:139.899}}} 7{\u0026#34;time\u0026#34;:\u0026#34;2024-03-26T13:12:19.468Z\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;platform.start\u0026#34;,\u0026#34;record\u0026#34;:{\u0026#34;requestId\u0026#34;:\u0026#34;baf81fc5-767d-43e9-a780-6f96f0955a6c\u0026#34;,\u0026#34;version\u0026#34;:\u0026#34;$LATEST\u0026#34;,\u0026#34;tracing\u0026#34;:{\u0026#34;spanId\u0026#34;:\u0026#34;6c72e2f7121224ce\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;X-Amzn-Trace-Id\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;Root=1-6602c9b3-1f608cce18790dbc0c64ca6e;Parent=7621c3d74d395e42;Sampled=1\u0026#34;}}} 8{\u0026#34;timestamp\u0026#34;:\u0026#34;2024-03-26T13:12:19.469Z\u0026#34;,\u0026#34;level\u0026#34;:\u0026#34;INFO\u0026#34;,\u0026#34;requestId\u0026#34;:\u0026#34;baf81fc5-767d-43e9-a780-6f96f0955a6c\u0026#34;,\u0026#34;message\u0026#34;:\u0026#34;EVENT: \\n{}\u0026#34;} 9{\u0026#34;time\u0026#34;:\u0026#34;2024-03-26T13:12:19.511Z\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;platform.runtimeDone\u0026#34;,\u0026#34;record\u0026#34;:{\u0026#34;requestId\u0026#34;:\u0026#34;baf81fc5-767d-43e9-a780-6f96f0955a6c\u0026#34;,\u0026#34;status\u0026#34;:\u0026#34;success\u0026#34;,\u0026#34;tracing\u0026#34;:{\u0026#34;spanId\u0026#34;:\u0026#34;3444a7bf6600aaff\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;X-Amzn-Trace-Id\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;Root=1-6602c9b3-1f608cce18790dbc0c64ca6e;Parent=6c72e2f7121224ce;Sampled=1;Lineage=7e433ca5:0\u0026#34;},\u0026#34;spans\u0026#34;:[{\u0026#34;name\u0026#34;:\u0026#34;responseLatency\u0026#34;,\u0026#34;start\u0026#34;:\u0026#34;2024-03-26T13:12:19.468Z\u0026#34;,\u0026#34;durationMs\u0026#34;:6.097},{\u0026#34;name\u0026#34;:\u0026#34;responseDuration\u0026#34;,\u0026#34;start\u0026#34;:\u0026#34;2024-03-26T13:12:19.474Z\u0026#34;,\u0026#34;durationMs\u0026#34;:0.106},{\u0026#34;name\u0026#34;:\u0026#34;runtimeOverhead\u0026#34;,\u0026#34;start\u0026#34;:\u0026#34;2024-03-26T13:12:19.475Z\u0026#34;,\u0026#34;durationMs\u0026#34;:36.296}],\u0026#34;metrics\u0026#34;:{\u0026#34;durationMs\u0026#34;:43.028,\u0026#34;producedBytes\u0026#34;:57}}} 10{\u0026#34;time\u0026#34;:\u0026#34;2024-03-26T13:12:19.514Z\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;platform.report\u0026#34;,\u0026#34;record\u0026#34;:{\u0026#34;requestId\u0026#34;:\u0026#34;baf81fc5-767d-43e9-a780-6f96f0955a6c\u0026#34;,\u0026#34;status\u0026#34;:\u0026#34;success\u0026#34;,\u0026#34;metrics\u0026#34;:{\u0026#34;durationMs\u0026#34;:44.002,\u0026#34;billedDurationMs\u0026#34;:45,\u0026#34;memorySizeMB\u0026#34;:128,\u0026#34;maxMemoryUsedMB\u0026#34;:66,\u0026#34;initDurationMs\u0026#34;:139.993},\u0026#34;tracing\u0026#34;:{\u0026#34;type\u0026#34;:\u0026#34;X-Amzn-Trace-Id\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;Root=1-6602c9b3-1f608cce18790dbc0c64ca6e;Parent=7621c3d74d395e42;Sampled=1\u0026#34;,\u0026#34;spanId\u0026#34;:\u0026#34;6c72e2f7121224ce\u0026#34;}}}{\u0026#34;statusCode\u0026#34;:200,\u0026#34;body\u0026#34;:\u0026#34;{\\\u0026#34;message\\\u0026#34;:\\\u0026#34;hello world\\\u0026#34;}\u0026#34;} 11SAM CLI update available (1.113.0); (1.111.0 installed) 12To download: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html ","date":"November 11, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/sam-part4-cloud-testing/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"},{"title":"SAM","url":"/tags/sam/"}],"timestamp":1699660800,"title":"SAM Part4: é›²ç«¯æ¸¬è©¦"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"SAM éƒ¨ç½² SAM æä¾›äº† deployment çš„æŒ‡ä»¤ï¼Œä¸¦ä¸”åœ¨ deployment çš„ options ä¸­æœ‰ä¸€å€‹ guidedï¼Œå¯ä»¥é€éå›ç­”å•é¡Œçš„æ–¹å¼ï¼Œå¹«åŠ©å¦ä¸€æ¬¡éƒ¨ç½²çš„äººå¿«é€Ÿéƒ¨ç½²ã€‚è¨˜å¾—åœ¨ deploy ä¹‹å‰ï¼Œè¦å…ˆåŸ·è¡Œé sam buildã€‚\nå¦å¤– SAM ä½¿ç”¨çš„æ˜¯ AWS CLI çš„ Credentialsï¼Œæ‰€ä»¥è¦å…ˆç¢ºèªé€™äº› Credential æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚\n1$ sam deploy --guided 2 3Configuring SAM deploy 4====================== 5 6\tLooking for config file [samconfig.toml] : Found 7\tReading default arguments : Success 8 9\tSetting default arguments for \u0026#39;sam deploy\u0026#39; 10\t========================================= 11\tStack Name [sam-app]: 12\tAWS Region [ap-northeast-1]: 13\t#Shows you resources changes to be deployed and require a \u0026#39;Y\u0026#39; to initiate deploy 14\tConfirm changes before deploy [Y/n]: Y 15\t#SAM needs permission to be able to create roles to connect to the resources in your template 16\tAllow SAM CLI IAM role creation [Y/n]: Y 17\t#Preserves the state of previously provisioned resources when an operation fails 18\tDisable rollback [y/N]: y 19\tHelloWorldFunction has no authentication. Is this okay? [y/N]: y 20\tSave arguments to configuration file [Y/n]: Y 21\tSAM configuration file [samconfig.toml]: 22\tSAM configuration environment [default]: 23 24\tLooking for resources needed for deployment: 25 26\tManaged S3 bucket: aws-sam-cli-managed-default-samclisourcebucket-1syrjc2soglaa 27\tA different default S3 bucket can be set in samconfig.toml and auto resolution of buckets turned off by setting resolve_s3=False 28 29 Parameter \u0026#34;stack_name=sam-app\u0026#34; in [default.deploy.parameters] is defined as a global parameter [default.global.parameters]. 30 This parameter will be only saved under [default.global.parameters] in /Users/allen/sam-app/samconfig.toml. 31 32\tSaved arguments to config file 33\tRunning \u0026#39;sam deploy\u0026#39; for future deployments will use the parameters saved above. 34\tThe above parameters can be changed by modifying samconfig.toml 35\tLearn more about samconfig.toml syntax at 36\thttps://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-config.html 37 38\tUploading to sam-app/73ed78d2180973be557e5b20ff3918f7 598152 / 598152 (100.00%) 39 40\tDeploying with following values 41\t=============================== 42\tStack name : sam-app 43\tRegion : ap-northeast-1 44\tConfirm changeset : True 45\tDisable rollback : True 46\tDeployment s3 bucket : aws-sam-cli-managed-default-samclisourcebucket-1syrjc2soglaa 47\tCapabilities : [\u0026#34;CAPABILITY_IAM\u0026#34;] 48\tParameter overrides : {} 49\tSigning Profiles : {} 50 51Initiating deployment 52===================== 53 54\tUploading to sam-app/fced19bb73698b56db25505260c97e96.template 1273 / 1273 (100.00%) 55 56 57Waiting for changeset to be created.. 58 59CloudFormation stack changeset 60--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 61Operation LogicalResourceId ResourceType Replacement 62--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 63+ Add HelloWorldFunctionHelloWorldPermissionProd AWS::Lambda::Permission N/A 64+ Add HelloWorldFunctionRole AWS::IAM::Role N/A 65+ Add HelloWorldFunction AWS::Lambda::Function N/A 66+ Add ServerlessRestApiDeployment47fc2d5f9d AWS::ApiGateway::Deployment N/A 67+ Add ServerlessRestApiProdStage AWS::ApiGateway::Stage N/A 68+ Add ServerlessRestApi AWS::ApiGateway::RestApi N/A 69--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 70 71 72Changeset created successfully. arn:aws:cloudformation:ap-northeast-1:129824596365:changeSet/samcli-deploy1711380173/7c5b81e7-8642-4028-9362-80eb6fbe608d 73 74 75Previewing CloudFormation changeset before deployment 76====================================================== 77Deploy this changeset? [y/N]: åœ¨ Line 14 æ™‚ï¼Œæˆ‘å€‘æœ‰å‹¾é¸éœ€è¦å…ˆå¯©æ ¸é Changeset æ‰å¯ä»¥ç¹¼çºŒéƒ¨ç½²ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ–ä¸€å€‹ Stackå¾Œï¼ŒCloudFormation æœƒé¡¯ç¤ºé€™æ¬¡çš„éƒ¨ç½²æœƒä¿®æ”¹ä»€éº¼ (line 59-69)ã€‚å‰é¢æœ‰åŠ è™Ÿä»£è¡¨æ˜¯é€™æ¬¡éƒ¨ç½²æ–°å¢çš„ï¼Œè€Œæ¸›è™Ÿçš„è©±ä»£è¡¨æ˜¯åˆªé™¤çš„ã€‚ç”±æ–¼é€™æ¬¡ç¬¬ä¸€æ¬¡éƒ¨ç½²ï¼Œæ‰€ä»¥æ‰€æœ‰çš„è³‡æºè‚¯å®šéƒ½æ˜¯æ–°å¢çš„ã€‚\nè€Œåœ¨ AWS CloudFormation UI ä¸Šï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°è‰¾å€«çš„ Stack å¡åœ¨ REVIEW_IN_PROGRESS\nç•¶æˆ‘å€‘åŒæ„éƒ¨ç½²å¾Œï¼Œå°±å¯ä»¥çœ‹åˆ° CloudFormation æ­£åœ¨éƒ¨ç½²ï¼Œä¸¦ä¸”åœ¨æœ€å¾Œæœƒå°å‡ºï¼Œæˆ‘å€‘åœ¨ template.yaml æ‰€å®šç¾©çš„ output (line 32 - 47)\n1Deploy this changeset? [y/N]: y 2 32023-09-15 23:33:09 - Waiting for stack create/update to complete 4 5CloudFormation events from stack operations (refresh every 5.0 seconds) 6--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 7ResourceStatus ResourceType LogicalResourceId ResourceStatusReason 8--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 9CREATE_IN_PROGRESS AWS::CloudFormation::Stack sam-app User Initiated 10CREATE_IN_PROGRESS AWS::IAM::Role HelloWorldFunctionRole - 11CREATE_IN_PROGRESS AWS::IAM::Role HelloWorldFunctionRole Resource creation Initiated 12CREATE_COMPLETE AWS::IAM::Role HelloWorldFunctionRole - 13CREATE_IN_PROGRESS AWS::Lambda::Function HelloWorldFunction - 14CREATE_IN_PROGRESS AWS::Lambda::Function HelloWorldFunction Resource creation Initiated 15CREATE_IN_PROGRESS AWS::Lambda::Function HelloWorldFunction Eventual consistency check initiated 16CREATE_IN_PROGRESS AWS::ApiGateway::RestApi ServerlessRestApi - 17CREATE_IN_PROGRESS AWS::ApiGateway::RestApi ServerlessRestApi Resource creation Initiated 18CREATE_COMPLETE AWS::ApiGateway::RestApi ServerlessRestApi - 19CREATE_IN_PROGRESS AWS::ApiGateway::Deployment ServerlessRestApiDeployment47fc2d5f9d - 20CREATE_IN_PROGRESS AWS::Lambda::Permission HelloWorldFunctionHelloWorldPermissionProd - 21CREATE_IN_PROGRESS AWS::Lambda::Permission HelloWorldFunctionHelloWorldPermissionProd Resource creation Initiated 22CREATE_IN_PROGRESS AWS::ApiGateway::Deployment ServerlessRestApiDeployment47fc2d5f9d Resource creation Initiated 23CREATE_COMPLETE AWS::Lambda::Function HelloWorldFunction - 24CREATE_COMPLETE AWS::Lambda::Permission HelloWorldFunctionHelloWorldPermissionProd - 25CREATE_COMPLETE AWS::ApiGateway::Deployment ServerlessRestApiDeployment47fc2d5f9d - 26CREATE_IN_PROGRESS AWS::ApiGateway::Stage ServerlessRestApiProdStage - 27CREATE_IN_PROGRESS AWS::ApiGateway::Stage ServerlessRestApiProdStage Resource creation Initiated 28CREATE_COMPLETE AWS::ApiGateway::Stage ServerlessRestApiProdStage - 29CREATE_COMPLETE AWS::CloudFormation::Stack sam-app - 30--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 31 32CloudFormation outputs from deployed stack 33--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 34Outputs 35--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 36Key HelloWorldFunctionIamRole 37Description Implicit IAM Role created for Hello World function 38Value arn:aws:iam::129824596365:role/sam-app-HelloWorldFunctionRole-WOf5YCP85EX0 39 40Key HelloWorldApi 41Description API Gateway endpoint URL for Prod stage for Hello World function 42Value https://t3faydf1rb.execute-api.ap-northeast-1.amazonaws.com/Prod/hello/ 43 44Key HelloWorldFunction 45Description Hello World Lambda Function ARN 46Value arn:aws:lambda:ap-northeast-1:129824596365:function:sam-app-HelloWorldFunction-Qiut5gK4QT6I 47--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 48 49 50Successfully created/updated stack - sam-app in ap-northeast-1 å»ºç«‹çš„ Resource API Gateway åœ¨ API Gateway çš„é é¢ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ° sam-demo å·²ç¶“è¢«å»ºç«‹å¥½äº†\né»å…¥ sam-demo ä»¥å¾Œï¼Œåœ¨ resource å¯ä»¥çœ‹åˆ°æˆ‘å€‘å®šç¾©å¥½çš„ Http method Get çš„ Helloï¼Œä¸¦ä¸”å¾Œé¢å·²ç¶“ä¸²æ¥å¥½ Lambda Function\nLambda Function åœ¨ Lambda é é¢ï¼Œä¹Ÿä»¥æ¨£å¯ä»¥çœ‹åˆ°æˆ‘å€‘å‰›å‰›éƒ¨ç½²å¥½çš„ sam-app-HelloWorldFunction-Qiut5gK4QT6I é»å…¥åˆ° Lambda ï¼Œå¯ä»¥çœ‹åˆ° Code Source Sectionï¼Œå¾å·¦é‚Šçš„ Folder æˆ‘å€‘å¯ä»¥çœ‹åˆ°ç’°å¢ƒä¸­æœ‰æ ¹æ“šPackage.json æ‰€è£å¥½çš„ Library node_modulesã€‚ä¹Ÿå¯ä»¥åŒæ™‚çœ‹åˆ°æˆ‘å€‘çš„ Lambda Function Soruce codeã€‚\n","date":"October 18, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/sam-part3-deployment/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"},{"title":"SAM","url":"/tags/sam/"}],"timestamp":1697587200,"title":"SAM Part3: é›²ç«¯éƒ¨ç½²"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"SAM Local é€™é‚Šä½¿ç”¨ sam local start-api åœ¨åœ°ç«¯èµ· Lambda Function ä¾†æ¸¬è©¦ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€™é‚Šéœ€è¦æ˜¯æœƒæ˜¯åœ¨åœ°ç«¯å•Ÿå‹• Docker ï¼Œæ‰€ä»¥éœ€è¦å°‡ Docker é å…ˆå®‰è£å¥½ã€‚\n1$ sam local start-api 2 3Initializing the lambda functions containers. 4Local image is out of date and will be updated to the latest runtime. To skip this, pass in the parameter --skip-pull-image 5Building image..................................................................................................................................................................................................................................................................................................... 6Using local image: public.ecr.aws/lambda/nodejs:20-rapid-x86_64. 7 8Mounting /Users/allen/sam-app/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container 9Containers Initialization is done. 10Mounting HelloWorldFunction at http://127.0.0.1:3000/hello [GET] 11You can now browse to the above endpoints to invoke your functions. You do not need to restart/reload SAM CLI while working on your functions, 12changes will be reflected instantly/automatically. If you used sam build before running local commands, you will need to re-run sam build for 13the changes to be picked up. You only need to restart SAM CLI if you update your AWS SAM template 142024-03-24 23:43:10 WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead. 15 * Running on http://127.0.0.1:3000 162024-03-24 23:43:10 Press CTRL+C to quit ä½¿ç”¨ Curl æ¸¬è©¦ æˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼ŒSam åœ¨ local èµ·çš„ Application ä¸¦è½ 3000 port ï¼Œé€™ä½¿ç”¨å¯ä»¥ä½¿ç”¨ curl ä¾†æ¸¬è©¦ã€‚\n1$ curl http://127.0.0.1:3000/hello 2{\u0026#34;message\u0026#34;:\u0026#34;hello world\u0026#34;} è€Œåœ¨åŸæœ¬åŸ·è¡Œ sam local start-api çš„è¦–çª—ï¼Œå¯ä»¥åˆ°ä»¥ä¸‹çš„è³‡è¨Š\n1Invoking app.lambdaHandler (nodejs20.x) 2Reuse the created warm container for Lambda function \u0026#39;HelloWorldFunction\u0026#39; 3Lambda function \u0026#39;HelloWorldFunction\u0026#39; is already running 4START RequestId: 3475a269-43c0-468d-a6c9-f31fbf2c34fa Version: $LATEST 5END RequestId: 13944b37-b949-480d-865e-8e9ac1c4b0ea 6REPORT RequestId: 13944b37-b949-480d-865e-8e9ac1c4b0ea\tInit Duration: 0.06 ms\tDuration: 115.87 ms\tBilled Duration: 116 ms\tMemory Size: 128 MB\tMax Memory Used: 128 MB 7 8No Content-Type given. Defaulting to \u0026#39;application/json\u0026#39;. 92024-03-24 23:45:16 127.0.0.1 - - [24/Mar/2024 23:45:16] \u0026#34;GET /hello HTTP/1.1\u0026#34; 200 - é€™é‚Šå¯ä»¥é‚„å¯ä»¥æ¸…æ¥šçœ‹åˆ°ï¼ŒåŸ·è¡Œæ™‚é–“ï¼Œå’Œæ”¶è²»æ™‚é–“ã€‚é›–ç„¶ Local çš„ç¡¬é«”è¦æ ¼å’Œ AWS ä¸Šçš„æ©Ÿå™¨ä¸åŒï¼Œä½†é‚„å¯ä»¥ä½œç‚ºç°¡å–®åƒè€ƒã€‚\næ’æ——é™¤éŒ¯ åœ¨ç™¼ä¸­éç¨‹ä¸­ï¼Œæ’æ——é™¤éŒ¯æ˜¯æœ€å¸¸è¦‹çš„ï¼Œæˆ‘åœ¨ app.mjs æ’å…¥ Line2 å°‡ Event å°å‡ºä¾†ï¼Œä½†ä¿®æ”¹å¾Œç›´æ¥åŸ·è¡Œ sam local start-api ï¼Œåœ¨ Terminal ä¸­çš„è¨Šæ¯ï¼Œçœ‹ä¸åˆ°å‰›å‰›çš„ Logã€‚\n1export const lambdaHandler = async (event, context) =\u0026gt; { 2 console.log(\u0026#34;EVENT: \\n\u0026#34; + JSON.stringify(event, null, 2)); 3 const response = { 4 statusCode: 200, 5 body: JSON.stringify({ 6 message: \u0026#39;hello world\u0026#39;, 7 }) 8 }; 9 10 return response; 11 }; ä¹‹å‰åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« æœ‰æé sam build ï¼Œsam local æ˜¯è·‘ build å®Œä»¥å¾Œçš„çµæœï¼Œæ‰€ä»¥ç›´æ¥æ”¹ source code æ²’æœ‰é‡æ–° build æ˜¯ç„¡æ³•ç”Ÿæ•ˆçš„ã€‚\nä»¥ä¸‹æ˜¯é‡æ–° Build å®Œä»¥å¾Œçš„çµæœã€‚\n1Invoking app.lambdaHandler (nodejs20.x) 2Reuse the created warm container for Lambda function \u0026#39;HelloWorldFunction\u0026#39; 3Lambda function \u0026#39;HelloWorldFunction\u0026#39; is already running 4{\u0026#34;timestamp\u0026#34;:\u0026#34;2024-03-24T16:08:27.280Z\u0026#34;,\u0026#34;level\u0026#34;:\u0026#34;INFO\u0026#34;,\u0026#34;requestId\u0026#34;:\u0026#34;fa7a5020-efc9-4791-aaf3-1c9951aaa65a\u0026#34;,\u0026#34;message\u0026#34;:\u0026#34;EVENT: \\n{\\n \\\u0026#34;body\\\u0026#34;: null,\\n \\\u0026#34;headers\\\u0026#34;: {\\n \\\u0026#34;Accept\\\u0026#34;: \\\u0026#34;*/*\\\u0026#34;,\\n \\\u0026#34;Host\\\u0026#34;: \\\u0026#34;127.0.0.1:3000\\\u0026#34;,\\n \\\u0026#34;User-Agent\\\u0026#34;: \\\u0026#34;curl/7.79.1\\\u0026#34;,\\n \\\u0026#34;X-Forwarded-Port\\\u0026#34;: \\\u0026#34;3000\\\u0026#34;,\\n \\\u0026#34;X-Forwarded-Proto\\\u0026#34;: \\\u0026#34;http\\\u0026#34;\\n },\\n \\\u0026#34;httpMethod\\\u0026#34;: \\\u0026#34;GET\\\u0026#34;,\\n \\\u0026#34;isBase64Encoded\\\u0026#34;: false,\\n \\\u0026#34;multiValueHeaders\\\u0026#34;: {\\n \\\u0026#34;Accept\\\u0026#34;: [\\n \\\u0026#34;*/*\\\u0026#34;\\n ],\\n \\\u0026#34;Host\\\u0026#34;: [\\n \\\u0026#34;127.0.0.1:3000\\\u0026#34;\\n ],\\n \\\u0026#34;User-Agent\\\u0026#34;: [\\n \\\u0026#34;curl/7.79.1\\\u0026#34;\\n ],\\n \\\u0026#34;X-Forwarded-Port\\\u0026#34;: [\\n \\\u0026#34;3000\\\u0026#34;\\n ],\\n \\\u0026#34;X-Forwarded-Proto\\\u0026#34;: [\\n \\\u0026#34;http\\\u0026#34;\\n ]\\n },\\n \\\u0026#34;multiValueQueryStringParameters\\\u0026#34;: null,\\n \\\u0026#34;path\\\u0026#34;: \\\u0026#34;/hello\\\u0026#34;,\\n \\\u0026#34;pathParameters\\\u0026#34;: null,\\n \\\u0026#34;queryStringParameters\\\u0026#34;: null,\\n \\\u0026#34;requestContext\\\u0026#34;: {\\n \\\u0026#34;accountId\\\u0026#34;: \\\u0026#34;123456789012\\\u0026#34;,\\n \\\u0026#34;apiId\\\u0026#34;: \\\u0026#34;1234567890\\\u0026#34;,\\n \\\u0026#34;domainName\\\u0026#34;: \\\u0026#34;127.0.0.1:3000\\\u0026#34;,\\n \\\u0026#34;extendedRequestId\\\u0026#34;: null,\\n \\\u0026#34;httpMethod\\\u0026#34;: \\\u0026#34;GET\\\u0026#34;,\\n \\\u0026#34;identity\\\u0026#34;: {\\n \\\u0026#34;accountId\\\u0026#34;: null,\\n \\\u0026#34;apiKey\\\u0026#34;: null,\\n \\\u0026#34;caller\\\u0026#34;: null,\\n \\\u0026#34;cognitoAuthenticationProvider\\\u0026#34;: null,\\n \\\u0026#34;cognitoAuthenticationType\\\u0026#34;: null,\\n \\\u0026#34;cognitoIdentityPoolId\\\u0026#34;: null,\\n \\\u0026#34;sourceIp\\\u0026#34;: \\\u0026#34;127.0.0.1\\\u0026#34;,\\n \\\u0026#34;user\\\u0026#34;: null,\\n \\\u0026#34;userAgent\\\u0026#34;: \\\u0026#34;Custom User Agent String\\\u0026#34;,\\n \\\u0026#34;userArn\\\u0026#34;: null\\n },\\n \\\u0026#34;path\\\u0026#34;: \\\u0026#34;/hello\\\u0026#34;,\\n \\\u0026#34;protocol\\\u0026#34;: \\\u0026#34;HTTP/1.1\\\u0026#34;,\\n \\\u0026#34;requestId\\\u0026#34;: \\\u0026#34;ce8b7da4-94ef-42c9-a09a-d06a3d5d5fb2\\\u0026#34;,\\n \\\u0026#34;requestTime\\\u0026#34;: \\\u0026#34;24/Mar/2024:16:08:20 +0000\\\u0026#34;,\\n \\\u0026#34;requestTimeEpoch\\\u0026#34;: 1711296500,\\n \\\u0026#34;resourceId\\\u0026#34;: \\\u0026#34;123456\\\u0026#34;,\\n \\\u0026#34;resourcePath\\\u0026#34;: \\\u0026#34;/hello\\\u0026#34;,\\n \\\u0026#34;stage\\\u0026#34;: \\\u0026#34;Prod\\\u0026#34;\\n },\\n \\\u0026#34;resource\\\u0026#34;: \\\u0026#34;/hello\\\u0026#34;,\\n \\\u0026#34;stageVariables\\\u0026#34;: null\\n}\u0026#34;} 5END RequestId: fa7a5020-efc9-4791-aaf3-1c9951aaa65a 6REPORT RequestId: fa7a5020-efc9-4791-aaf3-1c9951aaa65a\tInit Duration: 0.46 ms\tDuration: 170.95 ms\tBilled Duration: 171 ms\tMemory Size: 128 MB\tMax Memory Used: 128 MB 7 8No Content-Type given. Defaulting to \u0026#39;application/json\u0026#39;. 92024-03-25 00:08:27 127.0.0.1 - - [25/Mar/2024 00:08:27] \u0026#34;GET /hello HTTP/1.1\u0026#34; 200 - æ¸¬è©¦å–®å€‹å‡½å¼ åœ¨ Application çš„é–‹ç™¼ä¸­ï¼Œç¨‹å¼æœƒéš¨è‘—æ™‚é–“è¶Šä¾†è¶Šè‚¥ï¼Œç›´æ¥è·‘èµ·æ•´å€‹ Application æ‰€èŠ±è²»çš„æ™‚é–“ä¹Ÿæœƒè¶Šä¾†è¶Šå¤šã€‚Sam æä¾›äº†å¯ä»¥å–®ç´”æ¸¬è©¦æŸå€‹å‡½å¼çš„åŠŸèƒ½ï¼Œé€™æ¨£å°±ä¸ç”¨å•Ÿæ•´å€‹ Application\n1$ sam local invoke HelloWorldFunction --event events/event. 2Invoking app.lambdaHandler (nodejs20.x) 3Local image is up-to-date 4Using local image: public.ecr.aws/lambda/nodejs:20-rapid-x86_64. 5 6Mounting /Users/allen/sam-app/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated, inside runtime container 7{\u0026#34;timestamp\u0026#34;:\u0026#34;2024-03-24T16:10:18.482Z\u0026#34;,\u0026#34;level\u0026#34;:\u0026#34;INFO\u0026#34;,\u0026#34;requestId\u0026#34;:\u0026#34;61c9bf38-f46f-4906-9c25-0d5f77bac250\u0026#34;,\u0026#34;message\u0026#34;:\u0026#34;EVENT: \\n{\\n \\\u0026#34;body\\\u0026#34;: \\\u0026#34;{\\\\\\\u0026#34;message\\\\\\\u0026#34;: \\\\\\\u0026#34;hello world\\\\\\\u0026#34;}\\\u0026#34;,\\n \\\u0026#34;resource\\\u0026#34;: \\\u0026#34;/{proxy+}\\\u0026#34;,\\n \\\u0026#34;path\\\u0026#34;: \\\u0026#34;/path/to/resource\\\u0026#34;,\\n \\\u0026#34;httpMethod\\\u0026#34;: \\\u0026#34;POST\\\u0026#34;,\\n \\\u0026#34;isBase64Encoded\\\u0026#34;: false,\\n \\\u0026#34;queryStringParameters\\\u0026#34;: {\\n \\\u0026#34;foo\\\u0026#34;: \\\u0026#34;bar\\\u0026#34;\\n },\\n \\\u0026#34;pathParameters\\\u0026#34;: {\\n \\\u0026#34;proxy\\\u0026#34;: \\\u0026#34;/path/to/resource\\\u0026#34;\\n },\\n \\\u0026#34;stageVariables\\\u0026#34;: {\\n \\\u0026#34;baz\\\u0026#34;: \\\u0026#34;qux\\\u0026#34;\\n },\\n \\\u0026#34;headers\\\u0026#34;: {\\n \\\u0026#34;Accept\\\u0026#34;: \\\u0026#34;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\\\u0026#34;,\\n \\\u0026#34;Accept-Encoding\\\u0026#34;: \\\u0026#34;gzip, deflate, sdch\\\u0026#34;,\\n \\\u0026#34;Accept-Language\\\u0026#34;: \\\u0026#34;en-US,en;q=0.8\\\u0026#34;,\\n \\\u0026#34;Cache-Control\\\u0026#34;: \\\u0026#34;max-age=0\\\u0026#34;,\\n \\\u0026#34;CloudFront-Forwarded-Proto\\\u0026#34;: \\\u0026#34;https\\\u0026#34;,\\n \\\u0026#34;CloudFront-Is-Desktop-Viewer\\\u0026#34;: \\\u0026#34;true\\\u0026#34;,\\n \\\u0026#34;CloudFront-Is-Mobile-Viewer\\\u0026#34;: \\\u0026#34;false\\\u0026#34;,\\n \\\u0026#34;CloudFront-Is-SmartTV-Viewer\\\u0026#34;: \\\u0026#34;false\\\u0026#34;,\\n \\\u0026#34;CloudFront-Is-Tablet-Viewer\\\u0026#34;: \\\u0026#34;false\\\u0026#34;,\\n \\\u0026#34;CloudFront-Viewer-Country\\\u0026#34;: \\\u0026#34;US\\\u0026#34;,\\n \\\u0026#34;Host\\\u0026#34;: \\\u0026#34;1234567890.execute-api.us-east-1.amazonaws.com\\\u0026#34;,\\n \\\u0026#34;Upgrade-Insecure-Requests\\\u0026#34;: \\\u0026#34;1\\\u0026#34;,\\n \\\u0026#34;User-Agent\\\u0026#34;: \\\u0026#34;Custom User Agent String\\\u0026#34;,\\n \\\u0026#34;Via\\\u0026#34;: \\\u0026#34;1.1 08f323deadbeefa7af34d5feb414ce27.cloudfront.net (CloudFront)\\\u0026#34;,\\n \\\u0026#34;X-Amz-Cf-Id\\\u0026#34;: \\\u0026#34;cDehVQoZnx43VYQb9j2-nvCh-9z396Uhbp027Y2JvkCPNLmGJHqlaA==\\\u0026#34;,\\n \\\u0026#34;X-Forwarded-For\\\u0026#34;: \\\u0026#34;127.0.0.1, 127.0.0.2\\\u0026#34;,\\n \\\u0026#34;X-Forwarded-Port\\\u0026#34;: \\\u0026#34;443\\\u0026#34;,\\n \\\u0026#34;X-Forwarded-Proto\\\u0026#34;: \\\u0026#34;https\\\u0026#34;\\n },\\n \\\u0026#34;requestContext\\\u0026#34;: {\\n \\\u0026#34;accountId\\\u0026#34;: \\\u0026#34;123456789012\\\u0026#34;,\\n \\\u0026#34;resourceId\\\u0026#34;: \\\u0026#34;123456\\\u0026#34;,\\n \\\u0026#34;stage\\\u0026#34;: \\\u0026#34;prod\\\u0026#34;,\\n \\\u0026#34;requestId\\\u0026#34;: \\\u0026#34;c6af9ac6-7b61-11e6-9a41-93e8deadbeef\\\u0026#34;,\\n \\\u0026#34;requestTime\\\u0026#34;: \\\u0026#34;09/Apr/2015:12:34:56 +0000\\\u0026#34;,\\n \\\u0026#34;requestTimeEpoch\\\u0026#34;: 1428582896000,\\n \\\u0026#34;identity\\\u0026#34;: {\\n \\\u0026#34;cognitoIdentityPoolId\\\u0026#34;: null,\\n \\\u0026#34;accountId\\\u0026#34;: null,\\n \\\u0026#34;cognitoIdentityId\\\u0026#34;: null,\\n \\\u0026#34;caller\\\u0026#34;: null,\\n \\\u0026#34;accessKey\\\u0026#34;: null,\\n \\\u0026#34;sourceIp\\\u0026#34;: \\\u0026#34;127.0.0.1\\\u0026#34;,\\n \\\u0026#34;cognitoAuthenticationType\\\u0026#34;: null,\\n \\\u0026#34;cognitoAuthenticationProvider\\\u0026#34;: null,\\n \\\u0026#34;userArn\\\u0026#34;: null,\\n \\\u0026#34;userAgent\\\u0026#34;: \\\u0026#34;Custom User Agent String\\\u0026#34;,\\n \\\u0026#34;user\\\u0026#34;: null\\n },\\n \\\u0026#34;path\\\u0026#34;: \\\u0026#34;/prod/path/to/resource\\\u0026#34;,\\n \\\u0026#34;resourcePath\\\u0026#34;: \\\u0026#34;/{proxy+}\\\u0026#34;,\\n \\\u0026#34;httpMethod\\\u0026#34;: \\\u0026#34;POST\\\u0026#34;,\\n \\\u0026#34;apiId\\\u0026#34;: \\\u0026#34;1234567890\\\u0026#34;,\\n \\\u0026#34;protocol\\\u0026#34;: \\\u0026#34;HTTP/1.1\\\u0026#34;\\n }\\n}\u0026#34;} 8END RequestId: 61c9bf38-f46f-4906-9c25-0d5f77bac250 9REPORT RequestId: 61c9bf38-f46f-4906-9c25-0d5f77bac250\tInit Duration: 0.07 ms\tDuration: 171.48 ms\tBilled Duration: 172 ms\tMemory Size: 128 MB\tMax Memory Used: 128 MB 10{\u0026#34;statusCode\u0026#34;: 200, \u0026#34;body\u0026#34;: \u0026#34;{\\\u0026#34;message\\\u0026#34;:\\\u0026#34;hello world\\\u0026#34;}\u0026#34;} ","date":"September 20, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/sam-part2-local-testing/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"},{"title":"SAM","url":"/tags/sam/"}],"timestamp":1695168000,"title":"SAM Part2: åœ°ç«¯æ¸¬è©¦"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"SAM Initialization é€™é‚Šä½¿ç”¨ sam init ä¾†åˆå§‹åŒ–å°ˆæ¡ˆã€‚\n1$ sam init 2 3You can preselect a particular runtime or package type when using the `sam init` experience. 4Call `sam init --help` to learn more. 5 6Which template source would you like to use? 7\t1 - AWS Quick Start Templates 8\t2 - Custom Template Location 9Choice: 1 10 11Choose an AWS Quick Start application template 12\t1 - Hello World Example 13\t2 - Data processing 14\t3 - Hello World Example with Powertools for AWS Lambda 15\t4 - Multi-step workflow 16\t5 - Scheduled task 17\t6 - Standalone function 18\t7 - Serverless API 19\t8 - Infrastructure event management 20\t9 - Lambda Response Streaming 21\t10 - Serverless Connector Hello World Example 22\t11 - Multi-step workflow with Connectors 23\t12 - GraphQLApi Hello World Example 24\t13 - Full Stack 25\t14 - Lambda EFS example 26\t15 - Hello World Example With Powertools for AWS Lambda 27\t16 - DynamoDB Example 28\t17 - Machine Learning 29Template: 1 30 31# ç›®å‰å®˜æ–¹é è¨­æœ€å¸¸ç”¨çš„èªè¨€é–‹ç™¼äº‹ Python ï¼Œæ‰€ä»¥è¦é¸æ“‡ N ä»¥å¾Œï¼Œæ‰å¯ä»¥é¸å…¶ä»–èªè¨€ 32Use the most popular runtime and package type? (Python and zip) [y/N]: N 33 34Which runtime would you like to use? 35\t1 - aot.dotnet7 (provided.al2) 36\t2 - dotnet8 37\t3 - dotnet6 38\t4 - go1.x 39\t5 - go (provided.al2) 40\t6 - go (provided.al2023) 41\t7 - graalvm.java11 (provided.al2) 42\t8 - graalvm.java17 (provided.al2) 43\t9 - java21 44\t10 - java17 45\t11 - java11 46\t12 - java8.al2 47\t13 - nodejs20.x 48\t14 - nodejs18.x 49\t15 - nodejs16.x 50\t16 - python3.9 51\t17 - python3.8 52\t18 - python3.12 53\t19 - python3.11 54\t20 - python3.10 55\t21 - ruby3.2 56\t22 - rust (provided.al2) 57\t23 - rust (provided.al2023) 58Runtime: 13 59 60What package type would you like to use? 61\t1 - Zip 62\t2 - Image 63Package type: 1 64 65Based on your selections, the only dependency manager available is npm. 66We will proceed copying the template using npm. 67 68Select your starter template 69\t1 - Hello World Example 70\t2 - Hello World Example TypeScript 71Template: 1 72 73Would you like to enable X-Ray tracing on the function(s) in your application? [y/N]: y 74X-Ray will incur an additional cost. View https://aws.amazon.com/xray/pricing/ for more details 75 76Would you like to enable monitoring using CloudWatch Application Insights? 77For more info, please view https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch-application-insights.html [y/N]: N 78 79Would you like to set Structured Logging in JSON format on your Lambda functions? [y/N]: y 80Structured Logging in JSON format might incur an additional cost. View https://docs.aws.amazon.com/lambda/latest/dg/monitoring-cloudwatchlogs.html#monitoring-cloudwatchlogs-pricing for more details 81 82Project name [sam-app]: 83 84 ----------------------- 85 Generating application: 86 ----------------------- 87 Name: sam-app 88 Runtime: nodejs20.x 89 Architectures: x86_64 90 Dependency Manager: npm 91 Application Template: hello-world 92 Output Directory: . 93 Configuration file: sam-app/samconfig.toml 94 95 Next steps can be found in the README file at sam-app/README.md 96 97 98Commands you can use next 99========================= 100[*] Create pipeline: cd sam-app \u0026amp;\u0026amp; sam pipeline init --bootstrap 101[*] Validate SAM template: cd sam-app \u0026amp;\u0026amp; sam validate 102[*] Test Function in the Cloud: cd sam-app \u0026amp;\u0026amp; sam sync --stack-name {stack-name} --watch æª”æ¡ˆçµæ§‹ event.json: ç”¨ä¾†æ¸¬è©¦ Labmda çš„ app.mjs: Lambda Function åŸå§‹ç¢¼ package.json: NPM ç”¨ä¾†ç®¡ç† Package çš„æª”æ¡ˆ test-handler: Lambda Unit Test samconfig.toml: SAM CLI çš„è¨­å®šæª”æ¡ˆ template.ymal: Infrastructure as code æ¶æ§‹çš„å®šç¾©æª”æ¡ˆ 1. 2â”œâ”€â”€ README.md 3â”œâ”€â”€ __init__.py 4â”œâ”€â”€ events 5â”‚Â â””â”€â”€ event.json 6â”œâ”€â”€ hello_world 7â”‚Â â”œâ”€â”€ __init__.py 8â”‚Â â”œâ”€â”€ app.py 9â”‚Â â””â”€â”€ requirements.txt 10â”œâ”€â”€ samconfig.toml 11â”œâ”€â”€ template.yaml 12â””â”€â”€ tests 13 â”œâ”€â”€ __init__.py 14 â”œâ”€â”€ integration 15 â”‚Â â”œâ”€â”€ __init__.py 16 â”‚Â â””â”€â”€ test_api_gateway.py 17 â”œâ”€â”€ requirements.txt 18 â””â”€â”€ unit 19 â”œâ”€â”€ __init__.py 20 â””â”€â”€ test_handler.py Template YAML AWSTemplateFormatVersion: AWS CloudFormation çš„ Version Transform: å‘Šè¨´ CloudFormation é€™æ˜¯ SAM çš„æ ¼å¼ YAML Global: é€™é‚Šæ˜¯é‡å°æŸäº›æœå‹™è³‡æºï¼Œå…±åŒè¨­å®šï¼Œåƒ Function çš„ Tracing: Active å°±æ˜¯å°å…¨éƒ¨çš„ Lambda é–‹å•Ÿ X-Ray Reousrce: é€™é‚Šå°±æ˜¯å»ºç«‹ AWS ä¸Šçš„è³‡æºï¼Œ SAM è·Ÿ CloudFormation çš„å®šç¾©æœ‰å·®åˆ¥ï¼Œä¸‹é¢æœƒé™„ä¸Šç°¡æ˜“å·®åˆ¥åœ–ï¼Œè©³ç´°è³‡è¨Šå¯åƒè€ƒå®˜ç¶² Type æ˜¯ Function å°±æ˜¯æˆ‘å€‘å¯¦éš›çš„ Lambda Function CodeUri: æ˜¯ resource code å­˜æ”¾ä½ç½®çš„è·¯å¾‘ Handler: é€™é‚Šæ˜¯ filename.functionName çš„æ ¼å¼ 1AWSTemplateFormatVersion: \u0026#39;2010-09-09\u0026#39; 2Transform: AWS::Serverless-2016-10-31 3Description: \u0026gt; 4 sam-app 5 Sample SAM Template for sam-app 6 7Globals: 8 Function: 9 Timeout: 3 10 MemorySize: 128 11 Tracing: Active 12 LoggingConfig: 13 LogFormat: JSON 14 Api: 15 TracingEnabled: true 16Resources: 17 HelloWorldFunction: 18 Type: AWS::Serverless::Function 19 Properties: 20 CodeUri: hello_world/ 21 Handler: app.lambda_handler 22 Runtime: python3.9 23 Architectures: 24 - x86_64 25 Events: 26 HelloWorld: 27 Type: Api 28 Properties: 29 Path: /hello 30 Method: get 31 32Outputs: 33 HelloWorldApi: 34 Description: API Gateway endpoint URL for Prod stage for Hello World function 35 Value: !Sub \u0026#34;https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/hello/\u0026#34; 36 HelloWorldFunction: 37 Description: Hello World Lambda Function ARN 38 Value: !GetAtt HelloWorldFunction.Arn 39 HelloWorldFunctionIamRole: 40 Description: Implicit IAM Role created for Hello World function 41 Value: !GetAtt HelloWorldFunctionRole.Arn CloudFormation vs SAM Resource é©—è­‰ Template AWS Sam æä¾›äº† sam validate å»é©—è­‰ template æ˜¯å¦æœ‰å•é¡Œ\n1$ sam validate 2 3/Users/allen/sam-app/template.yaml is a valid SAM Template å¦‚æœæˆ‘æ•…æ„åœ¨ template è£¡é¢å¯«æ²’æœ‰å­˜åœ¨çš„ Typeï¼Œæœƒå‡ºç¾ä»¥ä¸‹éŒ¯èª¤\n1$ sam validate 2 3E0001 Error transforming template: Resource with id [HelloWorldFunction] is invalid. Event with id [HelloWorld] is invalid. Resource dict has missing or invalid value for key Type. Event Type is: Api1. 4/Users/allen/sam-app/template.yaml:1:1 5 6Error: Linting failed. At least one linting rule was matched to the provided template. Lambda Function 1export const lambdaHandler = async (event, context) =\u0026gt; { 2 const response = { 3 statusCode: 200, 4 body: JSON.stringify({ 5 message: \u0026#39;hello world\u0026#39;, 6 }) 7 }; 8 9 return response; 10 }; Build Package é€™é‚Šä½¿ç”¨ sam build ä¾†å»ºç«‹ package\n1$ sam build 2 3Starting Build use cache 4Manifest file is changed (new hash: c0e83ff3ce1bd02a0c2a7c02974c24ec) or dependency folder (.aws-sam/deps/1d492548-0d35-49f3-af42-0252668aa785) is missing for (HelloWorldFunction), downloading 5dependencies and copying/building source 6Building codeuri: /Users/allen/sam-app/hello-world runtime: nodejs20.x metadata: {} architecture: x86_64 functions: HelloWorldFunction 7 Running NodejsNpmBuilder:NpmPack 8 Running NodejsNpmBuilder:CopyNpmrcAndLockfile 9 Running NodejsNpmBuilder:CopySource 10 Running NodejsNpmBuilder:NpmInstall 11 Running NodejsNpmBuilder:CleanUp 12 Running NodejsNpmBuilder:CopyDependencies 13 Running NodejsNpmBuilder:CleanUpNpmrc 14 Running NodejsNpmBuilder:LockfileCleanUp 15 Running NodejsNpmBuilder:LockfileCleanUp 16 17Build Succeeded 18 19Built Artifacts : .aws-sam/build 20Built Template : .aws-sam/build/template.yaml 21 22Commands you can use next 23========================= 24[*] Validate SAM template: sam validate 25[*] Invoke Function: sam local invoke 26[*] Test Function in the Cloud: sam sync --stack-name {{stack-name}} --watch 27[*] Deploy: sam deploy --guided æ¥è‘—æœƒåœ¨ local ç”¢ç”Ÿ .aws-sam/build è³‡æ–™å¤¾ã€‚ åœ¨è³‡æ–™å¤¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ° node_modules çš„è³‡æ–™ï¼Œæˆ‘å€‘å®šç¾©åœ¨ Package.json çš„ modules éƒ½æœƒä¸‹è¼‰åˆ°é€™\n1$ tree .aws-sam/build 2 3.aws-sam/build 4â”œâ”€â”€ HelloWorldFunction 5â”‚Â â”œâ”€â”€ app.mjs 6â”‚Â â”œâ”€â”€ node_modules 7â”‚Â â”‚Â â”œâ”€â”€ asynckit 8â”‚Â â”‚Â â”‚Â â”œâ”€â”€ LICENSE 9â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 10â”‚Â â”‚Â â”‚Â â”œâ”€â”€ bench.js 11â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.js 12â”‚Â â”‚Â â”‚Â â”œâ”€â”€ lib 13â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ abort.js 14â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ async.js 15â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ defer.js 16â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ iterate.js 17â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ readable_asynckit.js 18â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ readable_parallel.js 19â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ readable_serial.js 20â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ readable_serial_ordered.js 21â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ state.js 22â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ streamify.js 23â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ terminator.js 24â”‚Â â”‚Â â”‚Â â”œâ”€â”€ package.json 25â”‚Â â”‚Â â”‚Â â”œâ”€â”€ parallel.js 26â”‚Â â”‚Â â”‚Â â”œâ”€â”€ serial.js 27â”‚Â â”‚Â â”‚Â â”œâ”€â”€ serialOrdered.js 28â”‚Â â”‚Â â”‚Â â””â”€â”€ stream.js 29â”‚Â â”‚Â â”œâ”€â”€ axios 30â”‚Â â”‚Â â”‚Â â”œâ”€â”€ CHANGELOG.md 31â”‚Â â”‚Â â”‚Â â”œâ”€â”€ LICENSE 32â”‚Â â”‚Â â”‚Â â”œâ”€â”€ MIGRATION_GUIDE.md 33â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 34â”‚Â â”‚Â â”‚Â â”œâ”€â”€ SECURITY.md 35â”‚Â â”‚Â â”‚Â â”œâ”€â”€ dist 36â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.js 37â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.js.map 38â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.min.js 39â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.min.js.map 40â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ browser 41â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.cjs 42â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ axios.cjs.map 43â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ esm 44â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.js 45â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.js.map 46â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.min.js 47â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ axios.min.js.map 48â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ node 49â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.cjs 50â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ axios.cjs.map 51â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.d.cts 52â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.d.ts 53â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.js 54â”‚Â â”‚Â â”‚Â â”œâ”€â”€ lib 55â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ adapters 56â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 57â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ adapters.js 58â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ http.js 59â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ xhr.js 60â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ axios.js 61â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ cancel 62â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ CancelToken.js 63â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ CanceledError.js 64â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ isCancel.js 65â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ core 66â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ Axios.js 67â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ AxiosError.js 68â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ AxiosHeaders.js 69â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ InterceptorManager.js 70â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 71â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ buildFullPath.js 72â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ dispatchRequest.js 73â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ mergeConfig.js 74â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ settle.js 75â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ transformData.js 76â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ defaults 77â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.js 78â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ transitional.js 79â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ env 80â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 81â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ classes 82â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ FormData.js 83â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ data.js 84â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ helpers 85â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ AxiosTransformStream.js 86â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ AxiosURLSearchParams.js 87â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ HttpStatusCode.js 88â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 89â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ ZlibHeaderTransformStream.js 90â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ bind.js 91â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ buildURL.js 92â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ callbackify.js 93â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ combineURLs.js 94â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ cookies.js 95â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ deprecatedMethod.js 96â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ formDataToJSON.js 97â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ formDataToStream.js 98â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ fromDataURI.js 99â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ isAbsoluteURL.js 100â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ isAxiosError.js 101â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ isURLSameOrigin.js 102â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ null.js 103â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ parseHeaders.js 104â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ parseProtocol.js 105â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ readBlob.js 106â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ speedometer.js 107â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ spread.js 108â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ throttle.js 109â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ toFormData.js 110â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ toURLEncodedForm.js 111â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ validator.js 112â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ platform 113â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ browser 114â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ classes 115â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ Blob.js 116â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ FormData.js 117â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ URLSearchParams.js 118â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ index.js 119â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ common 120â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ utils.js 121â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.js 122â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ node 123â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ classes 124â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ FormData.js 125â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ URLSearchParams.js 126â”‚Â â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ index.js 127â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ utils.js 128â”‚Â â”‚Â â”‚Â â””â”€â”€ package.json 129â”‚Â â”‚Â â”œâ”€â”€ combined-stream 130â”‚Â â”‚Â â”‚Â â”œâ”€â”€ License 131â”‚Â â”‚Â â”‚Â â”œâ”€â”€ Readme.md 132â”‚Â â”‚Â â”‚Â â”œâ”€â”€ lib 133â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ combined_stream.js 134â”‚Â â”‚Â â”‚Â â”œâ”€â”€ package.json 135â”‚Â â”‚Â â”‚Â â””â”€â”€ yarn.lock 136â”‚Â â”‚Â â”œâ”€â”€ delayed-stream 137â”‚Â â”‚Â â”‚Â â”œâ”€â”€ License 138â”‚Â â”‚Â â”‚Â â”œâ”€â”€ Makefile 139â”‚Â â”‚Â â”‚Â â”œâ”€â”€ Readme.md 140â”‚Â â”‚Â â”‚Â â”œâ”€â”€ lib 141â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ delayed_stream.js 142â”‚Â â”‚Â â”‚Â â””â”€â”€ package.json 143â”‚Â â”‚Â â”œâ”€â”€ follow-redirects 144â”‚Â â”‚Â â”‚Â â”œâ”€â”€ LICENSE 145â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 146â”‚Â â”‚Â â”‚Â â”œâ”€â”€ debug.js 147â”‚Â â”‚Â â”‚Â â”œâ”€â”€ http.js 148â”‚Â â”‚Â â”‚Â â”œâ”€â”€ https.js 149â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.js 150â”‚Â â”‚Â â”‚Â â””â”€â”€ package.json 151â”‚Â â”‚Â â”œâ”€â”€ form-data 152â”‚Â â”‚Â â”‚Â â”œâ”€â”€ License 153â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md.bak 154â”‚Â â”‚Â â”‚Â â”œâ”€â”€ Readme.md 155â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.d.ts 156â”‚Â â”‚Â â”‚Â â”œâ”€â”€ lib 157â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ browser.js 158â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ form_data.js 159â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ populate.js 160â”‚Â â”‚Â â”‚Â â””â”€â”€ package.json 161â”‚Â â”‚Â â”œâ”€â”€ mime-db 162â”‚Â â”‚Â â”‚Â â”œâ”€â”€ HISTORY.md 163â”‚Â â”‚Â â”‚Â â”œâ”€â”€ LICENSE 164â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 165â”‚Â â”‚Â â”‚Â â”œâ”€â”€ db.json 166â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.js 167â”‚Â â”‚Â â”‚Â â””â”€â”€ package.json 168â”‚Â â”‚Â â”œâ”€â”€ mime-types 169â”‚Â â”‚Â â”‚Â â”œâ”€â”€ HISTORY.md 170â”‚Â â”‚Â â”‚Â â”œâ”€â”€ LICENSE 171â”‚Â â”‚Â â”‚Â â”œâ”€â”€ README.md 172â”‚Â â”‚Â â”‚Â â”œâ”€â”€ index.js 173â”‚Â â”‚Â â”‚Â â””â”€â”€ package.json 174â”‚Â â”‚Â â””â”€â”€ proxy-from-env 175â”‚Â â”‚Â â”œâ”€â”€ LICENSE 176â”‚Â â”‚Â â”œâ”€â”€ README.md 177â”‚Â â”‚Â â”œâ”€â”€ index.js 178â”‚Â â”‚Â â”œâ”€â”€ package.json 179â”‚Â â”‚Â â””â”€â”€ test.js 180â”‚Â â””â”€â”€ package.json 181â””â”€â”€ template.yaml ","date":"August 9, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/sam-part1-init-node-project/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"},{"title":"SAM","url":"/tags/sam/"}],"timestamp":1691539200,"title":"SAM Part1: Node å°ˆæ¡ˆåˆå§‹åŒ–"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"ä»€éº¼æ˜¯ç„¡ä¼ºæœå™¨æœå‹™ ç„¡ä¼ºæœå™¨æœå‹™æ˜¯ä¸€ç¨®é›²çš„æ¶æ§‹ï¼Œå°‡æ‡‰ç”¨ç¨‹å¼çš„éƒ¨ç½²å’Œç®¡ç†æŠ½è±¡åŒ–ï¼Œè®“é–‹ç™¼è€…å¯ä»¥å°ˆå¿ƒçš„é–‹ç™¼æ‡‰ç”¨ç¨‹å¼ã€‚\nä»¥ä¸‹åœ–ç‚ºä¾‹ On Premiseï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰ï¼š åœ¨æœ¬åœ°éƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„ç¡¬é«”å’Œè»Ÿé«”éƒ½ç”±è‡ªå·±å’Œç®¡ç†ã€‚ éœ€è¦è² è²¬ç¡¬é«”çš„è³¼è²·ã€é…ç½®ã€ç¶­è­·å’Œæ›´æ–°ï¼Œä»¥åŠè»Ÿé«”çš„å®‰è£ã€é…ç½®å’Œæ›´æ–°ã€‚ æœ¬åœ°éƒ¨ç½²æä¾›äº†æœ€å¤§çš„æ§åˆ¶æ¬Šï¼Œä½†ä¹Ÿéœ€è¦æ›´å¤šçš„è³‡æºå’Œæˆæœ¬é€²è¡Œç®¡ç†å’Œç¶­è­·ã€‚ Infrastructure as a service/IaaSï¼ˆåŸºç¤è¨­æ–½å³æœå‹™ï¼‰ åœ¨IaaSæ¨¡å¼ä¸‹ï¼Œé›²ä¾›æ‡‰å•†æä¾›è™›æ“¬åŒ–çš„è¨ˆç®—è³‡æºï¼ŒåŒ…æ‹¬è™›æ“¬æ©Ÿå™¨ã€å„²å­˜ç©ºé–“å’Œç¶²è·¯ã€‚ ä½¿ç”¨è€…å¯ä»¥é€šéé›²ç«¯ç®¡ç†æ§åˆ¶å°æˆ–APIä¾†ç®¡ç†é€™äº›è¨ˆç®—è³‡æºï¼ŒåŒ…æ‹¬å•Ÿå‹•ã€åœæ­¢ã€èª¿æ•´è¦æ¨¡ç­‰æ“ä½œã€‚ ä½¿ç”¨è€…è² è²¬ç®¡ç†æ“ä½œç³»çµ±å’Œæ‡‰ç”¨ç¨‹å¼å±¤é¢çš„é…ç½®å’Œç¶­è­·ï¼Œé›²ç«¯æœå‹™æä¾›å•†è² è²¬åº•å±¤åŸºç¤è¨­æ–½çš„ç®¡ç†ã€‚ Exampple: AWS EC2 Platform as a Service/PaaSï¼ˆå¹³å°å³æœå‹™) é›²ä¾›å•†ä¸åƒ…æä¾›åŸºç¤è¨­æ–½ï¼Œé‚„æä¾›äº†é–‹ç™¼å·¥å…·ã€åŸ·è¡Œç’°å¢ƒå’Œç›¸é—œæœå‹™ï¼Œä½¿é–‹ç™¼è€…èƒ½å¤ æ›´å¿«åœ°æ§‹å»ºã€éƒ¨ç½²å’Œç®¡ç†æ‡‰ç”¨ç¨‹å¼ã€‚ Example: Elastic Beanstalk Serverlessï¼ˆç„¡ä¼ºæœå™¨ï¼‰ åœ¨ç„¡ä¼ºæœå™¨æ¨¡å¼ä¸‹ï¼Œé–‹ç™¼è€…åªéœ€ä¸Šå‚³ç¨‹å¼ç¢¼åˆ°é›²ç«¯æœå‹™å¹³å°ï¼Œè€Œä¸éœ€è¦é—œå¿ƒä¼ºæœå™¨çš„é…ç½®ã€ç®¡ç†å’Œç¶­è­·ã€‚ é›²ç«¯æœå‹™å¹³å°æœƒæ ¹æ“šå¯¦éš›éœ€æ±‚ä¾†åˆ†é…è¨ˆç®—è³‡æºï¼Œä¸¦ä¸”æŒ‰ç…§ä½¿ç”¨é‡ä¾†è¨ˆè²»ï¼Œä½¿é–‹ç™¼è€…åªéœ€ç‚ºå¯¦éš›ä½¿ç”¨çš„è³‡æºä»˜è²»ã€‚ ä»€éº¼æ˜¯ AWS Lambda Lambda æ˜¯ AWS çš„ç„¡æœå‹™å™¨æœå‹™ï¼ŒåŸºæ–¼ Event-driven Architecturesï¼Œç•¶æœ‰ä¸€å€‹äº‹ä»¶(Event) é€²ä¾†æ™‚ï¼ŒAWS æ‰æœƒå‹•æ…‹çš„å•Ÿå‹•æ‰€éœ€çš„é‹ç®—æœå‹™ï¼Œä¸¦å°‡äº‹å…ˆæº–å‚™å¥½çš„ç¨‹å¼éƒ¨ç½²åˆ°ä¸Šé¢å»é‹è¡Œã€‚ ä¸€å€‹æ˜¯äº‹ä»¶å¯ä»¥æ˜¯ä¸€å€‹ä¾†è‡ª API Gateway çš„è«‹æ±‚ï¼Œæˆ–è€…æ˜¯ S3 æµå‡ºçš„äº‹ä»¶ï¼Œå†è€…ä¹Ÿå¯ä»¥æ˜¯ CloudWatch Scheduler æ’ç¨‹æ’å¥½çš„ã€‚\nLambda çš„å¥½è™• è‡ªå‹•æ“´å±• Scalability AWS æœƒæ ¹æ“šç•¶ä¸‹ä¸¦è¡Œçš„è«‹æ±‚æ•¸é‡ï¼Œä¾†è‡ªå·±æ±ºå®š Auto Scaling ï¼Œæ‰€ä»¥åœ¨æ²’æœ‰è«‹æ±‚çš„æƒ…æ³ä¸‹ï¼Œç”šè‡³æ˜¯å¯ä»¥ä¸éœ€è¦æœ‰ä»»ä½•é‹ç®—æœå‹™ ä¾ç”¨é‡è¨ˆåƒ¹ AWS æ˜¯æ ¹æ“šé‹è¡Œçš„æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰ä¾†è¨ˆåƒ¹ï¼Œæ‰€ä»¥å¦‚ä¸Šé¢çš„è‡ªå‹•æ“´å±•ä¾†èªªï¼Œåœ¨æ²’æœ‰ä»»ä½•é‹ç®—æœå‹™çš„æ™‚å€™ï¼Œå¯ä»¥ä¸ç”¨ä»˜ä»»ä½•éŒ¢çµ¦ AWS ç„¡é ˆç®¡ç†ä¼ºæœå™¨ æ‰€æœ‰çš„ç¡¬é«”ï¼Œæ“ä½œç³»çµ±ç­‰ç¶­è­·ï¼Œéƒ½äº¤ç”± AWS ç®¡ç†ã€‚æˆ‘å€‘åªéœ€å°ˆæ³¨åœ¨é–‹ç™¼ä¸Šé¢å°±å¥½ã€‚è€Œä¸” AWS ç¢ºä¿ Lambda çš„é«˜å¯ç”¨æ€§å’Œå®¹éŒ¯æ€§ã€‚ å¿«é€Ÿé€²å…¥å¸‚å ´ ç”±æ–¼ Lambda è®“é–‹ç™¼è€…åªéœ€å°ˆæ³¨æ–¼ è»Ÿé«”(Function) çš„é–‹ç™¼ï¼Œè€Œä¸”ä¹Ÿçœæ‰äº†ç¡¬é«”çš„è³¼è²·æ™‚é–“ï¼Œæ‰€ä»¥è®“ä¸€å€‹æœå‹™åœ¨çŸ­çŸ­å¹¾åˆ†é˜å…§ï¼Œå°±ä¸Šåˆ°äº’è¯ç¶²ä¸Šä¾›äººä½¿ç”¨ã€‚ Lambda è¨ˆåƒ¹ Lambda åªå¯ä»¥è¨­å®š RAM çš„å¤§å°ï¼Œè€Œéš¨è‘— RAM çš„å¤§å°ï¼Œæ˜¯æœƒå½±éŸ¿ CPU çš„ï¼Œè€Œä¸åŒ RAM çš„å¤§å°ï¼Œæ”¶è²»åƒ¹æ ¼ä¹Ÿä¸åŒï¼Œå·²ä¸‹åœ–æ±äº¬ç‚ºä¾‹ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°éš¨è‘— RAM è¶Šå¤šï¼Œæ¯æ¯«ç§’çš„åƒ¹æ ¼ä¹Ÿè¶Šè²´ã€‚\næ‰€ä»¥ Lambda çš„ RAM é–‹å¾—è¶Šé«˜ï¼ŒåŸ·è¡Œçš„ç•¶ç„¶ä¹Ÿè¶Šå¿«ï¼Œä½†é€™å°±å¿…éä»£è¡¨è¶Šä¾¿å®œå–”ï¼å› ç‚ºè¨ˆç®—çš„åƒ¹æ ¼æ˜¯ä¸ä¸€æ¨£çš„ï¼Œæˆ‘å€‘éœ€è¦æ ¹æ“šæ¯å€‹ Lambda åˆ†æï¼Œå–å¾—æœ€ä½³å€¼ï¼Œä¸ç„¶æœ‰å¯èƒ½æœƒç™½ç™½æµªè²»éŒ¢ï¼\nå·²ä¸‹åœ–ç‚ºä¾‹\nRAM 128 MBï¼Œé›–ç„¶æ¯ç§’æ¯”è¼ƒä¾¿å®œï¼Œä½†åŸ·è¡Œæ™‚é–“éä¹… RAM 1024 MB ä»¥å¾Œï¼ŒåŸ·è¡Œæ™‚é–“çš„ä¸¦æ²’æœ‰åœ¨æ˜é¡¯çš„è®Šå¿«ï¼Œåè€Œè®“å¸³å–®è®Šæ›´è²´è€Œå·² RAM 512 å¹¾ä¹æ˜¯æ•ˆèƒ½ Cost æœ€ä½ï¼Œæ•ˆèƒ½é‚„ä¸éŒ¯çš„ é€™é‚Šå¯ä»¥ç”¨å®˜æ–¹çš„è¨ˆç®—å™¨ä¾†åˆä¼°èŠ±è²»\nç¶²ä¸Šä¹Ÿè¨±æœ‰å¤šå¤§ç¥é–‹ç™¼çš„å·¥å…·å¯ä»¥ä½¿ç”¨ï¼Œä¾‹å¦‚ç”± Alex Casalboni é–‹ç™¼çš„ aws-lambda-power-tuning\n","date":"June 7, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/what-is-lambda/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"}],"timestamp":1686096000,"title":"ä»€éº¼æ˜¯ AWS Lambda"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"ä»¥å‰ç•¶æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¸ AWS Lambda Function æ™‚ï¼Œæ˜¯åœ¨ä¸Š AWS Training èª²ç¨‹ï¼Œä½¿ç”¨ AWS Console å»ºç«‹äº†ä¸€éš» Hello Worldã€‚è€Œ SAM (Serverless Application Model) æ˜¯ä¸€å€‹é–‹æºçš„ç¨‹å¼ï¼Œä¸»è¦åœ¨ CloudFormation çš„åŸºç¤ä¸Šæ“´å±•ï¼Œå°ˆé–€ç”¨ä¾†é–‹ç™¼ Serverless Applicationã€‚æˆ‘å€‘å¯ä»¥é€é YAML å»å®šç¾©æˆ‘å€‘çš„ç³»çµ±æ¶æ§‹ åƒæ˜¯ Endpoint ç”±å“ªå€‹handler è™•ç†ï¼Œé¡å¤–çš„ database (DynamoDB) ç­‰ç­‰ã€‚é€™æ¬¡çš„æ–‡ç« ï¼Œä¸»è¦æ˜¯ä»‹ç´¹ä½¿ç”¨ SAM å»ºç«‹ä¸€å€‹ Java Hello World çš„ Lambda Functionã€‚\näº‹å‰æº–å‚™ ä¸€å€‹ AWS å¸³è™Ÿ å®‰è£ AWS CLI ä¸¦ è¨­å®šå¥½ï¼ŒSAM çš„æ¬Šé™æ˜¯æ ¹æ“š AWS CLIå–”ï¼æ‰€ä»¥ SAM ä¸ç”¨é¡å¤–è¨­å®š Access Key ID \u0026amp; Secret Access Key Mac \u0026amp; Linux å¯ä»¥é€é pip å®‰è£ï¼Œå…¶ä»–å¯ä»¥åƒè€ƒé€™ç¯‡å®˜ç¶²å®‰è£æ•™å­¸ å¦‚æœä¸çŸ¥é“å¦‚ä½•ç²å– Access Key ID \u0026amp; Secret Access Key å¯ä»¥åƒè€ƒé€™ç¯‡å®˜ç¶²è¨­å®š 1# å®‰è£ AWS CLI 2$ pip install awscli 3 4# ç¢ºèª AWS CLI å®‰è£æˆåŠŸ 5$ aws --version 6 aws-cli/1.19.105 Python/2.7.16 Darwin/20.4.0 botocore/1.20.105 7 8 # AWS CLI è¨­å®š 9 $ aws configure 10 AWS Access Key ID [****************ASFC]: 11 AWS Secret Access Key [****************fM7z]: 12 Default region name [ap-northeast-1]: 13 Default output format [json]: Java11 JDK \u0026amp; Mavenï¼Œé€™é‚Šå¯ä»¥é€é Brew å®‰è£ï¼Œå¦‚ä½•å®‰è£ Brew çœ‹å®˜ç¶²æ•™å­¸ 1# å®‰è£ open jdk11 2$ brew install openjdk@11 3# ç¢ºèª Java JDK å®‰è£æˆåŠŸ 4$ java -version 5 openjdk version \u0026#34;11.0.10\u0026#34; 2021-01-19 6 OpenJDK Runtime Environment (build 11.0.10+9) 7 OpenJDK 64-Bit Server VM (build 11.0.10+9, mixed mode) 8 9# å®‰è£ maven 10$ brew install maven 11# ç¢ºèª Maven å®‰è£æˆåŠŸ 12$ mvn -version 13 Apache Maven 3.8.1 (05c21c65bdfed0f71a2f2ada8b84da59348c4c5d) 14 Maven home: /usr/local/Cellar/maven/3.8.1/libexec 15 Java version: 11.0.10, vendor: Oracle Corporation, runtime: /usr/local/Cellar/openjdk@11/11.0.10/libexec/openjdk.jdk/Contents/Home 16 Default locale: zh_TW_#Hant, platform encoding: UTF-8 17 OS name: \u0026#34;mac os x\u0026#34;, version: \u0026#34;11.3.1\u0026#34;, arch: \u0026#34;x86_64\u0026#34;, family: \u0026#34;mac\u0026#34; Docker ï¼Œç”±æ–¼ Docker å®‰è£æ¯”è¼ƒéº»ç…©ï¼Œé€™é‚Šå°±ä¸å¯«å®‰è£æ–¹å¼ï¼Œæˆ‘å€‹äºº MAC æ˜¯å®‰è£ Docker Desktop 1$ docker --version 2 Docker version 20.10.7, build f0df350 ä»Šæ—¥ä¸»è§’ï¼ŒSAM CLIï¼Œé€™é‚Šä¹Ÿæ˜¯é€é Brew å»å®‰è£ 1# å®‰è£ SAM CLI 2$ brew tap aws/tap 3$ brew install aws-sam-cli 4# ç¢ºèª SAM CLI å®‰è£æˆåŠŸ 5$ sam --version 6 SAM CLI, version 1.25.0 SAM åˆå§‹åŒ–å°ˆæ¡ˆ 1$ sam init -r java11 -d maven --app-template hello-world -n demo 2 3# -r : --runtime çš„ç¸®å¯«ï¼ŒåŸ·è¡Œç’°å¢ƒçš„èªè¨€ï¼Œé€™é‚ŠæŒ‡å®š java11 4# -d : --dependency-manager çš„ç¸®å¯«(è»Ÿé«”å¥—ä»¶ç®¡ç†ç³»çµ±)ï¼Œé€™é‚ŠæŒ‡å®š maven 5# --app-template : å®˜æ–¹å·²ç¶“æœ‰å¯«å¥½ä¸€äº› template æä¾›å¤§å®¶ä½¿ç”¨ 6# -n : --name çš„ç¸®å¯«ï¼Œé€™å€‹å°ˆæ¡ˆçš„åç¨± 7 8# å¦‚æœæƒ³ç­è§£æ›´å¤šåƒæ•¸ï¼Œå’Œæ¯å€‹åƒæ•¸å¯ä»¥è¨­å®šçš„é¸é …ï¼Œå¯ä»¥ä½¿ç”¨ 9$ sam init help é€é SAM åˆå§‹åŒ–ï¼Œæœƒå»ºç«‹ä»¥ä¸‹çš„æª”æ¡ˆ\n1$ tree 2 . 3 â”œâ”€â”€ HelloWorldFunction 4 â”‚ â”œâ”€â”€ pom.xml 5 â”‚ â””â”€â”€ src 6 â”‚ â”œâ”€â”€ main 7 â”‚ â”‚ â””â”€â”€ java 8 â”‚ â”‚ â””â”€â”€ helloworld 9 â”‚ â”‚ â””â”€â”€ App.java 10 â”‚ â””â”€â”€ test 11 â”‚ â””â”€â”€ java 12 â”‚ â””â”€â”€ helloworld 13 â”‚ â””â”€â”€ AppTest.java 14 â”œâ”€â”€ README.md 15 â”œâ”€â”€ events 16 â”‚ â””â”€â”€ event.json 17 â””â”€â”€ template.yaml Template.yaml æ˜¯æˆ‘å€‘è¨­å®š Resource ç›¸é—œçš„è³‡è¨Šï¼Œç”±æ–¼å¤ªå¤šé€™ç¯‡å°±ä¸ä¸€ä¸€ä»‹ç´¹ï¼Œé€™é‚Šæœƒåœ¨ç”¢ç”Ÿå‡ºä¾†çš„ Code åŠ ä¸€äº›ç°¡å–®è¨»è§£\n1AWSTemplateFormatVersion: \u0026#39;2010-09-09\u0026#39; 2Transform: AWS::Serverless-2016-10-31 3Description: \u0026gt; 4 demo 5 6 Sample SAM Template for demo 7 8Globals: 9 Function: 10 Timeout: 20 11 12Resources: 13 HelloWorldFunction: 14 Type: AWS::Serverless::Function # é€™é‚Šæ˜¯æŒ‡ Lambda Function 15 Properties: 16 CodeUri: HelloWorldFunction 17 Handler: helloworld.App::handleRequest # é€™é‚ŠæŒ‡å®š Handler 18 #helloworld : java package 19 #App : class name 20 #handleRequest : handle request method 21 Runtime: java11 22 MemorySize: 512 23 Environment: # å¯ä»¥è¨­å®šç³»çµ±ç’°å¢ƒçš„åœ°æ–¹ 24 Variables: 25 PARAM1: VALUE 26 Events: # Trigger é€™å€‹ Lambda Function çš„ Event 27 HelloWorld: 28 Type: Api # Event æ˜¯ç”± API Gateway ä¾†çš„ 29 Properties: 30 Path: /hello # Api Gateway Endpoint 31 Method: get # Http Method 32 33#Outputs å°±è«‹åƒè€ƒ CloudFormation 34Outputs: 35 HelloWorldApi: 36 Description: \u0026#34;API Gateway endpoint URL for Prod stage for Hello World function\u0026#34; 37 Value: !Sub \u0026#34;https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/hello/\u0026#34; 38 HelloWorldFunction: 39 Description: \u0026#34;Hello World Lambda Function ARN\u0026#34; 40 Value: !GetAtt HelloWorldFunction.Arn 41 HelloWorldFunctionIamRole: 42 Description: \u0026#34;Implicit IAM Role created for Hello World function\u0026#34; 43 Value: !GetAtt HelloWorldFunctionRole.Arn é€™é‚Šé †ä¾¿ä»‹ç´¹ä¸»è¦è™•ç†é‚è¼¯çš„ Handler\n1package helloworld; 2 3import java.io.BufferedReader; 4import java.io.IOException; 5import java.io.InputStreamReader; 6import java.net.URL; 7import java.util.HashMap; 8import java.util.Map; 9import java.util.stream.Collectors; 10 11import com.amazonaws.services.lambda.runtime.Context; 12import com.amazonaws.services.lambda.runtime.RequestHandler; 13import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent; 14import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent; 15 16/** 17 * Handler for requests to Lambda function. 18 */ 19public class App implements RequestHandler\u0026lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent\u0026gt; { 20 21 public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) { 22 // response çš„ header 23 Map\u0026lt;String, String\u0026gt; headers = new HashMap\u0026lt;\u0026gt;(); 24 headers.put(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;); 25 headers.put(\u0026#34;X-Custom-Header\u0026#34;, \u0026#34;application/json\u0026#34;); 26 27 APIGatewayProxyResponseEvent response = new APIGatewayProxyResponseEvent() 28 .withHeaders(headers); 29 try { 30 // call amanzon api å–å¾—ç³»çµ± IP 31 final String pageContents = this.getPageContents(\u0026#34;https://checkip.amazonaws.com\u0026#34;); 32 33 // response body 34 String output = String.format(\u0026#34;{ \\\u0026#34;message\\\u0026#34;: \\\u0026#34;hello world\\\u0026#34;, \\\u0026#34;location\\\u0026#34;: \\\u0026#34;%s\\\u0026#34; }\u0026#34;, pageContents); 35 36 return response 37 .withStatusCode(200) 38 .withBody(output); 39 } catch (IOException e) { 40 return response 41 .withBody(\u0026#34;{}\u0026#34;) 42 .withStatusCode(500); 43 } 44 } 45 46 private String getPageContents(String address) throws IOException{ 47 URL url = new URL(address); 48 try(BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()))) { 49 return br.lines().collect(Collectors.joining(System.lineSeparator())); 50 } 51 } 52} æ‰€ä»¥å¾ä»¥ä¸Šä¾†çœ‹ï¼Œé€™é‚Šå°±æ˜¯é€é Template.yaml å»æŒ‡å®š ç’°å¢ƒåŸ·è¡Œèªè¨€ï¼Œ API Endpoint å’Œ Handler ç­‰ç­‰é‡è¦è³‡è¨Šã€‚è€Œ App.java å°±æ˜¯æˆ‘å€‘ Lambda Function ä¸»è¦è¨ˆç®—é‚è¼¯ã€‚ç›®å‰é€éé€™å…©å€‹ File å°±å¯ä»¥ç”¢ç”Ÿå‡ºåŸºæœ¬çš„ get hello å‡½ç¤ºã€‚\né€™é‚Šè¦æ³¨æ„ï¼Œhello-world Template å»ºç«‹å‡ºçš„ pom æª”ï¼Œè£¡é¢æŒ‡å®šçš„ Compile Source æ˜¯ 1.8 ï¼Œé€™é‚Šå»ºè­°æ”¹æˆ Java 11\n1\u0026lt;properties\u0026gt; 2 \u0026lt;maven.compiler.source\u0026gt;11\u0026lt;/maven.compiler.source\u0026gt; 3 \u0026lt;maven.compiler.target\u0026gt;11\u0026lt;/maven.compiler.target\u0026gt; 4\u0026lt;/properties\u0026gt; SAM æœ¬åœ°æ¸¬è©¦ SAM æˆ‘å€‹äººè¦ºå¾—æœ€æ–¹ä¾¿çš„å°±æ˜¯ï¼Œå®ƒä½¿ç”¨äº† Docker çš„æŠ€è¡“ï¼Œè®“æˆ‘å€‘å¯ä»¥åœ¨æœ¬åœ°ä¹Ÿå¯ä»¥å»ºç«‹èµ·ä¸€å€‹ç’°å¢ƒåšæ¸¬è©¦ API\n1$ sam local start-api 2 3 Mounting HelloWorldFunction at http://127.0.0.1:3000/hello [GET] 4 You can now browse to the above endpoints to invoke your functions. You do not need to restart/reload SAM CLI while working on your functions, changes will be reflected instantly/automatically. You only need to restart SAM CLI if you update your AWS SAM template 5 2021-07-03 19:40:16 * Running on http://127.0.0.1:3000/ (Press CTRL+C to quit) å¾ä¸Šé¢çš„ Output å¯ä»¥çœ‹åˆ°ï¼Œèµ·äº†ä¸€å€‹ç’°å¢ƒï¼Œä¸¦è½æœ¬åœ°çš„3000 portï¼Œé€™é‚Šæœƒåœ¨é–‹å¦ä¸€å€‹terminal ä¾†æ¸¬è©¦ curl ä¾†æ¸¬è©¦çµæœ\n1$ curl -v http://127.0.0.1:3000/hello 2 * Trying 127.0.0.1... 3 * TCP_NODELAY set 4 * Connected to 127.0.0.1 (127.0.0.1) port 3000 (#0) 5 \u0026gt; GET /hello HTTP/1.1 6 \u0026gt; Host: 127.0.0.1:3000 7 \u0026gt; User-Agent: curl/7.64.1 8 \u0026gt; Accept: */* 9 \u0026gt; 10 * HTTP 1.0, assume close after body 11 \u0026lt; HTTP/1.0 200 OK 12 \u0026lt; X-Custom-Header: application/json 13 \u0026lt; Content-Type: application/json 14 \u0026lt; Content-Length: 57 15 \u0026lt; Server: Werkzeug/1.0.1 Python/3.8.11 16 \u0026lt; Date: Sat, 03 Jul 2021 11:47:10 GMT 17 \u0026lt; 18 * Closing connection 0 19 { \u0026#34;message\u0026#34;: \u0026#34;hello world\u0026#34;, \u0026#34;location\u0026#34;: \u0026#34;114.44.114.30\u0026#34; } åœ¨åŸæœ¬çš„ Terminal å¯ä»¥çœ‹åˆ°ä»¥ä¸‹è³‡è¨Š\n1Mounting /Users/allen/demo/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated inside runtime container 2 END RequestId: 74bd804b-096b-473b-9c3f-2ba1cd847431 3 REPORT RequestId: 74bd804b-096b-473b-9c3f-2ba1cd847431 Init Duration: 0.37 ms Duration: 2255.80 ms Billed Duration: 2300 ms Memory Size: 512 MB Max Memory Used: 512 MB 4 2021-07-03 19:44:13 127.0.0.1 - - [03/Jul/2021 19:44:13] \u0026#34;GET /hello HTTP/1.1\u0026#34; 200 - Sam ä¹Ÿå¯ä»¥ç›´æ¥ä¸€æ¬¡æ€§çš„åŸ·è¡ŒæŸå€‹ Function\n1$ sam local invoke \u0026#34;HelloWorldFunction\u0026#34; 2 Invoking helloworld.App::handleRequest (java11) 3 Skip pulling image and use local one: amazon/aws-sam-cli-emulation-image-java11:rapid-1.25.0. 4 5 6 Mounting /Users/allen/demo/.aws-sam/build/HelloWorldFunction as /var/task:ro,delegated inside runtime container 7 END RequestId: 70223332-2a37-4094-bdf2-aa924df0d416 8 REPORT RequestId: 70223332-2a37-4094-bdf2-aa924df0d416 Init Duration: 0.29 ms Duration: 2153.55 ms Billed Duration: 2200 ms Memory Size: 512 MB Max Memory Used: 512 MB 9 {\u0026#34;statusCode\u0026#34;:200,\u0026#34;headers\u0026#34;:{\u0026#34;X-Custom-Header\u0026#34;:\u0026#34;application/json\u0026#34;,\u0026#34;Content-Type\u0026#34;:\u0026#34;application/json\u0026#34;},\u0026#34;body\u0026#34;:\u0026#34;{ \\\u0026#34;message\\\u0026#34;: \\\u0026#34;hello world\\\u0026#34;, \\\u0026#34;location\\\u0026#34;: \\\u0026#34;114.44.114.30\\\u0026#34; }\u0026#34;} SAM éƒ¨ç½²åˆ° AWS é€™é‚Šå¯ä»¥é€é sam deploy â€“guided Deploy åˆ° AWS ä¸Šé¢ï¼Œç”±æ–¼å…§å®¹è³‡è¨Šæ¯”è¼ƒå¤šï¼Œæ‰€ä»¥é€™é‚Šç”¨åœ–ç‰‡çš„æ–¹å¼ï¼Œåœ¨ç¬¬ä¸€æ¬¡åŸ·è¡Œæ™‚é€™é‚Šæœƒéœ€è¦å¡«å¯«ä¸€äº›é è¨­è³‡æ–™ã€‚\nåœ¨å¡«å®Œé è¨­è³‡æ–™å¾Œï¼ŒSAMæœƒä¸€ç›´åŸ·è¡Œï¼Œç›´åˆ°è¦ä½ ç¢ºèªé€™æ¬¡ Deploy çš„æ”¹å‹• CloudFormation çš„ changeset\nCloudFormation é€™æ™‚å€™æœƒå¡åœ¨ REVIEW_IN_PROGRESS\né€™æ™‚Change Set åŒæ„ä»¥å¾Œï¼Œé€™æ™‚çœ‹ CloudFormation æœƒæ­£åœ¨å»ºç«‹ Resourceï¼Œ Status æ˜¯ CREATE_IN_PROGRESS\nSAM CLI åœ¨ Deploy å®Œä»¥å¾Œï¼Œæœƒçœ‹åˆ°é¡ä¼¼ä»¥ä¸‹è³‡è¨Š\nå¯ä»¥åœ¨ API Gateway çœ‹åˆ°æ–°çš„ Endpoint\nä¹Ÿå¯ä»¥åœ¨ Lambda çœ‹åˆ° HelloWorld Lambda Function å»ºç«‹å¥½äº†\n1$ curl -v https://rla530b9o1.execute-api.ap-northeast-1.amazonaws.com/Prod/hello/ 2 * Trying 13.35.7.43... 3 * TCP_NODELAY set 4 * Connected to rla530b9o1.execute-api.ap-northeast-1.amazonaws.com (13.35.7.43) port 443 (#0) 5 * ALPN, offering h2 6 * ALPN, offering http/1.1 7 * successfully set certificate verify locations: 8 * CAfile: /etc/ssl/cert.pem 9 CApath: none 10 * TLSv1.2 (OUT), TLS handshake, Client hello (1): 11 * TLSv1.2 (IN), TLS handshake, Server hello (2): 12 * TLSv1.2 (IN), TLS handshake, Certificate (11): 13 * TLSv1.2 (IN), TLS handshake, Server key exchange (12): 14 * TLSv1.2 (IN), TLS handshake, Server finished (14): 15 * TLSv1.2 (OUT), TLS handshake, Client key exchange (16): 16 * TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1): 17 * TLSv1.2 (OUT), TLS handshake, Finished (20): 18 * TLSv1.2 (IN), TLS change cipher, Change cipher spec (1): 19 * TLSv1.2 (IN), TLS handshake, Finished (20): 20 * SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 21 * ALPN, server accepted to use h2 22 * Server certificate: 23 * subject: CN=*.execute-api.ap-northeast-1.amazonaws.com 24 * start date: May 17 00:00:00 2021 GMT 25 * expire date: Jun 15 23:59:59 2022 GMT 26 * subjectAltName: host \u0026#34;rla530b9o1.execute-api.ap-northeast-1.amazonaws.com\u0026#34; matched cert\u0026#39;s \u0026#34;*.execute-api.ap-northeast-1.amazonaws.com\u0026#34; 27 * issuer: C=US; O=Amazon; OU=Server CA 1B; CN=Amazon 28 * SSL certificate verify ok. 29 * Using HTTP2, server supports multi-use 30 * Connection state changed (HTTP/2 confirmed) 31 * Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0 32 * Using Stream ID: 1 (easy handle 0x7f9298809200) 33 \u0026gt; GET /Prod/hello/ HTTP/2 34 \u0026gt; Host: rla530b9o1.execute-api.ap-northeast-1.amazonaws.com 35 \u0026gt; User-Agent: curl/7.64.1 36 \u0026gt; Accept: */* 37 \u0026gt; 38 * Connection state changed (MAX_CONCURRENT_STREAMS == 128)! 39 40 41 \u0026lt; HTTP/2 200 42 \u0026lt; content-type: application/json 43 \u0026lt; content-length: 58 44 \u0026lt; date: Sat, 03 Jul 2021 14:28:53 GMT 45 \u0026lt; x-amzn-requestid: fa2fb89a-5379-4167-b13c-0a59269f71e0 46 \u0026lt; x-amz-apigw-id: B5cU7GWTNjMFc6A= 47 \u0026lt; x-custom-header: application/json 48 \u0026lt; x-amzn-trace-id: Root=1-60e0741f-7e93aac373f51300700bbc59;Sampled=0 49 \u0026lt; x-cache: Miss from cloudfront 50 \u0026lt; via: 1.1 260a465bf4779e35dde8adbb89981df1.cloudfront.net (CloudFront) 51 \u0026lt; x-amz-cf-pop: TPE52-C1 52 \u0026lt; x-amz-cf-id: aGy5WF0naNegGjNJM1kaZpBnl5SDcg23eZMy8wYUrd0sxyQnHLnhgg== 53 \u0026lt; 54 * Connection #0 to host rla530b9o1.execute-api.ap-northeast-1.amazonaws.com left intact 55 { \u0026#34;message\u0026#34;: \u0026#34;hello world\u0026#34;, \u0026#34;location\u0026#34;: \u0026#34;13.231.109.123\u0026#34; }* Closing connection 0 æ¸…ç† Sam å»ºç«‹å¥½çš„ AWS ç’°å¢ƒ å¦‚æœå¤§å®¶æœ‰ Deploy åˆ° AWS ä¸Šï¼Œæœ€å¾Œè¨˜å¾—è¦æŠŠ CloudFormation å»ºç«‹å‡ºä¾†çš„ç’°å¢ƒçµ¦åˆªé™¤ï¼Œä»¥å…ç”¢ç”Ÿé¡å¤–çš„è²»ç”¨ã€‚é€™é‚Šå¯ä»¥ç›´æ¥åˆ° AWS CloudFormation æŠŠ Stack çµ¦åˆªé™¤ï¼Œæˆ–è€…ä½¿ç”¨ AWS CLI\n1$ aws cloudformation delete-stack --stack-name demo é€™é‚Šè¦æ³¨æ„ä¸€ä¸‹ï¼Œ SAM æœƒå»ºç«‹ä¸€å€‹ S3 ç•¶ä½œ Artifact ï¼Œæ‰€ä»¥éœ€è¦å…ˆæŠŠ S3 è£¡é¢çš„è³‡æ–™æ‰‹å‹•æ¸…æ‰æ‰å¯ä»¥ delete stackï¼Œå¦å‰‡ stack æœƒåˆªé™¤å¤±æ•—ã€‚ä»¥ä¸‹æ˜¯S3 æ²’æœ‰æ¸…ç©ºæ™‚çš„ç¯„ä¾‹åœ–\n","date":"June 3, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/build-aws-lambda-hello-world-function-by-sam/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"},{"title":"CloudFormation","url":"/tags/cloudformation/"},{"title":"SAM","url":"/tags/sam/"}],"timestamp":1685750400,"title":"Build AWS Lambda Hello World Function by SAM"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"å€‹äººç”¨æˆ¶ç®¡ç†å°æ–¼è¨±å¤šç¶²ç«™ æˆ– App éƒ½æ˜¯ä¸å¯ç¼ºå°‘çš„ï¼Œå¤§å®¶æœ‰å¯èƒ½æœƒç¶“å¸¸ç…©æƒ±è¦æ€éº¼æ¨£è®“è‡ªå·±çš„æœå‹™ï¼Œå¯ä»¥é€é Google ã€Facebook ç­‰ç¬¬ä¸‰æ–¹èªè­‰ï¼Œæˆ–è€…æ“æœ‰è‡ªå·±çš„ä½¿ç”¨è€…ç¾¤ã€‚é€™æ™‚å¯ä»¥é¸æ“‡è€ƒæ…® AWS Cognitoï¼Œå®ƒå¯ä»¥è®“ä½ å¿«é€Ÿçš„ç‚ºä½ çš„æœå‹™å»ºç«‹ä½¿ç”¨è€…ç¾¤ï¼Œä¸¦ä¸”å¯ä»¥æ•´åˆè®“ä½¿ç”¨è€…æ“æœ‰æ¬Šé™æ“ä½œå…¶ä»– AWS æœå‹™ ã€‚ç”±æ–¼ä½¿ç”¨ UI å»ºç«‹ Cognito User Pool çš„æ–‡ç« å·²ç¶“ä¸å°‘ï¼Œæ‰€ä»¥é€™é‚Šæ–‡ç« æœƒä»‹ç´¹ä½¿ç”¨ AWS CLI cognito-idp å»ºç«‹ä¸€å€‹ç”¨æˆ¶å¯ä»¥è¨»å†Šï¼Œä¸¦ä¸”è‡ªå·±é€é Mail èªè­‰é€šéçš„ User Poolã€‚\nå‰ç½®ä½œæ¥­ AWS CLI AWS SES é©—è­‰éçš„ Email é€é AWS Console è¨­å®š SES Step1 è¨»å†Š SES Mail é€™é‚Šè¦æ³¨æ„ï¼ŒCognito ç›®å‰å…è¨±çš„ SES Region åªæœ‰ä¸‰å€‹ï¼Œåˆ†åˆ¥æ˜¯ us-east-1ã€us-east-2ã€eu-west-1ã€‚æ‰€ä»¥åœ¨å»ºç«‹ Email æ™‚ï¼Œè«‹ç¢ºèªè¦åˆ¥ç¢ºèª Region å–”ï¼Œä¸ç„¶ä¹‹å¾Œæœ‰å¯èƒ½æœƒç„¡æ³•è¨­å®šå–”\nè«‹åˆ° SES ä¸‹é¢ï¼Œé»é¸ Email Addressï¼Œç„¶å¾Œé»ä¸‹ Verify a New Email Addressï¼Œä¸¦å¡«å¯«ä½ çš„ Mail\nç•¶ä½ å¡«å®Œä»¥å¾Œï¼Œé€™æ™‚å¯ä»¥ä½ çš„ Email åœ¨ list ä¸­ï¼Œè€Œ Verification Status é‚„æœƒåœ¨ Pending å–”ï½ AWS æœƒå¯„ Mail åˆ°ä½ çš„éƒµç®±ï¼Œè«‹å»å¡«å¯«çš„ Email èªè­‰ã€‚\nStep2 é©—è­‰ Mail é€™æ™‚å€™ç•¶å…¥å‰›å‰›è¼¸å…¥çš„ Mail ä¸­ï¼Œæ‡‰è©²æœƒæœ‰ä¸€å° Email Address Verification Request çš„ Mail ï¼Œé€™æ™‚å€™è«‹é»é¸è£¡é¢çš„ Link å®Œæˆé©—è­‰\nStep3 ç¢ºèªä¿¡ç®±å·²é©—è­‰ é€™æ™‚å€™é‡æ–°é€²å…¥ SES é é¢ï¼Œæœƒç™¼ç¾ Verification Status æ˜¯ verified\nå¦‚æœä½ ä¹Ÿåœ¨å˜—è©¦ç·´ç¿’ï¼Œè«‹é»é¸ UI çš„ Email ï¼Œé€™æ™‚å€™å¯ä»¥çœ‹åˆ° Identity ARNã€‚è«‹å°‡ Identity ARN è¨˜éŒ„ä¸‹ä¾†ï¼Œå¾Œé¢å»ºç«‹ User Pool æœƒä½¿ç”¨åˆ°ã€‚\nä½¿ç”¨ AWS CLI cognito-idp å»ºç«‹ User Pool \u0026 Client aws cognito-idp command ä¸»è¦æ˜¯è®“æˆ‘å€‘ä¾†ç®¡ç† User Pool çš„ï¼Œè£¡é¢æœ‰åˆ†å…©ç¨®ä¸åŒçš„ level çš„ command ï¼Œåˆ†åˆ¥æ˜¯ ADMIN å’Œ ä¸€èˆ¬ User çš„ï¼Œ æ‰€æœ‰ admin çš„ command éƒ½æœƒæ˜¯ admin- é–‹é ­çš„ã€‚ä»¥ä¸‹æ˜¯é™„ä¸Š AWS å®˜æ–¹çš„åœ–ç‰‡ï¼Œä¸€é–‹å§‹ User åœ¨ Cognito è¨»å†Šæ˜¯åœ¨ å·²è¨»å†Šç‹€æ…‹(Registered) æ˜¯ä¸èƒ½ Login çš„ï¼Œå¿…é ˆè¦æ˜¯èªè­‰ç‹€æ…‹(Confirmed) ï¼Œæ‰èƒ½ Loginã€‚è€Œç›®å‰åªæœ‰å…©ç¨®æ–¹å¼æ‰èƒ½è®“ User è®Šæˆèªè­‰çš„ï¼Œç¬¬ä¸€ç¨®å°±æ˜¯ç”± ADMIN é€™é‚Šèªè­‰ï¼Œè€Œç¬¬äºŒç¨®å°±æ˜¯ User å¯ä»¥è‡ªå·±èªè­‰é€éé›»è©±æˆ– Mailã€‚é€™é‚Šè¦ç¤ºç¯„é€é Mail èªè­‰\nStep1 ä½¿ç”¨ AWS cognito-idp åˆ—å‡ºç›®å‰æ‰€æ“æœ‰çš„ User Pool ä½¿ç”¨ list-user-pools command åˆ—å‡ºç›®å‰æ“æœ‰çš„å…¨éƒ¨ User Poolï¼Œç›®å‰è‰¾å€«çš„ User Pool éƒ½å·²ç¶“æ¸…ç©ºï¼Œæ‰€ä»¥æ²’æœ‰ã€‚\n1$ aws cognito-idp list-user-pools --max-results 10 2 3#Result 4{ 5 \u0026#34;UserPools\u0026#34;: [] 6} Step2 ä½¿ç”¨ cognito-idp å»ºç«‹ User Pool å¦‚æœæ­£åœ¨ä½¿ç”¨é€™é‚Šæ–‡ç« åšç¯„ä¾‹è«‹ç´€éŒ„ IDï¼Œå¾Œé¢å»ºç«‹ Client éœ€è¦ä½¿ç”¨\né€™é‚Šä½¿ç”¨ create-user-pool command\n\u0026ndash;pool-name User Pool çš„åå­— \u0026ndash;auto-verified-attributes æƒ³è¦é©—è­‰çš„æ¬„ä½ï¼Œé€™é‚Šæ˜¯ Mail \u0026ndash;username-attributes é€™é‚Šç‰¹åˆ¥æŒ‡å®š User Name å¯ä»¥é€é Email æ›¿ä»£ ï¼Œé€™é‚Šå¯ä»¥ä¸å¼·åˆ¶ User Name ä½¿ç”¨ Emailï¼Œä¹Ÿå¯ä»¥è®“ User è‡ªå®šç¾©è‡ªå·±çš„ Uesr Id \u0026ndash;email-configuration é€™é‚Šè¦å®šç¾© Cognito å¯„å‡ºçš„ Mail Serverï¼Œè‰¾å€«é€™é‚Šä½¿ç”¨ SES å¯„å‡ºï¼ŒSourceArn è¨˜å¾—æ”¹æˆä½ çš„ SES ARN é€™é‚Šçš„ Result ç”±æ–¼å¤ªé•·ï¼Œæ‰€ä»¥è‰¾å€«æœ‰åšä¸€äº›åˆªæ¸›ã€‚Result ä¸­çš„ VerificationMessageTemplate ï¼Œè£¡é¢å¯« CONFIRM_WITH_CODEï¼Œ ç•¶ User Sign up æ™‚ï¼Œ Cognito æœƒç”¢ç”Ÿä¸€çµ„é©—è­‰ç¢¼å¯„é€åˆ° Mail ä¸­ï¼Œé€™æ¨£ User å°±å¯ä»¥ä½¿ç”¨é©—è­‰ç¢¼ä¾†è‡ªå·±é©—è­‰ã€‚å¦å¤–å¯ä»¥çœ‹åˆ°ä¸‹é¢ PasswordPolicyï¼Œè‡³å°‘è¦ä¸€å€‹å¤§å°å¯«è‹±æ–‡å­—æ¯ï¼Œä¸¦ä¸”è¦æœ‰ç¬¦è™Ÿå’Œæ•¸å­—ï¼Œæœ€å¾Œé•·åº¦å¿…é ˆè¦å…«ä»¥ä¸Šï¼Œé€™äº›æ¢ä»¶éƒ½æ˜¯å¯ä»¥å®¢è£½åŒ–çš„ï¼Œä¸éå¯ä»¥çœ‹åˆ°ï¼Œè‰¾å€«åœ¨å»ºç«‹ User Pool æ™‚ï¼Œæ²’æœ‰å¸¶å…¥ç‰¹å®šåƒæ•¸ï¼Œæ‰€ä»¥é€™äº›ç›®å‰æ˜¯ä½¿ç”¨é è¨­çš„ã€‚\n1$ aws cognito-idp create-user-pool \\ 2 --pool-name helloWorld \\ 3 --auto-verified-attributes email \\ 4 --username-attributes \u0026#34;email\u0026#34; \\ 5 --email-configuration=SourceArn=\u0026#34;arn:aws:ses:us-east-1:129824596365:identity/allen.hsieh.aws@gmail.com\u0026#34;,ReplyToEmailAddress=\u0026#34;allen.hsieh.aws@gmail.com\u0026#34; 6 7# Result 8{ 9 \u0026#34;UserPool\u0026#34;: { 10 \u0026#34;Name\u0026#34;: \u0026#34;helloWorld\u0026#34;, 11 \u0026#34;VerificationMessageTemplate\u0026#34;: { 12 \u0026#34;DefaultEmailOption\u0026#34;: \u0026#34;CONFIRM_WITH_CODE\u0026#34; 13 }, 14 \u0026#34;EmailConfiguration\u0026#34;: { 15 \u0026#34;EmailSendingAccount\u0026#34;: \u0026#34;COGNITO_DEFAULT\u0026#34;, 16 \u0026#34;ReplyToEmailAddress\u0026#34;: \u0026#34;allen.hsieh.aws@gmail.com\u0026#34;, 17 \u0026#34;SourceArn\u0026#34;: \u0026#34;arn:aws:ses:us-east-1:129824596365:identity/allen.hsieh.aws@gmail.com\u0026#34; 18 }, 19 \u0026#34;Policies\u0026#34;: { 20 \u0026#34;PasswordPolicy\u0026#34;: { 21 \u0026#34;RequireNumbers\u0026#34;: true, 22 \u0026#34;RequireLowercase\u0026#34;: true, 23 \u0026#34;RequireSymbols\u0026#34;: true, 24 \u0026#34;RequireUppercase\u0026#34;: true, 25 \u0026#34;TemporaryPasswordValidityDays\u0026#34;: 7, 26 \u0026#34;MinimumLength\u0026#34;: 8 27 } 28 }, 29 \u0026#34;Id\u0026#34;: \u0026#34;ap-northeast-1_DpExb5BW8\u0026#34;, \u0026#34;Arn: \u0026#34;arn:aws:cognito-idp:ap-northeast-1:129824596365:userpool/ap-northeast-1_DpExb5BW8\u0026#34; 30} Step3 ç¢ºèª User Pool å†æ¬¡ä½¿ç”¨ Step1 çš„ list-user-pools Commandï¼Œé€™æ™‚å¾Œæœƒçœ‹åˆ° User Poolã€‚\n1$ aws cognito-idp list-user-pools --max-results 10 2 3# Result 4 { 5 \u0026#34;UserPools\u0026#34;: [ 6 { 7 \u0026#34;CreationDate\u0026#34;: 1625996882.861, 8 \u0026#34;LastModifiedDate\u0026#34;: 1625996882.861, 9 \u0026#34;LambdaConfig\u0026#34;: {}, 10 \u0026#34;Id\u0026#34;: \u0026#34;ap-northeast-1_DpExb5BW8\u0026#34;, 11 \u0026#34;Name\u0026#34;: \u0026#34;helloWorld\u0026#34; 12 } 13 ] 14 } Step4 å»ºç«‹ User Pool çš„ Client ä¸€å€‹ User Pool å¯ä»¥æœ‰å¤šå€‹ Client ï¼Œä¾‹å¦‚æƒ³è¦å€åˆ† App, Web ç­‰ç­‰\nå¦‚æœæ­£åœ¨ä½¿ç”¨é€™é‚Šæ–‡ç« åšç¯„ä¾‹è«‹ç´€éŒ„ ClientIdï¼Œå¾Œé¢å»ºç«‹ User éœ€è¦ä½¿ç”¨\n\u0026ndash;user-pool-id é€™é‚Šéœ€è¦ Step3 or Step2 çš„ ID (User Pool çš„ ID) \u0026ndash;explicit-auth-flows ç‰¹åˆ¥æŒ‡å®šé©—è­‰æ–¹å¼ï¼Œ USER_PASSWORD_AUTH æ˜¯åŒæ„ä½¿ç”¨ User \u0026amp; Password å»åšé©—è­‰ï¼Œé€™é‚Šæ˜¯å› ç‚ºå¾Œé¢æ–¹ä¾¿è¦ Demo ä½¿ç”¨ Cli å»åš Login çš„é—œä¿‚ï¼Œå¦å‰‡æ­£å¼ç’°å¢ƒ App å»ºè­°ä½¿ç”¨ (SRP)[https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-authentication-flow.html] é©—è­‰ã€‚ \u0026ndash;client-name: Client çš„åå­— 1$ aws cognito-idp create-user-pool-client \\ 2 --user-pool-id ap-northeast-1_DpExb5BW8 \\ 3 --explicit-auth-flows USER_PASSWORD_AUTH \\ 4 --client-name cli 5 6# Result 7{ 8 \u0026#34;UserPoolClient\u0026#34;: { 9 \u0026#34;UserPoolId\u0026#34;: \u0026#34;ap-northeast-1_DpExb5BW8\u0026#34;, 10 \u0026#34;LastModifiedDate\u0026#34;: 1625999636.182, 11 \u0026#34;ClientId\u0026#34;: \u0026#34;400d11al9p25pmjg3igflo5h4i\u0026#34;, 12 \u0026#34;AllowedOAuthFlowsUserPoolClient\u0026#34;: false, 13 \u0026#34;TokenValidityUnits\u0026#34;: {}, 14 \u0026#34;ExplicitAuthFlows\u0026#34;: [ 15 \u0026#34;USER_PASSWORD_AUTH\u0026#34; 16 ], 17 \u0026#34;RefreshTokenValidity\u0026#34;: 30, 18 \u0026#34;CreationDate\u0026#34;: 1625999636.182, 19 \u0026#34;EnableTokenRevocation\u0026#34;: true, 20 \u0026#34;ClientName\u0026#34;: \u0026#34;cli\u0026#34; 21 } å»ºç«‹ \u0026 é©—è­‰æ–° User é€™é‚Šéœ€è¦ä½¿ç”¨å»ºç«‹ Client æ™‚çš„ Client Id ï¼Œå¦‚æœå¿˜äº†æ‹·è²ä¸‹ä¾†ï¼Œå¯ä»¥ä½¿ç”¨ list-user-pool-clients å–å¾—ã€‚\n1$ aws cognito-idp list-user-pool-clients --user-pool-id ap-northeast-1_DpExb5BW8 2 3# Result 4 { 5 \u0026#34;UserPoolClients\u0026#34;: [ 6 { 7 \u0026#34;ClientName\u0026#34;: \u0026#34;cli\u0026#34;, 8 \u0026#34;UserPoolId\u0026#34;: \u0026#34;ap-northeast-1_DpExb5BW8\u0026#34;, 9 \u0026#34;ClientId\u0026#34;: \u0026#34;400d11al9p25pmjg3igflo5h4i\u0026#34; 10 } 11 ] 12 } Step1 å»ºç«‹æ–° User \u0026ndash;client-id å¾ Create Client æ™‚æ‹¿æ‰ \u0026ndash;username é€™é‚Šè¦å¡«å¯« User Name ï¼Œç”±æ–¼è‰¾å€«å»ºç«‹çš„ User Pool å¼·åˆ¶è¦æ±‚éœ€è¦ä½¿ç”¨ Email ç•¶ User Nameï¼Œæ‰€ä»¥è¦ä½¿ç”¨ Email å–” \u0026ndash;password å¯†ç¢¼ï¼Œè¨˜å¾—è¦ Follow ä¹‹å‰çš„ PasswordPolicy 1$ aws cognito-idp sign-up \\ 2 --client-id 400d11al9p25pmjg3igflo5h4i \\ 3 --username allen.hsieh.aws@gmail.com \\ 4 --password Aa123456! 5 6# Result 7{ 8 \u0026#34;UserConfirmed\u0026#34;: false, 9 \u0026#34;UserSub\u0026#34;: \u0026#34;c57c5fb9-7fbd-406d-9bb3-19f88cfc9ac0\u0026#34;, 10 \u0026#34;CodeDeliveryDetails\u0026#34;: { 11 \u0026#34;AttributeName\u0026#34;: \u0026#34;email\u0026#34;, 12 \u0026#34;Destination\u0026#34;: \u0026#34;a***@g***.com\u0026#34;, 13 \u0026#34;DeliveryMedium\u0026#34;: \u0026#34;EMAIL\u0026#34; 14 } 15 } é€™æ™‚å¾Œé€é AWS Console é€²å…¥ User Pool è£¡é¢çš„ Users \u0026amp; Groups è£¡é¢ï¼Œå¯ä»¥çœ‹åˆ°å‰›å‰›è¨»å†Šçš„ç”¨æˆ¶ï¼Œé€™é‚Šå¯ä»¥çœ‹åˆ° Account Status æ˜¯ UNCONFIRMED\nStep2 å˜—è©¦ Login Step1 è¨»å†Š Command æ˜¯ Sign-upï¼Œé€™é‚Šæ˜¯é©—è­‰ï¼Œè€Œä¸¦éç™»å…¥ï¼Œæ‰€ä»¥ Command ä¸æ˜¯ Login ï¼Œè€Œæ˜¯ initiate-auth\n\u0026ndash;auth-flow é©—è­‰æ–¹å¼ï¼Œé€™é‚Šä½¿ç”¨ USER_PASSWORD_AUTH å–®ç´”ä½¿ç”¨ UserName \u0026amp; Password ã€‚ é€™é‚Šè¦ç‰¹åˆ¥æ³¨æ„ï¼Œ Client å¿…é ˆè¦ Allow å¯ä»¥ä½¿ç”¨ USER_PASSWORD_AUTHï¼Œè‰¾å€«åœ¨ Create Client æ™‚æœ‰ç‰¹åˆ¥ç‰¹å®š\n\u0026ndash;auth-parameters é€™é‚Šæ˜¯ USERNAME \u0026amp; PASSWORD çµæœæœƒæ˜¯å™´ Exception ï¼ŒåŸå› æ˜¯ Account Status é‚„æ˜¯ UNCONFIRMED\n1aws cognito-idp initiate-auth \\ 2 --auth-flow USER_PASSWORD_AUTH \\ 3 --client-id 400d11al9p25pmjg3igflo5h4i \\ 4 --auth-parameters USERNAME=allen.hsieh.aws@gmail.com,PASSWORD=Aa123456! 5 6# Result 7An error occurred (UserNotConfirmedException) when calling the InitiateAuth operation: User is not confirmed. Step3 é©—è­‰ User Cognito æœƒå¯„é€ verification code åˆ°ä½ çš„ mail ï¼Œä¿¡ç®±å…§æ‡‰è©²è¦æœ‰ä¸€å° email title å«åš Your verification codeï¼Œå¦‚æœæ²’æœ‰çœ‹åˆ°ï¼Œå»ºè­°å…ˆåˆ°åƒåœ¾éƒµç®±è£¡é¢æŸ¥çœ‹ã€‚\né€™é‚Šä½¿ç”¨ confirm-sign-up å»èªè­‰ ï¼Œæ³¨æ„æ­£å¸¸èªè­‰æˆåŠŸæ˜¯ä¸æœƒæœ‰ä»»ä½• result\n1aws cognito-idp confirm-sign-up \\ 2 --client-id 400d11al9p25pmjg3igflo5h4i \\ 3 --username allen.hsieh.aws@gmail.com \\ 4 --confirmation-code 328625 å¦‚æœæ²’æœ‰æ”¶åˆ° Email æˆ–è¦ºå¾—éº»ç…© ï¼Œæƒ³è¦ç›´æ¥èªè­‰çš„è©±ï¼Œå¯ä»¥å…ˆä½¿ç”¨ ADMIN çš„æ¬Šé™èªè­‰\n1aws cognito-idp admin-confirm-sign-up \\ 2 --user-pool-id ap-northeast-1_DpExb5BW8 \\ 3 --username allen.hsieh.aws@gmail.com Step4 ç¢ºèªé©—è­‰ é€™æ™‚å¾Œé€é UIï¼Œå¯ä»¥çœ‹åˆ° Account Status å·²ç¶“æ˜¯ CONFIRMED\nStep5 å†æ¬¡ Login é€™æ™‚å€™ï¼Œå†æ¬¡ call initiate-auth å°±æœƒæˆåŠŸï¼Œè€Œä¸”é€™æ™‚å€™ Result æœƒæœ‰ä¸‰å€‹ Tokenï¼Œåˆ†åˆ¥æ˜¯ IdToken, AccessToken å’Œ RefreshTokenï¼Œé€™ä¸‰å€‹ Token éƒ½æ˜¯ä½¿ç”¨ JWT Tokenã€‚RefreshToken å°±å¦‚å­—é¢çš„æ„æ€ï¼Œä¸»è¦ç”¨ä¾†æ›´æ–° Tokenã€‚Response ä¸­æœ‰ ExpiresIn é€™å€‹æ˜¯å‘ŠçŸ¥ Token éæœŸæ™‚é–“ï¼Œé€™é‚Šå–®ä½æ˜¯ç§’ã€‚IdToken ä¸»è¦æœ‰åŒ…å«å®¢æˆ¶çš„ä¸€äº›è³‡è¨Šï¼ˆä¾‹å¦‚ email, phone)ï¼Œå¯ä»¥çŸ¥é“é€™å€‹äººæ˜¯èª°ã€‚è€Œ AccessToken ä¸»è¦æ˜¯çµ¦ä½  call ä¸€äº›ä¸éœ€è¦çŸ¥é“å€‹äººè³‡è¨Šçš„ APIï¼ŒAPI åªæ˜¯å–®ç´”è¦çŸ¥é“é€™å€‹ User æ“æœ‰æ¬Šé™å°±å¯ä»¥ä½¿ç”¨ AccessTokenã€‚é€™é‚Šä¹Ÿå¯ä»¥ä½¿ç”¨ JWT.io å°‡ Token decode å›ä¾†ï¼Œçœ‹çœ‹è£¡é¢æœ‰ä»€éº¼è³‡è¨Šã€‚\n1aws cognito-idp initiate-auth \\ 2 --auth-flow USER_PASSWORD_AUTH \\ 3 --client-id 400d11al9p25pmjg3igflo5h4i \\ 4 --auth-parameters USERNAME=allen.hsieh.aws@gmail.com,PASSWORD=Aa123456! 5 6# Result 7{ 8 \u0026#34;AuthenticationResult\u0026#34;: { 9 \u0026#34;ExpiresIn\u0026#34;: 3600, 10 \u0026#34;IdToken\u0026#34;: \u0026#34;eyJraWQiOiJhTmJjOWZpbUw5TjUxWWk2VkV6VlUwZ1EyZUdkRFVPNElQVURYYmN4MVhFPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJjNTdjNWZiOS03ZmJkLTQwNmQtOWJiMy0xOWY4OGNmYzlhYzAiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLW5vcnRoZWFzdC0xLmFtYXpvbmF3cy5jb21cL2FwLW5vcnRoZWFzdC0xX0RwRXhiNUJXOCIsImNvZ25pdG86dXNlcm5hbWUiOiJjNTdjNWZiOS03ZmJkLTQwNmQtOWJiMy0xOWY4OGNmYzlhYzAiLCJvcmlnaW5fanRpIjoiNGVlYmIyMTQtMzBlOC00N2Q3LWJjOGMtODA3NjM5ZTljMzU2IiwiYXVkIjoiNDAwZDExYWw5cDI1cG1qZzNpZ2ZsbzVoNGkiLCJldmVudF9pZCI6IjM3Nzk5N2RlLTFhMWYtNDA5ZS1iNjM1LWVjNzk2ZTBjZTEwYiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjI2MDAzNjU5LCJleHAiOjE2MjYwMDcyNTksImlhdCI6MTYyNjAwMzY1OSwianRpIjoiOWZkN2M1MjYtNTBkMy00NWFmLTg5YmUtOWMxNWMzMjMzMjUxIiwiZW1haWwiOiJhbGxlbi5oc2llaC5hd3NAZ21haWwuY29tIn0.Asp7HF1mpPzWUE3l_7S8EH1nY8x9y3o2NK_8fBb_-Hz0PPXTkPGTvjqooEbHRLGGWAf8d7jwoBbsqV3jhFN-UHvrfcAYNRX_DAOeyxi4tCDTQXDk_Ozu8bCU9Clmb5zyg8Jo_SBAZdnKJewbWLEuhqi9_g7AHQrI_sufec3G6L8Ufr3mdfm-eTGtMcICmgkCxImd_zVgWSGkT5gUgcN0DvFzu6cqWC6kjaM3UoUx1uJ-iLpgA2rXzoBEKI2MqGWlIFSJcxL-IFtZyBvU2k4WNDrT5wN1s30UBa6_zeP_-8ZOp-BdU5D4omWltJfns16fqsPBmhbVoyuycamhxv_htQ\u0026#34;, 11 \u0026#34;RefreshToken\u0026#34;: \u0026#34;eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.BJz_JPV5gRBtqiMLhiQroXg0GsTg33jpT9JOlpT1COkmYCTQBfYblnkoGb4tNCL7y7JWreHJDAFXRafaq4fYkOU9gob0FSxUv3MhVs8V1AKiWunM-iytuKFjNALe2Xlmsa70hBcjiEda5agWMdoYG8Q4eL59-ogmJUgsn46h69-B2cxnWx7RQQ9RwJpauLV8zEEKCUYkVE7C5umlceJjQI0OWN76fcoWoCdx-IUgAJEBf72PJ0KBWeZ1p4ElSMWFtg3Egso-OcES1rzW1gE1qG7N_Hcn_58td8fnQAZEONMxPbHzH2C6AaUPF1NaLcQl9mRSs7KgODZkGFQ6FmAc8Q.jitGP9kMECesDsZj.QODsHRk2PYwx9LktJrkbGz__7i2eh7Fz7ueI5qrgrR3uK0nC5jU06RVuMQqn9m_EnlWh0dj9HEU_e9j5XMrbeRA4ZCJkL3wlsZmfRFfF04pAhjO7H7_pxsq_-gGw-5ZNGyh0osd3MICYIYBoJ90RrRHetKKfna9X_hktv8f9A63lqjZLSWDFhAWmXYD_UiLsi7Pf9JAw5g9w3MGYxQ2RN_KRmoaxQg213_6r4fZjqpH0QDpo7Y7bsMu82kGusv8HXwP-O4l7pE6IMTH8k2oX2q2Yg85o-fwEjFZmIiCwnkQfOK607I9qUIN1w8ACtfW6KbN8AXch3CXsnyYeZbprAtgzwYJCERIImfv6UakKwvqlzBCIr3o_idkHnBJrn4HnVhlNTzttl6cyySvO3ombFdHWfn8KbztaAVAZwazQC5WNTm6sCwvz5oR30A-i2taDeT7gwXe_CSg-YiSG8ODKCcTBOeCmCKOpx2Z7maMBP1dAsKqHQ_0-Ozfp_VPJ57TsjTVyLiUCwOCKlZPcMJbKz_svgkc7yTHv9EAYklOLDC3eEEvIIuhXqkmdW0CEvlwvfQLXiRvMbrVPxxGvOrHyIN7f7MSEY8NjZZ-LaXxCg7ilCHEk_pNGn8tru6r_FjTs657tVnxRg0CL5yOu-heKwcYXrK1syS5YRWYi4DYwkBI2_2ymPOlWxZY94cM6LfJpW7EVFxvF7ZUu3aMm4F2s5lQsFuWo6LNIm7umdpm6hJyP6lsgzn3VHsHXBN1WQZDqqUWmVSOcAVQjzvYVaisin90r5LSwMqGE2cxgSzlykE7tSwzZbK8I3sO-iUwdZoaVQYHqSKEa9dwRUc_y3yJxfo81vaLvy73FFg2QnTUA8l6mjziRk0-pG3aM6ODneCGewXm0lyZ6sTbzk2euT6ohrj0CgdJ3kDe1IS0IyV8G5wd_bxE0a5U5IVMnPMexZo-HeJxMbiRKh7dFZ3lCoLvJ3r9vfOGIJCMCo5u-nCC9KkQDJQY5P8mWbKRh4pO6XmPMIj4c96reguvnXmm-eA09y89hQm9AkOafnjMDhYRNEISr0WO1zP5GQRpY98BRdz5T-e8xzQKufoerg3Ogalciw_r6FJgjUJeyfG9PEQlEQXz4nvfLFI5DwHXs768g-_02i0tRZ-mVl8cXRMQ2Sa8L-w2ptvznmayCLEL8rMdggGEHQZSuQKP5pmQu9Mq-nP4mWjR2GWey-UAMLHTZ1l-VsoextWfwdsZaTRJQNXUmOpHgZHHYb8yAOae6nQP60CNGA9DnvAkalrhaNZlOdXG5paDG8hUz1wNFsOLunEe3fhon573QivWx0dUOmxf2DGCqlDC1GrB2UvY6lw.1uaq1g1lQ9BBIMa3X5VG1Q\u0026#34;, 12 \u0026#34;TokenType\u0026#34;: \u0026#34;Bearer\u0026#34;, 13 \u0026#34;AccessToken\u0026#34;: \u0026#34;eyJraWQiOiJKcXVVM0N3dk1YNW1oMTNhb0ZrRnp6VTJ5VytIdXcwUnR4cGdRSXZEVFIwPSIsImFsZyI6IlJTMjU2In0.eyJvcmlnaW5fanRpIjoiNGVlYmIyMTQtMzBlOC00N2Q3LWJjOGMtODA3NjM5ZTljMzU2Iiwic3ViIjoiYzU3YzVmYjktN2ZiZC00MDZkLTliYjMtMTlmODhjZmM5YWMwIiwiZXZlbnRfaWQiOiIzNzc5OTdkZS0xYTFmLTQwOWUtYjYzNS1lYzc5NmUwY2UxMGIiLCJ0b2tlbl91c2UiOiJhY2Nlc3MiLCJzY29wZSI6ImF3cy5jb2duaXRvLnNpZ25pbi51c2VyLmFkbWluIiwiYXV0aF90aW1lIjoxNjI2MDAzNjU5LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuYXAtbm9ydGhlYXN0LTEuYW1hem9uYXdzLmNvbVwvYXAtbm9ydGhlYXN0LTFfRHBFeGI1Qlc4IiwiZXhwIjoxNjI2MDA3MjU5LCJpYXQiOjE2MjYwMDM2NTksImp0aSI6ImMyMDlhYWQyLTYxZDEtNDgwNy1hMmFlLWJjODNhNmJiY2I2NyIsImNsaWVudF9pZCI6IjQwMGQxMWFsOXAyNXBtamczaWdmbG81aDRpIiwidXNlcm5hbWUiOiJjNTdjNWZiOS03ZmJkLTQwNmQtOWJiMy0xOWY4OGNmYzlhYzAifQ.IuD31XgD2C93v0H9PUCCIWCBYUVX7QdSq3S3MQlR0LhWI7Ai-w5yEI7KVT0Zy6U943sqsvoagU3ykNS756ivfJbPzI1un4L6d8Y4bZBR9ZY4QRylLx7s3sDY4gnNd02KFGcwYQxj_MGm3SDXQF9xFyDJ6_gP7j1XXgIWknhvrN1-QzEaNqGDiY5v97jT1pLLGvlAe5VuUkcbptMdhStM10fAWww-xMVO_2W3mZcCJwUQ5NR6CaGo2HP_EwkkZ5_Qy7w8q3yTzdrNlX67e6TCHdU5Yu2p-bceSU3_2X3IeHfUhAOobhR_BuntsoSdXLJgnJcCYYg2BiHcUY2jIf8h6A\u0026#34; 14 }, 15 \u0026#34;ChallengeParameters\u0026#34;: {} 16 } ![jwt_decode_example]jwt_decode_example.webp?width=1024px#center)\nç¸½çµ AWS Cognito çœŸçš„å¾ˆæ–¹ä¾¿ï¼Œå°æ–¼é‚„æ²’æœ‰è‡ªå·±çš„ç”¨æˆ¶ç®¡ç†Appï¼Œå¯ä»¥å¿«é€Ÿçš„éƒ¨ç½²ã€‚å…§éƒ¨é‚„æœ‰è¨±å¤šåŠŸèƒ½ä¾‹å¦‚ Host Login UI ã€å®¢è£½åŒ– Lambda trigger æˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹èªè­‰ã€‚è‰¾å€«ä¹‹å¾Œæœ‰ç©ºçš„è©±ï¼Œä¹Ÿæœƒå¯«ä½¿ç”¨ç¬¬ä¸‰æ–¹èªè­‰å¦‚ Facebook æˆ– Gmailï¼Œæˆ–è€…å»ºç«‹ Serverless Application (API Gateway é©—è­‰ï¼‰ç›¸é—œæ–‡ç« ï½\n","date":"May 11, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/create-cognito-user-pool-by-aws-cli/","smallImg":"","tags":[{"title":"Cognito","url":"/tags/cognito/"}],"timestamp":1683763200,"title":"ä½¿ç”¨ AWS Cognito CLI å»ºç«‹ User Pool"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"MAGNATE ä»Šæ—¥ç¬¬ä¸€ç«™ï¼Œé™ªå¥³æœ‹å‹å»å¥¹å¤¢å¯ä»¥æ±‚çš„ MAGNATE å’–å•¡å»³ ï¼Œæ“šäº†è§£é€™é–“å’–å•¡å»³æ˜¯ BTS å…¶ä¸­ä¸€åæˆå“¡ Jiminçš„çˆ¸çˆ¸é–‹çš„å’–å•¡å»³ï½èµ°å‡ºåœ°éµåœ¨å‰å¾€å’–å•¡å»³çš„è·¯ä¸Šï¼Œé‚„é‡åˆ°ä¸€ä½æ­£åœ¨é›ç‹—çš„éŸ“åœ‹çˆºçˆºï¼Œä»–è½åˆ°æˆ‘å€‘è¬›çš„ä¸æ˜¯éŸ“æ–‡å¾Œï¼Œå°±å•æˆ‘å€‘æ˜¯ä¸æ˜¯è¦å» \u0026ldquo;Jimin Father Coffee?\u0026rdquo; ï¼Œå› ç‚ºé€™é™„è¿‘ä¸€å¸¶éƒ½æ˜¯ä½å®…å€ï¼Œæ„Ÿè¦ºç•¶åœ°äººæ‡‰è©²éƒ½çŸ¥é“å’–å•¡å»³åœ¨å“ªï¼Œå¤–åœ‹äººä¾†é€™è£¡å¤§éƒ¨åˆ†éƒ½æ˜¯ BTS çš„ Army(BTSç²‰çµ²çš„ä»£ç¨±) è€Œä¸”éƒ½æ˜¯è¦å» Jimin çˆ¸çˆ¸é–‹çš„å’–å•¡å»³ï½æˆ‘å€‘å›ç­” \u0026ldquo;yes\u0026rdquo; å¾Œï¼ŒéŸ“åœ‹çˆºçˆºå¾ˆç†±å¿ƒçš„å¹«æˆ‘å€‘æŒ‡è·¯ï¼Œé‚„é™ªæˆ‘å€‘èµ°äº†ä¸€å°æ®µï¼Œä¸¦ç”¨æ‰‹æŒ‡æŒ‡å‘å’–å•¡å»³å‘Šè¨´æˆ‘å€‘ä½ç½®ï½\nå¾é é å°±å¯ä»¥çœ‹åˆ° Magnate çš„æ‹›ç‰Œ\nåº—é–€å£\nä¸€é€²é–€å£å³é‚Šå°±æ˜¯BARå°ï¼Œé€™é–“å’–å•¡å»³æ¯”æˆ‘æƒ³åƒä¸­çš„å¤§å¾ˆå¤šï¼Œæˆ‘åŸæœ¬é‚„æ“”å¿ƒ BTS é€™éº¼æœ‰åï¼Œæœƒä¸æœƒé€£ä¾†å’–å•¡å»³éƒ½éœ€è¦ç‰¹åˆ¥å…ˆè¨‚ä½ï¼Œçœ‹ä¾†æ˜¯æˆ‘æƒ³å¤šäº†ï¼Œä½†ä¹Ÿæ˜¯æœ‰å¯èƒ½æˆ‘å€‘é¸æ“‡åœ¨å¹³æ—¥æ—©ä¸Šä¾†ï¼Œæ‰€ä»¥äººæ‰æ²’é€™éº¼å¤šï½\né‚„æœ‰è³£è¨±å¤šçœ‹èµ·ä¾†éƒ½é‚ªæƒ¡å¾ˆå¥½åƒçš„è›‹ç³•ï¼\nå…§éƒ¨è£æ½¢å¾—å¾ˆæ¼‚äº®\né‚„æœ‰ä¸€æ«ƒçš„å¸½å­ï¼Œè½å¥³å‹èªªéƒ½æ˜¯ Jimin å¸¶éçš„å¸½å­ï½è€Œä¸”çœ‹æ¨™ç¤ºåªèƒ½æ‹ç…§ä¸èƒ½è§¸ç¢°ï½\né€£å»æ‰€é–€å£éƒ½ç ¸ä¸‹é‡é‡‘\né–€å£çš„æ­£å‰æ–¹ï¼Œæœ‰ä¸€æ¡Œæ˜¯ Jimin æˆ– BTS çš„å•†å“ï¼Œè½èªªé‚„æœ‰ç²‰çµ²é€çš„æ±è¥¿ï½\nå¥³å‹è‡ªå·±é‚„å¸¶äº† Jimin çš„å°å¡ï¼Œå’Œç¾å ´æœ‰ Jimin ç›¸é—œçš„é›œèªŒï¼Œä¾†å’Œä»Šæ—¥çš„é¤é»é£²æ–™æ‹ç…§~\næ¥è‘—åœ¨é€™æ‚ é–’çš„åº¦éä¸€å€‹ä¸Šåˆï¼Œçœ‹è‘—å¥³å‹é–‹å¿ƒçš„è¡¨æƒ…ï¼Œé€™æ¬¡æ˜¯ä¾†å°äº†ï½\né‡‘å‰›éƒ¨éšŠé‹ å› ç‚ºåœ¨ Magnate Coffee æœ‰è²·äº†ä¸€è¢‹å•†å“ï¼Œä¸æƒ³è¦ä¸‹åˆå¸¶è‘—åˆ°è™•èµ°ï¼Œæ‰€ä»¥åˆè·‘å›é£¯åº—æ”¾æ±è¥¿ã€‚ç”±æ–¼æ™‚é–“å·²ç¶“ä¸­åˆäº†ï¼Œæ€•å¤ªæ™šåƒæ™šé¤åˆä¸çŸ¥é“è¦åˆ°ä»€éº¼æ™‚å€™åƒï¼Œæ‰€ä»¥åœ¨ Google Map ä¸Šæ‰¾é£¯åº—é™„è¿‘çš„é¤å»³ï¼Œå‰›å¥½çœ‹åˆ°å…¶ä»–éƒ¨è½å®¢æœ‰æ¨è–¦çš„é‡‘å‰›éƒ¨éšŠé‹ï¼Œè‰¾å€«æ±ºå®šå»åšé®®çœ‹çœ‹ï¼Œç•¢ç«Ÿéƒ¨éšŠé‹ä¹Ÿç®—æ˜¯éŸ“åœ‹æœ‰åçš„æ–™ç†ä¹‹ä¸€ã€‚\né‡‘å‰›éƒ¨éšŠé‹æœç„¶æ‹›ç‰Œå°±æ˜¯ä¸€å€‹é‡‘å‰›\nå°±é€£æ³¡éºµä¹Ÿæœ‰ç‰¹åˆ¥æ‰¾å» å•†åˆä½œï¼Œå°äº†é‡‘å‰›çš„ Logoï½è€Œä¸”é€™é‚Šç™½é£¯å’Œæ³¡éºµæ˜¯å¯ä»¥å…è²»çºŒçš„\nä»Šæ—¥é»äº†ç‰›äº”èŠ±éƒ¨éšŠé‹ï¼Œç…§ç‰‡æ˜¯å…©äººä»½é‡çš„ï¼Œè€é—†æœƒæ ¹æ“šäººæ•¸ä¾†æ”¾ä¸åŒä»½é‡\nè€é—†é‚„å¾ˆå¤§æ–¹çš„æ‹›å¾…ä¸€ä»½ç‚¸é‹è²¼ï¼Œé€™å€‹é‹è²¼çœŸçš„å¾ˆå¤§ï½\næœ€å¾Œæ•´é«”åƒèµ·ä¾†è‰¾å€«å€‹äººè¦ºå¾—å‘³é“æ™®é€šï¼Œä½†æœ‰å¯èƒ½é€™å®¶æœ¬èº«åƒ¹ä½ä¸é«˜ï¼ŒåŠ ä¸Šä»½é‡çµ¦çš„ç®—ä¸éŒ¯ï¼Œæ‰€ä»¥æ‡‰è©²æ˜¯ç®—æ˜¯CPå€¼ä¸éŒ¯çš„é¤å»³ï¼Œå¦‚æœæ˜¯é£Ÿé‡æ¯”è¼ƒå¤§çš„äººæ¯”è¼ƒé©åˆï½\nç”˜å·æ´æ–‡åŒ–æ‘ æ¥è‘—æˆ‘å€‘ååœ°éµå†è½‰ä¹˜å°å·´å£«åˆ°ç”˜å·æ´æ–‡åŒ–æ‘ï¼Œç”±æ–¼ç”˜å·æ´æ–‡åŒ–æ‘ç®—æ˜¯åœ¨å±±ä¸Šï¼Œæ‰€ä»¥å°å·´å£«ä¸Šå»çš„æ™‚å€™è¶…æ™ƒï½çœ‹ä¾†ä¸ç®¡åˆ°å“ªå€‹åœ‹å®¶çš„å°å·´å£«éƒ½ä¸€æ¨£ï¼Œæœ‰å¥½å¹¾å€‹è½‰å½å¹…åº¦è¶…å½çš„è·¯æ®µï¼Œå¸æ©Ÿé‚„æ˜¯èƒ½é‚Šæ§åˆ¶å¥½æ²¹é–€è¡ä¸Šå¡ï¼¸ï¼¤çœŸçš„è¦ºå¾—å¸æ©Ÿå¾ˆå²å®³!\nä¸€ä¸‹è»Šå°±çœ‹åˆ°ä¸€å †äººæ­£åœ¨æ‹ç…§ï¼Œæˆ‘å€‘ä¹Ÿè·Ÿè‘—æ‹äº†å¹¾å¼µï¼Œæ‹å®Œä»¥å¾Œå°±èµ°åˆ°ä¸€å€‹æœå‹™ç«™ï¼Œæƒ³èªªå»è¦ä¸€å€‹åœ°åœ–ã€‚ çµæœæœå‹™ç«™çš„è€å¥¶å¥¶è·Ÿæˆ‘å€‘èªªåœ°åœ–è¦å»å¦ä¸€å€‹æœå‹™ç«™è²·ï¼Œç•¶ä¸‹æœå‹™ç«™é–€ä¸Šæœ‰ä¸€å¼µåœ°åœ–ï¼Œè€å¥¶å¥¶å¾ˆç†±å¿ƒçš„æŒ‡çµ¦æˆ‘å€‘çœ‹ä¸¦å»ºè­°æ€éº¼èµ°æ¯”è¼ƒå¥½ã€‚å› ç‚ºç”˜å·æ´æ–‡åŒ–æ‘å¾ˆå¤§ï¼Œæ‰€ä»¥æœ‰å¾ˆå¤šè·¯ç·šå¯ä»¥èµ°ï¼Œæˆ‘å€‘å°±ç”¨æ‰‹æ©ŸæŠŠåœ°åœ–æ‹ä¸‹ä¾†ï¼Œçœä¸‹ä¸€ç­†åœ°åœ–è²»ï¼ è€å¥¶å¥¶ä¹Ÿå‘Šè¨´æˆ‘å€‘ï¼Œæœ‰é­šçš„åœ°æ–¹å°±ä»£è¡¨å¯ä»¥èµ°ï¼Œæœ€å¾Œé‚„å•æˆ‘å€‘å¾å“ªè£¡ä¾†çš„ï¼Œæˆ‘å€‘å›ç­”èªªå°ç£ä»¥å¾Œï¼Œè€å¥¶å¥¶é‚„å¾ˆé–‹å¿ƒçš„èªªä¸€äº›ä¸­æ–‡å–®è©ï¼Œä½†ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ç‚ºå‰›å‰›çš„å°è©±éƒ½æ˜¯è‹±æ–‡ï¼Œè€å¥¶å¥¶çªç„¶åˆ‡æ›æˆä¸­æ–‡ä¸€æ™‚ä¹‹é–“åè€Œæ²’è½æ‡‚XDã€‚\næœå‹™ç«™å¤–é¢é‚„æœ‰å°ç‹å­ï½\næ¥è‘—æˆ‘å€‘èµ°äº†è€å¥¶å¥¶æ¨è–¦çš„è·¯ç·šï¼Œé€™è·¯å£å°±å¾ˆæ˜é¡¯ï½\nè€Œä¸”å…¥å£é€²å…¥æ²’å¤šä¹…å°±æœ‰çœ‹åˆ°æ­¡è¿çš„å°äººï½å…¬è»Šç«™ä¸‹ä¾†ä¹Ÿæœ‰ä¸€å€‹ï¼Œé‚„åœ¨é‚£é‚ŠåŠªåŠ›æ‹äº†è¨±ä¹…ï¼Œå› ç‚ºäººè¡Œé“å¤ªçª„ï¼Œå¦‚æœè¦æ‹ç…§éœ€è¦ç«™åˆ°é¦¬è·¯ä¸Šï¼Œä½†ä¸€ç›´é™¸é™¸çºŒçºŒæœƒæœ‰è»Šå­æŒºå±éšªçš„ï¼Œæ—©çŸ¥é“å…¥å£é€™ä¹Ÿæœ‰ä¸€å€‹ï¼Œå°±ä¸åœ¨å…¬è»Šç«™é‚£é‚Šæ‹äº† \u0026gt;_\u0026lt;\næ¥è‘—å°±çœ‹åˆ°è€å¥¶å¥¶èªªçš„é­šï½ä¹Ÿå¤ªå¤§ä¸€æ¢äº†å§\næ–‡åŒ–æ‘å…§çš„è·¯éƒ½æ˜¯å¹³è·¯ä¹Ÿå¾ˆå¥½èµ°ï¼Œä¸€æ—é‚„æœ‰è¨±å¤šæ–‡å‰µå°åº—ï¼Œéƒ½æœƒè³£ä¸€äº›ç´€å¿µå“æˆ–æ˜ä¿¡ç‰‡ï¼Œé‚„æœ‰æ‰‹ä½œå°ç‰©çš„å°åº—å’Œåƒçš„ï½\nè‰¾å€«åœ¨ä¸­é–“ä¸€è™•æ‹è²“çš„åœ°æ–¹æ‹ç…§æ™‚ï¼Œå¥³å‹è·‘ä¾†è·Ÿæˆ‘èªªæ—é‚Šæœ‰è²“è²“è€¶ï½\næ¥è‘—èµ°å»çœ‹å¥³å‹èªªçš„åœ°æ–¹ï¼ŒåŸä¾†æ˜¯ä¸€é–“éºµåŒ…åº—\nçµæœå¥³å‹èªªçš„è²“è²“æ˜¯é€™éš»ï¼Œæˆ‘ä»¥ç‚ºæ˜¯çœŸè²“\næ¥è‘—çœ‹åˆ°ä¸€é–“å¤–é¢æ”¾æ»¿åŒ…åŒ…çš„åº—ï½é€™æ”¾åœ¨å¤–é¢éƒ½ä¸æ€•é«’å—ï¼Œæ¯å¤©éƒ½è¦æ”¶çš„è©±ä¸æœƒç´¯å—?!\næ¥è‘—çœ‹åˆ°ä¸€é¢ç‰†ï¼Œä¸Šé¢æ˜¯å„åœ‹èªè¨€çš„æˆ‘æ„›ä½ \nå†èµ°ä¸€å°æ®µï¼Œå°±çœ‹åˆ°å¥³å‹çš„ BTS å£ç•«ï¼Œè½å¥³å‹èªªå› ç‚ºæœ‰å…©å€‹ BTS çš„æˆå“¡æ˜¯ä¾†è‡ªé‡œå±±ï¼Œ æ‰€ä»¥å£ç•«æœ‰ç•«é‚£å…©å€‹æˆå“¡çš„ç•«åƒï½\næ¥è‘—çœ‹åˆ°äº†æœ€ç†±é–€çš„æ‹ç…§é»ï¼Œå°±æ˜¯ã€Œå°ç‹å­ã€å•¦ï¼è¶…å¤šäººéƒ½åœ¨æ’éšŠç­‰è‘—å’Œå°ç‹å­åˆå½±ï¼Œæˆ‘å€‘å¤§ç´„ä¹Ÿæ’äº†åå¹¾åˆ†é˜æ‰æ‹åˆ°\næ¥è‘—ä¾†åˆ° 148 éšæ¢¯\nå¾ä¸Šé¢å¾€ä¸‹çœ‹ï¼ŒçœŸçš„å¾ˆæ·±\né€™é‚Šè¨±å¤šæˆ¿å±‹éƒ½æ˜¯ä½å®¶ï¼Œæ²¿è·¯çœŸçš„å°±è¦é è€å¥¶å¥¶èªªçš„é­šé­šåœ¨å“ªå°±èƒ½çŸ¥é“å¾€å“ªé‚Šèµ°ï¼Œé­šé­šéƒ½åšå¾—å¾ˆæ˜é¡¯\nä¸­é–“é‚„çœ‹åˆ°è·¯ç‰Œä¸Šé¢æœ‰ä¸­æ–‡\né€™é‚Šé‚„æ”¾äº† 1970 å¹´ä»£ç”˜å·æ´æ–‡åŒ–æ‘çš„æ¨£å­\nä¸éè‰¾å€«æœ€å¾Œæ²’æœ‰èµ°å®Œ 148 éšæ¢¯ï¼Œå› ç‚ºè¶Šèµ°è¶Šä¸‹é¢ï¼Œé›¢æˆ‘å€‘é€²ä¾†çš„åœ°æ–¹æœƒè¶Šé›¢è¶Šé ï½ åŠ ä¸Šè‰¾å€«æœ‰é»ç´¯äº†ï¼Œæ‰€ä»¥èµ°ä¸€åŠå°±å›é ­äº†ã€‚\næœ€å¾Œé™„ä¸Šæ²¿è·¯é‚Šèµ°é‚Šæ‹ä¸åŒè§’åº¦çš„ç”˜å·æ´æ–‡åŒ–æ‘ï½\nå—æµ¦æ´ æ¥è‘—åˆ° Day2 æ²’æœ‰ä»€éº¼æ™‚é–“é€›çš„å—æµ¦æ´ï½\nçœ‹åˆ°ä¸€å®¶è³£é£¾å“çš„åº—ï¼Œå¤–é¢çš„è£æ½¢å…¨éƒ¨æ˜¯ä¸€å€‹ä¸€å€‹çš„è€³ç’°çµ„æˆçš„\næ¥è‘—é‚„çœ‹åˆ°äº† Kakao Friend Storeï¼Œé›–ç„¶è‰¾å€«å° Line Friend Store æ¯”è¼ƒæœ‰èˆˆè¶£ï¼Œå¯æƒœé‡œå±±çš„ Line Store å·²ç¶“é—œé–‰äº†ï½\nçœ‹åˆ°è¶…å¤§çš„ Ryan\né‚„æœ‰çœ‹åˆ°ä¸€éš»è·Ÿè‰¾å€«åœ¨å®¶æ™‚ç¶“å¸¸æœƒæœ‰çš„å§¿å‹¢çš„ Ryan\nBiff å»£å ´ æ¥è‘—åˆ° Biff å»£å ´ï¼Œè·¯é‚Šæœ‰è¶…å¤šçš„è·¯é‚Šæ”¤ï¼Œå¾ˆåƒå°ç£çš„å°å¤œå¸‚ï¼Œæˆ‘å€‘å…ˆä¾†åƒå…ƒç¥–çš„ç³–é¤…ï½é€™è£¡çš„ç³–é¤…æœƒæ”¾æ»¿æ»¿çš„å …æœï¼Œå’Œæ˜¨å¤© Day4 å®µå¤œ åƒçš„ç³–é¤…ä¸å¤ªä¸€æ¨£ï¼Œæ˜¨å¤©åƒçš„è£¡é¢æ²’æœ‰åŒ…å …æœï¼Œé›–ç„¶æœ‰äººèªªåŒ…å …æœçš„æ¯”è¼ƒå¥½åƒï¼Œä½†è‰¾å€«è¦ºå¾—æ²’æœ‰å …æœçš„ä¹ŸæŒºå¥½åƒçš„\næ¥è‘—å†è²·æ—é‚Šæ”¤ä½çš„é›è‚‰ä¸²ä¾†åƒï½\næˆ‘è¦ºå¾—éŸ“åœ‹é€™é»åšå¾—ä¸éŒ¯ï¼Œå°±æ˜¯æ”¤ä½æ—æœ‰åœ°æ–¹å¯ä»¥ç›´æ¥ä¸Ÿåƒå®Œçš„ç«¹ç±¤\næœ€å¾Œæ‹äº†ä¸€ä¸‹ Biff å»£å ´\nå¥¶å¥¶ä¼½å€»å°éº¥å†·éºµ æ¥è‘—ä¾†é«”é©—éŸ“åœ‹çš„å†·éºµï¼Œä¾†åˆ°äº†å¥³å‹åŒäº‹æ¨è–¦çš„å¥¶å¥¶ä¼½å€»å°éº¥å†·éºµï¼Œä¹Ÿåœ¨å—æµ¦æ´ï¼Œå¾ Biff å»£å ´èµ°äº”åˆ°ååˆ†é˜å°±åˆ°äº†ï¼Œä¸éé€™å®¶åº—åœ¨å··å…§ï¼Œè¦ç¨å¾®æ¯”å°ä¸€ä¸‹Google mapä¸Šçš„åº—å®¶ç…§ç‰‡æ‰æ‰¾çš„åˆ°ã€‚\nå¥¶å¥¶ä¼½å€»å°éº¥å†·éºµæœ‰ä¸­æ–‡çš„èœå–®\nå¥³å‹é‚„æƒ³èªªä¸­æ–‡èœå–®æœƒä¸æœƒå’Œåº—è£¡çµ¦ç•¶åœ°äººçš„èœå–®ä¸ä¸€æ¨£ï¼Œå¾Œä¾†ç”¨ç¿»è­¯è»Ÿé«”ç¿»è­¯ï¼Œçµæœæ˜¯ä¸€æ¨¡ä¸€æ¨£çš„ xD\næœ€å¾Œè‰¾å€«æƒ³å“åšçœ‹çœ‹ï¼Œæ‰€ä»¥é¢é£Ÿå’Œæ‹Œéºµéƒ½å„é»äº†ä¸€ç¢—ï¼ŒåŸæœ¬çœ‹åˆ°é¢é£Ÿæ˜¯æ¹¯çš„ï¼Œé‚„ä»¥ç‚ºæ˜¯ç†±çš„ï¼Œçµæœæ²’æƒ³åˆ°ä¹Ÿæ˜¯å†·çš„ã€‚ç”±æ–¼æ‹Œéºµæ²’æœ‰æ¹¯æ˜¯ç›´æ¥é…é†¬ï¼Œæ‰€ä»¥å‘³é“æœƒæ¯”è¼ƒé‡ä¹Ÿæ¯”è¼ƒè¾£ã€‚å› ç‚ºéºµéƒ½ç‰¹åˆ¥é•·ï½æ‰€ä»¥åº—å®¶ä¹Ÿæœƒé™„å‰ªåˆ€è®“å®¢äººåœ¨é£Ÿç”¨æ™‚å¯ä»¥è‡ªå·±å‰ªæ–·ï¼Œè€Œä¸”ç•¶ä¸‹æ¡Œä¸Šæœƒé™„ä¸Šä¸€å£ºèŒ¶(è‰¾å€«åœ¨é‚„æ²’å–ä¹‹å‰æ˜¯é€™éº¼ä»¥ç‚º)ï¼Œçµæœå€’åœ¨æ¯å­è£¡å–å¾Œæ‰ç™¼ç¾åŸä¾†é€™å£ºèŒ¶å…¶å¯¦æ˜¯ç†±æ¹¯å‘€ã€‚æœ€å¾Œç”±æ–¼è‰¾å€«æ¯”è¼ƒä¸èƒ½åƒè¾£ï¼Œæ‰€ä»¥æ‹Œéºµæ²’æœ‰åƒå®Œã€‚\næ¨‚å¤©è¶…å¸‚ æœ€å¾Œåˆä¾†åˆ°äº†æ¨‚å¤©è¶…å¸‚ï¼ŒåŸæœ¬æ˜¯æƒ³é€›æ¨‚å¤©ç™¾è²¨çš„ï¼Œä½†è‰¾å€«æ²’æœ‰äº‹å…ˆåšå¥½åŠŸèª²ï¼Œæ²’æƒ³åˆ°éŸ“åœ‹çš„ç™¾è²¨åªé–‹åˆ°å…«é»åŠï¼Œæœ€å¾Œæ™ƒäº†ä¸€ä¸‹åœ°ä¸‹å®¤çš„ç¾é£Ÿè¡—ï¼Œæƒ³èªªæœ€å¾Œä¸€å¤©çœ‹èƒ½ä¸èƒ½å†åšçœ‹çœ‹ä»€éº¼å°æ±è¥¿ã€‚æ„å¤–çœ‹åˆ°é€™è£¡ä¹Ÿæœ‰æ‘©æ–¯æ¼¢å ¡é€²é§ï¼Œä½†éŸ“åœ‹çš„ Logo ç«Ÿç„¶æ˜¯ç¶ è‰²çš„ã€‚\næœ€å¾Œåœ¨æ¨‚å¤©è¶…å¸‚åˆè²·äº†ä¸€äº›ä¼´æ‰‹ç¦®ï¼Œé‚„æœ‰æ™´ç‹éºé¦™è‘¡è„ï½å¤–åŒ…è£ç›’ä¸Šé‚„å¯«æœ‰16åº¦çš„ç”œåº¦ï¼ æé†’å¤§å®¶ï½åœ¨æ¨‚å¤©è¶…å¸‚è²·æ°´æœå³ä½¿é‡‘é¡æœ‰è¶…éä¸‰è¬éŸ“å…ƒä¹Ÿæ˜¯ä¸èƒ½é€€ç¨…çš„ï¼Œé‚„å¥½è‰¾å€«æœ‰æº–å‚™å…¶ä»–å‚™æ¡ˆçš„å•†å“ï¼Œé é˜²ä¸èƒ½é€€ç¨…æ™‚è²· xD\nä¹‹å‰è‰¾å€«å»æ—¥æœ¬æ™‚ä¹Ÿæœ‰åƒéåå¹¾åº¦çš„è‘¡è„ï¼Œè‰¾å€«è¦ºå¾—é›–ç„¶æ—¥æœ¬çš„è‘¡è„æ¯”è¼ƒç”œï¼Œä¸éé‚„æ˜¯è¦ºå¾—éŸ“åœ‹çš„æ¯”è¼ƒå¥½åƒï¼Œå› ç‚ºæ—¥æœ¬çš„çœŸçš„ç”œéé ­ï¼Œæ˜¯é‚£ç¨®åƒå¤šäº†æœƒå–‰åš¨ç—›çš„ç”œã€‚\néŸ“åœ‹ä¹‹æ—…å°±åœ¨é€™é‚ŠåŠƒä¸Šå¥é»ï½å› ç‚ºéš”å¤©æ˜¯æ—©ä¸Šçš„é£›æ©Ÿï¼Œæ—©ä¸Šäº”é»å¤šå°±å‡ºç™¼å»æ©Ÿå ´æº–å‚™å›åœ‹äº†ï¼æ„Ÿè¬å¤§å®¶çš„é–±è®€ï½\n","date":"April 4, 2023","img":"/posts/travel/2023_busan_day5/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/travel/2023_busan_day5/feature_hufd89d48379a3affc1274354adc56097c_221644_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/travel/2023_busan_day5/","smallImg":"/posts/travel/2023_busan_day5/feature_hufd89d48379a3affc1274354adc56097c_221644_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"TRAVEL","url":"/tags/travel/"}],"timestamp":1680566400,"title":"2023 é‡œå±±å…­å¤©äº”å¤œ Day5"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"åœ¨å¤§å­¸æ™‚é–“ï¼Œæˆ‘æ›¾ç¶“ä½¿ç”¨é WordPress.com åªæ˜¯æœ€å¾Œè¦ºå¾— WordPress.com é™åˆ¶å¤ªå¤šï¼Œæƒ³è¦é”åˆ°æˆ‘æƒ³è¦çš„æ•ˆæœï¼Œåˆéœ€è¦é¡å¤–èŠ±éŒ¢ï¼Œæ‰€ä»¥æœ€å¾Œå°±æ”¾æ£„äº†ã€‚é€™é‚Šä¸æœƒèŠ±å¤ªå¤šæ™‚é–“è§£é‡‹ WordPress com \u0026amp; org çš„å·®åˆ¥ï¼Œå¦‚æœæœ‰èˆˆè¶£çš„äººï¼Œå¯ä»¥åƒè€ƒé€™é‚Šæ–‡ç«  WordPress.org å’Œ WordPress.com æœ‰ä»€éº¼ä¸ä¸€æ¨£ï¼Ÿã€‚ 2016å¹´ï¼ŒAWS å®£å¸ƒæ–°çš„ Lightsail æœå‹™ä¸Šå¸‚ã€‚Lightsail é€™é‚Šä½¿ç”¨ Bitnami ä¸€éµéƒ¨ç½²å¾ˆå¿«ï¼Œ ä¸ç”¨è‡ªå·±å•Ÿä¸€å€‹ EC2 \u0026amp; MySql Server ç„¶å¾Œé‚„è¦è¨­å®šç¶²è·¯ï¼Œ WordPress ä¹Ÿæœƒå®‰è£å¥½ã€‚é€™é‚Šä»‹ç´¹ç›´æ¥ç”¨ Lightsail Console é é¢ç›´æ¥éƒ¨ç½²ã€‚\nLightsail æ¶è¨­ WordPress Server Step1 é€²å…¥ Lightstail æœå‹™ï¼Œé»ä¸‹ Create instance Step 2 é¸æ“‡ åœ°å€ã€æœå‹™å’Œæ–¹æ¡ˆã€‚ ç”±æ–¼æˆ‘æ˜¯æ–°ç¶²ç«™ï¼Œæ‰€ä»¥é€™é‚Šé¸ç”¨æœ‰ä¸€å€‹æœˆå…è²»è©¦ç”¨çš„ 3.5 ç¾é‡‘ä¸€å€‹æœˆçš„æ–¹æ¡ˆã€‚\nä½¿ç”¨ bncert å»ºç«‹ HTTPS é€éUIï¼Œå¯ä»¥ç›´æ¥é€£ç·šåˆ° Instance ä¸Š\nä½¿ç”¨ bncert å®‰è£æ†‘è­‰ï¼Œæˆ‘çš„æ©Ÿå™¨ä¸€é–‹å§‹ä¸Šé¢å®‰è£æœ‰å®‰è£ bncertã€‚\n1# å®‰è£æ†‘è­‰ 2sudo /opt/bitnami/bncert-tool 3# å¦‚æœæ²’æœ‰ bncert-tool å¯ä»¥åŸ·è¡Œä»¥ä¸‹ command 4wget -O bncert-linux-x64.run https://downloads.bitnami.com/files/bncert/latest/bncert-linux-x64.run 5sudo mkdir /opt/bitnami/bncert 6sudo mv bncert-linux-x64.run /opt/bitnami/bncert/ 7sudo chmod +x /opt/bitnami/bncert/bncert-linux-x64.run 8sudo ln -s /opt/bitnami/bncert/bncert-linux-x64.run /opt/bitnami/bncert-tool åŸ·è¡Œbncert-toolï¼Œä¸€é–‹å§‹æœƒè©¢å• Domain List å’Œ æ˜¯å¦å°‡ Http è¿‘ä¾†çš„é é¢å…¨éƒ¨è½‰åˆ° Https\nä¹‹å¾Œæœƒç¢ºèªæ”¹å‹•å’Œå¡«å¯«æ†‘è­‰ä¸Šé¢çš„ mail\nåŸ·è¡Œçµæœ\nRouter 53 è³¼è²·åŸŸå é€²å…¥Router53 è³¼è²·åŸŸåé é¢ï¼Œé»é¸ Register Domain\né€™é‚Šå¯ä»¥æœå°‹ä½ è¦çš„ domainï¼ŒåŒæ™‚ Router 53 ä¹Ÿæœƒæä¾›å…¶ä»–å»ºè­°ã€‚\nç¢ºèªè¦è³¼è²·åŸŸåæ™‚ï¼Œéœ€è¦å¡«å¯«å€‹äººè³‡è¨Š\nè³¼è²·å®Œä»¥å¾Œå°±å¯ä»¥åœ¨ Rounter 53 ä¸Šç¢ºèªè‡ªå·±çš„ Domain ç‹€æ…‹\nç”³è«‹å®Œ Domain éœ€è¦ä¸€é»æ™‚é–“å–”ï½è‰¾å€«é€™é‚Šç­‰äº†å¤§ç´„å…©å¤©æ‰ä¸‹ä¾†ã€‚\nå»ºç«‹æ–°çš„ index åˆ° Google Search é€™é‚Šé †ä¾¿ä»‹ç´¹ä¸€ä¸‹ï¼Œæˆ‘ç›®å‰åœ¨ Worldpress ä½¿ç”¨çš„ SEO Plugin Yoast SEO ï¼Œå®‰è£å®Œä»¥å¾Œæ¯ä¸€å€‹ Post \u0026amp; Page ä¸‹é¢å¯ä»¥è¨­å®šä¸€äº› keyphraseã€Meta description ç­‰ç­‰è³‡è¨Šï¼Œä¹Ÿæœƒæä¾›æ¯ä¸€å€‹ Status ä½œç‚ºåƒè€ƒã€‚\né€™é‚Šç°¡å–®ä¸€å€‹æ–¹æ³•å¯ä»¥ç¢ºèª Google æ˜¯å¦æœ‰ index ä½ çš„ç¶²ç«™ï¼Œæ–°çš„ç¶²ç«™é€šå¸¸éƒ½æ²’æœ‰è³‡è¨Šï¼Œåœ¨ Google æ‰“ä¸Š â€œsite:domainNameâ€\nä»¥è‰¾å€«çš„ allenhsieh1992.com ï¼Œç”±æ–¼æˆ‘å·²ç¶“æœ‰è¨­å®šå¹¾å¤©äº†ï¼Œæ‰€ä»¥ Google æœ‰ index äº†ï¼Œåå‰‡å°±æœƒåªæœ‰ä¸€å€‹è«‹ä½¿ç”¨ Google Search Console çš„é é¢ Google Search Console é©—è­‰ç¶²åŸŸ Google Search Console æ˜¯ä¸€å€‹ Google è®“æˆ‘å€‘å‘Šè¨´ä»–ç¾åœ¨æ–°çš„ç¶²åŸŸæ–¹æ³•ã€‚ç›®å‰æœ‰å…©ç¨®é©—è­‰æ–¹æ³•ï¼Œé€™é‚Šå»ºè­°ä½¿ç”¨ç¶²åŸŸçš„æ–°åŠŸèƒ½ï¼Œå› ç‚ºä½¿ç”¨ç¶²åŸŸå‰ç½®å­—å…ƒï¼ŒæœƒæŠŠ HTTPS å’Œ HTTP ç•¶ä½œä¸åŒçš„ç¶²åŸŸè™•ç†ã€‚\næˆ‘ä¸€é–‹å§‹ä½¿ç”¨å³é‚Šçš„æ–¹å¼ \u0026ldquo;ç¶²å€å‰ç½®å­—å…ƒ\u0026rdquo;ï¼Œä½†å› ç‚ºæˆ‘ä¸€é–‹å§‹æ¶è¨­ç¶²ç«™æ™‚ï¼Œä¸æ˜¯å…ˆè¨­å®šHTTPSï¼Œæ‰€ä»¥å…ˆé©—è­‰äº†HTTPã€‚ç”±æ–¼ä¹‹å¾ŒçŠ¯è ¢ç™»å…¥ä¸åŒçš„Gmailï¼Œæ‰€ä»¥ä»¥ç‚ºHTTP æ²’é©—è­‰æˆåŠŸï¼Œåˆé©—è­‰äº†ä¸€æ¬¡HTTPSã€‚äº‹å¾Œç™¼ç¾ HTTP \u0026amp; HTTPS æ˜¯å¯ä»¥åˆ†é–‹å»ºç«‹æˆåŠŸçš„ï¼Œæ‰€ä»¥é€™é‚Šæœƒæ•™å­¸ä¸¦å»ºè­°ä½¿ç”¨\u0026quot;ç¶²åŸŸ\u0026quot;çš„æ–¹å¼ï¼Œä¸¦å…å¤§å®¶è·Ÿæˆ‘çŠ¯ä¸€æ¨£çš„éŒ¯èª¤\nStep1 è¼¸å…¥è¦é©—è­‰çš„ç¶²åŸŸ Step2 è¤‡è£½ Google æä¾›çš„ TXT Record è¨­å®šè³‡è¨Š Step3 åœ¨ Router 53 å»ºç«‹ Txt Record Record Type è¨˜å¾—é¸ Txt å’Œ Value è²¼ä¸Š Type2 çš„è³‡è¨Š Step4 å›åˆ° Step2 é é¢é»é¸é©—è­‰ ï½ é©—è­‰æˆåŠŸå°±æœƒåœ¨ Google Search Console çœ‹åˆ°ä½ çš„ Domain\nä¸Šäº¤ Sitemap åˆ° Google Search Console Sitemap ä¸»è¦åŒ…å«äº†ç¶²ç«™çµæ§‹è³‡è¨Šï¼Œä¸Šäº¤ Sitemap å¯ä»¥è®“ Google æ›´å¥½åœ°ç­è§£ä½ çš„ç¶²ç«™ã€‚é€™é‚Šçš„ Sitemap æ˜¯ç”±ä¹‹å‰æ‰€æçš„ Yoast SEO Plugin æ‰€ç”¢ç”Ÿçš„\nStep1 å–å¾— Sitemap endpoint åœ¨ Yoast ä»‹é¢çš„ Features ä¸‹é¢æœ‰ä¸€å€‹ XML Sitemaps çš„è¨­å®šï¼Œé»é¸å³é‚Šçš„å•è™Ÿï¼Œåœ¨é»ä¸‹ See the xml sitemapï¼Œé€™æ™‚å€™å°±æœƒç›´æ¥æ‰“é–‹ Sitemap çš„é é¢\nSitemap å¯¦éš›å…§å®¹å°±é€™å€‹ç¶²åŸŸä¸‹æ‰€æœ‰çš„ç¶²é ï¼Œä¸¦ä¸”æœ€å¾Œä¿®æ”¹æ™‚é–“\nStep2 ä¸Šäº¤ Sitemap åˆ° Google Search Console æ¥è‘—ç­‰å¾…å¹¾å¤©å¾Œï¼Œå°±å¯ä»¥åœ¨ Google é€é site æ‰¾åˆ°è‡ªå·±çš„ç¶²ç«™\nç¸½çµ é€™æ¬¡æ¶å®Œä»¥å¾Œï¼ŒæŒºä½©æœé‚£äº›æ²’æœ‰è³‡è¨ŠèƒŒæ™¯åˆè‡ªå·±ä¸€æ‰‹åŒ…è¾¦ï¼Œå¾é›¶é–‹å§‹æ¶è¨­WorldPress ç¶²ç«™çš„äººã€‚é€™æ¬¡çš„ç¶²ç«™ï¼Œé›–ç„¶ä¸å¦‚æˆ‘å…§å¿ƒæ‰€æƒ³è¦çš„å¤–è§€ï¼Œç„¡å¥ˆå‰ç«¯ä¸ç†Ÿï¼Œå¦‚æœæƒ³è¦ç”¨å‡ºè‡ªå·±çš„å¤–è§€ï¼Œåˆè¦èŠ±ä¸å°‘æ™‚é–“ã€‚æ‰€ä»¥è‰¾å€«æˆ‘æ±ºå®šå…ˆå¢åŠ é€™å€‹ç¶²ç«™çš„å…§å®¹ï¼Œå°‡ä¾†é€™å€‹ç¶²ç«™å¦‚æœæˆ‘æœ‰å‹•åŠ›ç¹¼çºŒåšä¸‹å»ï¼Œå†èŠ±æ™‚é–“ä¿®æ”¹å¤–è§€ã€‚\n","date":"April 4, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/use-lightsail-to-create-wordpress-website/","smallImg":"","tags":[{"title":"Lightstail","url":"/tags/lightstail/"},{"title":"Route53","url":"/tags/route53/"},{"title":"WORDPRESS","url":"/tags/wordpress/"}],"timestamp":1680566400,"title":"ä½¿ç”¨ Lightsail æ¶è¨­ WordPress ç¶²ç«™"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"å¥‡ç“¦å®¶é±ˆé­šæ¹¯ ç”±æ–¼å‰ä¸‰å¤©éƒ½æ¯”è¼ƒæ—©å‡ºé–€ï½å¤§å®¶éƒ½ç©å¤ªç´¯äº†ï¼ŒåŠ ä¸Šä»Šå¤©è¦å»æµ·é›²è‡ºæ­ä¹˜çš„å¤©ç©ºè† å›Šåˆ—è»Šé ç´„çš„æ™‚æ®µåœ¨ä¸‹åˆ1é»ï¼Œæ‰€ä»¥ä»Šå¤©çš„è¡Œç¨‹å°±å¯ä»¥ç¡å¾—æ¯”è¼ƒæ™šå†æ…¢æ…¢å‡ºç™¼ï½\nç¬¬ä¸€ç«™è¡Œç¨‹æ˜¯æµ·é›²è‡ºçš„å¥‡ç“¦å®¶é±ˆé­šæ¹¯ï¼Œé€™æ˜¯å‰ä¸€å¤©å¤§å®¶åœ¨ Google Map ä¸Šæ‰¾åˆ°çš„ã€‚ä¸€æ—©å¾è¥¿é¢ç«™å‡ºç™¼ï¼Œååˆ°ä¸­æ´ç«™å¾ä¸ƒè™Ÿå‡ºå£å‡ºä¾†ä¸€è·¯ç›´èµ°ã€‚åœ¨å‰å¾€é¤å»³çš„è·¯ä¸Šä¹Ÿæœƒç¶“éè¿æœˆè·¯ï¼Œè·¯ä¸Šä¹Ÿæœ‰è¨±å¤šæ«»èŠ±ï¼Œé›–ç„¶æ²’æœ‰é®æµ·æ ½ç¨®çš„å¯†é›†ï¼Œä½†æœ‰æ«»èŠ±èŠ±ç“£ä¼´éš¨è‘—æµ·é¢¨å¹æ‹‚é£„å‹•ï½æ•´æ¢è·¯èµ°èµ·ä¾†ä¹Ÿé¡å¤–è³å¿ƒæ‚…ç›®ã€‚\næŠµé”æ™‚æ‰åä¸€é»å·¦å³ï¼Œä½†å¥‡ç“¦å®¶é±ˆé­šæ¹¯çš„é–€å£å·²ç¶“åœæ»¿äº†è»Šå­ï¼Œè‰¾å€«çœ‹åˆ°å¤§éƒ¨åˆ†ä¾†ç”¨é¤çš„äººéƒ½æ˜¯ç•¶åœ°çš„éŸ“åœ‹äººï¼è€Œåœ¨èœå–®æ–¹é¢æ²’æœ‰é¸æ“‡ï¼Œå°±åªæœ‰è³£é±ˆé­šæ¹¯å¥—é¤ï¼Œä¸€ä»½å°±æ˜¯ä¸€è¬å››éŸ“å…ƒã€‚\nç”¨é¤çš„ç©ºé–“ç‰†ä¸Šæ›æ»¿äº†æ»¿æ»¿çš„ç°½åï¼Œä¸éè‰¾å€«å®Œå…¨çœ‹ä¸æ‡‚æ˜¯èª°å°±æ˜¯äº† xD\né±ˆé­šæ¹¯çš„ä»½é‡å¾ˆå¤§ä¸€ç¢—ï¼Œè‰¾å€«è¦ºå¾—å…©äººåƒä¸€ç¢—æ‡‰è©²éƒ½ä¸æ˜¯å•é¡Œï¼Œä½†åŸºæ–¼éŸ“åœ‹çš„æ–‡åŒ–ï¼Œå¥½åƒæ²’æœ‰è¾¦æ³•å…©å€‹äººé»ä¸€å€‹é¤é»å…±é£Ÿï¼Œæ‰€ä»¥æ‡‰è©²é‚„æ˜¯åªèƒ½ä¸€äººé»ä¸€ç¢—ã€‚\nBUSAN X THE SKY ç”±æ–¼åƒå®Œé±ˆé­šæ¹¯ä¹‹å¾Œï¼Œé›¢æ­ä¹˜å¤©ç©ºè† å›Šåˆ—è»Šé å®šçš„æ™‚é–“é‚„æœ‰ä¸€å€‹å°æ™‚å¤šï¼Œæ‰€ä»¥å°±è·‘åˆ°BUSAN X THE SKYå‰èµ°èµ°ã€‚ä¸å¾—ä¸èªªï¼Œç•¶å¤©çš„é¢¨çœŸçš„å¾ˆå¤§ï¼Œæˆ‘å€‘ç•¶ä¸­æœ‰å¾ˆå¤šäººçš„å¸½å­éƒ½è¢«å¹é£›äº†ï¼åœ¨é¦¬è·¯ä¸Šé‚„æœ‰çœ‹åˆ°è¢«é¢¨å¹é£›çš„æ¼¢å ¡èººåœ¨åœ°ä¸Šï¼Œçœ‹èµ·ä¾†å¹¾ä¹é‚„æ²’åƒå¹¾å£å°±æ„å¤–æ‰è½ï½\nåœ¨BUSAN X THE SKYå‰çš„æµ·ç˜æœ‰è¨±å¤šæµ·é·—ï¼ç¾å ´é‚„æœ‰è¨±å¤šäººåœ¨ç¾å ´å°‡é£Ÿç‰©æ‹¿åœ¨æ‰‹ä¸Šé¤µé£Ÿæµ·é·—ï¼Œæµ·é·—æœƒä¸€ç›´åœ¨æ²™ç˜ä¸Šèµ°ï¼Œç­‰é¢¨ä¸€ä¾†å°±å˜—è©¦é£›èµ·ä¾†åƒé£Ÿç‰©ï½ç”±æ–¼é¢¨å¾ˆå¤§ï¼Œæ‰€ä»¥æµ·é·—ç¶“å¸¸å¿«åƒåˆ°æ™‚ï¼Œåˆè¢«é¢¨å¹å›å»ï¼ŒçœŸçš„èƒ½æ„Ÿå—åˆ°æµ·é·—å¾ˆåŠªåŠ›çš„æƒ³é£›éä¾†åƒé£Ÿç‰©ã€‚è‰¾å€«çš„åŒä¼´å€‘ä¹Ÿåœ¨ä¸€æ—çš„è¶…å•†è²·äº†åƒçš„ï¼Œé¤µé£ŸæˆåŠŸï½\næ¥è‘—èµ°åˆ°æµ·ç˜ä¸Šï¼Œæ²’æƒ³åˆ°é€™é‚Šçš„æµ·ç˜è¸©ä¸‹å»çš„æ²™è¶…ç¡¬å¾ˆç´®å¯¦ï¼Œé æµ·çš„åœ°æ–¹é‚„èƒ½çœ‹åˆ°å¾ˆå¤šè²æ®¼ã€‚\nå¾æµ·ç˜ç”¨ iPhone å»£è§’å’Œå…¨æ™¯ä¾†ç…§BUSAN X THE SKYçœŸçš„å¾ˆæ¼‚äº®ï¼\nå› ç‚ºæ™‚é–“çš„é—œä¿‚ï¼Œæˆ‘å€‘æ²’æœ‰ä¸Šå»BUSAN X THE SKYï¼Œåªå¥½æ‹ä¸€å¼µé–€å£ä¾†å‡è£è‡ªå·±ä¸Šå»éBUSAN X THE SKYäº†ï½\nè† å›Šåˆ—è»Š æˆ‘å€‘åœ¨å°ç£æ™‚ï¼Œå°±äº‹å…ˆé ç´„å¥½äº†å°¾æµ¦åˆ°é’æ²™æµ¦çš„è»Šç¥¨ï½ç¶²ä¸Šé ç´„çš„æ™‚å€™åªèƒ½é¸ä¸€å€‹æ™‚é–“çš„å€é–“ï¼Œå› æ­¤åˆ°äº†ç¾å ´é‚„æ˜¯è¦æ’éšŠçš„å–”ï¼Œåªæ˜¯æ¸›å°‘äº†è²·ç¥¨çš„æ™‚é–“ã€‚\nè‰¾å€«æ‹äº†å¹¾å¼µå°¾æµ¦ç«™çš„å…¥å£\nè† å›Šåˆ—è»Šæœ‰è¨±å¤šä¸åŒçš„å¤–è§€ï¼Œæœ‰æœ€åŸºæœ¬çš„å–®è‰²ï¼Œå¦å¤–ä¹Ÿæœ‰æµ·é·—ç³»åˆ—çš„ï¼ç•¶å¤©é‚„æœ‰å°å¤¥ä¼´å€‘åœ¨æ‰“è³­ï¼Œç­‰ä¸€ä¸‹ååˆ°çš„åˆ—è»Šæœƒæ˜¯ä»€éº¼é¡è‰²ï¼Œé›–ç„¶è³­è¼¸è³­è´æ²’æœ‰çå‹µæˆ–æ‡²ç½°ï¼Œå°±å–®ç´”å¥½ç©ï½ä¸éè‰¾å€«è¦ºå¾—æµ·é·—ç³»åˆ—çš„éƒ½å¥½å¥½çœ‹ï¼\næ¥è‘—å°±å¾å°¾æµ¦ç«™å‡ºç™¼! è‰¾å€«æ˜¯ååˆ°å–®è‰²çš„è† å›Šï¼Œä¸éå…¶å¯¦è»Šå»‚å…§éƒ¨éƒ½ä¸€æ¨£ï¼Œæ‰€ä»¥åä»€éº¼é¡è‰²çš„è† å›Šåˆ—è»Šï¼Œå¯¦éš›ä¸Šæ˜¯ç„¡æ„Ÿçš„ï½\nå¾è† å›Šåˆ—è»Šå…§å¾€å›æ‹å°¾æµ¦ç«™\nå¾è† å›Šåˆ—è»Šå…§æ‹å¤§æµ·ï¼Œå¤§æµ·çš„æ°´å¥½ä¹¾æ·¨é‚„èƒ½å¾ˆæ¸…æ™°åœ°çœ‹åˆ°ä¸‹é¢çš„çŸ³é ­\næœ€å¾ŒæŠµé”é’æ²™æµ¦ç«™\né’æ²™æµ¦ç«™ åˆ°äº†é’æ²™æµ¦ç«™ï¼Œè‰¾å€«å°±ç›´å¾€å¤©ç©ºæ­¥é“çš„æ–¹å‘ç§»å‹•ï¼Œçµæœåˆ°äº†å¤©ç©ºæ­¥é“å¾Œï¼Œç™¼ç¾æ­¥é“æ˜¯é—œé–‰çš„ï¼Œæ­¥é“çš„æŸµæ¬„ä¸Šé¢å¼µè²¼äº†å…¬å‘Šï¼Œå¾Œä¾†ç”¨ç¿»è­¯æ‰çŸ¥é“ï¼ŒåŸä¾†é¢¨å¤ªå¤§å°±æœƒä¸é–‹æ”¾ï¼è‰¾å€«å°±åªèƒ½åœ¨æ—é‚Šæ‹ç…§ï¼Œå¤©ç©ºæ­¥é“ä¸€æ—é‚„æ›è‘—è¨±å¤šè¨±é¡˜çš„é­šé­šã€‚\nå› ç‚ºé¢¨å¤ªå¤§ï¼ŒåŠ ä¸Šä»Šæ—¥æ˜¯èµ°ä¼‘é–’è·¯ç·šï¼Œæ‰€ä»¥æˆ‘å€‘æ‰“ç®—ä¼‘é–’çš„å–æ¯å’–å•¡å†èµ°ã€‚é’æ²™æµ¦ç«™é™„è¿‘æœ‰è¨±å¤šå’–å•¡å»³ï¼Œè€Œæˆ‘å€‘é¸äº†ä¸€å®¶ Alice Donutï¼ŒåŸå› åªæ˜¯å› ç‚ºé æ–¹å°±çœ‹åˆ°ä¸€å€‹å¤§å¤§çš„ç”œç”œåœˆæ‹›ç‰Œã€‚\nAlice Donut åº—è£¡ä¹Ÿè£æ½¢å¾—è »æ¼‚äº®çš„\næœ€å¾Œä¾†ä¸€å¼µç¾ç¾çš„ç”œé»ç¶²ç´…ç…§ï¼Œè‰¾å€«å–çš„æ˜¯è‰è“å„ªæ ¼ï¼Œå‰›å¥½æ˜¯è‰è“å­£ç¯€ï¼Œåªèƒ½èªªéŸ“åœ‹è‰è“ç³»åˆ—çš„é£²æ–™å¯¦åœ¨æ˜¯å¤ªå¥½å–å¤ªé‚ªæƒ¡äº†ï¼\næµ·å²¸åˆ—è»Š æ¥è‘—ä¾†é«”é©—æµ·å²¸åˆ—è»Šï¼Œåˆ—è»Šä¹Ÿæ˜¯äº‹å…ˆåœ¨ç¶²è·¯ä¸Šå°±é ç´„å¥½çš„ï¼Œå¾é’æ²™æµ¦ç«™æ­ä¹˜åˆ°æ¾äº­ç«™ï½ç”±æ–¼å¤©ç©ºæ­¥é“é€™å€‹æ™¯é»æ²’æœ‰èµ°åˆ°ï¼Œæ‰€ä»¥æˆ‘å€‘å°±æƒ³ææ—©é›¢é–‹ï¼Œå°±å˜—è©¦è·‘åˆ°è»Šç«™å»è©¢å•æ˜¯å¦èƒ½ææ—©æ­è»Šï½\nåœ¨å»è»Šç«™çš„è·¯ä¸Šå°±å‰›å¥½é‡åˆ°ä¸€ç­æµ·å²¸åˆ—è»Šå‡ºç™¼\næ‹å®Œç…§ä¹‹å¾Œåˆ°è»Šç«™ç¾å ´è©¢å•ï¼Œé‚„å¥½å› ç‚ºé€±ä¸€çš„é—œä¿‚æ‰€ä»¥å‰ä¸€ç­åˆ—è»Šæ²’æ»¿ï¼Œç¾å ´çš„å·¥ä½œäººå“¡å°±å¹«æˆ‘å€‘å®‰æ’ææ—©ä¸€ç­è»Šæ­ä¹˜ã€‚ä¸ç„¶æˆ‘å€‘çœ‹ç¾å ´çš„æ™‚åˆ»è¡¨ï¼Œä¸å°‘ä¹‹å¾Œçš„ç­æ¬¡éƒ½å·²ç¶“æ˜¯æ»¿çš„ï¼Œæ‰€ä»¥ä¹ŸæŒºçœ‹é‹æ°£çš„ã€‚\næœ€å¾Œæ‹ä¸€å¼µå¾åˆ—è»Šå…§å¾€å¤–æ‹çš„ç…§ç‰‡\næ©Ÿå¼µå¸‚å ´ æ¥è‘—æˆ‘å€‘å¾æ¾äº­ç«™èµ°è·¯åˆ°åœ°éµç«™æ”¹æ­åœ°éµåˆ°æ©Ÿå¼µç«™ï½ æ©Ÿå¼µç«™å¾ç»ç’ƒå¾€å¤–çœ‹çœŸçš„å¾ˆæ¼‚äº®ï¼Œä¸‹é¢éƒ½æ˜¯éµè»Œ\nåˆ°äº†æ©Ÿå¼µå¸‚å ´å…¥å£ï¼Œå°±å¯ä»¥çœ‹åˆ°è³£å¾ˆå¤šæµ·é®®ï½é‚„æœ‰æµ·è—»æµ·å¸¶\né‚„çœ‹åˆ°å‚³èªªä¸­çš„ç›²é°»ï¼Œç¾å ´é‚„æœ‰çœ‹åˆ°æœ‰äººåœ¨è™•ç†å‰ç›²é°»çš„çš®ï¼Œè€Œä¸”é‚„æ˜¯åœ¨ç›²é°»æ´»è‘—çš„æƒ…æ³ä¸‹è™•ç†\u0026hellip;\næ¥è‘—å†å¾€å‰èµ°å°±å¯ä»¥çœ‹åˆ°å„å¼å„æ¨£çš„èƒèŸ¹åº—ï½ç¾å ´çš„éŸ“åœ‹äººä¸€ç›´ç˜‹ç‹‚æ‹‰å®¢ï¼Œæœ‰å€‹é‚„æ˜¯ä¸€ç›´ç”¨æ‹œè¨—çš„æ‰‹å‹¢è¦ä½ å»ä»–å€‘çš„åº—å®¶å“åšçœ‹çœ‹ï¼Œå¯¦åœ¨å¤ªææ€–äº†\néŸ“åœ‹äººæœç„¶å¾ˆæœƒé†ƒè£½å„ç¨®é£Ÿæï¼Œé™¤äº†å¸¸è¦‹çš„æ³¡èœé‚„æœ‰é†ƒè£½çš„èƒèŸ¹\næˆ‘å€‘ä¾†æ©Ÿå¼µå¸‚å ´å‰ï¼Œäº‹å…ˆå·²ç¶“é¸å¥½äº†é¤å»³\u0026quot;å°å¤¥å­å·¨èŸ¹\u0026quot;ï¼Œæ‰€ä»¥æ™ƒäº†å·®ä¸å¤šæˆ‘å€‘å°±æ‹¿è‘—æ‰‹æ©Ÿé–‹è‘— Google Map æ‰¾ï¼Œç¶“éäº†ä¸€å®¶åº—æ™‚ï¼Œæœ‰ä¸€å€‹åº—å“¡çœ‹åˆ°æˆ‘å€‘æ‰‹æ©Ÿä¸Šçš„ç…§ç‰‡ï¼Œå°±è·Ÿæˆ‘å€‘èªªæ˜¯ä»–å€‘é€™å®¶ï½æˆ‘å€‘ç•¶ä¸‹æ‹¿æ‰‹æ©Ÿå°äº†ä¸€ä¸‹åå­—ï¼Œæ˜¯ä¸€æ¨£çš„ï¼Œä½†å¤–è§€è·Ÿ Google Map ä¸Šé¡¯ç¤ºçš„å°ä¸èµ·ä¾†ã€‚å¾Œä¾†æœ‰ä¸€å€‹éšŠä¼ä¸­çš„å¤¥ä¼´è·Ÿæˆ‘å€‘èªªä»–åœ¨å¦ä¸€æ¢è¡—æ‰¾åˆ°åº—å®¶ï¼Œåœ–ç‰‡è·Ÿ Google Map ä¸€æ¨£ï¼Œæ‰€ä»¥æˆ‘å€‘å°±è·‘éå»å¦ä¸€å®¶åº—ã€‚è·¯é€”ä¸­æˆ‘å€‘é‚„åœ¨èŠæœƒä¸æœƒæ˜¯åº—åæ•…æ„å–ä¸€æ¨£çš„åº—å®¶XDï½å› ç‚ºåƒå°ç£çš„å¤œå¸‚ï¼Œæœ‰å¾ˆå¤šåº—è³£çš„æ±è¥¿éƒ½ä¸€æ¨£ï¼Œç„¶å¾Œéƒ½å¯«è‡ªå·±æ˜¯å‰µå§‹åº—ã€‚åˆ°äº†ç¾å ´æˆ‘å€‘é‚„ç‰¹åˆ¥å•åº—å“¡èªªå‰›å‰›æœ‰å¦ä¸€å®¶åº—åå­—ä¸€æ¨£ï¼Œçµæœåº—å“¡è·Ÿæˆ‘å€‘èªªï¼Œéƒ½æ˜¯åŒä¸€å®¶åº—ï¼Œä»–å€‘çš„åº—åœ¨åœ°ä¸‹ä¸€æ¨“ï¼Œç©ºé–“å¾ˆå¤§ï¼Œæ‰€ä»¥æœ‰å…©å€‹å…¥å£ï¼Œæˆ‘å€‘å‰›å‰›çœ‹åˆ°çš„å…¶å¯¦å°±æ˜¯æ˜¯å¦ä¸€å€‹å…¥å£ã€‚\næˆ‘å€‘é€™æ¬¡é»äº†åº—å“¡æ¨è–¦ç¾åœ¨æ¯”è¼ƒå¥½åƒçš„æ¾è‘‰èŸ¹å’Œç´…èŸ¹ï½æˆ‘å€‘ä¸€é–‹å§‹é¸äº†å››éš»ç®—èµ·ä¾† 7è¬éŸ“å¹£ï¼Œçµæœåº—å“¡åˆé€äº†æˆ‘å€‘å…©éš»ï¼Œé‚„è¢«æˆ‘å€‘ç åˆ°äº†25è¬éŸ“å¹£ã€‚è€Œä¸”é‚„ä¸€äººé€ä¸€å€‹æ‰‡è²ï¼Œéƒ½è®“æˆ‘æ‡·ç–‘æ˜¯ä¸æ˜¯æˆ‘å€‘æ®ºçš„ä¸å¤ å¤š xD\né€²å»é¤å»³å‰é‚„ç™¼ç¾æœ‰ä¸€éš»èƒèŸ¹ä¸€ç›´åœ¨é‚£åƒæ±è¥¿ï¼Œä»–é‹æ°£å¾ˆå¥½ä»Šå¤©æ²’æœ‰è¢«å°å“¥é¸åˆ°\nåˆ°äº†è£¡é¢ï¼Œæ‰çŸ¥é“åŸä¾†éŸ“åœ‹æµ·é®®æ–™ç†æ˜¯è¦æ”¶æ–™ç†è²»ï¼Œä¸€å€‹äºº 5000 éŸ“å…ƒï½\nä¸éæœ€é‡è¦çš„æ˜¯ä¸Šèœï¼ï¼ï¼\nå°å¤¥å­å·¨èŸ¹çš„å°èœé‚„ä¸éŒ¯ï¼Œæœ‰ä¸€å€‹ç…é¤…æ˜¯ç¾åšçš„ï¼Œæˆ‘å€‘è·Ÿä¸€ä½æœƒèªªä¸­æ–‡çš„ä¸­åœ‹åº—å“¡èªªæˆ‘å€‘æƒ³åŠ é»ç…é¤…ï¼Œå¥¹é‚„è·Ÿæˆ‘å€‘èªªé˜¿å§¨ä¸ä¸€å®šæœƒåšã€‚ç„¶å¾Œæˆ‘å€‘ç­‰äº†è€åŠå¤©çœ‹ç…é¤…æ²’æœ‰ä¾†ï¼Œçµæœåˆå•äº†ä¸€æ¬¡ä¸­åœ‹åº—å“¡ï¼Œå¥¹å»å‘Šè¨´æˆ‘å€‘èªªææ–™æ²’æœ‰äº†ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯çœŸçš„æ²’æœ‰é‚„æ˜¯ä¸æƒ³åšï¼Œä¸éç«Ÿç„¶å°æ–¹éƒ½èªªæ²’æœ‰äº†ç•¶ç„¶ä¹Ÿåªèƒ½é€™æ¨£å›‰ã€‚\næœ€å¾Œæ–™ç†è²»åäºº5è¬ï¼ŒåŠ ä¸ŠèƒèŸ¹æœ¬èº« 25è¬ï¼Œç„¶å¾ŒåŠ äº†ä¸€é»ç‚’é£¯å°±åƒäº†ä¸‰åå¤šè¬ã€‚ (ä½†è·Ÿå‰å¹¾æ—¥åƒé®‘é­šç²¥è·Ÿç™½å¸¶é­šçš„è²»ç”¨æ¯”èµ·ä¾†ä¾¿å®œå¾ˆå¤šï½)\nå®µå¤œ ç”±æ–¼åƒèƒèŸ¹æ¯”è¼ƒä¸å®¹æ˜“é£½ï¼ŒåŠ ä¸Šéš”å¤©æ˜¯è‡ªç”±è¡Œå‹•ï¼Œæ‰€ä»¥å¥³å‹çš„è€é—†æ‰“ç®—ä»Šå¤©æ™šä¸Šè·Ÿå¤§å®¶ä¸€èµ·å–é…’ã€‚å›åˆ°è¥¿é¢ç«™çš„æ™‚å€™å·²ç¶“æ˜¯ä¹é»å››åäº”åˆ†ï¼Œç„¶å¾Œå¤§å®¶éƒ½æƒ³åƒç³–é¤…ï¼ŒGoogle Map ä¸Šæœ‰çœ‹åˆ°åº—å®¶åé»é—œé–€ï¼Œæ‰€ä»¥å¤§å®¶éƒ½æ˜¯ç”¨è¡çš„è·‘å»è²·ç³–é¤…ã€‚æˆ‘åœ¨å°ç£çš„å¤œå¸‚æœ‰åšéä¸€å£ç³–é¤…ï¼Œä½†è¦ºå¾—ä¸å¥½åƒï¼Œæ‰€ä»¥ä¸€é–‹å§‹æˆ‘è©¦åšäº†ä¸€å£å¥³å‹è²·çš„ç³–é¤…ï¼Œçµæœæ„å¤–çš„è¶…å¥½åƒï¼Œè‰¾å€«é‚„è‡ªå·±è²·ä¸€å€‹ä¾†åƒï½\nå›é£¯åº—çš„è·¯ä¸Šå‰›å¥½çœ‹åˆ°æœ‰äººæ¨è–¦çš„éºµåŒ…åº—é‚„é–‹è‘—ï¼Œæˆ‘å€‘å°±é€²å»è²·äº†ä¸€å€‹ç´…è±†é®®å¥¶æ²¹éºµåŒ…ï¼Œæƒ³èªªä¾†ç•¶éš”å¤©çš„æ—©é¤ã€‚\næ²¿è·¯å°±è²·äº†é…’å›é£¯åº—ï¼Œæ¥è‘—ä»–å€‘æƒ³è«‹é£¯åº—å¹«å¿™å«å¤–é€ã€‚ä¸€é–‹å§‹é£¯åº—æ˜¯æ‹’çµ•çš„ï¼Œå› ç‚ºé£¯åº—æœ¬èº«æœ‰é¤å»³ç„¶å¾Œæ²’æœ‰é€å¤–é€åˆ°æˆ¿é–“çš„æœå‹™ã€‚å¾Œä¾†è·Ÿæ«ƒæª¯å°å“¥èªªï¼Œæˆ‘å€‘æƒ³è‡ªå·±å«å¤–é€ï¼Œä½†æ€•å°æ–¹è½ä¸æ‡‚éŸ“æ–‡ï¼Œæƒ³è«‹æ«ƒæª¯å°å“¥å¹«æˆ‘å€‘ä¸‹å–®ï¼Œç„¶å¾Œæˆ‘å€‘è‡ªå·±åœ¨é£¯åº—é–€å£ç­‰å–é¤å°±å¥½ï½å¾Œä¾†æ«ƒæª¯å°å“¥è¢«æˆ‘å€‘èªªæœäº†ï¼Œç®—æ˜¯ä»–è‡ªå·±å¹«æˆ‘å€‘ï¼Œä»–ç”¨ä»–æ‰‹æ©Ÿçš„ App å¹«æˆ‘å€‘é»äº†è²¨åˆ°ä»˜æ¬¾çš„é¤é»ã€‚\næˆ‘å€‘å¾Œä¾†é»äº†æ©‹æ‘ç‚¸é›é…é…’ï½ï½ï½\nå› ç‚ºæ—©ä¸Šé¢¨å¯¦åœ¨å¤ªå¤§ï¼ŒåŠ ä¸Šæœ€è¿‘ç©çš„æ¯”è¼ƒç´¯ï¼Œæœ‰å¯èƒ½å…ç–«åŠ›æ¯”è¼ƒå·®ï¼Œæ™šä¸Šç«Ÿç„¶å¾®ç‡’èµ·ä¾†ï¼Œå¾Œä¾†åªåƒäº†ä¸€å…©å£ç‚¸é›å¾Œï¼Œå°±åäº†å€‹æˆè—¥å»ä¼‘æ¯äº†ã€‚èªªå¯¦è©±ç‚¸é›å¥½å¥½åƒï¼Œè‰¾å€«é‚„æƒ³å¤šåƒä¸€é»ï¼Œå¯æƒœèº«é«”æ’ä¸ä½äº†ï¼Œå…ˆé™£äº¡äº†ï¼±ï¼¡ï¼±\n","date":"April 3, 2023","img":"/posts/travel/2023_busan_day4/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/travel/2023_busan_day4/feature_hua33b7391889bce092ba07d6deb177769_192034_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/travel/2023_busan_day4/","smallImg":"/posts/travel/2023_busan_day4/feature_hua33b7391889bce092ba07d6deb177769_192034_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"TRAVEL","url":"/tags/travel/"}],"timestamp":1680480000,"title":"2023 é‡œå±±å…­å¤©äº”å¤œ Day4"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"é›†åˆ æˆ‘å€‘åœ¨å°ç£æ™‚å°±äº‹å…ˆåœ¨ Klook ä¸Šè²·äº†é®æµ·è³æ«»ä¸€æ—¥éŠè¡Œç¨‹ï¼Œæ—©ä¸Šåœ¨è¥¿é¢ç«™çš„12è™Ÿå‡ºå£ç­‰è¼‰æˆ‘å€‘çš„å·´å£«ï¼Œçµæœåˆ°äº†ç¾å ´è¶…å¤šéŠè¦½è»Šå’Œä¸€å †å°éŠæ‹¿è‘—æ——å­æ­£åœ¨æ‰¾ä»–å€‘çš„åœ˜å“¡ã€‚æˆ‘å€‘å•äº†ä¸€åœˆéƒ½æ‰¾ä¸åˆ°æˆ‘å€‘çš„å°éŠï¼Œé‚„åœ¨æ“”å¿ƒèªªæ˜¯ä¸æ˜¯è·‘éŒ¯é›†åˆåœ°é»ï¼æœ€å¾ŒåŸå…ˆç­‰å¾…çš„è»Šå­éƒ½é›†åˆå®Œç•¢å‡ºç™¼äº†ï¼Œåˆ°äº†ç´„å®šé›†åˆçš„æ™‚é–“ä½†æˆ‘å€‘é‚„æ²’çœ‹åˆ°ä»»ä½•å·´å£«ï¼Œä½†é‚„å¥½æˆ‘å€‘ä¸æ˜¯å”¯ä¸€ä¸€çµ„åœ¨ç¾å ´ç­‰çš„ï¼Œæ‰€ä»¥è‡³å°‘ç¢ºå®šä¸æ˜¯æˆ‘å€‘èµ°éŒ¯ã€‚æœ€å¾Œæœ‰ä¸€å°å¸æ©Ÿé–‹è‘—å·´å£«éä¾†ï¼Œç„¶å¾Œèªªäº†å¾€é®æµ·çš„éŸ“æ–‡ï¼Œå°±å«æˆ‘å€‘å…ˆéƒ½ä¸Šè»Šï¼Œè€Œä¸”å¸æ©Ÿä¹Ÿä¸æœƒè¬›è‹±æ–‡æˆ–ä¸­æ–‡ï¼Œæœ€å¾Œåœ¨å…¶ä»–äººçš„è©¢å•ä¸‹æ‰çŸ¥é“å°éŠé²åˆ°æ™šé»æœƒåˆ°ï¼Œæˆ‘å€‘ä¹Ÿåªå¥½å…ˆé‚Šåƒäº†åœ¨ 7-11 è²·çš„æ³¡èœé£¯ç³°ç•¶é‚Šç­‰å°éŠä¾†ã€‚\nç­‰äº†å¤§æ¦‚æœ‰äº”åˆ°ååˆ†é˜å¾Œï¼Œå°éŠçµ‚æ–¼å‡ºç¾äº†ï¼Œæ˜¯ä¸€ä½ç¨å¾®æœƒè¬›ä¸­æ–‡çš„éŸ“åœ‹äººã€‚å°éŠå’Œæˆ‘å€‘æ•´åœ˜çš„äººéƒ½ç¢ºèªèº«ä»½è®“æˆ‘å€‘ä¸Šè»Šå‡ºç™¼ï¼Œåœ¨è»Šä¸Šå°éŠé‚„ç™¼çµ¦æˆ‘å€‘é€™æ¬¡é®æµ·çš„åœ°åœ–ä¸¦ç°¡å–®çš„ä»‹ç´¹é®æµ·ã€‚\nå°éŠèªªé®æµ·å¤§ç´„æœ‰å››åè¬é¡†æ«»èŠ±æ¨¹ï¼Œè€Œæ«»èŠ±æ¨¹ä¸æ˜¯éŸ“åœ‹çš„åœ‹èŠ±ç‚ºä»€éº¼è¦ç¨®æ¤é€™éº¼å¤šæ«»èŠ±æ¨¹å‘¢ï¼Ÿå› ç‚ºéŸ“åœ‹è·Ÿå°ç£ä¸€æ¨£ä»¥å‰æœ‰è¢«æ—¥æœ¬æ®–æ°‘éï¼Œæ‰€ä»¥ç•¶æ™‚ä½åœ¨éŸ“åœ‹çš„æ—¥æœ¬äººæƒ³çœ‹æ«»èŠ±ï¼Œå°±åœ¨éŸ“åœ‹ä¹Ÿç¨®ä¸‹è¨±å¤šæ«»èŠ±æ¨¹ï½è€Œé®æµ·ä¹Ÿæ˜¯éŸ“åœ‹æµ·è»ä¸»è¦çš„é§é»ã€‚\næ…¶å’Œç«è»Šç«™ ç¬¬ä¸€ç«™æ˜¯æ…¶å’Œç«è»Šç«™ï¼Œç¾å ´æ»¿æ»¿çš„éƒ½æ˜¯äººï¼Œä½†é‡é»æ˜¯æ«»èŠ±å¯¦åœ¨å¤ªæ¼‚äº®äº†~çœŸå¸Œæœ›å°ç£ä¹Ÿèƒ½ç¨®é€™æ¨£çš„ç™½æ«»èŠ±ï¼Œè€Œä¸”é€™æ¬¡æˆ‘å€‘é‹æ°£å¾ˆå¥½è¶•ä¸Šé€™æ¬¡çš„æ«»èŠ±ï¼Œå› ç‚ºå°éŠæœ‰æåˆ°å¤§æ¦‚ä¸‹ç¦®æ‹œé–‹å§‹æ«»èŠ±å°±è¦æº–å‚™æ‰äº†ï¼ŒåŠ ä¸Šå¤©æ°£éå¸¸çš„æ™´æœ—ï½ç¾å ´ä¹Ÿæœ‰æ”¾ä¸€å°ç«è»Šå¯ä»¥æ‹ç…§ï¼Œä½†å› ç‚ºé‚„è¦æ’éšŠæ‹ç…§ï¼Œè‰¾å€«å°±ç›´æ¥è·³éäº† xD\nä½™ä½å·æ«»èŠ±é“ ç¬¬äºŒç«™:ä½™ä½å·æ«»èŠ±é“ï¼Œä½™ä½å·æ«»èŠ±é“ä¸€å…±æœ‰åå¹¾åº§å°æ©‹ï¼Œè€Œä¸”æœ‰çš„å°æ©‹é‚„æœ‰ä¸­æ–‡åå­—ã€‚\nç©¿éä¸€å€‹åœ°ä¸‹é“å°±é–‹å§‹æ˜¯ä½™ä½å·æ«»èŠ±é“\nèŠ±é“çš„å…¶ä¸­ä¸€å´éƒ½æ˜¯åº—å®¶åœ¨è³£æ±è¥¿ï¼Œçƒ¤é­·é­šä¸ç®¡åœ¨å“ªè£¡ä¼¼ä¹éƒ½æ˜¯æœ€é‚ªæƒ¡çš„é£Ÿç‰©ï¼Œå—…è¦ºæ»¿åˆ†ï¼é‚„å¥½è‰¾å€«å…‹åˆ¶ä½äº†ï¼Œæ²’æœ‰è²·çƒ¤é­·é­šå°±è¶•å¿«é›¢é–‹äº†ã€‚\næ¥è‘—ä¾†åˆ°å§»ç·£æ©‹æ‹ç…§ï¼Œå¾Œé¢ä¹Ÿæœ‰åœ¨ä¸åŒæ©‹æ‹ç…§ï¼Œä½†è‰¾å€«å¿˜äº†å»è¨˜æ©‹åäº† xD\næ¥è‘—æˆ‘å€‘è¢«ä¸€å®¶è³£çƒ¤ä¹³è±¬çš„åº—å¸å¼•ï¼Œå°±åœ¨é€™é‚Šç°¡å–®åƒäº†ä¸€é»æ±è¥¿ï¼Œä¸éé€™é‚Šç•¢ç«Ÿæ˜¯è§€å…‰æ™¯é»ï¼Œè‰¾å€«è¦ºå¾—å‘³é“å°±ä¸€èˆ¬ï¼Œèƒ½å…ˆå¢Šå¢Šè‚šå­å°±è¡Œ xD\nåƒé£½å¾Œå°±æ˜¯ç¹¼çºŒæ‹æ‹æ‹\nå‰›å¥½é‚„é‡åˆ°ä¸€é™£é¢¨ï¼Œæ«»èŠ±é€™æ¨£è½ä¸‹ä¾†çœŸçš„å¥½æ¼‚äº®\né›¢é–‹å‰é‡åˆ°ä¸€å€‹æ”¤è²©ï¼Œæœ‰è³£åƒå„ªé…ªä¹³çš„é£²æ–™ï¼ä¸€é–‹å§‹è‰¾å€«æ˜¯æ²’æœ‰æ‰“ç®—è¦è²·çš„ï¼Œå…¶ä»–äººæ˜¯è²·äº†ç¾é¡çš„å„ªé…ªä¹³ï¼Œé£²æ–™çš„è¨­è¨ˆæ˜¯è“‹å­è½‰é–‹å¾Œæœƒæœ‰è† å›Šå¯ä»¥åƒï½è€Œä¸”è½åŒåœ˜æ—…ä¼´éƒ½èªªå¾ˆå¥½å–ï¼Œæ‰€ä»¥è‰¾å€«å°±è¢«æ´—åˆ°ä¹Ÿè·Ÿè‘—è²·äº†ä¸€ç½ï½ä½†è‰¾å€«æ˜¯ç”·ç”Ÿç•¶ç„¶æ²’æœ‰è²·è£œå……è† åŸè›‹ç™½çš„ï¼Œåè€Œæ˜¯è²·äº†ä¸€å€‹ä¿å¥è…¸èƒƒçš„ï¼å„ªé…ªä¹³åˆ°å“ªè£¡éƒ½å¥½å–ï¼Œå°±æ˜¯ä¸çŸ¥é“åƒçš„è† å›Šæ˜¯ä»€éº¼ï¼Œå¦‚æœæœ‰äººçŸ¥é“å¯ä»¥ç•™è¨€çµ¦è‰¾å€«ï½\né›¢é–‹ä½™ä½å·æ«»èŠ±é“å‰å†æ‹ä¸€å¼µåœæ”¾åœ¨é€™çš„ç«è»Š\né®æµ·å¸‚æ™ƒæ™ƒ æ¥è‘—è‰¾å€«å’Œå…¶ä»–äººéƒ½èµ°ç´¯äº†ï¼Œå°±åœ¨ä½™ä½å·æ«»èŠ±é“é™„è¿‘æ‰¾äº†ä¸€å®¶å’–å•¡å»³ä¸Šå€‹å»æ‰€é †ä¾¿ä¼‘æ¯ä¸€ä¸‹ï½\nå¿«ä¸‰é»çš„æ™‚å€™ï¼Œä¸€å †äººå°±é›¢é–‹å’–å•¡å»³ï¼Œå› ç‚ºé™„è¿‘æ¥è‘—æœƒæœ‰è¡¨æ¼”ï¼Œæ‰€ä»¥å¾ˆå¤šäººéƒ½å»çœ‹è¡¨æ¼”ã€‚æ¥è‘—æˆ‘å€‘ä¹Ÿé–‹å§‹åˆ°é™„è¿‘èµ°èµ°ï¼Œé‚„å‰›å¥½é‡åˆ°æœ‰ B-Box è¡¨æ¼”ï¼Œç¾å ´ä¹Ÿæœ‰å¾ˆå¤šäººè§€çœ‹ï½\nä¸€æ—é‚„æœ‰éŸ“åœ‹å¦å…‹è»Šå±•ç¤º\nä¹‹å¾Œæˆ‘å€‘åˆ°é‹å‹•å ´çœ‹è»æ¨‚å„€éšŠï¼Œä¸éç¾å ´å¯¦åœ¨å¤ªç†±äº†ï¼Œåº§ä½ä¹Ÿæ²’æœ‰é®é™½çš„åœ°æ–¹ï¼Œè‰¾å€«è¦ºå¾—åå¤ªä¹…æœƒä¸­æš‘æ‰€ä»¥å¾…ä¸€ä¸‹ç°¡å–®æ‹å€‹ç…§å°±é›¢é–‹ç¾å ´äº†ã€‚\næ¥è‘—å»é™„è¿‘çš„å°å¸‚é›†æ™ƒæ™ƒï¼Œç¾å ´é‚„çœ‹åˆ°éŸ“åœ‹ç‚¸é†¬éºµçš„å‰ç¥¥ç‰©æµ£ç†Š~\nç„¶å¾Œåƒäº†ä¸€å°é›è‚‰ä¸²å’Œç‚¸ç†±ç‹—ï½éŸ“åœ‹çš„ç‚¸ç†±ç‹—å¥½å¥½åƒå–”ï¼Œæœç„¶è·Ÿå°ç£å¤œå¸‚åƒçš„å®Œå…¨ä¸ä¸€æ¨£ï¼Œå’¬é–‹å¯ä»¥çœ‹åˆ°å¤–é¢é‚£å±¤ç‚¸çš®æ˜¯æœ‰å±¤æ¬¡çš„ï½\næ¥è‘—åˆ°äº†é®æµ·çš„ä¸­å¤®å¸‚å ´ï¼Œé‚„åœ¨é€™é‚Šåƒè¾£ç‚’å¹´ç³•ï¼Œå°è‰¾å€«ä¾†èªªè¶…ç´šè¾£ï¼Œè€Œä¸”ä¸å¹¸çš„æ˜¯å‰›å¥½è‰¾å€«èº«ä¸Šçš„æ°´å’Œé£²æ–™éƒ½å–å®Œäº†ï¼Œæ‰€ä»¥è‰¾å€«æœ€å¾Œåªå¥½å¿è‘—è¾£åƒå®Œå®ƒã€‚åƒå®Œè¾£ç‚’å¹´ç³•å¾Œï¼Œå°±åˆ°äº†å›ç¨‹çš„æ™‚é–“äº†ã€‚\nå‘³è´Šç‹å¡©çƒ¤è‚‰ å›åˆ°è¥¿é¢è»Šç«™ï¼Œæ™šé¤å°±æ˜¯åƒï½ Day2 å› ç‚ºæ˜¨å¤©å®¢æ»¿è€ŒéŒ¯éçš„å‘³è´Šç‹å¡©çƒ¤è‚‰ã€‚åœ¨éå»é¤å»³çš„è·¯ä¸Šä¸€å †äººèšé›†åœ¨ä¸€èµ·ï¼ŒèªçœŸä¸€çœ‹å¥½åƒæ˜¯è¡—èˆæ¯”è³½ï½\nåˆ°äº†å‘³è´Šç‹å¡©çƒ¤è‚‰ï¼Œå¤–é¢ä¾èˆŠå·²ç¶“æ’æ»¿äº†äººï¼Œé‚„å¥½æˆ‘å€‘æœ‰é ç´„æ‰€ä»¥æœ‰åº§ä½å¯ä»¥é¦¬ä¸Šå…¥åº§ç”¨é¤ï½\nä¸€é–‹å§‹å°èœä¸Šä¾†å°±çœ‹åˆ°æœ‰æ–°é®®çš„èŠéº»è‘‰ï¼é€™æ˜¯è‰¾å€«ç¬¬ä¸€æ¬¡åƒèŠéº»è‘‰ï¼ŒçœŸçš„å¾ˆé©åˆé…è‚‰ä¸€èµ·åƒï½\nå‘³è´Šç‹å¡©çƒ¤è‚‰åªæœ‰äº”èŠ±è‚‰å’Œæ¢…èŠ±è‚‰å…©ç¨®é¸æ“‡ï¼Œè€Œä¸”ä½æ¶ˆè‡³å°‘è¦é»ä¸‰ä»½ã€‚å¦å¤–åœ¨å‘³è´Šç‹å¡©çƒ¤è‚‰æœ‰åº—å“¡æœƒå¹«å¿™çƒ¤ï¼Œæ˜¯ä¸ç”¨è‡ªå·±çƒ¤çš„ï½\nç•¶åº—å“¡æŠŠè‚‰ç¿»éä¾†æ™‚ï¼Œé€™é¡è‰²å¯¦åœ¨å¤ªæ¼‚äº®äº†ï¼Œåº—å“¡çœŸçš„å¥½æœƒçƒ¤ï½\nåœ¨å…¶ä»–äººçš„æ•™å­¸ä¸‹ï¼Œåªæ˜¯ç”¨æ‰‹æŒ‡å…ˆæ¯”2å†æ¯”1ï¼Œåº—å“¡å°±æœƒçŸ¥é“ 2 + 1 å…©ç“¶å•¤é…’å’Œä¸€ç“¶ç‡’é…’ï¼\nç”±æ–¼ä»Šå¤©åœ¨å¤–èµ°äº†ä¸€æ•´å¤©ï¼Œåƒå®Œæ™šé¤å¾Œå°±çµæŸä»Šå¤©é€™å›åˆã€‚\n","date":"April 2, 2023","img":"/posts/travel/2023_busan_day3/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/travel/2023_busan_day3/feature_hu7379166eb2ca908851cd242159810684_422850_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/travel/2023_busan_day3/","smallImg":"/posts/travel/2023_busan_day3/feature_hu7379166eb2ca908851cd242159810684_422850_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"TRAVEL","url":"/tags/travel/"}],"timestamp":1680393600,"title":"2023 é‡œå±±å…­å¤©äº”å¤œ Day3"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"Egg Drop ä»Šæ—¥çš„æ—©é¤æ˜¯åœ¨ç¶²è·¯ä¸Šæ‰¾åˆ°è©•åƒ¹é‚„ä¸éŒ¯çš„é€£é–åº— Egg Dropï¼Œæ—©ä¸Šä¹é»å¤šä¸€åˆ°ç¾å ´é é å°±çœ‹åˆ°å·²ç¶“ä¸€å †äººåœ¨åº—é–€å£æ’éšŠï¼æˆ‘å€‘åœ¨ä¸€æ—ç ”ç©¶äº†èœå–®è€åŠå¤©ï¼Œå¾Œä¾†é€²é¤å»³é»é¤ï¼Œç™¼ç¾åº—è£¡æ˜¯ç”¨é»é¤æ©Ÿï¼Œè€Œä¸”æ²’æƒ³åˆ°é»é¤æ©Ÿé‚„å¯é¸ä¸­æ–‡ï¼Œåªæ˜¯æˆ‘å€‘éƒ½å·²ç¶“çœ‹å¥½è¦é»ä»€éº¼äº†ï¼Œä¸€æ™‚ä¹‹é–“ç”¨ä¸­æ–‡é»é¤æ©Ÿåè€Œé‚„å°ä¸ä¸Šï¼Œåªå¥½åˆæ”¹å›è‹±æ–‡ã€‚é»å®Œå¾Œæˆ‘å€‘å°±é–‹å§‹åˆ°é¤å»³å¤–ç­‰å€™å«è™Ÿï¼Œä¸­é–“é‚„æœ‰æœå‹™äººå“¡å‡ºä¾†æ‰¾æŸä¸€å€‹è™Ÿç¢¼é¤é»çš„äººï¼Œçµæœæ˜¯ä¸€å€‹è€å¤–ã€‚æˆ‘åœ¨æ—é‚Šè½åˆ°åº—å“¡åœ¨è·Ÿä»–ç¢ºèªæ˜¯ä¸æ˜¯é» 20 ä»½é¤é»ï¼Œè€å¤–é‚„èªªå°ï¼Œä»–æ˜¯å¹«ä»–å’Œä»–æœ‹å‹é»çš„\u0026hellip;.åº—å“¡é‚„å•å°æ–¹èªªè¦ç­‰ 20 åˆ†é˜å¯ä¸å¯ä»¥ï¼Œè€å¤–èªªå¯ä»¥\u0026hellip;æˆ‘çœ‹äº†ä¸€ä¸‹æˆ‘çš„è™Ÿç¢¼ï¼Œçµæœåœ¨æ˜¯åœ¨è€å¤–å¾Œé¢ï¼Œæˆ‘å€‘æœ€å¾Œç­‰äº†ä¸€å€‹å¤šå°æ™‚ã€‚é›–ç„¶å‘³é“é‚„è¡Œï¼Œä½†æ²’çœ‹åˆ°ä»€éº¼ç•¶åœ°äººä¾†åƒï¼Œè€Œä¸”ç­‰çš„æ™‚é–“å¤ªä¹…ï¼ŒCP å€¼è‰¾å€«è¦ºå¾—ä¸é«˜ï¼Œæ‰€ä»¥å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡åšé®®é‚„è¡Œã€‚\né‡œå±±å¡” æ¥è‘—æˆ‘å€‘å¾è¥¿é¢ååœ°éµåˆ°å—æµ¦ç«™ï¼Œç”±æ–¼æ—©ä¸Š Egg Drop ç­‰å¤ªä¹…æ™‚é–“æœ‰ Delay å¤ªä¹…ï¼ŒåŠ ä¸Šæˆ‘å€‘è¦å»çœ‹å…©é»æ•´çš„å½±å³¶å¤§æ©‹ï¼Œæ‰€ä»¥é€™é‚Šè‡ªç”±è¡Œå‹•åˆ°ä¸€å€‹åŠå°æ™‚ï½æœ‰çš„äººä¸æƒ³é€›é‡œå±±å¡”å°±åœ¨å•†åœˆé€›è¡—ï¼Œè€Œå°è‰¾å€«é€™ç¨®è³¼ç‰©æ…¾æ¯”è¼ƒä½çš„äººç•¶ç„¶æ˜¯é¸æ“‡é‡œå±±å¡”ã€‚é‡œå±±å¡”é€²å…¥çš„ä½å­åœ¨ä¸€å€‹å¾ˆå¥‡å¦™çš„åœ°é»ï¼Œæ˜¯åœ¨å•†åœˆè£¡é¢ï¼Œè€Œä¸”å¾ˆä¸èµ·çœ¼ã€‚\né‚„å¥½ä¸Šå»æœ‰é›»æ‰¶æ¢¯ï¼Œä¸ç„¶è‰¾å€«èµ°ä¸Šå»æœ‰å¯èƒ½åŠæ¢å‘½éƒ½æ²’äº†ï¼é›»æ‰¶æ¢¯æ—éƒ½æ›è‘—ä¸åŒåœ‹å®¶èªè¨€çš„æ­¡è¿å…‰è‡¨å­—æ¨£ã€‚\nåˆ°äº†æœ€ä¸Šé¢å°±èƒ½çœ‹åˆ°é¾é ­å±±å…¬åœ’çš„çŸ³ç‰Œ\nçŸ³ç‰Œçš„å³æ—é‚„æœ‰ä¸€å€‹é˜\nè€ŒçŸ³ç‰Œçš„å·¦é‚Šçœ‹åˆ°ä¸€å€‹å¾ˆåƒé™½æ˜å±±ä¸Šçš„èŠ±é˜ï¼Œä¸€åº¦é‚„ä»¥ç‚ºä¾†åˆ°é™½æ˜å±±äº†å‘¢ï¼ˆè¢«æ‰“\nå¾€è£¡é¢èµ°ä¸€é»ï¼Œæœ‰ä¸€å€‹é‡œå±±æ­£ä¿®å¯ºï¼Œä¸Šé¢é‚„æœ‰ä¸€å€‹è§€éŸ³ã€‚æ—é‚Šçš„æ­·å²ä»‹ç´¹è‘—ï¼Œ1954ç™¼ç”Ÿéå¤§ç«ï¼Œè€Œåœ¨ 1956 å¹´æœ‰é‡å»ºéï¼Œç›®å‰è£¡é¢ä¸»è¦ä¾›å¥‰è‘— 89 ä½åœ¨äºŒæˆ°ç‚ºåœ‹æè»€çš„è‹±éˆã€‚\nå†å¾€è£¡é¢èµ°ä¸€é»ï¼Œå°±èƒ½çœ‹åˆ°éŸ“åœ‹è‹±é›„æèˆœè‡£å°‡è»çš„éŠ…åƒ\nåœ¨é‡œå±±å¡”ä¸€æ—ï¼Œé‚„æœ‰ç´€å¿µå“å•†åº—ï¼Œè³£ä¸€äº›ç´€å¿µå“\nåœ¨ç´€å¿µå“å•†åº—å‰é¢é‚„å¯ä»¥çœ‹åˆ°åœ¨æ©Ÿå ´ä¹Ÿæœ‰å‡ºç¾éçš„å‰ç¥¥ç‰©æµ·é·—ï½\nä¸€æ—é‚„èƒ½çœ‹åˆ°è¨±å¤šè§€å…‰æ™¯é»çš„æ–‡å­—é…ä¸Šæ„›å¿ƒæä¾›æ‹ç…§\nå› ç‚ºæ™‚é–“æœ‰é™ï¼Œè‰¾å€«å°±æ²’æœ‰ä¸Šåˆ°é‡œå±±å¡”ä¸Šé¢ï¼Œä¸éé‡œå±±å¡”ä¸€æ¨“ä¹Ÿæ˜¯èƒ½çœ‹åˆ°ä¸éŒ¯çš„é¢¨æ™¯äº†ï¼Œè‰¾å€«è¦ºå¾—ä¸ä¸€å®šçœŸçš„è¦ä¸Šåˆ°å¡”ä¸Šã€‚è¦é›¢é–‹æ™‚ï¼Œæ‰ç™¼ç¾æœ‰ä¸€å€‹æ™‚é˜ï¼Œä¸Šé¢é‚„åˆ»è‘—å°ç£åœ‹éš›ç…å­æœƒï¼Œè‰¾å€«çš„å¥³å‹é‚„èªªå¹¹å˜›æ‹é€™ç¨®æ±è¥¿ xD\nArtbox ä¸‹ä¾†å¾Œå‰©ä¸åˆ°åŠå€‹å°æ™‚ï¼Œå°±é€›äº†è³£è¨±å¤šå°ç‰©çš„ Artbox\nè‰¾å€«è¦ºå¾— Artbox çš„è§’è‰²åšå¾—å¥½å¯æ„›\næ¨é–€å°±æ˜¯æˆ³è‡‰\næ‹‰é–€å°±æ˜¯æ‹‰è‡‰\næœ€å¾Œåœ¨ Artbox è²·äº†ä¸€æ”¯çš®å¡ä¸˜çš„è­·å”‡è†ï¼è€Œä¸”å‰›å¥½é‚„ç‰¹åƒ¹ä¾¿å®œäº†2000éŸ“å…ƒã€‚ é›¢é–‹ Artbox æ²’å¤šä¹…è·¯ç¨‹ï¼Œåˆçœ‹åˆ°æ‹›ç‰Œæµ·é·—æ¨å»£éŸ“åœ‹ 2030 ä¸–åšæœƒ~\nå½±å³¶å¤§æ©‹ æ™‚é–“å·®ä¸å¤šï¼Œè‰¾å€«å°±é–‹å§‹æ…¢æ…¢å¾€å½±å³¶å¤§æ©‹çš„è·¯ä¸Šç§»å‹•ï¼Œä¸­é–“é‚„çœ‹åˆ°ä¸€å€‹è·¯ç‰Œä¸Šé¢æœ‰è‘—ä¸åŒåœ‹å®¶çš„å¤§åŸå¸‚\nå‰›æœ‰äººèªªç‚ºä»€éº¼æ²’çœ‹åˆ°å°ç£çš„æ™‚å€™ï¼Œæˆ‘å€‘å°±åœ¨å´é¢çœ‹åˆ°å°åŒ—ï¼Œè€Œä¸”å‰›å¥½æ˜¯å¾€å½±å³¶å¤§æ©‹çš„æ–¹å‘ï¼Œæ‰€ä»¥æˆ‘å€‘æ­£åœ¨å¾€å›å°åŒ—çš„è·¯ä¸Šï¼ˆè¢«æ‰“\nå› ç‚ºææ—©åˆ°ï¼Œè·é›¢å…©é»é–‹æ©‹é‚„æœ‰ä¸€é»æ™‚é–“ï¼Œè‰¾å€«å°±é–‹å§‹éš¨ä¾¿æ‹ï¼Œå¾Œä¾†é‚„è¢«å¥³å‹æ‰“é›»è©±èªªä¾†èªªäººæ€éº¼ä¸è¦‹äº†\næ™‚é–“å¿«åˆ°æ™‚ï¼Œé‚„æœƒå»£æ’­ä¸¦æ”¾éŸ³æ¨‚ç„¶å¾Œæ©‹å°±æœƒé–‹å§‹æ…¢æ…¢å‡èµ·ã€‚é–‹æ©‹ç•«é¢è·Ÿè‰¾å€«æƒ³åƒä¸­çš„æœ‰é»ä¸å¤ªä¸€æ¨£ï¼Œé›»å½±çœ‹å¤ªå¤šäº†ï¼Œä»¥ç‚ºæœƒå¾æ©‹çš„ä¸­å¿ƒç‚ºåŸºç¤ï¼Œå¾€å…©é‚Šå‡èµ·ä¾†ï¼Œçµæœåªæœ‰å·¦å´çš„æ©‹å‡èµ·è€Œå·²ã€‚\næ©‹å‡èµ·æœ€é«˜çš„æ¨£å­\nè€Œä¸”é‚„çœŸçš„æœ‰èˆ¹å¾é€™è£¡ç¶“é\nç™½æ·ºç£ çœ‹å®Œå½±å³¶å¤§æ©‹å¾Œï¼Œæˆ‘å€‘å°±ç§»å‹•åˆ°æ¨‚å¤©ç™¾è²¨å°é¢çš„å…¬è»Šç«™ï¼Œåå…¬è»Šåˆ°ç™½æ·ºç£ã€‚éŸ“åœ‹å…¬è»Šåèµ·ä¾†çš„æ„Ÿè¦ºè·Ÿå°ç£å¾ˆåƒï¼Œæ‰£é™¤éŸ“æ–‡ï¼Œé‚„ä»¥ç‚ºåœ¨å°ç£åå…¬è»Šå‘¢ï½ åˆ°äº†ç™½æ·ºç£å…ˆæ™ƒæ™ƒç™½æ·ºç£æ–‡åŒ–æ‘ï¼Œæ²’æƒ³åˆ°éŸ“åœ‹äººä¹Ÿçœ‹æ‰‹ç›¸ï¼Œä¸€é€²å»æ²’å¤šä¹…å°±çœ‹åˆ°æœ‰å€‹æ”¤ä½åœ¨çœ‹æ‰‹ç›¸~ ç™½æ·ºç£çš„æµ·ä¸Šéƒ½æ˜¯èˆ¹ï¼Œå¯æƒœè‰¾å€«æ‹ä¸å‡ºä¸€ç‰‡éƒ½æ˜¯èˆ¹çš„æ„Ÿè¦ºï¼Œå¦‚æœæ˜¯è»è‰¦ï¼Œæ„Ÿè¦ºå°±åƒæˆ°çˆ­ä¸€æ¨£å¾ˆå£¯è§€ï¼Œä¸éä¹Ÿä¸çŸ¥é“ç‚ºä»€éº¼èƒ½åœé€™éº¼å¤šèˆ¹åœ¨æµ·ä¸Šã€‚\nåœ¨çœ‹æ‰‹ç›¸æ—é‚Šçš„æ”¤ä½æœ‰å€‹ Artshopï¼Œè£¡é¢å¹¾ä¹éƒ½æ˜¯è³£è²“çš„å‘¨é‚Šå•†å“ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œç«Ÿç„¶é‚„æœ‰ä¸€éš»è²“æ˜Ÿäººåœ¨ç¾å ´ç¡è¦ºï¼Œå¾ˆå¤šå®¢äººçœ‹åˆ°å°±æœƒæ‘¸æ‘¸ä»–ï½ä½†è²“ä¹Ÿæ²’åæ‡‰å°±ç¹¼çºŒç¡è‡ªå·±çš„ã€‚\næ¥è‘—æ²¿è‘—æµ·å²¸æ­¥é“èµ°ï¼Œèµ°åˆ°åº•æœ‰ä¸€å€‹æµ·å²¸éš§é“ï¼Œè£¡é¢æœ‰ä¸€å€‹ Touch Love çš„ç‰†å£ï¼Œå¦‚æœéš”ä¸€æ®µæ™‚é–“æ²’æœ‰ç¢°ç‰†å£ï¼Œæ‰‹æŒçš„ç‡ˆå°±æœƒæŒ‰æ‰ï¼Œå·¦å³å…©é‚ŠåŒæ™‚äº®æ™‚æœƒæœ‰å€‹å‹•ç•«ï¼Œå¾ˆé©åˆæƒ…ä¾¶åœ¨é€™æ‹ç…§ï½\nå‡ºäº†æµ·å²¸éš§é“æœ‰ä¸€å€‹å°æµ·é‚Šï¼Œé‚£é‚Šæœ‰è¨±å¤šäººå˜—è©¦ç”¨çŸ³é ­å †çŸ³å †ï¼Œè€Œç¾å ´æœ‰ä¸€å€‹å‰äººç•™ä¸‹çš„çŸ³å †ï¼Œè¶…å²å®³ï¼Œä¹Ÿä¸çŸ¥é“æ€éº¼å †çš„èƒ½å †é€™éº¼é«˜\næ¥è‘—æˆ‘å€‘é–‹å§‹ç§»å‹•å¾€å¤©ç©ºæ­¥é“ç§»å‹•ï¼Œçµæœåœ¨é€™é‚Šåˆçœ‹åˆ°æµ·é·—ï¼æ„Ÿè¦ºåœ¨å“ªå€‹è§€å…‰æ™¯é»éƒ½èƒ½çœ‹åˆ°æµ·é·—çš„å‡ºç¾ï¼ŒçœŸçš„æ˜¯éŸ“åœ‹é‡œå±±è§€å…‰å¤§ä½¿ï½\nå¤©ç©ºæ­¥é“é€™é‚Šæœ‰çœ‹åˆ°ä¸€è¼›æ”¤è»Šï¼Œä¸Šé¢ç«Ÿç„¶é‚„æœ‰è³£ä¸çŸ¥é“ä»€éº¼èŸ²ï½éŸ“åœ‹å¤§åª½é‚„è·Ÿæˆ‘å€‘æ¯”è®šèªªé€™å€‹å¾ˆå¥½åƒï¼Œè®“æˆ‘å€‘è©¦è©¦çœ‹ï¼ä¸éç•¶ç„¶æˆ‘å€‘ç•¶ä¸­æ²’æœ‰äººæ•¢å˜—è©¦ã€‚ä¸éå› ç‚ºæ²’åƒåˆé¤æ‰€ä»¥è‰¾å€«è‚šå­æœ‰é»é¤“äº†ï¼Œå°±åœ¨é€™é‚Šè²·äº†é­šæ¿ä¾†åƒï¼Œ1000éŸ“å…ƒä¸€æ”¯ï¼Œé›–ç„¶è‰¾å€«æ›æˆå°å¹£è¦ºå¾—ä¸è²´ï¼Œä½†å¾Œä¾†å›åˆ°å¸‚å€æœ‰ç™¼ç¾å¸‚å€æ‰è³£500éŸ“å…ƒä¸€æ”¯ï¼Œæœç„¶éƒ½æ˜¯å‘è§€å…‰å®¢çš„åƒ¹æ ¼ï¼¸ï¼¤ï¼\nçµæœè‰¾å€«é¡§è‘—åƒå¿˜äº†æ‹å¤©ç©ºæ­¥é“ï¼Œä¸éåœ¨æ©‹ä¸Šæœ‰çœ‹åˆ°æœ‰æƒ…äººæ”¾æ„›å¿ƒé–åœ¨ä¸Šé¢\næ¨‚å¤©è¶…å¸‚ ç™½æ·ºç£èµ°å·®ä¸å¤šäº†ï¼Œæˆ‘å€‘å°±åå…¬è»Šå›åˆ°æ¨‚å¤©è¶…å¸‚ï½é€™é‚Šé †ä¾¿æé†’å¤§å®¶ï¼Œæˆ‘å€‘ä¹Ÿæ˜¯ç•¶ä¸­æœ‰äººä¹‹å‰åœ¨éŸ“åœ‹æ—…éŠéæé†’æ‰çŸ¥é“ã€‚åŸä¾†æ¨‚å¤©è¶…å¸‚é€±æ—¥ä¸é–‹é–€ï¼Œæ‰€ä»¥æˆ‘å€‘é¸æ“‡ä»Šå¤©å°±å…ˆè²·é»æ±è¥¿å›å»ã€‚æ¨‚å¤©è¶…å¸‚æ„Ÿè¦ºå°ˆé–€è¨­è¨ˆçµ¦è§€å…‰å®¢çš„ï¼Œå› ç‚ºè£¡é¢å¥½å¤šå€‹æ«ƒä½éƒ½æœƒå¯«æ—…éŠå®¢ç†±éŠ·ç”¢å“ä¾†å¸å¼•è§€å…‰å®¢å»è²·ï¼è€Œä¸”ä¹Ÿæœ‰ä¸å°‘è²·ä¸€é€ä¸€æ´»å‹•ï¼Œæœ€å¾Œè…¦ç†±å°±è²·äº†å…©å¤§åŒ…æµ·è‹”ï¼é‡é‡ä¸é‡ä½†è¶…å è¡Œæç©ºé–“ã€‚ä¸é total ä¸åˆ°ä¸€åƒå°å¹£ï¼Œè€Œä¸”æ»¿ä¸‰è¬å…ƒéŸ“å…ƒï¼Œçµå¸³æ™‚å¯ä»¥ç›´æ¥æä¾›è­·ç…§è¾¦ç†é€€ç¨…ã€‚\næ¿Ÿå·å®¶ è²·å®Œå•†å“å¾Œå°±å…ˆå›è¥¿é¢çš„æ¨‚å¤©é£¯åº—æ”¾æ±è¥¿ï¼ŒåŸä¾†æƒ³åœ¨é£¯åº—é™„è¿‘åƒéŸ“å¼ç‡’çƒ¤ï¼Œä½†å› ç‚ºæˆ‘å€‘æ²’æœ‰äº‹å…ˆé è¨‚åŠ ä¸Šé€±å…­äººæ½®çœ¾å¤šï¼Œè€Œä¸”æˆ‘å€‘æœ‰åå€‹äººï¼Œåº—å®¶èªªè¦ç­‰ä¸€å€‹å¤šå°æ™‚\u0026hellip;æˆ‘å€‘è¦ºå¾—è¦ç­‰å¤ªä¹…å°±é è¨‚äº†æ˜å¤©å†ä¾†ç”¨é¤ï¼Œç„¶å¾Œæ‰¾æ”¹å…¶ä»–åº—å®¶ç”¨é¤ã€‚å¾Œä¾†åœ¨é£¯åº—å°é¢çœ‹åˆ°é‚„æœ‰ä½å­çš„æ¿Ÿå·å®¶ã€‚\néŸ“å¼æ–™ç†ä¸€å¦‚å¾€å¸¸ï¼Œè€é—†ä¸€ä¸Šä¾†å°±æ˜¯å…ˆä¸Šå°èœï¼Œé€™å®¶ä¸€å…±æœ‰ä¸ƒå€‹å°èœã€‚\næˆ‘å€‘åå€‹äººä¸€å…±åˆ†å…©æ¡Œå››äººå’Œå…­äººï¼Œè‰¾å€«é€™æ¡Œå…©ç”·å…©å¥³ä¸€å…±é»äº†ä¸€ç¢—å¤§çš„é®‘é­šç²¥ã€æµ·è†½ç²¥ã€çƒ¤é»ƒæ²¹é®‘é­šå’Œæµ·é®®è”¥ç…é¤… ç²¥çš„éƒ¨åˆ†éƒ½æ¯”è¼ƒæ·¡ï¼Œéœ€è¦è‡ªå·±é¡å¤–åŠ é¹½\næµ·é®®è”¥ç…é¤…çš„éƒ¨åˆ†ï¼Œä»–çš„è”¥éƒ½æ˜¯å®Œæ•´çš„ä¸€å¤§æ¢ï¼Œè‰¾å€«æœ¬èº«æ²’æœ‰ç‰¹åˆ¥å–œæ­¡åƒè”¥æ‰€ä»¥å°±è¦ºå¾—ä¸€èˆ¬èˆ¬ï½\nçƒ¤é»ƒæ²¹é®‘é­šæ˜¯ç•¶ä¸­æˆ‘è¦ºå¾—å‘³é“ç®—é‚„ä¸éŒ¯çš„ï¼Œä¸éæ–™æœ‰é»å°‘å°±æ˜¯äº†ï¼Œç•¢ç«Ÿé®‘é­šå¾ˆè²´ xD\nå¾Œä¾†éš”å£å…­äººæ¡Œé»äº†å…©ä»½ç™½å¸¶é­šï¼Œåƒä¸å®Œé€äº†ä¸€ä»½éä¾†çµ¦æˆ‘å€‘åƒï¼Œæ­£å¸¸ä¸€ä»½æ˜¯ä¸‰ç‰‡ï¼Œæ‰€ä»¥åœ–ç‰‡ä¸¦éæ­£å¸¸ä¸€ä»½çš„ä»½é‡ã€‚ä¸éç™½å¸¶é­šæ„å¤–çš„å¾ˆè²´ï¼Œä¸€ä»½ç«Ÿç„¶è¦ 5 è¬éŸ“å…ƒï¼åœ¨å°ç£ç™½å¸¶é­šæ‡‰è©²æ˜¯å¾ˆä¾¿å®œçš„é£Ÿææ‰æ˜¯ï¼Œä¸çŸ¥é“ç‚ºä»€éº¼éŸ“åœ‹èƒ½è³£é€™éº¼è²´ï½\nhome plus åƒé£½å¾Œé£¯ï¼Œå› ç‚ºæœ‰çœ‹åˆ° BT21 å’Œ home plus æœ‰è¯åå‡ºä¸€äº›å•†å“ï¼Œæ‰€ä»¥è‰¾å€«å°±è·‘åˆ° home plus å»ã€‚åŸæœ¬ä»¥ç‚º home plus æ˜¯è³£å®¶å…·é¡çš„åœ°æ–¹åƒæ˜¯ ikeaï¼Œçµæœæ²’æƒ³åˆ°å¯¦éš›æ˜¯å¤§å‹è¶…å¸‚ï½\nåœ¨èµ°éå»çš„è·¯ä¸ŠéŸ“åœ‹å¾ˆç‰¹åˆ¥ï¼Œæœ‰äº›æ¯”è¼ƒå¤§çš„é¦¬è·¯æœƒæ˜¯ç•«é›™å‘çš„æ–‘é¦¬ç¶«åˆ†åˆ¥çµ¦éä¾†å’Œéå»\nç„¶å€™ home plus çš„é›»æ‰¶æ¢¯è¶…æ“ çª„ï¼Œä¸çŸ¥é“æ˜¯éŸ“åœ‹äººéƒ½ç‰¹åˆ¥ç˜¦å—\u0026hellip;ä¸ç„¶åƒåŒ—ç¾é‚£äº›æ¯”è¼ƒèƒ–çš„äººæ ¹æœ¬æ²’æœ‰è¾¦æ³•åé€™é›»æ‰¶æ¢¯å§\næœ€å¾Œå°±æ˜¯çœ‹åˆ°å°ç£ç¾åœ¨æ•´å¤©è¶…ç¼ºçš„è›‹ï¼åœ¨éŸ“åœ‹å¯ä»¥ç•¶é›è›‹å¯Œç¿ï½\nçµæœ BT21 çš„å•†å“ç†±è³£äº†ï¼Œç†±é–€çš„è§’è‰²éƒ½è³£å®Œäº†ï¼Œåªèƒ½èªª BTS å½±éŸ¿åŠ›å¤ªå¼·å¤§äº† \u0026gt;_\u0026lt;\n","date":"April 1, 2023","img":"/posts/travel/2023_busan_day2/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/travel/2023_busan_day2/feature_hu2398e6c3403cb4f786b4d95258155cdb_317038_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/travel/2023_busan_day2/","smallImg":"/posts/travel/2023_busan_day2/feature_hu2398e6c3403cb4f786b4d95258155cdb_317038_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"TRAVEL","url":"/tags/travel/"}],"timestamp":1680307200,"title":"2023 é‡œå±±å…­å¤©äº”å¤œ Day2"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"é‡‘æµ·åœ‹éš›æ©Ÿå ´ è‰¾å€«ä»Šå¹´å¾ˆå¹¸é‹çš„èƒ½åƒåŠ å¥³å‹çš„å“¡å·¥æ—…éŠï¼Œå¥¹çš„å…¬å¸æ˜¯å»é‡œå±±å…­å¤©äº”å¤œï¼Œä¸éå¯¦éš›ä¸Šç®—æ˜¯ç©äº”å¤©ï¼Œå› ç‚ºæœ€å¾Œä¸€å¤©æ˜¯ä¸€å¤§æ—©çš„é£›æ©Ÿã€‚å¥¹çš„å…¬å¸é€™æ¬¡é¸åœ¨æ¸…æ˜é€£å‡å‡ºåœ‹ï¼Œå› ç‚ºå››æœˆä¸€è™Ÿè¨‚ä¸åˆ°ç¥¨äº†ï¼Œæ‰€ä»¥ææ—©ä¸€å¤©ä¸‰æœˆä¸‰åä¸€æ—¥å‡ºç™¼ï½\nä¸€å¤§æ¸…æ—©å°±åè‘—è¨ˆç¨‹è»Šåˆ°æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ï¼Œåœ¨åœ‹éš›æ©Ÿå ´çš„å…ç¨…åº—å…§é‚„çœ‹åˆ°å‚³èªªä¸­å¾ˆé›£è²·åˆ°çš„ PS5ï¼Œè€Œä¸”é‚„ä¸ç”¨ç¶éŠæˆ²çœŸçš„æ˜¯å¾ˆä½›ï¼Œä½†å¯æƒœè‰¾å€«ç¾åœ¨éƒ½æ²’ä»€éº¼æ™‚é–“æ‰“éŠæˆ²äº†ï¼Œè²·äº†å¾ˆå¤§çš„æ©Ÿç‡æ”¾è‘—é•·ç°å¡µï¼Œæ‰€ä»¥åªå¥½æ‰“æ¶ˆå¿µé ­ï½ ä¸ç„¶ $16715 çš„åƒ¹æ ¼ç¢ºå¯¦ç®—æŒºä¾¿å®œçš„ï¼Œå‰ä¸€é™£å­éå¹´çš„æ™‚å€™ï¼Œé‚„è½åŒäº‹èªªä»–ç”¨åŸåƒ¹è³£äº†ä»–å·²ç¶“è²·äº†1ï½2å¹´çš„ PS5ï¼Œä¸»è¦è½ä»–èªªéå¹´å¾ˆå¤šäººæœ‰æ™‚é–“ç©éŠæˆ²ï¼Œæ‰€ä»¥éŠæˆ²æ©Ÿçš„åƒ¹æ ¼è¢«ç‚’å¾—å¾ˆé«˜ï½\nåœ¨ç™»æ©Ÿå®¤ç­‰å¾…ä¸Šé£›æ©Ÿçš„æ™‚å€™ï¼Œå‰›å¥½çœ‹åˆ°å‰ä¸€é™£å­èˆªç©ºè‚¡å¾ˆç«ç†±çš„æ˜Ÿå®‡èˆªç©ºé£›æ©Ÿæº–å‚™èµ·é£›ï¼Œå°±æ‹äº†ä¸€å¼µèµ·ä¾†\né€™æ˜¯è‰¾å€«ç¬¬ä¸€æ¬¡æ­ä¹˜å¤§éŸ“èˆªç©ºï¼Œå±…ç„¶åœ‹éš›ç·šçš„èˆªç©ºç«Ÿç„¶æ²’æœ‰è¢å¹•å¯ä»¥è§€çœ‹é›»å½±ä¹‹é¡çš„ï¼Œåè€Œåªæœ‰ä¸€å€‹ USB å­”å¯ä»¥å……é›»ï½è‰¾å€«çš„èªçŸ¥é€šå¸¸éƒ½æ˜¯å»‰åƒ¹èˆªç©ºæ‰æœƒæ²’æœ‰è¢å¹•ï¼Œæ‰€ä»¥æ„Ÿåˆ°æœ‰é»æ„å¤–ã€‚\nè€Œè®“æˆ‘æ›´æ„å¤–çš„æ˜¯ï¼Œå¤§éŸ“èˆªç©ºçš„é¤é»åªæœ‰ä¸€ç¨®ï½æ˜¯æ²’æœ‰è¾¦æ³•åšé¸æ“‡çš„ï¼Œé€šå¸¸åƒé•·æ¦®éƒ½æœƒæœ‰å…©å€‹é¤é»è®“å®¢æˆ¶é¸æ“‡ï½é€™æ¬¡æ˜¯éŸ“å¼é›è‚‰é£¯ï¼Œå°æ–¼ä¸åƒè¾£çš„è‰¾å€«ä¾†èªªæœ‰é»å°è¾£ï¼Œä¸éé‚£å€‹é†¬è‰¾å€«è¦ºå¾—æŒºé…é£¯çš„ï¼Œæ‰€ä»¥è‰¾å€«è¦ºå¾—æ•´é«”é‚„ä¸éŒ¯åƒï¼Œä¸éä¹Ÿæœ‰å…¶ä»–äººè¦ºå¾—ä¸å¥½åƒï¼Œå°±çœŸçš„æ˜¯çœ‹äººå£å‘³å–œå¥½ã€‚\nå¾æ¡ƒåœ’åˆ°é‡œå±±åªè¦å…©å€‹å¤šå°æ™‚ï¼Œæ‰€ä»¥åœ¨åƒå®Œé£¯å¾Œæ²’å¤šä¹…å°±è½åˆ°æ©Ÿé•·é€šçŸ¥é£›æ©Ÿæº–å‚™è¦é–‹å§‹é™è½äº†ï¼Œè‰¾å€«å°±è¶•å¿«æ‹¿èµ·ç›¸æ©Ÿå¾€å¤–æ‹ç…§ã€‚\nåˆ°äº†é‡œå±±çš„é‡‘æµ·åœ‹éš›æ©Ÿå ´ï¼Œå°±çœ‹åˆ°å‰ç¥¥ç‰©æµ·é·—çš„è¿æ¥ï½\næ¨‚å¤©é£¯åº— å…¥å¢ƒéŸ“åœ‹é‡œå±±ä»¥å¾Œï¼Œæˆ‘å€‘å…ˆèµ°å»äº†æ©Ÿå ´çš„è¼•è»Œè»Šç«™ï¼Œç”±æ–¼æˆ‘å€‘äº‹å…ˆåœ¨ KKDAY ä¸Šå·²ç¶“è²·å¥½äº† Tmoney çš„å¡ï¼ŒåŠ ä¸Šåœ˜éšŠä¸­æœ‰äººä»¥å‰ä¾†ééŸ“åœ‹ï¼Œèº«ä¸Šé‚„æœ‰äº›éŸ“å¹£ï¼Œå°±å…ˆè·Ÿæ—…ä¼´å€Ÿäº†ä¸€è¬éŸ“å…ƒä¾†åŠ å€¼ã€‚\næ¥è‘—æˆ‘å€‘å…ˆæ­ä¹˜æ©Ÿå ´çš„è¼•è»Œåˆ°è½‰ä¹˜ç«™ã€Œæ²™ä¸Šç«™ã€ï¼Œç„¶å¾Œå†è½‰æ­æ·é‹åˆ°æˆ‘å€‘ä½å®¿çš„ã€Œè¥¿é¢ç«™ã€\nåœ¨è¡Œé§›çš„éç¨‹ä¸­é‚„å¯ä»¥çœ‹åˆ°å¤–é¢é“è·¯åŠæ²³å ¤éƒ½æ˜¯æ»¿æ»¿çš„æ«»èŠ±ï¼Œéå¸¸æ¼‚äº®ï¼Œéƒ½æƒ³è·³ä¸‹è»Šå»çœ‹æ«»èŠ±äº†ï½é‚„å¥½æˆ‘å€‘ä¹‹å¾Œè¡Œç¨‹ä¹Ÿæœ‰å®‰æ’å»é®æµ·çœ‹æ«»èŠ±æ‰€ä»¥å°±å¿ä½äº†ï¼¸ï¼¤\næ¥è‘—åˆ°äº†æˆ‘å€‘ä½å®¿çš„æ¨‚å¤©é£¯åº—ï¼Œå¾é æ–¹å°±çœ‹åˆ°ä¸€å€‹å¤§å¤§çš„æ‹›ç‰Œä¸Šé¢å¯«è‘— Casinoï¼Œæ²’æƒ³åˆ°éŸ“åœ‹çš„è³­å ´æ˜¯åˆæ³•çš„ï¼Œè€Œä¸”é‚„åœ¨æ¨‚å¤©é£¯åº—è£¡é¢ï½ é€™æ¬¡ä½åœ¨ 23 æ¨“ï¼Œé›»æ¢¯è¶…å¿«ä¸€ä¸‹å­å°±å¾ä¸€æ¨“é£†åˆ°äºŒåä¸‰æ¨“ï½æœ€é‡è¦çš„æ˜¯çª—å¤–çš„ View è¶…å¥½çš„ï¼\nå¨œè‹±è€å¥¶å¥¶æ›éŒ¢æ‰€ çŸ­æš«ä¼‘æ¯äº†ä¸€ä¸‹å¾Œå¤§å®¶å°±ä¸€èµ·å‡ºç™¼å»æ›éŒ¢æ‰€æ›éŒ¢ï½å¨œè‹±è€å¥¶å¥¶æ›éŒ¢æ‰€åœ¨ä¸€å€‹å··å­å…§ï¼Œç¬¬ä¸€æ¬¡èµ°çš„æ™‚å€™æœ‰ç¶“éä½†ä»¥ç‚ºä¸æ˜¯å°±é€™æ¨£èµ°éå»äº†ï¼Œä¾†å›èµ°äº†ç¬¬äºŒæ¬¡æ‰æ‰¾åˆ°ã€‚è¨±å¤šäººèº«ä¸Šéƒ½æ²’æœ‰éŸ“å¹£ï¼Œéƒ½æ˜¯å¸¶è‘—ç¾é‡‘æˆ–å°å¹£ä¾†æ›çš„ï¼Œè€Œè‰¾å€«è‡ªå·±å’Œå¥³å‹ä¸€å…±æ›äº†10000å…ƒå°å¹£ï¼Œæƒ³èªªé‡œå±±å¤§åŸå¸‚ï¼Œå¤§éƒ¨åˆ†éƒ½å¯ä»¥åˆ·å¡ï¼Œè€Œä¸”æ›éŒ¢æ‰€é›¢é£¯åº—å¾ˆè¿‘ä¸å¤ å¯ä»¥å†ä¾†æ›å°±æ²’æœ‰æ›å¾ˆå¤šã€‚ç•¶å¤©çš„åŒ¯ç‡æ˜¯41.3ï¼Œå¦‚æœæ›å€‹25000å…ƒå°å¹£ç¬é–“å°±è®Šæˆç™¾è¬å¯Œç¿äº†ï¼\nè·¯ä¸Šçœ‹åˆ°äº† Mega Coffeeï¼Œå¤§å®¶å°±é–‹å§‹å…ˆè²·èµ·å’–å•¡äº†ï¼Œä¼°è¨ˆæ—©ä¸Šå¤ªæ—©èµ·ä¾†å¤§å®¶éƒ½ç´¯äº†ï½éœ€è¦å…ˆä¾†é»å’–å•¡å› è£œä¸€ä¸‹\næ¾äº­3ä»£è±¬è‚‰æ¹¯é£¯ æ¥è‘—æˆ‘å€‘åˆ°é™„è¿‘çš„æ¾äº­3ä»£è±¬è‚‰æ¹¯é£¯åƒæ™šé¤ï¼Œè‰¾å€«é»äº†è¡€è…¸è±¬è‚‰æ¹¯ï½ä¸€é–‹å§‹è½ä¾†éçš„æ—…ä¼´èªªè¡€è…¸ä¸å¥½åƒï¼Œä½†è‰¾å€«è¦ºå¾—å¾ˆç‰¹åˆ¥å°±åƒçœ‹çœ‹ã€‚å¾Œä¾†è¦ºå¾—å‘³é“é‚„è¡Œï¼Œè€Œèªªä¹‹å‰ä¾†åƒéè¦ºå¾—ä¸å¥½åƒçš„æ—…ä¼´é€™æ¬¡åƒä¹Ÿè¦ºå¾—é‚„å¯ä»¥æ¥å—ï½ä»–èªªå¯èƒ½æ˜¯ä¸Šæ¬¡æ­ç´…çœ¼ç­æ©Ÿç„¶å¾Œç•¶æˆæ˜¯æ—©é¤åœ¨åƒï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å‰›ç¡é†’åƒä¸ç¿’æ…£è¡€è…¸ xDã€‚ é€™é‚Šæœ‰å€‹æŒºç‰¹åˆ¥çš„å°±æ˜¯æ¡Œä¸Šæœƒæ”¾ä¸€å°ç½é¹½ï¼Œåº—å“¡é˜¿å§¨ç”¨æ‰‹æ¯”åŠƒæ„æ€å¤§æ¦‚æ˜¯è·Ÿæˆ‘å€‘è¬›å¯ä»¥è‡ªå·±åŠ ã€‚è±¬è‚‰æ¹¯å–èµ·ä¾†æ„Ÿè¦ºåªæ”¾äº†ä¸€é»é»æˆ–è€…æ²’æ”¾é¹½ï¼Œæ‰€ä»¥è‰¾å€«è‡ªå·±åŠ äº†ä¸€é»å¾Œæ‰è¦ºå¾—å‘³é“ä¸éŒ¯ï½\nDaiso åƒé£½é£¯å¾Œï¼Œæˆ‘å€‘å°±åœ¨ Google Map ä¸Šæ‰¾äº† Dasioï¼ˆå…¶å¯¦å°±æ˜¯å¤§å‰µï¼‰~ ä¸»è¦ç™¼ç¾é£¯åº—å› æ‡‰ç’°ä¿æ”¿ç­–æ‰€ä»¥æ²’æœ‰æä¾›ç‰™åˆ·å’Œç‰™è†ï¼Œé›–ç„¶ç•¶åˆè² è²¬è¨‚æˆ¿çš„æ—…ä¼´æœ‰æé†’æˆ‘å€‘ï¼Œä½†å¥³å‹å¤ªå¿™äº†ï¼Œæ‰€ä»¥æ²’æ³¨æ„åˆ°ï¼Œä»¥ç‚ºæœ‰æä¾›ç‰™åˆ·ç‰™è†æ‰€ä»¥å°±æ²’å¾å°ç£å¸¶éä¾†ã€‚éŸ“åœ‹çš„ Dasio çœŸçš„å¾ˆä¾¿å®œï¼Œæœ‰çš„æ±è¥¿æ›ç®—ä¸‹ä¾†é‚„ä¸åˆ°30å¡Šå°å¹£ã€‚æœ€å¾Œé‚„åœ¨ Dasio è²·äº†å°ç«é¾çš„ç‰™è†ï½\né˜¿æ‹‰ä¸äºŒæ‰‹æ›¸åº— å› ç‚ºå¥³å‹å¾ˆå–œæ­¡ BTS ï¼Œæ‰€ä»¥æˆ‘å€‘å°±åˆ°é˜¿æ‹‰ä¸äºŒæ‰‹æ›¸åº—æ™ƒæ™ƒï½è£¡é¢æœ‰å…©å±¤æ¨“ï¼Œè€Œä¸”æœ‰ä¸€å°å€å°ˆé–€è³£ BTS çš„æ±è¥¿ã€‚æˆ‘è‡ªå·±åœ¨æ—é‚Šéš¨ä¾¿é€›ï¼Œé‚„çœ‹åˆ°ç¨‹å¼ç›¸é—œçš„æ›¸ç±ï¼Œé›–ç„¶å®Œå…¨çœ‹ä¸æ‡‚ xD\nè¥¿é¢è»Šç«™ æ™ƒå®Œæ›¸åº—ä»¥å¾Œï¼Œå°±åœ¨é™„è¿‘é–‹å§‹äº‚é€›ï¼Œé‚„é‡åˆ°æœ‰è³£é­šæ¿çš„åº—ï¼Œæœ‰å®¢äººå°±åœ¨ç«™åº—å‰é¢ç›´æ¥æ‹¿èµ·ä¾†åƒï½è¥¿é¢è»Šç«™æ•´å€‹çµ¦è‰¾å€«çš„æ„Ÿè¦ºåƒæ˜¯å°åŒ—çš„è¥¿é–€ç”ºæˆ–æ±å€ï¼Œå¥½å¤šå¹´è¼•äººåœ¨é€™ä¸€å€é€›ï¼Œè€Œä¸”æœ‰å¾ˆå¤šé–‹æ”¾å¼é…’å§ï¼Œå¯ä»¥çœ‹åˆ°æœ‰äººåœ¨è£¡é¢å–é…’ï¼è·¯ä¸Šä¹Ÿçœ‹åˆ°æœ€è¿‘æµè¡Œçš„å››æ ¼è‡ªæ‹æ©Ÿå™¨ã€‚æœ€å¾Œèµ°åˆ° NC ç™¾è²¨ï¼Œä¸é NC ç™¾è²¨ä¸èƒ½æ‹ç…§å°±æ²’æ‹äº†ï¼Œæœ€å¾Œåœ¨åœ°ä¸‹å®¤çš„è¶…å¸‚è²·äº†è‰è“å’Œä¸€é»é›¶é£Ÿå°±å›é£¯åº—äº†ï½\nCasino è‰¾å€«å·²ç¶“å¾ˆä¹…æ²’æœ‰å»è³­å ´äº†ï¼Œä¸Šæ¬¡å»å·²ç¶“æ˜¯å¤§å­¸çš„æ™‚å¾Œï¼Œåœ¨åŠ æ‹¿å¤§çš„å°¼åŠ æ‹‰ç€‘å¸ƒé‚£é‚Šçš„è³­å ´ã€‚æ¨‚å¤©é£¯åº—çš„è³­å ´æœ€ä¸»è¦çš„é™åˆ¶å°±æ˜¯ç•¶åœ°äººä¸èƒ½é€²å»ï¼Œé€™æ˜¯å°ˆé–€çµ¦è§€å…‰å®¢çš„è³­å ´ï¼Œæ•´é«”ä¸å¤§ï¼Œäººæ•¸æˆ‘è¦ºå¾—ä¹Ÿä¸å¤šï¼Œæ‡‰è©²ä¸»è¦æ˜¯ç•¶åœ°äººä¸èƒ½é€²ä¾†çš„é—œä¿‚ã€‚è‰¾å€«å°ç©äº†ä¸€ä¸‹ï¼Œæ²’æœ‰è¼¸è´å°±é›¢é–‹äº†\næ¨‚å¤©é£¯åº—å¤œæ™¯ æœ€å¾Œé€ä¸Šé‡œå±±é£¯åº—çš„å¤œæ™¯\n","date":"March 31, 2023","img":"/posts/travel/2023_busan_day1/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/travel/2023_busan_day1/feature_hu2404bca6c561b5e648a94dcd15f1606d_190922_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/travel/2023_busan_day1/","smallImg":"/posts/travel/2023_busan_day1/feature_hu2404bca6c561b5e648a94dcd15f1606d_190922_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"TRAVEL","url":"/tags/travel/"}],"timestamp":1680220800,"title":"2023 é‡œå±±å…­å¤©äº”å¤œ Day1"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"Basic of DynamoDB DynamoDB æ˜¯ AWS NOSQL Database. performance çš„éƒ¨åˆ†ï¼ŒDynamoDB çš„è³‡æ–™å­˜åœ¨ SSD Data æœƒè‡ªå‹•å‚™ä»½åˆ°ä¸åŒçš„ AZ ï¼Œé é˜² single point failure DynamoDB ä»¥ table ç‚ºå–®ä½ï¼Œè£¡é¢æ¯ç­†çš„ Row ç‚º Item ï¼Œè€Œæ¯å€‹ Item çš„ Column ç‚º Attribute DynamoDB æœ‰å…©ç¨® Type çš„ Primary Key ï¼Œåœ¨ DB éœ€è¦æ˜¯å”¯ä¸€å€¼ Partition Key Composite Key ( Partition Key + Sort Key) åŒä¸€å€‹ Partition Key æœƒå­˜åœ¨ä¸€èµ·ï¼Œæ ¹æ“š Sort Key å»æ’åº å¯ä»¥è¨­å®š TTL (Time to Live ) to Itemï¼Œæ‰€ä»¥ç•¶æ™‚é–“åˆ° Item æœƒè‡ªå‹•åˆªé™¤ã€‚TTL éœ€è¦å­˜è¦åˆªé™¤çš„æ™‚é–“ Timestamp Secondary Index Projection ä»£è¡¨ä¸€çµ„ Attribute è¤‡è£½åˆ° secondary Index Types Global Secondly Index Partition Key å’Œ Sort Key å¯ä»¥éƒ½ä¸ä¸€æ¨£ queries or scans åªèƒ½æ‹‰æœ‰ projected åˆ° secondary Index çš„ attribute Local Secondary Index ä¸€æ¨£çš„ Partition Key ä½†æ˜¯ä¸ä¸€æ¨£çš„ Sort Key =\u0026gt; æ‰€ä»¥ Primary Key ä¸€å®šè¦æ˜¯ Composite Key åªèƒ½åœ¨å»ºç«‹ Table æ™‚å»ºç«‹ query or scan å¦‚æœæ²’æœ‰ projected åˆ° secondary Index çš„ attributeï¼Œ DynamoDB æœƒè‡ªå‹•å¾ table æ‹‰å‡ºä¾† Read Consistency Eventually Consistent Reads: æœ€çµ‚æœƒä¸€åˆ¶æ€§ï¼Œå› ç‚º Data Source å­˜åœ¨ä¸åªä¸€å€‹åœ°æ–¹ï¼Œæœ‰å¯èƒ½è®€åˆ°èˆŠçš„ Data Source Strongly Consistent Reads: è®€åˆ°çš„è³‡æ–™ä¸€å®šæ˜¯æœ€æ–°çš„ï¼Œæœ‰æ›´é«˜çš„å»¶é²ï¼Œä¸æ”¯æ´ global secondary index Transition: æ”¯æ´ ACID (atomicity, consistency, isolation, \u0026amp; durability) Transition ï¼Œä¸Šé™ä¸€æ¬¡ 25 å€‹ write Query v.s Scan Query æ˜¯é€é primary key å»æ‰¾æœå°‹ æ’ˆå‡ºä¾†çš„è³‡æ–™æ˜¯æ ¹æ“š Sort Key å»æ’åº ï¼Œ å¯ä»¥é€éè¨­å®š ScanIndexForward = false å¾—åˆ°ç›¸åçš„é †åºçš„çµæœ é è¨­æ˜¯ Eventually Consistent ï¼Œå¯ä»¥è¨­å®šæ˜¯ Strongly Consistent Scan æ˜¯æ‹‰å‡ºæ‰€æœ‰çš„ Items (full table scan)ï¼Œç„¶å¾Œå¯ä»¥é€é Filter ä¸€ä¸€éæ¿¾ performance æ¯” Query å·® å¯ä»¥ç”¨å°çš„ page size æ”¹é€² performance å¯ä»¥è¨­å®š Parallel å»åŠ å¼· performanceï¼Œä½†è¦æ³¨æ„ DynamoDB loading æ˜¯å¦å¾ˆé‡ DynamoDB Capacity Provisioned Capacity ååé‡ (Throughput) DynamoDB ååé‡è¨­å®šå–®ä½ç‚º Capacity Unit ï¼Œå€åˆ†ç‚º Read, Write å…©å€‹ ä¸€å€‹ Write Capacity Unit ç­‰æ–¼ 1 KB/1 Second ä¸€å€‹ Read Capacity Unit ç­‰æ–¼ 1 å€‹ Strongly Consistent Reads 4 KB / 1 Second 2 å€‹ Eventually Consistent Reads 4 KB / 1 Second å¦‚æœè¶…å‡ºè¨­å®šçš„ Capacity Unit ï¼ŒDynamoDB æœƒå™´ ProvisionedThroughputExceededException ã€‚ å»ºè­°æ™‚åš exponential backoff retryï¼Œæ„æ€å°±æ˜¯éš¨è‘— retry æ¬¡æ•¸çš„å¢é•·ï¼Œæ¯å€‹request ä¸­é–“çš„æ™‚é–“å€éš”ä¹Ÿæœƒå¢é•· On-Demand Capacity AWS æœƒæ ¹æ“šæµé‡è‡ªå‹• Scaling å¾ˆé›£é æ¸¬èŠ±è²» DynamoDB Accelerator (DAX) DAX æ˜¯ AWS ç®¡ç†çš„ in memory cache cluster ï¼Œå¯ä»¥åŠ å¿« Read çš„ Perofrmance åœ¨å¯«å…¥è³‡æ–™æ™‚ï¼ŒæœƒåŒæ™‚å¯«å…¥ DAX å’Œ DynamoDB Tableï¼Œæ‰€ä»¥å¯«å…¥å¾Œç›´æ¥ Read æœƒ Hit åˆ° cache ä¸æ”¯æ´ Strongly consistent reads DynamoDB Stream æœƒæŠ“åˆ°æ‰€æœ‰ä¿®æ”¹ Item çš„ Event ï¼Œå¯ä»¥ Trigger Lambda è³‡æ–™æœƒåŠ å¯†å’Œä¿å­˜ 24 å°æ™‚ æœ‰ç¨ç«‹çš„ Endpoint AWS CLI create table example 1aws dynamodb create-table \\ 2 --table-name Music \\ 3 --attribute-definitions \\ 4 AttributeName=Artist,AttributeType=S \\ 5 AttributeName=SongTitle,AttributeType=S \\ 6 --key-schema \\ 7 AttributeName=Artist,KeyType=HASH \\ 8 AttributeName=SongTitle,KeyType=RANGE \\ 9 --provisioned-throughput \\ 10 ReadCapacityUnits=10,WriteCapacityUnits=5 KeyType : Hash: Partition Key RANGE: Sort Key IAM Policy Conditions é™åˆ¶ IAM User åªèƒ½æ“ä½œç‰¹å®šçš„ Item ï¼Œä»¥ä¸‹é¢ç‚ºä¾‹ dynamodb:LeadingKeys æ˜¯æŒ‡ partition keyï¼Œç•¶ IAM UserID ç­‰æ–¼ partition key æ™‚æ‰å¯ä»¥åŸ·è¡Œ Policy è£¡é¢çš„ Actionã€‚ 1{ 2 \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, 3 \u0026#34;Statement\u0026#34;: [ 4 { 5 \u0026#34;Sid\u0026#34;: \u0026#34;AllowAccessToOnlyItemsMatchingUserID\u0026#34;, 6 \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, 7 \u0026#34;Action\u0026#34;: [ 8 \u0026#34;dynamodb:GetItem\u0026#34;, 9 \u0026#34;dynamodb:BatchGetItem\u0026#34;, 10 \u0026#34;dynamodb:Query\u0026#34;, 11 \u0026#34;dynamodb:PutItem\u0026#34;, 12 \u0026#34;dynamodb:UpdateItem\u0026#34;, 13 \u0026#34;dynamodb:DeleteItem\u0026#34;, 14 \u0026#34;dynamodb:BatchWriteItem\u0026#34; 15 ], 16 \u0026#34;Resource\u0026#34;: [ 17 \u0026#34;arn:aws:dynamodb:us-west-2:123456789012:table/GameScores\u0026#34; 18 ], 19 \u0026#34;Condition\u0026#34;: { 20 \u0026#34;ForAllValues:StringEquals\u0026#34;: { 21 \u0026#34;dynamodb:LeadingKeys\u0026#34;: [ 22 \u0026#34;${www.amazon.com:user_id}\u0026#34; 23 ], 24 \u0026#34;dynamodb:Attributes\u0026#34;: [ 25 \u0026#34;UserId\u0026#34;, 26 \u0026#34;GameTitle\u0026#34;, 27 \u0026#34;Wins\u0026#34;, 28 \u0026#34;Losses\u0026#34;, 29 \u0026#34;TopScore\u0026#34;, 30 \u0026#34;TopScoreDateTime\u0026#34; 31 ] 32 }, 33 \u0026#34;StringEqualsIfExists\u0026#34;: { 34 \u0026#34;dynamodb:Select\u0026#34;: \u0026#34;SPECIFIC_ATTRIBUTES\u0026#34; 35 } 36 } 37 } 38 ] 39} ","date":"March 21, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/dynamodb-certification-note/","smallImg":"","tags":[{"title":"DynamoDB","url":"/tags/dynamodb/"}],"timestamp":1679356800,"title":"DynamoDB Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"Basic of S3 å·² Object ç‚ºå–®ä½çš„å„²å­˜ç©ºé–“ ï¼Œè€Œæ¯å€‹ Object å„²å­˜åœ¨ Bucket æ¯ Object çš„å¤§å°å¯ä»¥å¾ 0 byptes to 5 TBï¼Œä½† Bucket æ²’æœ‰å„²å­˜ä¸­é–“ä¸Šé™ æ¯å€‹ S3 éƒ½æœƒæœ‰ç¨ç«‹çš„ URLï¼Œé€™å€‹æ˜¯å…¨çƒå”¯ä¸€çš„ï¼Œæ‰€ä»¥ S3 å»ºç«‹å¾Œå°±ç„¡æ³•ä¿®æ”¹ Region ï¼Œä¹Ÿä¸å¯ä»¥ä¿®æ”¹åå­—ã€‚ å¯ä»¥ Host éœæ…‹é é¢ å¦‚æœè¦æŠŠ Object è®Šæˆå…¬é–‹çš„ï¼Œéœ€è¦å…ˆæŠŠ Bucket è¨­å®šç‚ºå…¬é–‹çš„ï¼Œé è¨­æ˜¯ç§æœ‰çš„ã€‚ AWS CloudTrail æœ‰å­˜ API LOG å–å¾— S3 è³‡è¨Šçš„æ–¹æ³• API Amazon Direct Connect Storage Gateway Kinesis Firehouse Transfer Acceleration Snow Family (SnowBall, SnowBall Edge, Snow Mobile) æ¯å€‹ Objects åŒ…å«åŸºæœ¬è³‡è¨Š Key (name of the object) Value Version ID Metadata Sub-resources Access Control Lists and Bucket Policies Torrent Data Consistency Read after Write consistency for PUTS of new Objects æ¯ç•¶å»ºç«‹æ–°çš„ç‰©ä»¶å¾Œï¼Œç›´æ¥å»è®€å–ç‰©ä»¶æœƒå­˜åœ¨ï¼Œä¸¦ä¸æœƒè®€å–ä¸å®Œæ•´çš„ç‰©ä»¶ Eventual Consistency for overwrite PUTS and DELETES å› ç‚º S3 ä¸€å€‹ç‰©ä»¶å­˜åœ¨å¤šå€‹åœ°æ–¹ï¼Œæ‰€ä»¥å°èˆŠæœ‰çš„ç‰©ä»¶åšæ›´æ–°æˆ–åˆªé™¤å¾Œç«‹é¦¬è®€å–çš„è³‡è¨Šæœ‰å¯èƒ½ä¸¦éæœ€æ–°çš„ã€‚ Strong Consistency for overwrite PUTS and DELETES ä¿è­‰åœ¨æ›´æ–°ç‰©ä»¶ä»¥å¾Œï¼Œæ‹‰åˆ°çš„è³‡æ–™æ˜¯æœ€æ–°çš„ Tiered S3 Standard : åŸºæœ¬ S3 Infrequently Access : æ¯” Standard ä¾¿å®œï¼Œä½†éœ€è¦é¡å¤–æ”¶ retrieval fee ï¼Œé©åˆå­˜æ”¾æ¯”è¼ƒä¸å¸¸ä½¿ç”¨çš„ç‰©ä»¶ S3 One Zone Infrequently Access : æ¯” S3 IA ä¾¿å®œï¼Œä½†åªå­˜åœ¨ä¸€å€‹ AZ ï¼Œå–®é»å£æ‰çš„é¢¨éšªæ¯”è¼ƒå¤§ S3 Intelligent : é€éç‰©ä»¶ access é »ç¹åº¦ï¼Œè‡ªå‹•å€åˆ† Standard or IA Glacier : æ¯å€‹ç‰©ä»¶åœ¨ Glacier å« Archive ï¼Œä¸€å€‹ Archive ç©ºé–“ä¸Šé™æ˜¯ 40TB Archive å­˜åœ¨ Vaults è£¡é¢ ä¸èƒ½ real time å–å¾—ç‰©ä»¶ ï¼Œéƒ½éœ€è¦å…ˆåšåˆå§‹åŒ– Retrieval çš„å‹•ä½œ åˆå§‹åŒ–åˆ°å®Œæˆå¯ä»¥ä¸‹è¼‰éœ€è¦æ™‚é–“ï¼Œç­‰å®Œæˆä»¥å¾Œå¯ä»¥é€é SNS é€šçŸ¥ ä¸‹è¼‰çš„ URL æ˜¯æœ‰æ™‚æ•ˆæ€§çš„ï¼Œå¦‚æœéæœŸå°±éœ€è¦å†é‡æ–°ç”³è«‹restore é è¨­æ‰€æœ‰çš„ç‰©ä»¶éƒ½æœƒè¢« AWS AES-256 åŠ å¯† ä¹Ÿæœ‰ vault access policy å’Œ lock policy type S3 Glacier Retrieval Options Expedited : æœ€å¿«ä½†æœ€è²´ï¼Œå¯ä»¥æ˜¯ On-Demand çš„ä¹Ÿå¯ä»¥æ˜¯ Provisioned (1-5 mins) Standard : åŸºæœ¬çš„ (3-5 hours) Bulk : æœ€æ…¢ï¼Œä½†æœ€ä¾¿å®œ (5 to 12 hours) S3 Glacier Deep Archive Retrieval Options Standard : åŸºæœ¬çš„ (12 hours) Bulk : æœ€æ…¢ï¼Œä½†æœ€ä¾¿å®œ (48 hours) S3 Standard S3 Intelligent S3 Standard IA S3 one zone IA S3 Glacier S3 Glacier Deep Archive Durability 99.99999999999 (11\u0026rsquo;s 9) 99. (11\u0026rsquo;s 9) 99. (11\u0026rsquo;s 9) 99. (11\u0026rsquo;s 9) 99. (11\u0026rsquo;s 9) 99. (11\u0026rsquo;s 9) Availability 99.99% 99.9% 99.9% 99.5% 99.99% 99.99% SLA 99.9% 99% 99% 99% 99.9% 99.9% AZ \u0026gt;= 3 \u0026gt;= 3 \u0026gt;= 3 =1 \u0026gt;= 3 \u0026gt;= 3 æœ€å° Object Sizeæ”¶è²»å–®ä½ (å°æ–¼é€™å–®ä½ä»¥é€™å–®ä½æ”¶éŒ¢ï¼‰ N/A N/A 128KB 128KB 40KB 40KB æœ€å°æ”¶è²»å­˜å–æ™‚é–“ (å­˜å–æ™‚é–“å°æ–¼é€™å–®ä½ä»¥é€™å–®ä½æ”¶éŒ¢) N/A 30 days 30 days 30 days 90 days 180 days Retrieval fee N/A N/A per GB per GB per GB per GB åŠŸèƒ½ Lifecycle Management å¯ä»¥è¨­å®šç¾åœ¨ç‰ˆæœ¬æˆ–éå»ç‰ˆæœ¬çš„Object N å¤©ä»¥å¾Œç§»å‹•åˆ°ä¸åŒçš„ Tiered å¯ä»¥è¨­å®šæœ€æ–°çš„ç‰ˆæœ¬åªä¿ç•™å¤šä¹…æˆ–å¤šä¹…å¾Œæ°¸ä¹…åˆªé™¤ åˆªé™¤è¶…æ™‚æœªå®Œæˆçš„ Multi-part ä¸Šå‚³ å¯ä»¥æ ¹æ“šä¸åŒçš„ prefix or tag è¨­å®š Versioning Bucket Level åŠŸèƒ½ ç•¶ç‰©ä»¶è¢«åˆªé™¤æ™‚ï¼Œæœƒæœ‰ delete marker ï¼Œå¦‚æœæˆ‘å€‘å°‡ delete marker åˆªé™¤ï¼Œç‰©ä»¶åˆæœƒå›ä¾† ä¸å¯ä»¥é—œé–‰(disable) åªèƒ½æš«åœ (suspend) ç‰©ä»¶å¤§å°è¨ˆç®—æ˜¯ å…¨éƒ¨ Versioning çš„ç¸½å’Œ æ–°ç‰©ä»¶éƒ½æœƒæœ‰ Version Id ï¼Œä½†å¦‚æœæ˜¯åœ¨é–‹å•Ÿ Versioning åŠŸèƒ½ä¹‹å‰å°±ä¸Šå‚³çš„ç‰©ä»¶æœƒæ˜¯ null Encryption Server Side Encryption 3 type SSE-AES : AWS ç®¡ç†çš„ Key - header \u0026ldquo;x-amz-server-side-encrpytion\u0026rdquo; : \u0026ldquo;AES256\u0026rdquo; SSE-KMS : é€é KMS Key - header \u0026ldquo;x-amz-server-side-encrpytion\u0026rdquo; : \u0026ldquo;aws:kms\u0026rdquo; SSE-C : è‡ªå·±æä¾›çš„ Keyï¼ŒS3 ä¸æœƒå­˜å–é€™å€‹ Key ï¼Œé€é request Header å°‡ Key æä¾›çµ¦ S3 åŠ è§£å¯† å¯ä»¥åœ¨ Bucket Level é–‹å•Ÿ Default Encryption æœ‰ SSE-AES \u0026amp; SSE-KMS å¯ä»¥é¸æ“‡ å¯ä»¥é€é Bucket Policy æ ¹æ“š header å¼·åˆ¶è¦ Encryption Client Side Encryption Transfer Acceleration é€é CloudFront Edge åŠ é€Ÿä¸Šå‚³é€Ÿåº¦ï¼Œæœƒæœ‰ä¸åŒçš„ endpoint Ex xxx.s3-accerate.amazonaws.com Cross Region Replication (CRR) or Same Region Replication (SRR) è‡ªå‹•å‚™ä»½åˆ°ä¸åŒçš„ Region (ä¸éœ€è¦åŒ Account) ï¼Œä½†é–‹å•ŸåŠŸèƒ½å‰å·²å­˜åœ¨çš„ç‰©ä»¶æ˜¯ä¸æœƒå‚™ä»½çš„ã€‚ éœ€è¦é–‹å•Ÿ Versioning çš„åŠŸèƒ½ å¦‚æœæ˜¯åŠ å¯†ç‰©ä»¶ï¼Œå‚™ä»½åˆ°çš„ Bucket ä¹Ÿéœ€è¦æœ‰åŠ å¯† Key çš„æ¬Šé™ã€‚ å¦‚æœè¦å‚™ä»½ delete markï¼Œéœ€è¦é¡å¤–è¨­å®š åˆªé™¤ Version ID ä¸æœƒå‚™ä»½å»é¿å…é­åˆ°æƒ¡æ„ç—…æ¯’æ”»æ“Š å¦‚æœ Bucket1 å‚™ä»½åˆ° Bucket2, è€Œ Bucket2 å‚™ä»½åˆ° Bucket3, Bucket1 çš„å‚™ä»½ä¸æœƒåˆ° Bcuket3 Pre-Signed URL åªèƒ½é€é CLI æˆ– SDK ç”¢ç”Ÿï¼Œæä¾›çŸ­æš«æœ‰æ•ˆçš„ URL URL æ“æœ‰çš„æ¬Šé™ç¹¼æ‰¿ç”¢ç”Ÿ URL çš„äºº é è¨­Timeout ä¸€å°æ™‚ 1aws s3 presign s3:://mybucket/myobject --expires-in 300 (sec) MFA for Delete åˆªé™¤ç‰©ä»¶éœ€è¦ MFA é©—è­‰ éœ€è¦æ‰“é–‹ Versioning çš„åŠŸèƒ½ åªæœ‰ Root Account å¯ä»¥æ‰“é–‹æˆ–é—œé–‰é€™åŠŸèƒ½ ï¼Œåªèƒ½é€é CLI or SDK è¨­å®šï¼Œæ²’è¾¦æ³•é€é Console Object Lock ä¸»è¦é”åˆ° WORM (write object once, read many) æœ‰å…©ç¨®æ¨¡å¼ Government model : åªæœ‰ç‰¹æ®Šæ¬Šé™çš„äººï¼Œæ‰å¯ä»¥ä¿®æ”¹ç‰©ä»¶ Compliance model : åœ¨ç‰¹å®šçš„æ™‚é–“å…§ï¼Œä»»ä½•äººéƒ½ç„¡æ³•ä¿®æ”¹ç‰©ä»¶ Glacier ä¹Ÿæœ‰ Glacier Vault Lock Bucket Policies å¯ä»¥çµ¦äºˆå…¶ä»– AWS Account æ¬Šé™ 1{ 2 \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, 3 \u0026#34;Statement\u0026#34;: [ 4 { 5 \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, 6 \u0026#34;Principal\u0026#34;: { 7 \u0026#34;AWS\u0026#34;: [\u0026#34;arn:aws:iam::111122223333:user/Alice\u0026#34;, 8 \u0026#34;arn:aws:iam::111122223333:root\u0026#34;] 9 }, 10 \u0026#34;Action\u0026#34;: \u0026#34;s3:*\u0026#34;, 11 \u0026#34;Resource\u0026#34;: [\u0026#34;arn:aws:s3:::my_bucket\u0026#34;, 12 \u0026#34;arn:aws:s3:::my_bucket/*\u0026#34;] 13 } 14 ] 15} ACL 1\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; 2\u0026lt;AccessControlPolicy xmlns=\u0026#34;http://s3.amazonaws.com/doc/2006-03-01/\u0026#34;\u0026gt; 3 \u0026lt;Owner\u0026gt; 4 \u0026lt;ID\u0026gt;Owner-canonical-user-ID\u0026lt;/ID\u0026gt; 5 \u0026lt;DisplayName\u0026gt;display-name\u0026lt;/DisplayName\u0026gt; 6 \u0026lt;/Owner\u0026gt; 7 \u0026lt;AccessControlList\u0026gt; 8 \u0026lt;Grant\u0026gt; 9 \u0026lt;Grantee xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:type=\u0026#34;CanonicalUser\u0026#34;\u0026gt; 10 \u0026lt;ID\u0026gt;Owner-canonical-user-ID\u0026lt;/ID\u0026gt; 11 \u0026lt;DisplayName\u0026gt;display-name\u0026lt;/DisplayName\u0026gt; 12 \u0026lt;/Grantee\u0026gt; 13 \u0026lt;Permission\u0026gt;FULL_CONTROL\u0026lt;/Permission\u0026gt; 14 \u0026lt;/Grant\u0026gt; 15 16 \u0026lt;Grant\u0026gt; 17 \u0026lt;Grantee xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:type=\u0026#34;CanonicalUser\u0026#34;\u0026gt; 18 \u0026lt;ID\u0026gt;user1-canonical-user-ID\u0026lt;/ID\u0026gt; 19 \u0026lt;DisplayName\u0026gt;display-name\u0026lt;/DisplayName\u0026gt; 20 \u0026lt;/Grantee\u0026gt; 21 \u0026lt;Permission\u0026gt;WRITE\u0026lt;/Permission\u0026gt; 22 \u0026lt;/Grant\u0026gt; 23 24 \u0026lt;Grant\u0026gt; 25 \u0026lt;Grantee xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:type=\u0026#34;CanonicalUser\u0026#34;\u0026gt; 26 \u0026lt;ID\u0026gt;user2-canonical-user-ID\u0026lt;/ID\u0026gt; 27 \u0026lt;DisplayName\u0026gt;display-name\u0026lt;/DisplayName\u0026gt; 28 \u0026lt;/Grantee\u0026gt; 29 \u0026lt;Permission\u0026gt;READ\u0026lt;/Permission\u0026gt; 30 \u0026lt;/Grant\u0026gt; 31 32 \u0026lt;Grant\u0026gt; 33 \u0026lt;Grantee xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:type=\u0026#34;Group\u0026#34;\u0026gt; 34 \u0026lt;URI\u0026gt;http://acs.amazonaws.com/groups/global/AllUsers\u0026lt;/URI\u0026gt; 35 \u0026lt;/Grantee\u0026gt; 36 \u0026lt;Permission\u0026gt;READ\u0026lt;/Permission\u0026gt; 37 \u0026lt;/Grant\u0026gt; 38 \u0026lt;Grant\u0026gt; 39 \u0026lt;Grantee xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:type=\u0026#34;Group\u0026#34;\u0026gt; 40 \u0026lt;URI\u0026gt;http://acs.amazonaws.com/groups/s3/LogDelivery\u0026lt;/URI\u0026gt; 41 \u0026lt;/Grantee\u0026gt; 42 \u0026lt;Permission\u0026gt;WRITE\u0026lt;/Permission\u0026gt; 43 \u0026lt;/Grant\u0026gt; 44 45 \u0026lt;/AccessControlList\u0026gt; 46\u0026lt;/AccessControlPolicy\u0026gt; Access log å¯ä»¥å­˜æ”¾ Access Log åˆ°å¦ä¸€å€‹ S3 Bucket å¦‚æœè¦ç›£æ§ BucketA ï¼Œä¸è¦å°‡ BucketA çš„ access log å¯«åˆ° BucketA è‡ªå·±ï¼Œæœƒé€ æˆç„¡é™å¾ªç’° S3 CORS (CROS Origin Resource Sharing) Origin åŒ…å« protocol , domain, port EX: https://www.google.com =\u0026gt; protocol: https, domain: www.google.com, port 443 å¦‚æœæ²’æœ‰ CORS Header ï¼Œ Browser æœƒé˜»æ“‹å…¶ä»–ç¶²ç«™ä¾† request æˆ‘å€‘ç¶²ç«™ Origin Header : Access-Control-Allow-Origin : origin Method Header : Access-Control-Allow-Methods : http_method (GET, PUT) ç¯„ä¾‹ å¦‚æœ S3 BucketA è£¡é¢çš„é é¢è¦æ‹‰ S3 BucketB çš„åœ–æ¡ˆï¼Œé‚£ BucketB éœ€è¦æ‰“é–‹ CORS Allow BucketA ä¾†è®€å–ã€‚ 1[ 2 { 3 \u0026#34;AllowedOrigins\u0026#34;: [\u0026#34; https://www.example.com \u0026#34;], 4 \u0026#34;AllowedMethods\u0026#34;: [\u0026#34;GET\u0026#34;], 5 \u0026#34;MaxAgeSeconds\u0026#34;: 3000, 6 \u0026#34;ExposeHeaders\u0026#34;: [] 7 \u0026#34;AllowedHeaders\u0026#34;: [Authorization\u0026#34;] 8 } 9] Inventory å¯ä»¥ç”¢ç‰¹å®šçš„ Bucket æ¯æ—¥æˆ–æ¯é€±çš„ Metadata å ±è¡¨å­˜æ”¾åˆ°å¦ä¸€å€‹åŒ Region çš„ Bucket å ±è¡¨æ ¼å¼å¯ä»¥æ˜¯ CVS, ORC æˆ– Apache Parquet å¯ä»¥ç”¨ä¾† Auditing åŠ å¯†ç‹€æ…‹ã€çµ±è¨ˆ Object æ•¸é‡ç­‰ç­‰ S3 \u0026 Glacier Select å¦‚æœ Object æ˜¯ Json æˆ– CVS çš„æ ¼å¼ï¼Œå¯ä»¥é€é SQL çš„æŒ‡ä»¤æ–¹å¼å–å‡ºè³‡æ–™ å¯ä»¥æ¸›å°‘æµé‡çš„å‚³è¼¸ï¼Œå› ç‚ºå·²ç¶“åœ¨server side éæ¿¾ï¼Œä¸¦æ¸›å°‘ Client Side çš„ CPU (å¦‚æœClient è¦è‡ªå·±éæ¿¾ï¼‰ S3 Analytics åˆ†æå¤šå°‘ç‰©ä»¶å¾ Standard è½‰åˆ° Standard_IA Report æ¯å¤©æ›´æ–°ï¼Œç¬¬ä¸€é–‹å§‹éœ€è¦ 24 - 48 å°æ™‚åˆå§‹åŒ– Event Notification ç•¶S3 æ›´æ–°ç‰©ä»¶æˆ–è€…æ˜¯æ–°å¢ç‰©ä»¶ç­‰ç­‰äº‹ä»¶ï¼Œå¯ä»¥ç™¼å‡º Event çµ¦ Lambda, SNS, or SQS. S3 Access Endpoint æ¯å€‹ Access Endpoint éƒ½æœ‰ç¨ç«‹çš„ DNS å’Œ Policy å»é™åˆ¶èª°å¯ä»¥access point policy é€™å€‹ S3 access point æµé‡å¯ä»¥å¾ç¶²è·¯ æˆ–å¾ VPC S3 Batch Operation ä¸€å€‹ request å¯ä»¥åšå¤šå€‹æŒ‡ä»¤ å»ºç«‹ä¸€å€‹ Job ï¼Œè£¡é‚ŠåŒ…å«è¦è®Šå‹•çš„ç‰©ä»¶å¾ (Inventory Report) æˆ–ç‰¹å®šæ ¼å¼çš„ CSVï¼Œç„¶å¾ŒæŒ‡å®šç‰¹å®šçš„ Operation è¤‡è£½åˆ°å…¶ä»–å®šæ–¹ Trigger Lambda Function æ› Tag æˆ– åˆªé™¤ Tag æ› ACL å° Glacier ç‰©ä»¶ç”³è«‹æ¢å¾© åŠ  æˆ–ä¿®æ”¹ Lock Performance S3 æ¯å¤šä¸€å€‹ prefix 3500 PUT/COPY/POST/DELETE qps 5,500 GET/HEAD qps Ex: https://s3.amazonaws.com/mybucket/prefix1/prefix2/myObject1 https://s3.amazonaws.com/mybucket/prefix1/prefix3/myObject2 https://s3.amazonaws.com/mybucket/prefix3/myObject3 https://s3.amazonaws.com/mybucket/prefix4/myObject4 å¦‚æœ request å¹³å‡ç•™åˆ°ä¸åŒ prefix =\u0026gt; é‚£æœƒæœ‰ 3500 * 4 çš„PUT/COPY/POST/DELETE qps å¦‚æœ S3 çš„ç‰©ä»¶æœ‰é€é KMS åŠ å¯†ï¼Œqps ä¸Šé™æœ‰å¯èƒ½å—åˆ° KMS å½±éŸ¿ã€‚ KMS æœ‰æ¯å€‹region æœ‰ quota qpsï¼Œå¯ä»¥ç”³è«‹æé«˜ Multipart Upload å»ºè­°è¶…é 100 MB å°±è¦ä½¿ç”¨ Multipart Upload ï¼Œå¦‚æœç‰©ä»¶ Size è¶…é 5GB ä¸€å®šè¦ä½¿ç”¨ Byte Range Fetch å¯ä»¥åŒæ™‚æ‹‰ä¸åŒ Range çš„ Object ä¸‹ä¾†ï¼Œæœ€å¾Œçµ„æˆä¸€å€‹å®Œæˆçš„ Object æ•´åˆå…¶ä»– AWS æœå‹™ DataSync : å°‡æ©Ÿå™¨ä¸Šå¤§é‡ç‰©ä»¶ä¸Šå‚³åˆ° S3 ï¼Œä¸¦ä¸”å¯ä»¥é€±æœŸæ€§çš„ä¸Šå‚³ï¼Œéœ€å®‰è£ data sync agent Athena : è·Ÿ S3 Select ä¸€æ¨£ä¹Ÿæ˜¯ä½¿ç”¨ SQL çš„æ–¹å¼å»æ‹‰å– S3 ç‰©ä»¶ä½†æ˜¯å¯ä»¥åŒæ™‚å°å¤§é‡çš„ç‰©ä»¶ ï¼ŒS3 Select ä¸€æ¬¡åªå°å–®å€‹ç‰©ä»¶ã€‚ Athena æ˜¯ Servelessï¼Œå…ˆå°‡è³‡æ–™è®€é€² DBï¼Œç„¶å¾Œå†å¾ DB Query è³‡æ–™å‡ºä¾† Macie: ä½¿ç”¨ Machine Learning å»ç›£æ¸¬ï¼Œæ˜¯å¦æœ‰å­˜å–æ•æ„Ÿæ€§è³‡æ–™ å¦‚ å€‹è³‡ PII, ä¿¡ç”¨å¡ç­‰ ","date":"February 2, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/s3-certification-note/","smallImg":"","tags":[{"title":"S3","url":"/tags/s3/"}],"timestamp":1675296000,"title":"S3 Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"Basic Resource Type : Config æ˜¯ Region Level æœå‹™ï¼Œé è¨­å­˜å–ç•¶ä¸‹ Region ä¸‹ Config æ”¯æ´æœå‹™çš„å…¨éƒ¨è¨­å®šï¼Œå¯ä»¥æŒ‡å®šç‰¹å®šæœå‹™ å¯ä»¥å­˜å– Global æœå‹™çš„è¨­å®š æ‰€æœ‰ Config ç´€éŒ„å­˜å–åˆ° S3 å–®ä¸€ Resource å¯ä»¥çœ‹ Configuration Timeline detailed åŒ…å« å’Œå…¶ä»–æœå‹™çš„é—œä¿‚ æ”¹å‹•çš„åœ°æ–¹ CloudTail æ•´åˆ Event Rules æ¯ä¸€å€‹ Rule æ¯å€‹æœˆæœ‰å›ºå®šè²»ç”¨ ex 1 USD/Month AWS å·²ç¶“æœ‰æä¾›è¨±å¤šå¸¸è¦‹çš„ Rule ï¼Œ ä¹Ÿå¯ä»¥å®¢è£½åŒ–è‡ªå·±çš„ Rule - rule æ˜¯é€é Lambda åŸ·è¡Œå»æª¢æŸ¥ Trigger Type Configuration Change : æ¯æ¬¡æ›´å‹•éƒ½æª¢æŸ¥ Periodic: é€±æœŸæ€§æª¢æŸ¥ æª¢æŸ¥ Scope Resource Scope : ç‰¹å®š Resource ä¾‹å¦‚ EC2 Tags: ç‰¹å®š Tag All Changes Compliance Status: Noncompliant or compliant å–®ä¸€ Resource å¯ä»¥çœ‹ Compliance Timeline - å¯ä»¥å¾ Timeline çœ‹åˆ° Rule çš„ Status æ”¹è®Š - å’Œå…¶ä»–æœå‹™çš„é—œä¿‚ - æ”¹å‹•çš„åœ°æ–¹ SNS AWS Config æœ‰ Streaming çš„åŠŸèƒ½ï¼Œå¯ä»¥å°‡ Event é€šçŸ¥åˆ° SNS æœƒé€šçŸ¥çš„äº‹ä»¶åŒ…å« Resource çš„ Config è®Šå‹• æ­·å²ç´€éŒ„ æˆ– Snapshot ä¸Šå‚³åˆ° S3 Compliance çš„çµæœ Compliance Rule é–‹å§‹å¯©æ ¸ AWS Config è·Ÿ S3 äº’å‹•å¤±æ•—ï¼Œä¾‹å¦‚ä¸Šå‚³ Snapshot CloudWatch Event å¯ä»¥åµæ¸¬åˆ° Event AWS API call via CloudTail Config Configuration Item Change Config Rules Compliance Change Config Rules Re-evaluation Status Config Configuration Snapshot Delivery Status Config Configuration History Delivery Status SSM Config æ•´åˆ System Manager Automation å¯ä»¥å˜—è©¦è‡ªå‹•ä¿®å¾© Noncompliant è³‡æº Advance Query Example å¯ä»¥ä½¿ç”¨ SQL Query 1SELECT 2 resourceId, 3 resourceType, 4 configuration.instanceType, 5 configuration.placement.tenancy, 6 configuration.imageId, 7 availabilityZone 8WHERE 9 resourceType = \u0026#39;AWS::EC2::Instance\u0026#39; 10 AND configuration.imageId = \u0026#39;ami-12345\u0026#39; Aggregator View å¯ä»¥æ•´åˆå¤šå€‹ AWS Account æˆ–å¤šå€‹ Region ä¸‹çš„ AWS Config è³‡è¨Š éœ€è¦ç”±ä¸€å€‹ Main Config å»ºç«‹ Viewï¼Œå…¶ä»– Config æˆæ¬Šçµ¦ Main Config å°±ç®—æ˜¯åŒä¸€å€‹ Account ä½†ä¸åŒ Regionã€‚ ä¾‹å¦‚è¦å¤šå€‹Region ï¼ŒMain Config åœ¨ JP å»ºç«‹ Aggregator ä¸¦æ•´åˆ US Configï¼Œåœ¨ US Config ä¸‹éœ€è¦æˆæ¬Šçµ¦ JP Config S3 å…è¨± Config æ¬Šé™çš„ Bucket Policy 1{ 2 \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, 3 \u0026#34;Statement\u0026#34;: [ 4 { 5 \u0026#34;Sid\u0026#34;: \u0026#34;AWSConfigBucketPermissionsCheck\u0026#34;, 6 \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, 7 \u0026#34;Principal\u0026#34;: { 8 \u0026#34;Service\u0026#34;: [ 9 \u0026#34;config.amazonaws.com\u0026#34; 10 ] 11 }, 12 \u0026#34;Action\u0026#34;: \u0026#34;s3:GetBucketAcl\u0026#34;, 13 \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::targetBucketName\u0026#34; 14 }, 15 { 16 \u0026#34;Sid\u0026#34;: \u0026#34;AWSConfigBucketExistenceCheck\u0026#34;, 17 \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, 18 \u0026#34;Principal\u0026#34;: { 19 \u0026#34;Service\u0026#34;: [ 20 \u0026#34;config.amazonaws.com\u0026#34; 21 ] 22 }, 23 \u0026#34;Action\u0026#34;: \u0026#34;s3:ListBucket\u0026#34;, 24 \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::targetBucketName\u0026#34; 25 }, 26 { 27 \u0026#34;Sid\u0026#34;: \u0026#34;AWSConfigBucketDelivery\u0026#34;, 28 \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, 29 \u0026#34;Principal\u0026#34;: { 30 \u0026#34;Service\u0026#34;: [ 31 \u0026#34;config.amazonaws.com\u0026#34; 32 ] 33 }, 34 \u0026#34;Action\u0026#34;: \u0026#34;s3:PutObject\u0026#34;, 35 \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::targetBucketName/[optional] prefix/AWSLogs/sourceAccountID-WithoutHyphens/Config/*\u0026#34;, 36 \u0026#34;Condition\u0026#34;: { 37 \u0026#34;StringEquals\u0026#34;: { 38 \u0026#34;s3:x-amz-acl\u0026#34;: \u0026#34;bucket-owner-full-control\u0026#34; 39 } 40 } 41 } 42 ] 43} ","date":"January 20, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/config-certification-note/","smallImg":"","tags":[{"title":"Config","url":"/tags/config/"}],"timestamp":1674172800,"title":"Config Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":" å¯¦è¸ Infrastructure as Codeï¼Œä¸éœ€è¦æ‰‹å‹•å»ºç«‹è³‡æºï¼Œè€Œä¸”å¯ä»¥å° Source Code åš Version Controlã€‚ CloudFormation æœ¬èº«æ˜¯å…è²»çš„ï¼Œåªéœ€è¦ä»˜å»ºç«‹çš„è³‡æºè²»ç”¨å³å¯ã€‚ å¯ä»¥é€é CloudFormation Designer ç”¢ç”ŸåŸºæœ¬çš„æ¶æ§‹åœ– Template å¿…é ˆè¦ä¸Šå‚³åˆ° S3 ï¼ŒTemplate æ ¼å¼å¯ä»¥æ˜¯ Yaml or Json Stack æ˜¯ç”±ä¸€å€‹ Template ç”¢ç”Ÿçš„åŒ…å«å¤šå€‹è³‡æºï¼ŒStack åå­—ç•¶ä½œè­˜åˆ¥ã€‚ CloudFormation Template Section Parameters : ç•¶è¦å»ºç«‹ Stack ï¼Œå¯ä»¥ç”±å¤–é¢è¨­å®šå‹•æ…‹åƒæ•¸ å¯è¨­å®šè³‡è¨Š Type: String, Number, CommaDelimitedList, List, AWS Parameter Description Constraints ConstraintDescription Min/MaxLength Defaults AllowedValues (array) AllowedPattern (regular expression) NoEcho(Boolean) å¯ä»¥å¾ SSM å–å¾—è³‡æ–™ 1VpcId: !Ref MyVPC 2 3Parameters: 4 InstanceType: 5 Type: \u0026#39;AWS::SSM::Paramter::Value\u0026lt;String\u0026gt;\u0026#39; 6 Default: /EC2/InstanceType 7#there is public SSM parameters by AWS Conditions : å»ºç«‹è³‡æºçš„æ¢ä»¶ intrinsic function : Fn::And, Fn::Equals, Fn::If, Fn::Not, Fn::Or 1Conditions: 2\tCreateProdResources: !Equals [!Ref EnvType, prod] 3 4Resource: 5 MountPoint: 6 Type: \u0026#34;AWS::EC2::VolumeAttachment\u0026#34; 7 Condition: CreateProdResources Resource: è¦å»ºç«‹çš„ AWS è³‡æºï¼Œæ­¤ç‚ºå¿…è¦æ¬„ä½ æ ¼å¼ : AWS::aws-product-name::data-type-name Mapping: å»ºç«‹ Key Value Mapping 1Mapping: 2 RegionMap: 3 user-east-1: 4 \u0026#34;32\u0026#34; : \u0026#34;ami-aaa\u0026#34; 5 \u0026#34;64\u0026#34; : \u0026#34;ami-bbb\u0026#34; 6 user-east-2: 7 \u0026#34;32\u0026#34; : \u0026#34;ami-ccc\u0026#34; 8 \u0026#34;64\u0026#34; : \u0026#34;ami-ddd\u0026#34; 9 10ImagesId: !FindInMap [RegionMap, !Ref \u0026#34;AWS:Region\u0026#34;, 32] Transforms: ä¸»è¦ç”¨æ–¼ Serve-less Application Model (SAM) ï¼Œå®£å‘Šé€™æ˜¯ SAM çš„æ ¼å¼ Output: å¯ä»¥å°‡ Stack å»ºç«‹çš„ Resource Output å‡ºä¾†ï¼Œæ‰€ä»¥å…¶ä»– Stack å¯ä»¥å»ºç«‹ reference å¦‚æœè¢«å…¶ä»– Stack reference ï¼Œé‚£å°±ä¸èƒ½ delete 1Outputs: 2 StackSSHSecurityGroup: 3 Description: The SSH Security Group for our Company 4 Vaule: !Ref MyCompanyWideSSHSecurityGroup 5 Export: 6 Name: SSHSecurityGroup 7 8Resource: 9 MySecureInstance: 10 Type: AWS::EC2::Instance 11 Properties: 12 AvailabilityZone: us-east-1a 13 ImageId: ami-a5c7edb2 14 InstanceType: t2.micro 15 SecurityGroup: 16 - !ImportValue SSHSecurityGroup Metadata: æä¾›é¡å¤–æœ‰é—œ Template è³‡è¨Š Intrinsic Functions Fn::Ref Parameters â‡’ è¿”å› parameter å°æ‡‰çš„å€¼ Resources â‡’ è¿”å›è³‡æºçš„ physical ID Fn:GetAtt 1Resource: 2 EC2Instance: 3 Type: \u0026#34;AWS::EC2::Instance\u0026#34; 4 Properties: 5 ImageId: ami-1234567 6 InstanceType: t2.micro 7 8NewVolume: 9 Type: \u0026#34;AWS::EC2::Volume\u0026#34; 10 Confition: CreateProdResources 11 Properties: 12 Size: 100 13 AvailabilityZone: 14 !GetAtt EC2Instance.AvailabilityZone Fn::Join 1\u0026#34;Fn::Join\u0026#34; : [ \u0026#34;,\u0026#34;, [ \u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34; ] ] =\u0026gt; \u0026#34;a,b,c\u0026#34; Fn::Sub 1Fn::Sub: 2 - String 3 - Var1Name: Var1Value 4 Var2Name: Var2Value 5 6Name: !Sub 7 - www.${Domain} 8 - { Domain: !Ref RootDomainName }\tFn::Split 1!Split [ \u0026#34;|\u0026#34; , \u0026#34;a|b|c\u0026#34; ] =\u0026gt; [\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;] Fn::Select 1!Select [ \u0026#34;1\u0026#34;, [ \u0026#34;apples\u0026#34;, \u0026#34;grapes\u0026#34;, \u0026#34;oranges\u0026#34;, \u0026#34;mangoes\u0026#34; ] ] Fn::Base64 å¯ä»¥ç”¨åœ¨ EC2 pass æ•´å€‹ script åœ¨ user data user data script log â‡’ /var/log/cloud-init-output.log 1Resource: 2 EC2Instance: 3 Type: \u0026#34;AWS::EC2::Instance\u0026#34; 4 Properties: 5 ImageId: ami-1234567 6 InstanceType: t2.micro 7 UserData: 8 Fn::Base64: | 9 yum update -y 10 yum install -y httpd 11 systemctl start httpd 12 systemctl enable httpd 13 echo \u0026#34;Hello World from user data\u0026#34; \u0026gt; /var/www/html/index.html cfn-init \u0026 cfn-signal \u0026 cfn-hup AWS::CloudFormation::Init ç›®çš„æ˜¯è®“ EC2 çš„è¨­å®šå¯è®€æ€§æ›´é«˜ï¼Œ éœ€è¦æ”¾åœ¨ metadata section init çš„ log æœƒå¯«åœ¨ /var/log/cfn-init.log cfn-init \u0026amp; cfn-signal æµç¨‹ CloudFormation å…ˆå»ºç«‹ EC2 Instance ï¼Œå¦‚æœæœ‰è¨­å®š WaitCondition é€™æ™‚ CloudFormation æœƒç­‰å¾… EC2 é€™é‚Šçš„ signal EC2 ä¸Šé¢åŸ·è¡Œ User Data æ™‚åŸ·è¡Œ cfn-initï¼Œé€™æ™‚ cfn-init æœƒå» CloudFormation æ‹‰ metadata çš„è¨­å®šå›ä¾†ä¸¦åŸ·è¡Œ cfn-signal ç”¨æ–¼åŸ·è¡Œå®Œ cfn-init å‘Šè¨´ CloudFormation æˆåŠŸèˆ‡å¦ æ²’æœ‰æ”¶åˆ° Signal æ€éº¼è¾¦ ç¢ºèª Script æ˜¯å¦æœ‰å®‰è£ å¯ä»¥disable rollbackï¼Œé€²æ©Ÿå™¨çœ‹ /var/log/cfn-init.log å’Œ /var/log/cloud-init-output.log ç”±æ–¼ Signal å¿…é ˆé€é Internet é€šçŸ¥ CloudFormation ï¼Œç¢ºèª EC2 å¯ä»¥ Access Internet. cfn-hup : æ˜¯ä¸€å€‹ daemon å»æª¢æŸ¥æ˜¯å¦æœ‰ metadata è¦æ›´æ–°ï¼Œ Default Interval æ˜¯ 15 åˆ†é˜ 1Resource: 2 EC2Instance: 3 Type: \u0026#34;AWS::EC2::Instance\u0026#34; 4 Properties: 5 ImageId: ami-1234567 6 InstanceType: t2.micro 7 UserData: 8 Fn::Base64: | 9 yum update -y aws-cfn-bootstrap 10 # Start cfn-init 11 /opt/aws/bin/cfn-init -s ${AWS::StackId} -r MyInstance --region ${AWS::Region} || error_exit \u0026#39;Failed to run cfn-init\u0026#39; 12 13 # start the cfn-hup daemon 14 /opt/aws/bin/cfn-hup || error_exit \u0026#34;Failed to start cfn_hup\u0026#34; 15 # Start cfn-signal to the wait condition 16 /opt/aws/bin/cfn-signal -e $? --stack ${AWS::StackId} --resource SampleWaitCondition --region ${AWS::Region} 17 18Metadata: 19 Comment: Install a simple Apache HTTP page 20 AWS:CloudFormation::Init: 21 config: 22 packages: 23 yum: 24 httpd: [] 25 files: 26 \u0026#34;/var/www/html/index.html\u0026#34;; 27 content: | 28 \u0026lt;h1\u0026gt;Hello World from Ec2 Instance\u0026lt;/h1\u0026gt; 29 mode: \u0026#39;000644\u0026#39; 30 \u0026#34;/etc/cfn/cfn-hup.conf\u0026#34;: 31 content: !Sub | 32 [main] 33 stack=${AWS::StackId} 34 region=${AWS::Region} 35 interval=2 36 mode: \u0026#34;000400\u0026#34; 37 owner: \u0026#34;root\u0026#34; 38 group: \u0026#34;root\u0026#34; 39 40 \u0026#34;/etc/cfn/hooks.d/cfn-auto-reloader.conf\u0026#34;: 41 content: !Sub | 42 [cfn-auto-reloader-hook] 43 triggers=post.update 44 path=Resources.WebServerHost.Metadata.AWS::CloudFormation::Init 45 action=/opt/aws/bin/cfn-init -v --stack ${AWS::StackName} --resource WebServerHost --region ${AWS::Region} 46 mode: \u0026#34;000400\u0026#34; 47 owner: \u0026#34;root\u0026#34; 48 group: \u0026#34;root\u0026#34; 49 commands: 50 hello: 51 command: \u0026#34;echo \u0026#39;hello world\u0026#39;\u0026#34; 52 services: 53 sysvinit: 54 httpd: 55 enabled: \u0026#39;true\u0026#39; 56 ensureRunning: \u0026#39;true\u0026#39; 57 58SampleWaitCondition: 59 CreationPolicy: 60 ResourceSignal: 61 Timeout: PT1M #ç­‰ä¸€åˆ†é˜ 62 Count:2 #è¦å…©å€‹æˆåŠŸçš„ Signal 63 Type: AWS::CoudFormation::WaitCondition CloudFormation Rollback Stack å»ºç«‹å¤±æ•—æ™‚ï¼ŒStack æ­£å¸¸ç‹€æ…‹æœƒæ˜¯ ROLLBACK_COMPLETE ï¼Œä¸¦ä¸”åªèƒ½åˆªé™¤ä¸èƒ½æ›´æ–° é è¨­ : æ‰€æœ‰çš„è³‡æºæœƒ rollback ï¼Œä½† Stack é‚„åœ¨ï¼Œå¯ä»¥çœ‹åŸå›  OnFailure=Rollback å¯ä»¥ Disable rollbackï¼Œæ‰€ä»¥å¯ä»¥åš troubleshooting OnFailure=DO_NOTHING å¯ä»¥åˆªé™¤æ•´å€‹ Stack OnFailure=Delete Stack æ›´æ–°å¤±æ•— Stack å¦‚æœ rollback æˆåŠŸ Stack ç‹€æ…‹æœƒæ˜¯ UPDATE_ROLLBACK_COMPLETE ï¼Œå¯ä»¥å˜—è©¦æ›´æ–°æˆ–åˆªé™¤ Stack å¦‚æœ rollback å¤±æ•— Stack ç‹€æ…‹æœƒæ˜¯ UPDATE_ROLLBACK_FAILï¼Œå¯ä»¥å˜—è©¦ä¿®å¾©å•é¡Œå†ç¹¼çºŒ rollback Nested Stacks å¯ä»¥é‡è¤‡ä½¿ç”¨å…¶ä»– Stack ç•¶ä½œæ•´å€‹ Stack ä¸€éƒ¨åˆ† 1Resources: 2 myStack: 3 Type: AWS::CloudFormation::Stack 4 Properties: 5 TemplateURL: 6 xxx.com/... 7 Parameters: 8 key: value ChangeSet å¯ä»¥åœ¨ CloudFormation æ›´æ–°æ–°çš„Template ä¹‹å‰å…ˆè©•ä¼°æœ‰ä»€éº¼è³‡æºæœƒè®Šå‹•ï¼Œä¸¦ç¢ºèªæ˜¯å¦è¦ç¹¼çºŒåŸ·è¡Œï¼Œä½†åŸ·è¡Œäº†ä¸¦ä¸ä»£è¡¨ä¸€å®šæœƒæˆåŠŸã€‚ Drift CloudFormation å»ºç«‹çš„è³‡æºæ˜¯æ²’æœ‰é é˜²äººç‚ºæ‰‹å‹•æ›´æ–°çš„ Drift æ˜¯ç”¨ä¾†æª¢æŸ¥å“ªäº›è³‡æºè·Ÿç•¶åˆ CloudFormation å»ºç«‹çš„ä¸ä¸€æ¨£ï¼Œä¸¦ä¸”å‘Šè¨´ä½ å“ªäº›ä¸åŒ \"ä¸æ˜¯æ‰€æœ‰çš„è³‡æº Drift éƒ½æœ‰æ”¯æ´ã€‚\" Deletion Policy ç”¨ä¾†æ§åˆ¶ç•¶ Stack è¢«åˆªé™¤æ™‚ç‰¹å®šè³‡æºè¦åšçš„äº‹æƒ… ä¸‰ç¨® Policy DeletionPolicy=Retain: é é˜²è³‡æºè¢«åˆªé™¤ DeletionPolicy=Snapshot: å…ˆå°‡è³‡æ–™å‚™ä»½å†åˆªé™¤ Support: EBS Volume, ElasticCache, Cluster, ElasticCache, ReplicationGroup, RDS DBInstance, RDS DBCluster, Redshift Cluster DeletionPolicy=Delete åˆªé™¤è³‡æºï¼Œä½†ä¸¦ééƒ½æœƒåˆªé™¤æˆåŠŸï¼Œä¾‹å¦‚ S3 Bucket è£¡é¢æœ‰ Object å°±æœƒåˆªé™¤å¤±æ•— RDS é è¨­ Snapshot , å…¶ä»–é è¨­ Delete Termination Protection ç”¨æ–¼ä¿è­· Stack ä¸æœƒè¢«ä¸å°å¿ƒåˆªé™¤ Creation Policy \u0026 Update Policy åƒ Auto Scaling Group å¯ä»¥éœ€è¦å•Ÿå¤šå€‹ Ec2 Instanceï¼Œé€™æ™‚ Creation Policy å°±å¯ä»¥è¨­å®šåœ¨ Auto Scaling Groupï¼Œè¦æ”¶æ™‚é–“å…§æ”¶å¤šå°‘å€‹ Signal æ‰ç®—æˆåŠŸ UpdatePolicy å¦‚æœç›´æ¥æ›´æ–° template ä¸­çš„ user dataï¼ŒAuto Scaling Group è£¡é¢çš„ EC2 é‚„æœƒæ˜¯èˆŠçš„ user dataã€‚ UpdatePolicy Attribute å¯ä»¥ä½¿ç”¨åœ¨ä¸‰ç¨® AWS Resource auto scaling group æœ‰ä¸‰ç¨® Policy\nAutoScalingReplacingUpdate: WillReplaceå¯ä»¥ç”¨ä¾†æ±ºå®šå»ºç«‹å…¨æ–°çš„ Auto Scaling Group å–ä»£èˆŠï¼Œé‚„æ˜¯å–®ç´”å»ºç«‹æ–°çš„ Instance ä¾†å–ä»£ç¾æœ‰çš„ Instance ä½† Auto Scaling Group é‚„æ˜¯èˆŠçš„ã€‚ AutoScalingRollingUpdate: åœ¨ Auto Scaling Groupï¼Œå°‡ç¾æœ‰çš„ EC2 Instance åœæ‰ï¼Œä¸¦å»ºç«‹æ–°çš„å–ä»£ AutoScalingScheduledAction 1Resources: 2 AutoScalingGroup: 3 Type: AWS::AutoScaling::AutoScalingGroup 4 Properties: 5 AvailabilityZones: 6 Fn::GetsAZs: 7 Ref: \u0026#34;AWS::Region\u0026#34; 8 LaunchConfigurationName: 9 Ref: LaunchConfig 10 Desiredcapacity: \u0026#39;3\u0026#39;\u0026#39; 11 MinSize: \u0026#39;1\u0026#39; 12 MaxSize: \u0026#39;4\u0026#39; 13 CreationPolicy: 14 ResourceSignal: 15 Count: \u0026#39;3\u0026#39; 16 Timeout: PT15M 17 UpdatePolicy: 18 ## Example1 start 19 AutoScalingRollingUpdate: 20 MinInstancesInService: \u0026#39;1\u0026#39; 21 MaxBatchSize: \u0026#39;2\u0026#39; 22 #how much time to wait for the signal 23 PauseTime: PT1M 24 WaitOnResourceSignals: \u0026#39;true\u0026#39; 25 ## é é˜²CloudFormation æœ‰æ’ç¨‹å» update min,max or desired size 26 AutoScalingScheduledAction: 27 IgnoreUnmodifiedGroupSizeProperties: \u0026#39;true 28 ## Example1 end 29 ## Example1 and Example2 ä¸æœƒåŒæ™‚å­˜åœ¨ 30 31 ## Example 2 start 32 ## æœƒå»ºç«‹å…¨æ–°çš„ Auto Scaling Group å–ä»£èˆŠå¾— 33 AutoScalingReplacingUpdate: 34 WillReplace: \u0026#39;true\u0026#39; 35 ## Example 2 end 36 37LaunchConfig: 38 Type: AWS::AutoScaling::LaunchConfiguration 39 Properties: 40 ImageId: ami-aaa 41 InstanceType: t2.micro 42 UserData: 43 Fn::Base64: | 44 yum update -y 45 yum install -y httpd 46 systemctl start httpd 47 systemctl enable httpd 48 echo \u0026#34;Hello World from user data\u0026#34; \u0026gt; /var/www/html/index.html lambda alias\nCodeDeployLambdaAliasUpdate 1UpdatePolicy: 2 CodeDeployLambdaAliasUpdate: 3 AfterAllowTrafficHook: String 4 ApplicationName: String 5 BeforeAllowTrafficHook: String 6 DeploymentGroupName: String elastic cache replication group\nUseOnlineResharding 1UpdatePolicy: 2EnableVersionUpgrade: Boolean Depends ON æ§åˆ¶è³‡æºå»ºç«‹çš„é †åºï¼Œä»¥ä¸‹é¢ç‚ºä¾‹ï¼ŒEC2 Instance éœ€è¦åœ¨ RDS å»ºç«‹å¥½ä»¥å¾Œæ‰å»ºç«‹ 1Resources: 2 Ec2Instance: 3 Type: AWS::EC2::Instance 4 Properties: 5 ImageId: 6 Fn::FindInMap: 7 - RegionMap 8 - Ref: AWS::Region 9 - AMI 10 DependsOn: myDB 11 myDB: 12 Type: AWS::RDS::DBInstance Stack Policy åƒæ˜¯ IM Policy ï¼Œå¯ä»¥ç”¨ä¾†æ§åˆ¶å“ªäº› Resource å¯ä»¥åšä»€éº¼ï¼Œå“ªäº›ä¸èƒ½åšä»€éº¼ 1{ 2 \u0026#34;Statement\u0026#34; : [ 3 { 4 \u0026#34;Effect\u0026#34; : \u0026#34;Allow\u0026#34;, 5 \u0026#34;Action\u0026#34; : \u0026#34;Update:*\u0026#34;, 6 \u0026#34;Principal\u0026#34;: \u0026#34;*\u0026#34;, 7 \u0026#34;Resource\u0026#34; : \u0026#34;*\u0026#34; 8 }, 9 { 10 \u0026#34;Effect\u0026#34; : \u0026#34;Deny\u0026#34;, 11 \u0026#34;Action\u0026#34; : \u0026#34;Update:*\u0026#34;, 12 \u0026#34;Principal\u0026#34;: \u0026#34;*\u0026#34;, 13 \u0026#34;Resource\u0026#34; : \u0026#34;LogicalResourceId/ProductionDatabase\u0026#34; 14 } 15 ] 16} StackSets å¯ä»¥ä¸€æ¬¡æ›´å‹•å¤šå€‹ Region æˆ–å¤šå€‹ Account çš„ Stack åªæœ‰ Administrator Account å¯ä»¥å»ºç«‹ StackSets Trust Account å¯ä»¥æ›´æ–° StackSets æ¯æ¬¡æ›´å‹• StackSets è¨­å®šï¼Œå…¨éƒ¨çš„ Stack éƒ½æœƒè¢«æ›´æ–° å¯ä»¥åˆªé™¤æ•´å€‹ StackSets æˆ–å–®ç¨åˆªé™¤ StackSets è£¡é¢çš„ä¸€å€‹ Stack Custom Resource ç”±æ–¼ä¸æ˜¯æ‰€æœ‰çš„ AWS Resource, CloudFormation éƒ½æœ‰æ”¯æ´ï¼Œæ‰€ä»¥æœ‰æ™‚éœ€è¦é€é Lambda Function å» call api ç•¶ CloudFormation åœ¨ Create, Update or delete æ™‚éƒ½æœƒè§¸ç™¼ Lambda Function Delete S3 Custom Resource Lambda Function 1Resources: 2 LambdaExecutionRole: 3 Type: AWS::IAM::Role 4 Properties: 5 AssumeRolePolicyDocument: 6 Version: \u0026#39;2012-10-17\u0026#39; 7 Statement: 8 - Effect: Allow 9 Principal: 10 Service: 11 - lambda.amazonaws.com 12 Action: 13 - sts:AssumeRole 14 Path: \u0026#34;/\u0026#34; 15 Policies: 16 - PolicyName: root 17 PolicyDocument: 18 Version: \u0026#39;2012-10-17\u0026#39; 19 Statement: 20 - Effect: Allow 21 Action: 22 - \u0026#34;s3:*\u0026#34; 23 Resource: \u0026#34;*\u0026#34; 24 - Effect: Allow 25 Action: 26 - \u0026#34;logs:CreateLogGroup\u0026#34; 27 - \u0026#34;logs:CreateLogStream\u0026#34; 28 - \u0026#34;logs:PutLogEvents\u0026#34; 29 Resource: \u0026#34;*\u0026#34; 30 31 EmptyS3BucketLambda: 32 Type: \u0026#34;AWS::Lambda::Function\u0026#34; 33 Properties: 34 Handler: \u0026#34;index.handler\u0026#34; 35 Role: 36 Fn::GetAtt: 37 - \u0026#34;LambdaExecutionRole\u0026#34; 38 - \u0026#34;Arn\u0026#34; 39 Runtime: \u0026#34;python3.7\u0026#34; 40 # we give the function a large timeout 41 # so we can wait for the bucket to be empty 42 Timeout: 600 43 Code: 44 ZipFile: | 45 #!/usr/bin/env python 46 # -*- coding: utf-8 -*- 47 import json 48 import boto3 49 from botocore.vendored import requests 50 51 def handler(event, context): 52 try: 53 bucket = event[\u0026#39;ResourceProperties\u0026#39;][\u0026#39;BucketName\u0026#39;] 54 55 if event[\u0026#39;RequestType\u0026#39;] == \u0026#39;Delete\u0026#39;: 56 s3 = boto3.resource(\u0026#39;s3\u0026#39;) 57 bucket = s3.Bucket(bucket) 58 for obj in bucket.objects.filter(): 59 s3.Object(bucket.name, obj.key).delete() 60 61 sendResponseCfn(event, context, \u0026#34;SUCCESS\u0026#34;) 62 except Exception as e: 63 print(e) 64 sendResponseCfn(event, context, \u0026#34;FAILED\u0026#34;) 65 66 67 def sendResponseCfn(event, context, responseStatus): 68 response_body = {\u0026#39;Status\u0026#39;: responseStatus, 69 \u0026#39;Reason\u0026#39;: \u0026#39;Log stream name: \u0026#39; + context.log_stream_name, 70 \u0026#39;PhysicalResourceId\u0026#39;: context.log_stream_name, 71 \u0026#39;StackId\u0026#39;: event[\u0026#39;StackId\u0026#39;], 72 \u0026#39;RequestId\u0026#39;: event[\u0026#39;RequestId\u0026#39;], 73 \u0026#39;LogicalResourceId\u0026#39;: event[\u0026#39;LogicalResourceId\u0026#39;], 74 \u0026#39;Data\u0026#39;: json.loads(\u0026#34;{}\u0026#34;)} 75 76 requests.put(event[\u0026#39;ResponseURL\u0026#39;], data=json.dumps(response_body)) 77 78Outputs: 79 StackSSHSecurityGroup: 80 Description: The ARN of the Lambda function that empties an S3 bucket 81 Value: !GetAtt EmptyS3BucketLambda.Arn 82 Export: 83 Name: EmptyS3BucketLambda Custom Resource with lambda function 1--- 2AWSTemplateFormatVersion: \u0026#39;2010-09-09\u0026#39; 3 4Resources: 5 myBucketResource: 6 Type: AWS::S3::Bucket 7 8 LambdaUsedToCleanUp: 9 Type: Custom::cleanupbucket 10 Properties: 11 ServiceToken: !ImportValue EmptyS3BucketLambda 12 BucketName: !Ref myBucketResource CloudFormation Request Example 1{ 2 \u0026#34;RequestType\u0026#34; : \u0026#34;Create\u0026#34;, 3 \u0026#34;ResponseURL\u0026#34; : \u0026#34;http://pre-signed-S3-url-for-response\u0026#34;, 4 \u0026#34;StackId\u0026#34; : \u0026#34;arn:aws:cloudformation:us-west-2:123456789012:stack/stack-name/guid\u0026#34;, 5 \u0026#34;RequestId\u0026#34; : \u0026#34;unique id for this create request\u0026#34;, 6 \u0026#34;ResourceType\u0026#34; : \u0026#34;Custom::TestResource\u0026#34;, 7 \u0026#34;LogicalResourceId\u0026#34; : \u0026#34;MyTestResource\u0026#34;, 8 \u0026#34;ResourceProperties\u0026#34; : { 9 \u0026#34;Name\u0026#34; : \u0026#34;Value\u0026#34;, 10 \u0026#34;List\u0026#34; : [ \u0026#34;1\u0026#34;, \u0026#34;2\u0026#34;, \u0026#34;3\u0026#34; ] 11 } 12} ","date":"January 12, 2023","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/cloudformation-certification-note/","smallImg":"","tags":[{"title":"CloudFormation","url":"/tags/cloudformation/"}],"timestamp":1673481600,"title":"CloudFormation Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":" CloudTail ä¸»è¦ç”¨æ–¼ç›£æ§å’Œç¨½æ ¸ AWS è³‡æºçš„ API Call Trails æ¯å€‹ Region ä¸Šé™äº”å€‹ Type All Region : æ‰€æœ‰çš„ Region Event Log å­˜åœ¨ä¸€å€‹ S3 Bucket One Region : æŒ‡å®šç‰¹å®š Region Event Log Organization Trail : å¯ä»¥ Log æ•´å€‹ AWS Organization çš„ Eventï¼Œåªæœ‰ management account. ä¹Ÿå¯ä»¥ Cross Account Trailï¼ŒåŸç†æ˜¯è¨­å®š S3 Bucket Policy çµ¦äºˆæ¯å€‹ AWS Account æ¬Šé™ï¼Œæ¯å€‹ Tail çš„ Log æ”¾å…¥åŒä¸€å€‹ S3 å¯ä»¥ç™¼é€ SNS Events Type Management events: AWS æœå‹™æ“ä½œï¼Œåˆåˆ†ç‚º Read, Write å…©ç¨® Type é è¨­Logï¼Œ æœ€è¿‘ 90 çš„ Log æ˜¯å…è²»çš„ï¼Œå¯ä»¥ç›´æ¥åœ¨ Event History å…§æŸ¥çœ‹ Type example Read: EC2 çš„ DescribeSecurityGroups Write: EC2 çš„ TerminateInstances Data event : æ“ä½œç‰¹å®š AWS æœå‹™è£¡çš„è³‡æºï¼Œä¾‹å¦‚ S3 GetObject, DynamoDB PutItem or Lambda Invoke é è¨­æ²’å•Ÿç”¨ï¼Œé ˆé¡å¤–æ”¶è²» å¦‚æœæ˜¯å…¨çƒæ€§çš„æœå‹™ä¾‹å¦‚ IAM, STS ç­‰ç­‰ï¼ŒLog æ˜¯æ”¾åˆ° US East (N. Virginia) Region Event History å¯ä»¥æ ¹æ“šæ™‚é–“å€é–“æˆ–ä»¥ä¸‹å±¬æ€§åš filter Event name, User name, Resource name, Event source, Event ID, and Resource type. Security æœ‰ Log File Validation ï¼Œå¯ä»¥æª¢æŸ¥åˆªé™¤å’Œä¿®æ”¹ åˆªé™¤æœƒé¡¯ç¤º not found éŒ¯èª¤ ä¿®æ”¹æœƒé¡¯ç¤º hash value doesn\u0026rsquo;t match å¯ä»¥æ•´åˆ CloudWatch Log ï¼Œå»ç›£æ§ç‰¹å®šäº‹ä»¶ï¼Œç™¼å‡º Alert S3 é è¨­ä½¿ç”¨ AWS AES key åŠ å¯†ï¼Œå¯ä»¥æ”¹ç”¨ KMS AWSCloudTrail_FullAccess é™åˆ¶åªæœ‰å°‘æ•¸äººï¼Œæ“æœ‰é€™å€‹æ¬Šé™ ","date":"December 20, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/cloudtail-certification-note/","smallImg":"","tags":[{"title":"CloudTail","url":"/tags/cloudtail/"}],"timestamp":1671494400,"title":"CloudTail Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":" Route53 æ˜¯ AWS çš„ Domain Name System (DNS)ï¼Œåå­—ä¸­æœ‰ 53 çš„åŸå› æ˜¯å› ç‚º DNS çš„ Port æ˜¯ 53ã€‚ Route53 ä¹Ÿæ˜¯ä¸€å€‹ DNS Register ï¼Œå¯ä»¥åœ¨ä¸Šé¢è³¼è²· Domain Name TTL (Time to Live) : å–®ä½ç‚ºç§’ï¼Œå‘Šè¨´ Browser å» Cache Response çš„ Record å¤šå°‘æ™‚é–“ã€‚ ä¸»è¦ Component Hosted Zone åŒ…å«æ‰€æœ‰ Record è³‡è¨Š æœƒè‡ªå‹•å»ºç«‹ Name Server å’Œ SOA records Public hosted Zone : è§£æäº’è¯ç¶²çš„ Request Private hosted Zone : è§£æAmazonä¸Šå…§éƒ¨çš„ Request VPC éœ€è¦è¨­å®š enableDnsHostnames \u0026amp; enableDnsSupport Name Server ä¸»è¦è½‰æ› Hostname to IP DNS Basic Records Record Name æè¿° A. Hostname to IPv4 AAAA. Hostname to IPv6 CNAME Hostname to Hostname Alias Hostname to AWS resource MX. Email PTR åå‘è§£æ A record IPv4 to Hostname NS. Name Server SOA ä¸»è¦è¨˜éŒ„ç¶²åŸŸåç¨±ä¼ºæœå™¨çš„åç¨±å’Œè² è²¬äººè³‡è¨Š Alias V.S. Cname åŠŸèƒ½ Cname Alias Example app.domain.com =\u0026gt; xxx.otherDomain.com app.domain.com =\u0026gt; elbxx.amazon.com ROOT DOMAIN åªèƒ½æ˜¯ non root domain Ex: ä¸å¯ä»¥æ˜¯ domain.com =\u0026gt; xxx.otherDomain.com non root \u0026amp; root domain éƒ½å¯ä»¥ Routing Policy Policy æè¿° æ˜¯å¦æœ‰ Health Check Simple Routing Policy å¦‚æœæœ‰å¤šç­†å€¼ ï¼Œæœƒéš¨æ©Ÿè¿”å›ä¸€å€‹ X Weight Routing Policy æ ¹æ“š Weight (%) ä¾†åˆ†æµ V Latency Routing Policy AWS æœƒè¿”å›å»¶é²æœ€å°çš„å€¼ V Failover Routing Policy æœ‰ Primary å’Œ Secondaryï¼Œå¦‚æœ Primary health check pass å°±æœƒè¿”å› Primary å¦å‰‡è¿”å› Secondary V GeoLocation Routing Policy æ ¹æ“š User IP åœ°ç†ä½ç½® ä¾†æ±ºå®šè¿”å›å“ªå€‹å€¼ V Geo proximity Routing Policy æ ¹æ“š User åœ°å€ä½ç½®å¤–åŠ  Bias å€¼ Ex:us-west-1 \u0026amp; us-east-1 éƒ½åœ¨ us ï¼Œå¦‚æœæœ‰è¨­å®š bias ï¼Œ bias é«˜çš„æœƒæœ‰æ¯”è¼ƒå¤šçš„ request V Multi Value Routing Policy å›è¦†å¤šç­†å€¼ ï¼Œç€è¦½å™¨è‡ªå·±é¸ä¸€å€‹å€¼å»ç™¼é€è«‹æ±‚ (request) V Health Check Type endpoint IP or Domain æ”¯æ´å”è­° : TCP, HTTP, HTTPS é è¨­æª¢æŸ¥å€é–“ : 30 ç§’ï¼Œæœ€å¿«å¯ä»¥ 10 ç§’ é€²éšå¯ä»¥è¨­å®šæ ¹æ“š Response å…§å®¹å‰ 5120 Bytes æ˜¯å¦æœ‰åŒ…å«é æœŸçš„ String æœ‰ N æ¬¡æª¢æŸ¥ä¸é =\u0026gt; Unhealthy Status å·²ç¶“æœ‰ N æ¬¡æª¢æŸ¥é =\u0026gt; healthy Status å¯ä»¥ç”¢ç”Ÿ Latency åœ– å¤§ç´„æœ‰ 15 æª¢æŸ¥è€…ï¼ˆchecker) å¾ä¸åŒåœ°æ–¹æª¢æŸ¥ ï¼Œæ‰€ä»¥ endpoint ä¸èƒ½æ˜¯ private çš„ (å¦‚VPCå…§ calculated health check æ ¹æ“šå…¶ä»– Health check ä¾†è¨ˆç®— cloudWatch alarms Others å¯ä»¥åªç”¨ç¬¬ä¸‰æ–¹ DNS Register è¨»å†Šçš„ Domain ï¼Œå°‡ç¬¬ä¸‰æ–¹çš„ Domain çš„ Name Server è¨­å®šç‚º Route53 çš„ Name Serverã€‚ Router53 Domain æŒ‡å‘ S3 - bucket name éœ€è¦è·Ÿ url ä¸€æ¨£ for http : å»ºç«‹ Alias Record æŒ‡å‘ S3, ä¸¦ä¸” S3 éœ€è¦æ˜¯ Public å’Œ é–‹å•Ÿ website åŠŸèƒ½ for https : éœ€è¦ä½¿ç”¨ CloudFormation ","date":"December 5, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/route53-certification-note/","smallImg":"","tags":[{"title":"Route53","url":"/tags/route53/"}],"timestamp":1670198400,"title":"Route53 Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":" Lambda æ˜¯ AWS ç„¡ä¼ºæœå™¨çš„é‹ç®—æœå‹™ï¼Œä»¥ä¸‹å¹¾é»ç‚º AWS ç«¯çš„è²¬ä»» Capacity Provisioning OS Patching Auto Scaling High Availability Basic Setting Memory usage æœƒå½±éŸ¿ CPU timeout è¨­å®šï¼Œæœ€å¤šåäº”åˆ†é˜ role to execute the function æ”¶è²»æ ¹æ“šä»¥ä¸‹ä¸‰é» Request æ•¸é‡ Lambda Function è™•ç† request çš„æ™‚é–“ åŸ·è¡Œ Lambda Function çš„è³‡æº Memory \u0026amp; CPU size Components of Lambda Function: Source Code å­˜åœ¨ S3 Runtimes: åŸ·è¡Œç’°å¢ƒ Layers: å¯ä»¥æ”¾ dependency file. é è¨­é™åˆ¶ 75 GB and 5 Layers Event Source: è§¸ç™¼ Lambda çš„ Event Downstream resources: é€™å€‹ Lambda Function è¦ Access çš„è³‡æº Log Streams: Lambda å·²ç¶“æ•´åˆ CloudWatch Environment variables Versions and aliases Event Source Data Source S3, DynamoDB, Kinesis, Cognito, Aurora Endpoint API Gateway, Step Function, IOT Repository CloudWatch, CloudFormation, CloudTail, CodeCommit Message Service SES, SNS, SQS CloudWatch Log Streams Invocations: äº”åˆ†é˜å€é–“ï¼ŒLambda è¢«å»ºç«‹çš„æ¬¡æ•¸ Duration: åŸ·è¡Œæ™‚é–“ï¼Œæœ‰æä¾›å¹³å‡ã€æœ€å¤§å’Œæœ€å° Error count and success rate (%): æˆåŠŸå’Œå¤±æ•—æ¯”ç‡ Throttles: å¤šå°‘å€‹ request å¤±æ•—æ˜¯å› ç‚ºç“¶é ¸ IteratorAge: For stream event sources, the age of the last item in the batch when Lambda received it and invoked the function. Async delivery failures: éåŒæ­¥æ™‚å¤šå°‘ request é€²å…¥éŒ¯èª¤ å’Œå¯«åˆ° dead-letter queueï¼Œå¯ä»¥æ”¾åˆ° SNS or SQS. Concurrent executions: åŒæ™‚æœ‰å¤šå°‘å€‹ ã„‘unction æ­£åœ¨åŸ·è¡Œ Environment variables å¯ä»¥é€é KMS åŠ  å¯ä¹Ÿå¾ SSM å–å¾— Versions and aliases åªå¯ä»¥æ›´æ”¹æˆ–update $LATEST Aliases å¯ä»¥è¨­å®š Weight ä¾†åˆ†æµåˆ°ä¸åŒç‰ˆæœ¬ Security IAM Resource Policy: åŸ·è¡Œ Lambda Function çš„æ¬Šé™ IAM Execution Role: Lambda call å…¶ä»– AWS æœå‹™éœ€è¦çš„æ¬Šé™ Lambda å¯ä»¥åœ¨ç‰¹å®šçš„ VPC å…§é‹è¡Œ Concurrency é è¨­æ¯å€‹ Region ä¸Šé™æ˜¯ 1000ï¼Œæ‰€ä»¥ Lambda Function å…±ç”¨çš„ï¼Œå¯ç”³è«‹èª¿é«˜ ç•¶é”åˆ°ç“¶é ¸æ™‚ï¼ŒLambda æœƒè¿”å› 429 too many requests å¯ä»¥è¨­å®šä»¥ä¸‹å…©ç¨® Concurrency Reserved Concurrency: ç‰¹å®š Function ä¿ç•™åŸ·è¡Œæ•¸é‡ï¼Œä¹Ÿæ˜¯é€™å€‹ Function æœ€å¤§ä¸Šé™ï¼Œä½†å…¶ä»– Function ä¸èƒ½ä½¿ç”¨é€™æ•¸é‡ Provisioned Concurrency: é å…ˆåˆå§‹åŒ–çš„æ•¸é‡ Synchronous v.s. Asynchronous Synchronous: Lambda æœƒå›è¦† Response åŸ·è¡Œçµæœ Asynchronous: Lambda æœƒå›è¦† Client å·²ç¶“æ”¶åˆ°ï¼Œä¸¦æœƒåŸ·è¡Œï¼Œå¤±æ•—æœƒé€²å…¥åˆ° dead-letter queue Warm Start v.s. Cold Start æ•´åˆå…¶ä»– AWS æœå‹™ Amazon EFS : Lambda Function å¯ä»¥ mount EFS ç•¶ Local File System Amazon Gateway API : æä¾› Http or Https API X-Ray: è¿½ä¸­æ•´å€‹ Request Data Flow. AWS CodePipeline: å®¢è£½åŒ– Task Lambda@Edge: æ•´åˆ CloudFront ï¼Œå¯ä»¥åœ¨Edge åšå®¢è£½åŒ–ä¾‹å¦‚é€éLambda åœ¨Edge å°±åšèº«ä»½é©—è­‰ Parameter Store : ç•¶å¤šå€‹ Lambda Function éœ€è¦å…±ç”¨åƒæ•¸ã€‚ ","date":"November 13, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/lambda-certification-note/","smallImg":"","tags":[{"title":"LAMBDA","url":"/tags/lambda/"}],"timestamp":1668297600,"title":"Lambda Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":" å¯ä»¥ç”¨ä¾†ç®¡ç† EC2 æˆ–æ˜¯ On-Prime çš„æ©Ÿå™¨ éœ€è¦å®‰è£ SSM Agent åœ¨æ©Ÿå™¨ä¸Š AWS Linux AMI å’Œéƒ¨åˆ† Ubuntu AMI é è¨­å·²ç¶“è£å¥½ Agent äº†ã€‚ EC2 éœ€è¦æœ‰ IAM Rule çš„æ¬Šé™æ ¹ SSM æºé€š Patch è‡ªå‹•åŒ– æ”¯æ´ Windows or Linux å¯ä»¥æ•´åˆ CloudWatch å’Œ AWS Config Resource Group ä¸åªæ˜¯é©ç”¨æ–¼ EC2ï¼Œä¹Ÿå¯ä»¥é©ç”¨æ–¼å…¶ä»– AWS æœå‹™å¦‚ S3, Lambda ç­‰ç­‰ ä½¿ç”¨ AWS Tag çš„åŠŸèƒ½ï¼Œæ ¹æ“š Key Value å°‡ Resource grouping èµ·ä¾†ã€‚ Ex: Environment çš„ value ç­‰æ–¼ Production æ™‚å€™ ä¹Ÿå¯ä»¥æ ¹æ“š CloudFormation Stack ä¾† Grouping Documents ä¸€å€‹ Documents å®šç¾©ä¸€äº› Parameters \u0026amp; Actions (åŸ·è¡Œä¸€äº› commands) Documents å¯ä»¥æ˜¯ Json æˆ– Yaml æ ¼å¼ å…©ç¨®Type Run Command (Script) \u0026amp; Automation (AWS API) Run Command Run command å¯ä»¥é…åˆ Resource Group ä¸€æ¬¡å°å¤šå°æ©Ÿå™¨åŸ·è¡Œ Documents (Script) ï¼Œä¹Ÿå¯ä»¥æ‰‹å‹•æŒ‡å®šç‰¹å®šæ©Ÿå™¨åŸ·è¡Œ æœ‰ Rate æ§ç®¡å¯ä»¥æ§ç®¡ä¸€æ¬¡åŒæ™‚æ›´æ–°å¹¾å° resource ã€‚ä¹Ÿæœ‰ Error æ§ç®¡ï¼Œ æ›´æ–°éç¨‹ä¸­å¤±æ•—å¤šå°‘ resource å°±ä¸­æ­¢ã€‚ Resource å¯ä»¥ä½¿ç”¨ç™¾åˆ†æ¯”æˆ–æŒ‡å®šå›ºå®šæ•¸é‡ä¾†å®šç¾©ã€‚ å¯ä»¥é€é IAM \u0026amp; CloudTail çŸ¥é“èª°åŸ·è¡Œçš„ EC2 æ˜¯é€é SSM Agent åŸ·è¡Œçš„ï¼ŒEC2 å¯ä»¥ä¸éœ€è¦ Allow SSH åŸ·è¡Œçµæœå¯ä»¥åœ¨ Console ä¸Šçœ‹åˆ°ï¼Œæˆ–å­˜åˆ° S3 æˆ– CloudWatch Logs å¯ä»¥é€é SNS ç™¼é€ Status å¯ä»¥æ•´åˆå€ EventBridge Trigger Automation ä¸»è¦ç”¨æ–¼ç°¡åŒ–ç¶­è­·å’Œéƒ¨ç½² EC2 æˆ– AWS å…¶ä»–æœå‹™ Automation runbook å°±æ˜¯ Documents ä¸»è¦åŸ·è¡Œä¸€äº› AWS Resource çš„ API ï¼Œä¾‹å¦‚ EC2 çš„ stopã€‚ å¯ä»¥è¢« Trigger çš„æ–¹å¼ AWS Console, Cli or SDK EventBridge é€é Maintain Windows æ’æˆ AWS Config Remediation å¯ä»¥ç”¨ä¾†å»ºç«‹ AMIï¼ŒAWS æœ‰æä¾› AWS-UpdateLinuxAmi å’Œ AWS-UpdateWindowsAmi Parameter Store å¯ä»¥å®‰å…¨åœ°å­˜å– Configuration \u0026amp; Secrets ï¼Œä¸¦ä¸”æœ‰ç‰ˆæœ¬æ§åˆ¶ å¯ä»¥é€é KMS åŠ å¯† é€é IAM å’Œ Path æ§ç®¡ å¯ä»¥æ•´åˆ CloudFormation æœ‰ CloudWatch Event get-parameters cli å¦‚æœæœ‰åŠ å¯†è³‡æ–™é è¨­è¿”å›çš„æ˜¯å¯†æ–‡ï¼Œéœ€å¦é€é KMS è§£å¯†ã€‚ä½†ä¹Ÿå¯ä»¥é€é \u0026ndash;with-decryption é€™å€‹åƒæ•¸ç›´æ¥è¿”å›æ˜æ–‡ï¼Œéœ€è¦æœ‰ KMS æ¬Šé™ Parameter policy å¯ä»¥è¨­å®š TTL å» é€šçŸ¥ æˆ– delete parameters ä¸‰ç¨® Policy Expiration : æŒ‡å®šæ™‚é–“åˆªé™¤ Parameter ExpirationNotification : å¯ä»¥è¨­å®šå¿«éæœŸé€šçŸ¥ NoChangeNotification : å¯ä»¥è¨­å®šé€šçŸ¥ï¼Œå¦‚æœ Parameters åœ¨æŒ‡å®šæ™‚é–“å…§éƒ½æœªæ›´æ–° Example 1{ 2 \u0026#34;Type\u0026#34;:\u0026#34;Expiration\u0026#34;, 3 \u0026#34;Version\u0026#34;:\u0026#34;1.0\u0026#34;, 4 \u0026#34;Attributes\u0026#34;:{ 5 \u0026#34;Timestamp\u0026#34;:\u0026#34;2018-12-02T21:34:33.000Z\u0026#34; 6 } 7} 8 9{ 10 \u0026#34;Type\u0026#34;:\u0026#34;ExpirationNotification\u0026#34;, 11 \u0026#34;Version\u0026#34;:\u0026#34;1.0\u0026#34;, 12 \u0026#34;Attributes\u0026#34;:{ 13 \u0026#34;Before\u0026#34;:\u0026#34;15\u0026#34;, 14 \u0026#34;Unit\u0026#34;:\u0026#34;Days\u0026#34; 15 } 16} 17 18{ 19 \u0026#34;Type\u0026#34;:\u0026#34;NoChangeNotification\u0026#34;, 20 \u0026#34;Version\u0026#34;:\u0026#34;1.0\u0026#34;, 21 \u0026#34;Attributes\u0026#34;:{ 22 \u0026#34;After\u0026#34;:\u0026#34;20\u0026#34;, 23 \u0026#34;Unit\u0026#34;:\u0026#34;Days\u0026#34; 24 } 25} å…©ç¨®ä»˜è²»æ¨¡å¼ åŠŸèƒ½\\æ¨¡å¼ Standard Advanced æ¯å€‹ Region parameter ä¸Šé™ 10,000 100,000 parameters size ä¸Šé™ 4k 8k parameters policy x v storage cost free $0.05 per parameter / mother standard throughput free $0.05/ 10,000 API high throughput (1000 api / second) $0.05/10,000 API $0.05/10,000 API Inventory æ”¶é›† EC2 or On-premises æ©Ÿå™¨ä¸Šçš„è³‡è¨ŠåŒ…å« :å·²å®‰è£çš„è»Ÿé«”, OS drivers å’Œ è¨­å®š æˆ– æ­£åœ¨åŸ·è¡Œçš„ servicesã€‚ä¸¦å¯ä»¥é€éé€™äº›è³‡æ–™åšç¨½æ ¸ å¯ä»¥è¨­å®šè³‡æ–™æ›´æ–°çš„æ™‚é–“å€é–“ç‚º åˆ†ã€ç§’æˆ–å°æ™‚ å¯ä»¥å°‡è³‡æ–™å­˜åœ¨ S3 é€é Athena ä¾†åˆ†æ å¯ä»¥å»ºç«‹å®¢è£½åŒ– Inventory ï¼Œæ‹‰ç‰¹å®šè³‡è¨Š State Manager å®šç¾©ä¸€å€‹ State (Configration)ï¼Œè®“æ‰€æœ‰æŒ‡å®šçš„æ©Ÿå™¨ç¶­æŒåœ¨å®šç¾©çš„ State ä¾‹å¦‚ State å¯ä»¥æ˜¯ é—œé–‰ ssh (port 22) Patch Manager è‡ªå‹•æ›´æ–°å’Œä¿®è£œæ©Ÿå™¨ å¯ä»¥åš OS å‡ç´šï¼ŒApplication å‡ç´šï¼Œæˆ–è€…ä¸€äº› Security ç›¸é—œçš„å‡ç´š å¯ä»¥æ˜¯ä¸€æ¬¡æ€§ï¼Œæˆ–è€…é€é Maintain Windows ä¾†æ’ç¨‹ã€‚ å¯ä»¥æƒææ‰€æœ‰ç®¡ç†çš„æ©Ÿå™¨ä¸¦ç”¢å‡º compliance report Patch Baseline : å¯ä»¥å®šç¾©å“ªäº› patch æ‡‰è©² æˆ– ä¸æ‡‰è©² è£åœ¨æ©Ÿå™¨ä¸Š Patch Group : å°‡å¤šå°æ©Ÿå™¨ Grouping èµ·ä¾†ä¸¦åŸ·è¡Œ Patch Baseline ä¸€å°æ©Ÿå™¨åªèƒ½æœ‰ä¸€å€‹ Patch Groupï¼Œä¸€å€‹ Patch Group åªèƒ½ç¶å®šä¸€å€‹ Patch Baseline é€é AWS Tag key \u0026ldquo;Patch Group\u0026rdquo; å» Grouping Maintenance Window æ’ç¨‹å»åŸ·è¡Œä»»å‹™ ä¾‹å¦‚ æ›´æ–° Instance ä¸Šçš„ æ“ä½œç³»çµ±ã€è»Ÿé«”ç­‰ç­‰ Maintenance Window åŒ…å«äº† æ’ç¨‹(Schedule) æœŸé–“(Duration) ä¸€çµ„æ©Ÿå™¨ ä¸€çµ„è¦åŸ·è¡Œçš„ä»»å‹™ ä»»å‹™(task) å¯ä»¥æ˜¯ Run Command Automation Lambda Step Function Session Manager å¯ä»¥å»ºç«‹å®‰å…¨çš„ Shell åˆ° EC2 or On-premisesï¼Œä¸éœ€è¦é–‹å§‹ SSH (port 22) æœƒ Log æ‰€æœ‰çš„æŒ‡ä»¤ æ”¯æ´ Windows ã€ Linux æˆ– MacOS Session Log å¯ä»¥å­˜åœ¨ S3 æˆ– CloudWatch å¯ä»¥é€éIAM é™åˆ¶å“ªå€‹ User/Group å¯ä»¥é€£åˆ°å“ªå€‹ Instance æˆ–æ˜¯ Reousrce Tag ","date":"October 27, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/ssm-certification-note/","smallImg":"","tags":[{"title":"SystemsManager","url":"/tags/systemsmanager/"}],"timestamp":1666828800,"title":"Systems Manager (SSM) Certification Note"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"Sup ç«‹å¼åˆ’æ§³é«”é©— å› ç‚ºé è¨‚äº†æ—¥å‡ºåœ˜çš„ Sup æ‰€ä»¥ä¸€å¤§æ—©äº”é»å°±èµ·åºŠï¼Œé¨è»Šåˆ°é›†åˆåœ°é»ï¼Œçµæœç™¼ç¾åªæœ‰æˆ‘è·Ÿæˆ‘å¥³å‹è€Œå·²ï¼Œç®—æ˜¯ç›´æ¥è¢«æˆ‘å€‘åŒ…å ´äº†ï¼æ•™ç·´æ˜¯ä¸€ä½å¥³ç”Ÿï¼Œå¥¹å¾ˆç´°å¿ƒçš„æ•™æˆ‘å€‘æ€éº¼åˆ’æ§³æ€éº¼å‰é€²å¾Œé€€æ§åˆ¶æ–¹å‘é‚„æœ‰è½‰å½ï¼Œæ¥è‘—æˆ‘å€‘ç©¿å¥½æ•‘ç”Ÿè¡£å°±å‡ºç™¼åˆ°æµ·é‚Šï½åˆ°æµ·é‚Šä»¥å¾Œï¼Œç¾å ´å°±æœ‰è¨±å¤šå…¶ä»–åœ˜çš„äººéƒ½åœ¨æº–å‚™å‡ºç™¼ï¼Œæ•™ç·´ç°¡å–®åœ¨å‡ºç™¼å‰å†è¤‡ç¿’åˆ’æ§³å‹•ä½œç¢ºèªæˆ‘å€‘éƒ½æœƒåˆ’å¾Œï¼Œæˆ‘å€‘å°±ååœ¨ Sup ä¸Šæ…¢æ…¢åˆ’å‡ºæµ·ï¼åˆ’å¤§ç´„ååˆ†é˜å¾Œå¤ªé™½å°±æ¼¸æ¼¸å‡èµ·ï¼Œæ•™ç·´é–‹å§‹ç”¨å¥¹çš„æ‰‹æ©Ÿå¹«æˆ‘å€‘æ‹ç…§ï¼Œæˆ‘å€‘çš„æ‰‹æ©Ÿå› ç‚ºæ€•è½æ°´éƒ½æ”¾åœ¨å²¸ä¸Šï½ä¸éå› ç‚ºé€™åœ˜åªæœ‰æˆ‘å€‘æ‰€ä»¥æ•™ç·´å°±å°ˆé–€ç‚ºæˆ‘å€‘æ‹ç…§ xD æ‹å®Œç…§å¾Œé–‹å§‹å˜—è©¦ç«™èµ·ä¾†åœ¨ Sup ä¸Šåˆ’ï¼Œä½†æˆ‘æŒ‘æˆ°å¤šæ¬¡éƒ½å¤±æ•—ç«™èµ·ä¾†ï¼Œæœ€å¾Œæœ€é•·ä¹Ÿåªç«™äº†å¤§ç´„åç§’é˜è€Œå€’äº† QAQ\næ´ªåª½åª½æ—©é¤ åˆ’å®Œ Sup å¾Œï¼Œæ•™ç·´æ¨è–¦æˆ‘å€‘å¯ä»¥åƒæ´ªåª½åª½æ—©é¤ã€‚å› ç‚º Sup é«”é©—åªæœ‰ä¸€å°æ™‚ï¼Œæ‰€ä»¥çµæŸæ™‚é‚„ä¸åˆ°å…«é»ï¼Œæƒ³èªªæ‡‰è©²æ²’ä»€éº¼äººï¼Œçµæœåˆ°ç¾å ´äººå±±äººæµ·! æ´ªåª½åª½æ—©é¤æ˜¯æ¡å–è‡ªåŠ©å¼çš„ï¼Œæ‹¿è‡ªå·±æƒ³è¦åƒçš„ç„¶å¾Œåˆ°æ«ƒæª¯çµå¸³ã€‚çœ‹äº†ä¸€åœˆä¸çŸ¥é“åƒä»€éº¼ï¼Œå°±è²·äº†ç•¶åœ°ç‰¹è‰²æ—©é»ç‰çƒç²¿ã€‚ç¾å ´ä¹Ÿæ²’æœ‰æä¾›ä½å­åƒï¼Œæ‰€ä»¥æˆ‘å€‘å°±å¸¶å›æ°‘å®¿å»åƒã€‚ç”±æ–¼ä»Šå¤©å¤ªæ—©èµ·ä¾†ï¼Œåƒå®Œä»¥å¾Œå°±çŠ¯çç¨å¾®è£œçœ ä¸€ä¸‹ xD\nèœœä»”ç‰éƒ¨ ç¡é†’ä¾†å¾Œåœ¨ Google Map æ‰¾äº†ä¸€ä¸‹è©•åƒ¹ä¸éŒ¯çš„èœœä»”ç‰éƒ¨ç•¶åˆé¤ï¼åˆ°äº†ç¾å ´é‚„æ²’é–‹é–€ä½†å»å·²ç¶“å¾ˆå¤šäººåœ¨æ’éšŠäº†ï¼Œå› ç‚ºæˆ‘å€‘ä¸¦é‚„ä¸æ˜¯åœ¨ç¬¬ä¸€æ‰¹å¯ä»¥é€²å»ç”¨é¤çš„ï¼Œåªèƒ½å…ˆç™»è¨˜å€™ä½ã€‚æ¥è‘—æˆ‘å€‘åˆ°ä¸€æ—çš„ 7-11 ç­‰å€™ï¼Œä¸éŒ¯çš„æ˜¯é€™é–“ 7-11 æ¯”è¼ƒå¤§é–“ï¼Œæœ‰äºŒæ¨“æä¾›æ¡Œæ¤…å¯ä»¥åè‘—ç­‰ã€‚ç­‰é¤å»³é€šçŸ¥æˆ‘å€‘èƒ½åˆ°åº—ç”¨é¤å¾Œï¼Œæ‰ç™¼ç¾é¤å»³åº—é–€ä¸Šå·²ç¶“æ›è‘—æš«åœå€™ä½çš„ç‰Œå­ï¼Œé‚„å¥½æ²’æœ‰ç¡å¤ªæ™šï¼Œä¸ç„¶å°±åƒä¸åˆ°äº†ï¼\nä»Šæ—¥åˆ†åˆ¥é»äº†: è•ƒèŒ„æµ·é®®ç¾©å¤§åˆ©éºµã€è’œé¦™è¦è¦é£¯å’Œç†±çƒé¾å¥¶èŒ¶ã€‚èœœä»”ç‰éƒ¨çš„æ–™å¾ˆæ•¢çµ¦ï¼Œè•ƒèŒ„æµ·é®®ç¾©å¤§åˆ©éºµå‰é¢ä¸€æ’æ”¾æ»¿äº†è¦å­ï¼Œå¾Œé¢é‚„æœ‰ä¸€éš»èƒèŸ¹ã€‚è€Œè’œé¦™è¦è¦é£¯çš„è¦ä¹Ÿé‹ªæ»¿åœ¨é£¯ä¸Šé¢ï½ç†±çƒé¾å¥¶èŒ¶é‚„ç‰¹åˆ¥æœ‰æ‹‰èŠ±ã€‚æ•´é«”å¾ˆå¥½åƒï¼Œæ‰€ä»¥æˆ‘è¦ºå¾— CP å€¼å¾ˆé«˜ã€‚\nèŠ±åœ’é°»é›è›‹ç³• åŸæœ¬é€™é–“é›è›‹ç³•æ˜¯æ˜¨å¤©å°±è¦æƒ³åƒçš„ï¼Œä½†æˆ‘å€‘é¨è»Šé¨äº†è€åŠå¤©éƒ½æ²’æœ‰æ‰¾åˆ°ï¼Œç•¶ä¸‹æœ‰åœ¨ IG ä¸Šç§è¨Šè€é—†å‰›å¥½ä¹Ÿæ²’æœ‰çœ‹åˆ° QAQ ç­‰è€é—†å›è¦†æ™‚æˆ‘å€‘å·²ç¶“å›åˆ°æ°‘å®¿äº†ï¼Œæ‰€ä»¥æœ‰è·Ÿè€é—†è¨‚ä»Šå¤©ä¸‹åˆçš„ï¼Œåªæ˜¯æ²’æƒ³åˆ°èœœä»”ç‰éƒ¨åƒçš„å¾ˆé£½ã€‚åˆ°ç¾å ´æ™‚è€é—†å‰›å¥½æ­£åœ¨åšæˆ‘å€‘çš„é›è›‹ç³•ï¼Œåšå‡ºä¾†çš„å½¢ç‹€å°±æ˜¯èŠ±åœ’é°»çš„æ¨£å­ï¼Œç”±æ–¼è‚šå­åƒå¤ªé£½äº†ï¼Œæ‰€ä»¥æ„Ÿè¦ºå‘³é“å°±ä¸€èˆ¬ã€‚\nå°ç‰çƒç’°å³¶ æ¥è‘—æˆ‘å€‘å°±é¨è‘—è»Šæ…¢æ…¢æ²¿è‘—æµ·ç·šç¹å°ç‰çƒç’°å³¶ä¸€åœˆï¼Œéç¨‹ä¸­é‚„é‡åˆ°è·¯éœ¸ç¾Šç¾Šï¼Œé‚„å¥½æˆ‘å€‘æ˜¯é¨æ©Ÿè»Šå°±å¾ä¸€æ—ç¹éå»ï¼Œå¦‚æœæ˜¯é–‹è»Šçš„è©±å°±æ¯”è¼ƒéº»ç…©äº†ã€‚æœ€å¾Œç¨å¾®æ™ƒäº†ä¸€ä¸‹å…ç¨…åº—ï¼ŒåŸæœ¬æ‰“ç®—è²·ç“¶é…’ï¼Œä½†ç¾å ´äººå¯¦åœ¨å¤ªå¤šï¼Œä¸æƒ³æ’éšŠå°±æ‰“æ¶ˆå¿µé ­äº†ï¼\nç‹åŒ ç”Ÿé­šç‰‡ ç¹å®Œä¸€åœˆï¼Œæˆ‘å€‘å°±åèˆ¹å›å±æ±æ±æ¸¯ç¢¼é ­ï¼Œæƒ³èªªç¢¼é ­çš„æµ·é®®éƒ½å¾ˆæ–°é®®ï¼Œæˆ‘å€‘å°±åœ¨ä¸€æ—çš„è¯åƒ‘å¸‚å ´ 228 æ”¤çš„ç‹åŒ ç”Ÿé­šç‰‡é»äº†ä»½ç”Ÿé­šç‰‡ï½çœŸçš„è¶…æ–°é®®çš„ï½ åƒå®Œå°±å›å°åŒ—ï¼Œéå®Œåƒçš„ä¸€å¤©è¡Œç¨‹ã€‚\n","date":"October 23, 2022","img":"/posts/travel/2022_kaohsiung_liuqiu_island_day3/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/travel/2022_kaohsiung_liuqiu_island_day3/feature_hu06c3fc70fa611124d49e20071a89ee2a_582238_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/travel/2022_kaohsiung_liuqiu_island_day3/","smallImg":"/posts/travel/2022_kaohsiung_liuqiu_island_day3/feature_hu06c3fc70fa611124d49e20071a89ee2a_582238_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"TRAVEL","url":"/tags/travel/"}],"timestamp":1666483200,"title":"2022 é«˜é›„ å°ç‰çƒ ä¸‰å¤©å…©å¤œä¹‹ Day3"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"æ­èˆ¹åˆ°å°ç‰çƒ åŸæœ¬åœ¨ç¶²è·¯ä¸Šå·²ç¶“æœ‰è³¼è²·æ‹¼è»Šï¼Œæ˜¯å¾é«˜é›„è»Šç«™åˆ°å±æ±æ±æ¸¯ç¢¼é ­~ ä½†ç”¢å“æè¿°æ²’æœ‰å¾ˆæ¸…æ¥šï¼Œæˆ‘å€‘ä»¥ç‚ºæ–¹æ¡ˆæ˜¯å¾é«˜é›„è»Šç«™æ‹¼è»Šç›´æ¥å‡ºç™¼åˆ°ç¢¼é ­ï¼Œä½†æ²’æƒ³åˆ°ä¸­é€”æ˜¯é‚„è¦å…ˆå»é«˜éµç«™æ¥äººï¼å¤–åŠ æˆ‘å€‘å·²ç¶“è·Ÿæ°‘å®¿è¨‚å¥½æ½œæ°´é«”é©—ï¼Œæˆ‘å€‘ä¸èƒ½æ­å¤ªæ™šçš„èˆ¹ç­ï¼Œæ‰€ä»¥æœ€å¾Œåªå¥½æ”¹æ­è¨ˆç¨‹è»Šå‰å¾€ç¢¼é ­ã€‚ç¬¬äºŒå€‹ä¸å¹¸çš„æ˜¯åŸæœ¬ä»¥ç‚ºè²·äº†å¹¾é»çš„æ™‚é–“å°±ä¸€å®šæœƒæ­ä¸Šé‚£è‰˜èˆ¹ï¼Œä½†å› ç‚ºç¾å ´äººå¤ªå¤šäº†ï¼Œæ‰€ä»¥æ»¿äº†å°±ç™¼èˆ¹ï¼Œæˆ‘å€‘æœ€å¾Œæ²’æœ‰æ­ä¸Š11:20çš„è—ç™½ä¸€è™Ÿï¼æˆ‘å€‘å°±è¶•å¿«å’Œæ°‘å®¿è€é—†èªªæœ‰å¯èƒ½æœƒæ•¢ä¸ä¸ŠåŸæœ¬é è¨‚çš„æ½œæ°´é«”é©—ï¼Œä¸éè€é—†é‚„å¾ˆå¥½å¿ƒçš„è·Ÿæˆ‘å€‘èªªæ²’é—œä¿‚ï¼Œæ…¢æ…¢ä¾†ï½å¥½åŠ åœ¨ï¼Œå› ç‚ºäººå¤ªå¤šäº†ï¼Œä¹Ÿæœ‰åŠ é–‹ç­æ¬¡ï¼Œæ‰€ä»¥æœ‰æ­ä¸Šè—ç™½äºŒè™Ÿï¼\næµ·é¾œç›¸é‡ é€™æ˜¯ç¬¬ä¸€æ¬¡é«”é©—æ½œæ°´ï¼Œéå»åªæœ‰æµ®æ·ºç¶“é©—è€Œå·²ã€‚åœ¨æ½œæ°´ä¹‹å‰æœ‰åšè·Ÿå¥åº·æ–¹é¢çš„å•å·èª¿æŸ¥ï¼Œæ•™ç·´çœ‹åˆ°æˆ‘æœ‰å¡«å¯«æ°£å–˜ï¼Œç„¶å¾Œæœ‰è©¢å•äº†æˆ‘ä¸€äº›åŸºæœ¬çš„å•é¡Œï¼Œèªç‚ºæ²’ä»€éº¼å•é¡Œå¾Œå°±æ”¾æˆ‘éäº†ï½ æ¥è‘—æ•™ç·´å°±é–‹å§‹æ•™æˆ‘å€‘æ€éº¼ä½¿ç”¨æ°§æ°£ç“¶åœ¨æ°´åº•å‘¼å¸ï¼Œç„¶å¾Œæ•™ä¸€äº›åœ¨æ°´åº•ä½¿ç”¨çš„æ‰‹å‹¢ä»¥ä¾¿æºé€šã€‚æ¥è‘—æ›è£å®Œç•¢å°±åˆ°æµ·é‚Šã€‚åœ¨ç­‰åˆ°æ¹æ°§æ°£ç“¶çš„æ™‚å€™ï¼Œè¦å¸¶æˆ‘çš„æ•™ç·´é‚„ç‰¹åˆ¥è·‘ä¾†å•æˆ‘èªª æœƒä¸æœƒç·Šå¼µï¼Œæˆ‘èªªåŸæœ¬ä¸æœƒï¼Œä½†è¢«ä½ ä¸€å•ï¼Œåè€Œç·Šå¼µèµ·ä¾†äº†ï¼æ¥è‘—æ›æˆ‘æ¹æ°§æ°£ç“¶ï¼Œæ°§æ°£ç“¶æ¯”æˆ‘æƒ³åƒä¸­çš„é‚„è¦é‡è¨±å¤šï¼åœ¨èµ°è·¯å»æµ·é‚Šçš„éç¨‹ä¸­ï¼Œè®“æˆ‘æ›´åŠ æ“”å¿ƒã€‚ä¸éå¾Œä¾†ä¸‹æ°´çœ‹åˆ°æµ·é¾œå€‘å¤ªæ²»ç™’äº†ï¼Œéƒ½å®Œå…¨éƒ½ä¸ç·Šå¼µäº†ï¼Œè€Œä¸”æµ·åº•ç«Ÿç„¶é‚„æœ‰åœ‹æ——ğŸ‡¹ğŸ‡¼æœ€å¾Œçœ‹åˆ°æ•™ç·´å¹«æˆ‘å€‘æ‹çš„ç…§ç‰‡ï¼Œå°±è¦ºå¾—å€¼å¾—å•¦ï¼\nå°ç‰çƒé¨è»Šè¶´è¶´èµ° æ½œæ°´å®Œä¸Šä¾†ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è‚šå­å¥½é¤“ï¼Œåœ¨æ²–æ´—å®Œä»¥å¾Œå°±è·‘å»åƒè€æè”¥æ²¹é¤…ï½å‰›ä¸‹èˆ¹è¦å»æ°‘å®¿çš„è·¯ä¸Šå°±çœ‹åˆ°å¾ˆå¤šäººåœ¨æ’éšŠï¼Œåªæ˜¯ç•¶æ™‚è¶•è‘—è¦å»æ½œæ°´é«”é©—æ‰€ä»¥å°±åªå¥½å…ˆç„¡è¦–XD è€æè”¥æ²¹é¤…å¾ˆç‰¹åˆ¥ï¼Œè·Ÿæˆ‘å€‘ä¸€èˆ¬æ™‚åƒå¾—æ‰æ‰æ©¢åœ“å½¢çš„ä¸å¤ªä¸€æ¨£ï¼Œå®ƒç«Ÿç„¶æ˜¯é•·æ¢å½¢çš„ã€‚\nåƒå®Œå¾Œåˆæ²¿è‘—æµ·é‚Šåˆ†åˆ¥è·‘å»äº†ç¾äººæ´ã€èŠ±ç“¶çŸ³å’Œæ—­æ—¥äº­\næ™šé¤èˆ‡æ°‘å®¿ æ™ƒäº†ä¸€ä¸‹å°±å·²ç¶“æ¥è¿‘æ™šä¸Šäº†ï¼Œæ°‘å®¿æœ‰åŒ…æ™šé¤ï¼Œçµæœæˆ‘å€‘ä¸å°å¿ƒæŠŠæ™‚é–“è¨˜éŒ¯äº†ï¼Œæ•´æ•´æ™šäº†åŠå€‹å°æ™‚æ‰åˆ°ï¼Œåˆ°çš„æ™‚å€™å·²ç¶“å·®ä¸å¤šå®¢æ»¿äº†ï¼è‰¾å€«é¦¬ä¸Šé–‹å•Ÿè‚¥ä»”æ¨¡å¼é–‹åƒï¼æ™šä¸Šå°ç‰çƒæ²’ä»€éº¼åœ°æ–¹å¯ä»¥å»ï¼Œå°±å›åˆ°æ°‘å®¿çµæŸä»Šå¤©é€™å›åˆï½\n","date":"October 22, 2022","img":"/posts/travel/2022_kaohsiung_liuqiu_island_day2/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/travel/2022_kaohsiung_liuqiu_island_day2/feature_hu26db14124b797375e13e490a88b8c727_171262_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/travel/2022_kaohsiung_liuqiu_island_day2/","smallImg":"/posts/travel/2022_kaohsiung_liuqiu_island_day2/feature_hu26db14124b797375e13e490a88b8c727_171262_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"TRAVEL","url":"/tags/travel/"}],"timestamp":1666396800,"title":"2022 é«˜é›„ å°ç‰çƒ ä¸‰å¤©å…©å¤œä¹‹ Day2"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"å°åŒ—åˆ°é«˜é›„ ä¸€å¤§æ¸…æ—©ä¸ƒé»å¤šï¼Œè‰¾å€«å°±é†’ä¾†æ´—æ¼±(æ™®é€šæ™‚ä¸Šç­éƒ½æ²’é€™éº¼æ—©èµ·ä¾†ï¼‰ï¼Œå°±æ­è‘—æ·é‹åˆ°å°åŒ—ç«è»Šç«™ï¼Œæº–å‚™åé«˜éµå—ä¸‹ã€‚ ç¬¬ä¸€ç«™: è€¶é­¯å°é®é¤å»³ åˆ°é«˜é›„çš„ç¬¬ä¸€ç«™ï¼Œç•¶ç„¶æ˜¯å…ˆåƒåˆé¤ï¼\nç”±æ–¼ä¹‹å‰æœ‰æ¬¡å¾ˆæƒ³åƒåœ¨åŠ æ‹¿å¤§æ™‚å¸¸åƒçš„ Poutineï¼Œæ‰€ä»¥é‚£æ™‚å€™åœ¨ç¶²ä¸ŠæŸ¥è©¢æ™‚ï¼Œé‚£æ™‚å°±æŸ¥åˆ°é«˜é›„é€™æœ‰ä½åœ¨åŠ æ‹¿å¤§å±…ä½å¾ˆä¹…çš„å°ç£äººï¼Œåœ¨é«˜é›„é–‹çš„åŠ æ‹¿å¤§é¤å»³ã€‚\nç”±æ–¼å¤©æ°£å¯¦åœ¨å¤ªç†±ï¼Œæ‰€ä»¥è‰¾å€«åªé»äº†æœ€æƒ³åƒçš„ Poutine å’Œæœ¨ç¢—æ²™æ‹‰ã€‚\nPoutine ç¾©å¼ç”Ÿç«è…¿ä¹³é…ªæ²™æ‹‰ åƒå®Œå¾Œé›¢é–‹é¤å»³å‰›å¥½é‡åˆ°è¡—é“æ¶ˆæ¯’ï¼Œæ»¿åœ°çš„ğŸª³åˆ°è™•è·‘ï¼çœŸçš„æ˜¯å´©æ½°ï¼Œè€Œä¸”æˆ‘æ„Ÿè¦ºå¥½åƒæœ‰èŸ‘è‚é£›åˆ°æˆ‘çš„æ‰‹ä¸Šâ€¦. æˆ‘è¶•å¿«ç”©äº†ä¸€ä¸‹ï¼Œä½†ç”±æ–¼åœ°ä¸Šå·²ç¶“å¾ˆå¤šğŸª³äº†ï¼Œä¸æ˜¯éå¸¸ç¢ºå®šæ˜¯ä¸æ˜¯æˆ‘çš„éŒ¯è¦ºâ€¦ åæ­£è¶•å¿«è·‘å»éš”å£çš„sogoæ´—æ‰‹\nç¬¬äºŒç«™: é‡‘ç…æ¹–è´è¶åœ’ ç¬¬äºŒç«™é‡‘ç…æ¹–è´è¶åœ’ï¼Œé€™æ˜¯ä¸€å€‹å®Œå…¨å…è²»çš„åœ’å€ï¼Œç”±æ–¼è‰¾å€«æ˜¯è«‹å‡ä¸‹å»ï¼Œæ‰€ä»¥å¹¾ä¹æ˜¯åŒ…å ´ï¼ è£¡é¢çš„å¤§ç™½æ–‘è´è¶è¶…å¤šï¼Œå°±ä¸€ç›´ç˜‹ç‹‚æ‹ ç¬¬ä¸‰ç«™: é€é™åœ’ ä¸€å€‹1939å¹´çš„è€åˆ¥é¤¨ï¼Œå¾Œä¾†é‡å»ºéå¾Œé–‹æ”¾åƒè§€ï¼Œè£¡é¢ä¿ç•™éƒ¨åˆ†æ—¥æ²»æ™‚ä»£çš„è£æ½¢ ![é€é™åœ’2]é€é™åœ’2.webp?width=1024px#center)\nç¬¬å››ç«™: æœè²¿ç¤¾å€ ä¸€å€‹å¾ˆç‰¹åˆ¥çš„åœ‹å®…ï¼Œç«Ÿç„¶æ˜¯å¼§å½¢å…©æ’åœæˆä¸€åœˆï¼ ç¬¬äº”ç«™: é§äºŒè—è¡“ç‰¹å€ å‰›å¥½é‡ä¸Šæœ€å¾Œä¸€é€±çš„å°ç£è¨­è¨ˆå±•ï¼åŸæœ¬æ˜¯æƒ³èªªæ™šé¤é»éš¨ä¾¿æ™ƒæ™ƒçš„ï¼Œçœ‹åˆ°é€™æŒ‡ç¤ºç‰Œå¾Œå°±çŸ¥é“è¦åœ¨é€™å¾…å¾ˆä¹…\nå…¥å³¶æ²’å¤šä¹…å°±çœ‹åˆ°ç«è»Šï¼Œæœ‰ç¨®ä¾†åˆ°éŠæ¨‚åœ’çš„æ„Ÿè¦º\nä¸€å€‹å¾ˆé©åˆæ‹ç¶²ç´…ç…§çš„è¨­è¨ˆ\nä¸€å€‹å¾ˆé…·çš„æ–‡å­—è¨­è¨ˆï¼Œæ­£é¢çœ‹æ˜¯ Japan ï¼Œä½†è½‰éä¾†å°±è®Šæˆå°ç£\nä¸­é–“æœ‰å€‹å¾ˆé…·çš„é…’å§ï¼Œæ™‚é–“åˆ°æœƒæ›é¡è‰²\næœªä¾†çš„å°ç£ï¼Œè¦ºå¾—è¨­è¨ˆå¾ˆç«‹é«”ï¼Œå¾ˆé…·ç‚«\nç¾å ´å¯¦åœ¨é‚„æœ‰å¤ªå¤šå¤ªå¤šï¼Œå¯æƒœæ™‚é–“ä¸å¤ ï¼Œå› ç‚ºæœ¬ä¾†å°±åªæ˜¯æ‰“ç®—ä¾†æ™ƒæ™ƒï¼Œä¸æ˜¯ç‚ºäº†è¨­è¨ˆå±•è€Œä¾†ï¼Œä½†å¦‚æœèªçœŸé€›ï¼Œå¯ä»¥é€›ä¸€æ•´å¤©å‘¢ï¼\nç¬¬å…­ç«™: ç‘è±å¤œå¸‚ è‰¾å€«ä¸æ˜¯ç¬¬ä¸€æ¬¡ä¾†åˆ°ç‘è±å¤œå¸‚ï¼Œä½†å»æ˜¯ç¬¬ä¸€æ¬¡é€›ç‘è±å¤œå¸‚ï¼\nå¤§å­¸æ™‚æ›¾ä¾†éä¸€æ¬¡ï¼Œç¬¬ä¸€æ¬¡ä¾†çš„æ™‚å€™è¢«ç‘è±å¤œå¸‚ä¸Šäº†ä¸€èª²ï¼ŒåŸä¾†ä¸æ˜¯æ‰€æœ‰å°ç£çš„å¤œå¸‚éƒ½æ˜¯æ¯å¤©éƒ½é–‹\nå› ç‚ºåœ¨é§äºŒé€›å¤ªä¹…äº†ï¼Œæ‰€ä»¥åœ¨é§äºŒåƒäº†æ¨‚æª¸æ¼¢å ¡å¡«è‚šå­ï¼Œæ²’æœ‰å¤ªé¤“å°±è²·äº†æ±å±±é´¨é ­å›é£¯åº—åƒï¼Œçµæœï¼å¿˜äº†å—éƒ¨éƒ½åƒç”œçš„ï¼Œå¥½ä¸ç¿’æ…£ QAQ\nçµ‚é»ç«™: Sam çš„å®¶ æœ€å¾Œä¸€ç«™ï¼Œä»Šæ—¥ä½å®¿ 85 å¤§æ¨“ Sam çš„å®¶ï¼Œæ•´é«”ä½çš„é‚„ä¸éŒ¯ï¼Œéš”éŸ³é‚„è¡Œï¼Œä¸æœƒè½åˆ°éš”å£çš„åµé¬§ã€‚\n","date":"October 21, 2022","img":"/posts/travel/2022_kaohsiung_liuqiu_island_day1/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/travel/2022_kaohsiung_liuqiu_island_day1/feature_hu354d1c4cabe196d8fc2ab26c8d4ca830_22302_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/travel/2022_kaohsiung_liuqiu_island_day1/","smallImg":"/posts/travel/2022_kaohsiung_liuqiu_island_day1/feature_hu354d1c4cabe196d8fc2ab26c8d4ca830_22302_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"TRAVEL","url":"/tags/travel/"}],"timestamp":1666310400,"title":"2022 é«˜é›„ å°ç‰çƒ ä¸‰å¤©å…©å¤œä¹‹ Day1"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"Basic Beanstalk æ˜¯ PAAS æœå‹™ï¼Œå¯ä»¥é€é Config (.ebextensions) è¨­å®šå»å»ºç«‹ç’°å¢ƒï¼Œä¾‹å¦‚åŸºæœ¬çš„ Three Tire Architecture : Client -\u0026gt; Server -\u0026gt; DBï¼Œè€Œæˆ‘å€‘åªéœ€è¦å°ˆæ³¨åœ¨ Application ä¸Šçš„é–‹ç™¼ Beanstalk æœ¬èº«æ˜¯å…è²»çš„ï¼Œåªéœ€è¦ä»˜åŸæœ¬åº•ä¸‹çš„è³‡æºè²»ç”¨ ä¾‹å¦‚ EC2, ELB ç­‰ç­‰ æ”¯æ´å¤šå€‹ Programming Language ï¼Œä¹Ÿæ”¯æ´ Docker æœ‰ Deployment ç­–ç•¥ å’Œ Rollback ç­–ç•¥ å¯ä»¥å‚™ä»½ç¾åœ¨çš„è¨­å®š (Save Configuration) ç’°å¢ƒè¨­å®šçš„é †åº é«˜åˆ°ä½ ç›´æ¥ç’°å¢ƒè¨­å®š Save Configuration .ebextensions è¨­å®š Default Value å¯ä»¥è¨­å®š Management Updated å¯ä»¥æ’æˆå›ºå®šæ™‚é–“å»åš patch å¯ä»¥é¸æ“‡æ˜¯ç›´æ¥æ›´æ–°èˆŠçš„ï¼Œé‚„æ˜¯å…ˆå»ºç«‹ä¸€å°æ–°çš„æ©Ÿå™¨å®‰è£å¥½å»å–ä»£ Swap URL ï¼Œé€éæ­¤åŠŸèƒ½åšåˆ° Blue/Green Deployment ï¼Œåº•å±¤æ˜¯æ›´æ”¹ Router53 Record Multi-Container åº•å±¤æ˜¯ç”¨ECS åšåˆ° Basic Of Components Application Application Version Deploy Code æ”¾åœ¨ S3ï¼ŒæŒ‡å‘ç‰¹å®š S3 Object Version Version æœ‰ä¸Šé™ï¼Œå¯ä»¥é€é Application Life Cycle Policy å»åˆªé™¤èˆŠçš„ Version å¯ä»¥è¨­å®šä¸Šé™å¤šå°‘ Version è¦å­˜å’Œä¿ç•™å¤šå°‘å¤© ä¹Ÿå¯ä»¥è¨­å®š Source æ˜¯å¦è¦ä¿ç•™åœ¨ S3 Environment Tire Web Server: Worker: åœ¨ä¸Šé¢åŸ·è¡Œä¸€äº›ç¨‹å¼ï¼Œä¾‹å¦‚å¯ä»¥æ˜¯SQS çš„ Puller ï¼Œå°‡ Queue è£¡é¢è³‡æ–™æ‹‰ä¸‹ä¾†è™•ç†ã€‚æœ‰ Auto Scaling Group å¯ä»¥æ ¹æ“š SQS Queen Number å»åš Auto Scaling Environment Types å–®ä¸€ Instance Environment Load-balancing, Autoscaling Environment: for web server Autoscaling Only : for worker Tire . ebextensions å»ºç«‹ Resource æ³¨æ„ Resource å¦‚æœé€é Beanstalk ä¸€èµ·å»ºç«‹çš„è©±ï¼Œç æ‰ç’°å¢ƒæ™‚ä¹Ÿæœƒè·Ÿè‘—ä¸€èµ·ç æ‰ï¼Œæ‰€ä»¥ Storage çš„éƒ¨åˆ†æœ€å¥½åˆ†é–‹å»ºç«‹ï¼Œä¾‹å¦‚ RDSã€‚ 1Resources: 2 DynamoDBTable: 3 Type: AWS::DynamoDB::Table 4 Properties: 5 KeySchema: 6 HashKeyElement: 7 AttributeName: id 8 AttributeType: S 9 # create a table with the least available rd and wr throughput 10 ProvisionedThroughput: 11 ReadCapacityUnits: 1 12 WriteCapacityUnits: 1 13 14 NotificationTopic: 15 Type: AWS::SNS::Topic 16 17Outputs: 18 NotificationTopicArn: 19 Description: Notification topic ARN 20 Value: { \u0026#34;Ref\u0026#34; : \u0026#34;NotificationTopic\u0026#34; } 21 22option_settings: 23 aws:elasticbeanstalk:application:environment: 24 # these are assigned dynamically during a deployment 25 NOTIFICATION_TOPIC: \u0026#39;`{\u0026#34;Ref\u0026#34; : \u0026#34;NotificationTopic\u0026#34;}`\u0026#39; 26 DYNAMODB_TABLE: \u0026#39;`{\u0026#34;Ref\u0026#34; : \u0026#34;DynamoDBTable\u0026#34;}`\u0026#39; 27 AWS_REGION: \u0026#39;`{\u0026#34;Ref\u0026#34; : \u0026#34;AWS::Region\u0026#34;}`\u0026#39; Command v.s Container Command commands : æ˜¯åœ¨ Ec2 Instance ä¸ŠåŸ·è¡Œï¼Œä¸¦ä¸”åœ¨ Application Code unpackedä¹‹å‰ï¼ŒæŒ‰ç…§è‹±æ–‡åå­—é †åºåŸ·è¡Œ container_commands : æ˜¯åœ¨ Application code unpacked ä¹‹å¾Œï¼Œä½†åœ¨éƒ¨ç½²ä¹‹å‰ï¼Œå¯ä»¥ç”¨ä¾†ä¿®æ”¹ source code leader_only : ç”± Beanstalk æ±ºå®šå–®ä¸€ instance ç•¶ Leader åŸ·è¡Œï¼Œä¸¦ä¸”æœƒæ¯”å…¶ä»–æ²’æœ‰ leader_only çš„ command æ—©åŸ·è¡Œï¼Œä¸»è¦ç”¨åœ¨åªèƒ½æˆ–åªéœ€è¦åŸ·è¡Œä¸€æ¬¡çš„ Commandã€‚ 1 create_hello_world_file: 2 command: touch hello-world.txt 3 cwd: /home/ec2-user 4 5container_commands: 6 modify_index_html: 7 command: \u0026#39;echo \u0026#34; - modified content\u0026#34; \u0026gt;\u0026gt; index.html\u0026#39; Deployment Policy Policy æè¿° æ¨å¤±æ•—å½±éŸ¿ æ¨æ©Ÿé€Ÿåº¦ æ¨å¹¾æ™‚æ˜¯å¦æœ‰ Downtime æ˜¯å¦éœ€è¦ä¿®æ”¹ DNS Record Rollback æ–¹å¼ All at once ä¸€æ¬¡å…¨éƒ¨æ©Ÿå™¨ç›´æ¥æ¨æ©Ÿ Downtime æœ€å¿« æœ‰ å¦ éœ€é‡æ–°æ¨èˆŠçš„Version Rolling ä¸€æ¬¡ä¸‹æ‰å¹¾å°ç·šä¸Šæ©Ÿå™¨ï¼Œè£å¥½æ–°çš„code åœ¨é‡æ–°ä¸Šç·šã€‚ åªæœ‰æ­£åœ¨æ¨çš„é‚£å¹¾å°æœƒå£æ‰ï¼Œç·šä¸Šæœ‰å¯èƒ½æœƒéƒ¨åˆ†æ©Ÿå™¨æ˜¯æ–°çš„ Code ï¼Œéƒ¨åˆ†æ©Ÿå™¨æ˜¯èˆŠçš„ Code æ¯” All at once æ…¢ ç„¡ å¦ éœ€é‡æ–°æ¨èˆŠçš„Version Rolling with an additional batch è·Ÿ Rolling å·®ä¸å¤šï¼Œå·®åˆ¥åœ¨æ–¼æ˜¯å…ˆå»ºç«‹å…¨æ–°çš„æ©Ÿå™¨æ¨å®Œæ©Ÿä»¥å¾Œï¼Œåœ¨å–ä»£ç·šä¸Šçš„ é™¤äº†ä¸€é–‹å§‹æ¨å£æ²’ä¸Šç·šå·²å¤–ï¼Œå…¶ä»–è·Ÿ Rolling Policy ä¸€æ¨£ æ¯” Rolling æ…¢ ç„¡ å¦ éœ€é‡æ–°æ¨èˆŠçš„Version Immutable å»ºç«‹å…¨æ–°çš„ Auto Scaling Groupï¼Œç„¶å¾Œå°‡æµé‡è½‰åˆ°æ–°çš„ Auto Scaling Group æ¯”è¼ƒæ²’æœ‰ï¼Œå› ç‚ºå¯ä»¥å…ˆæ¸¬è©¦å…¨æ–°çš„ Auto Scaling Group æ‰åˆ‡æ› æ…¢ ç„¡ ç„¡ åˆ‡å›æµé‡åˆ°èˆŠçš„ Auto Scaling Group Traffic Splitting æ ¹æ“šæ¬Šé‡æ…¢æ…¢çš„å°‡æµé‡åˆ‡åˆ°æ–°çš„æ©Ÿå™¨ä¸Š å–æ±ºæ–¼æµé‡çš„æ¬Šé‡ æ…¢ ç„¡ ç„¡ å°‡æ¬Šé‡åˆ‡å›åˆ°èˆŠçš„ Blue/Green é€é DNS Record åˆ‡æ›æµé‡ æ¯”è¼ƒå°ï¼Œå› ç‚ºæ˜¯å…¨æ–°çš„ä¸€çµ„æ©Ÿå™¨ Ready æ‰åˆ‡ æ…¢ ç„¡ æ˜¯ é‡æ–°è¨­å®š DNS Record æŒ‡å‘èˆŠçš„æ©Ÿå™¨ ","date":"October 4, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/beanstalk-certification-note/","smallImg":"","tags":[{"title":"Beanstalk","url":"/tags/beanstalk/"}],"timestamp":1664841600,"title":"Beanstalk Certification Note"},{"categories":[{"title":"LIFE","url":"/categories/life/"}],"content":"è³¼è²·å¥‘æ©Ÿ è‰¾å€«ä¹‹å‰åœ¨æµ·å¤–å°±è®€å¤§å­¸ï¼Œå¤§å­¸æ™‚æœŸæ˜¯ä½¿ç”¨ Amazon çš„é–±è®€å™¨ Kindleã€‚ç”±æ–¼ Kindle çš„ä¸­æ–‡æ›¸ä¸€ç›´å¾ˆå°‘ï¼Œæ‰€ä»¥è‰¾å€«å›å°å¾Œä¸€ç›´æœ‰è€ƒæ…®æ›´æ›å…¶ä»–å¹³å°çš„é–±è®€å™¨ã€‚ä»Šæ—¥å»èª å“æ›¸å±€å–ç·šä¸Šé è³¼æ›¸æ™‚ï¼Œå‰›å¥½çœ‹åˆ°å‰›æ¨å‡ºçš„ Kobo Clare 2E æ­£åœ¨æ‰“æ´»å‹•é€1200çš„è³¼æ›¸é‡‘ï¼ŒåŠ ä¸Šé‡ä¸Šèª å“å—è¥¿åº—çš„é€±å¹´æ…¶ï¼Œè€Œä¸”å‰›å¥½ç¾å ´æœ‰ç¾è²¨ã€‚æœ€é‡è¦é€™æ¬¾ Kobo çš„å¤§å°å‰›å¥½è·Ÿæˆ‘åŸæœ¬çš„ Kindle ä¸€æ¨£éƒ½æ˜¯6å¯¸å¤§å°ï¼Œå°±é€™æ¨£å™´äº† 5000 å¡Šæ–°å°å¹£ã€‚\næ´»å‹•å’Œå„ªæƒ  Kobo Clare 2E 1200 è³¼æ›¸é‡‘ åœ¨ä¹æœˆä¸‰åè™Ÿä»¥å‰è³¼è²· Kobo Clara 2E æœ‰è³¼æ›¸é‡‘\nèª å“å—è¥¿é€±å¹´æ…¶ 800 ç¦®å· æ´»å‹•è³‡è¨Š: å…¨é¤¨ ï¼ˆä¸å«ç¾å¦é¦™æ°›å°ˆæ«ƒï¼‰ç•¶æ—¥ç´¯è¨ˆæ»¿5,000é€800\nå…§å«ï½œå…¨é¤¨$500é›»å­æŠµç”¨åˆ¸Ã—1å¼µ+æŒ‡å®šæœé…$200é›»å­æŠµç”¨åˆ¸Ã—1å¼µï¼‹æŒ‡å®šé¤é£²$100é›»å­æŠµç”¨åˆ¸Ã—1å¼µ\né›–ç„¶æŒ‡å®šæœé…å°è‰¾å€«æ²’æœ‰ç”¨ï¼Œä½†ç”±æ–¼è‰¾å€«é‚„ç®—ç¶“å¸¸å»èª å“åƒé£¯å’Œè²·æ›¸ï¼Œæ‰€ä»¥å…¨é¤¨ 500 å’ŒæŒ‡å®š 100 é¤é£²å·ç®—é‚„è¡Œã€‚ èª å“é‡‘å¡çºŒå¡ 100 å…ƒ è‰¾å€«å‰›å¥½ä¸Šå€‹æœˆæ‰çºŒé‡‘å¡æœƒå“¡ï¼Œæœ‰æ”¶åˆ° 100 å…ƒç¦®å·å‰›å¥½å¯ä»¥æŠ˜æŠµ\nKobo Clara 2E 4500 + åŸå» çš„ç£æ„Ÿæ‡‰ä¿è­·æ®¼ 899 - èª å“ 100 çºŒå¡é‡‘ = 5299\nKobo Clara 2E é–‹ç®± æˆ°åˆ©å“åˆç…§ å…§ç›’ä¸­çš„ Kobo Clara Kobo Clara 2E(å·¦) v.s Kindle (å³) è£ä¸Šæ®¼çš„ Kobo Clara 2E OverDrive å€Ÿæ›¸ Kobo æœ‰æ•´åˆ OverDrive ï¼Œè€Œ OverDrive æœ‰æ•´åˆå°åŒ—å¸‚ç«‹åœ–æ›¸é¤¨ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åœ¨ Kobo ä¸Šé¢å€Ÿä¸€äº›æ›¸ã€‚ä¸éç›®å‰ OverDrive çš„æ›¸ç±æ¯”è¼ƒå°‘ï¼Œè€Œä¸”éƒ½æ˜¯è‹±æ–‡æ›¸ç‚ºä¸»ã€‚ æ³¨æ„: éœ€è¦æœ‰å°åŒ—å¸‚ç«‹åœ–æ›¸é¤¨çš„æœƒå“¡\nç¬¬ä¸€æ­¥ï¼šåˆ°è¨­å®šé é¢ ç¬¬äºŒæ­¥: é»é¸ OverDrive ç¬¬ä¸‰æ­¥: é»é¸ OverDrive æ—é‚Šçš„ é–‹å§‹ ç¬¬å››æ­¥: ç™»å…¥ OverDrive å¦‚æœæœ‰è¨»å†Šå°åŒ—å¸‚ç«‹åœ–æ›¸é¤¨çš„è©±\nå¡è™Ÿé è¨­æ˜¯èº«ä»½è­‰å­—è™Ÿ å¯†ç¢¼æ˜¯ç”Ÿæ—¥æ—¥æœŸï¼ˆæœˆå’Œæ—¥å››ç¢¼ï¼‰ ç¬¬äº”æ­¥: åœ¨æ¢ç´¢è£¡é¢æœ‰ OverDrive é¸é … ç¬¬å…­æ­¥: è‰¾å€«ä¸‹è¼‰å®Œä¸€æœ¬æ›¸çš„é–±è®€ç¯„ä¾‹ ","date":"September 25, 2022","img":"/posts/unboxing/kobo_clara_2e/feature.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"/posts/unboxing/kobo_clara_2e/feature_hu9befe0ed2921d1478d88b4ddbb902b46_1868084_500x0_resize_q75_h2_box_2.webp","permalink":"/posts/unboxing/kobo_clara_2e/","smallImg":"/posts/unboxing/kobo_clara_2e/feature_hu9befe0ed2921d1478d88b4ddbb902b46_1868084_180x0_resize_q75_h2_box_2.webp","tags":[{"title":"é–‹ç®±æ–‡","url":"/tags/%E9%96%8B%E7%AE%B1%E6%96%87/"}],"timestamp":1664064000,"title":"Kobo Clare 2E é–‹ç®±æ–‡"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":" CodeDeploy æ˜¯ AWS éƒ¨ç½²æœå‹™ï¼Œé¡ä¼¼ Ansible, Chef, Puppet ç­‰ç­‰ è¦éƒ¨ç½²çš„æ©Ÿå™¨ä¸Šé¢éœ€è¦å®‰è£ CodeDeploy Agent, Agent æœƒä¸€ç›´å¾ CodeDeploy æ‹‰éœ€è¦åŸ·è¡Œçš„å‹•ä½œ Support Ec2, Lambda, ECS Basic Step of EC2 éœ€è¦éƒ¨ç½²çš„æ©Ÿå™¨ä¸Šé¢éœ€è¦å®‰è£ CodeDeploy Agent Agent æœƒä¸€ç›´å˜—è©¦å¾ CodeDeploy æ‹‰éœ€è¦åšçš„å·¥ä½œ CodeDeploy æœƒæä¾› appspec.ymal è¦å®‰è£çš„ç¨‹å¼æœƒå¾ S3 (IAM Role éœ€è¦ S3 æ¬Šé™ï¼‰æˆ– Github ç­‰åœ°æ–¹æ‹‰ä¸‹ä¾†ï¼Œä¸¦é–‹å§‹å®‰è£ CodeDeploy Agent æœƒå›è¦†æˆåŠŸæˆ–å¤±æ•— éƒ¨ç½² EC2 å¦‚æœ Source å¾ S3 ï¼Œ IAM Role éœ€è¦ S3 æ¬Šé™ å’Œ éœ€è¦æœ‰ Versioning Deployment Type In Place: ç¾æœ‰çš„æ©Ÿå™¨æœƒä¸‹ç·šï¼Œå®‰è£å¥½æ–°ç‰ˆæœ¬ï¼Œå†é‡æ–°ä¸Šç·šã€‚ ä¸‹ç·šçš„æ•¸é‡å–æ±ºæ–¼ Deployment configuration Environment : Auto Scaling Group, EC2 æˆ– On-premises Blue/Green: æœƒå»ºç«‹æ–°çš„ Instance å–ä»£èˆŠçš„ï¼Œå¿…é ˆè¦æœ‰ ELB åœ¨ EC2 å‰é¢ é è¨­ Deployment configuration CodeDeployDefault.AllAtOnce CodeDeployDefault.HalfAtTime CodeDeployDefault.OneAtTime Trigger v.s. Cloud Watch Event Trigger æ˜¯ CodeDeploy å…§å»ºï¼Œå¯ä»¥æ ¹æ“šç‰¹å®šäº‹ä»¶ç™¼é€ SNS Cloud Watch Event ç”± CloudWatch ç›£æ§äº‹ä»¶ï¼Œè§¸ç™¼å…¶ä»– AWS æœå‹™ Rollback Manual Rollback : æ‰‹å‹•ç›´æ¥éƒ¨ç½²èˆŠçš„ç‰ˆæœ¬ Automatic Rollback æœ‰å…©ç¨®é¸æ“‡ Rollback when deployment failed : ä»»ä½•ä¸€å€‹éƒ¨ç½²å¤±æ•—ï¼Œå°±è‡ªå‹• rollback å…¨éƒ¨ Rollback when alarms thresholds are met: é€™é‚Šæ•´åˆ Cloud Watch Alarm éƒ¨ç½² On-Premises Instance ç”¨ IAM User (åªé©åˆå–®å°æ©Ÿå™¨ï¼‰ å»ºç«‹æœ‰ S3 æ¬Šé™çš„ IM User ï¼Œä¸¦å–å¾— access key åœ¨æ©Ÿå™¨ä¸Šå»ºç«‹ codedeploy.onpremises.yml å°‡ access key æ”¾å…¥ å®‰è£ AWS CLI \u0026amp; CodeDeploy Agent call register api 1 aws deploy register-on-premises-instance --instance-name AssetTag12010298EX --iam-user-arn arn:aws:iam::444455556666:user/CodeDeployUser-OnPrem å¯ä»¥å° CodeDeploy ä¸Šçš„ on-premises instance åŠ ä¸Š tags ï¼Œä¸¦é€é tag å»ºç«‹ deployment group ç”¨ IAM Role å»ºç«‹ IAM Role æ“æœ‰ S3 æ¬Šé™ å»ºç«‹ IAM User æœ‰ STS æ¬Šé™ï¼Œå¯ä»¥ assume-role åœ¨æ©Ÿå™¨ä¸Šå»ºç«‹ codedeploy.onpremises.yml 1--- 2iam_session_arn: iam-session-arn 3aws_credentials_file: credentials-file 4region: supported-region call register-on-premises-instance api 1aws deploy register-on-premises-instance --instance-name name-of-instance --iam-session-arn arn:aws:sts::account-id:assumed-role/role-to-assume/session-name å¯ä»¥å° CodeDeploy ä¸Šçš„ on-premises instance åŠ ä¸Š tags ï¼Œä¸¦é€é tag å»ºç«‹ deployment group éƒ¨ç½² Lambda Function Deployment configuration Canary: åˆ†å…©æ¬¡åˆ‡æµé‡ï¼Œå¯ä»¥è¨­å®šç™¾åˆ†æ¯”æ±ºå®šä¸€æ¬¡è¦åˆ‡å¤šå°‘æµé‡åˆ°æ–°çš„ç‰ˆæœ¬ï¼Œç•¶ç¬¬ä¸€æ¬¡æ­£å¸¸æ²’å•é¡Œå°±åˆ‡å‰©ä¸‹çš„å…¨éƒ¨æµé‡åˆ°æ–°çš„ç‰ˆæœ¬ Linear: å›ºå®šæ™‚é–“å€é–“å’Œå›ºå®šç™¾åˆ†æ¯”å¢é•·æµé‡åˆ°æ–°çš„ç‰ˆæœ¬ All-at-once: ä¸€æ¬¡å…¨éƒ¨åˆ‡æ› appspec.ymal 1version: 0.0 2os: operating-system-name 3files: 4 source-destination-files-mappings 5permissions: 6 permissions-specifications 7hooks: 8 deployment-lifecycle-event-mappings EC2 or On-Premises Instance Hook Basic ApplicationStop: æœå‹™åœæ­¢å‰ DownloadBundle: ä¸‹è¼‰æ–°ç‰ˆæœ¬çš„æª”æ¡ˆåˆ°æ©Ÿå™¨ä¸Šè‡¨æ™‚æ–‡ä»¶å¤¾ BeforInstall : é–‹å§‹å®‰è£å‰ï¼Œå¯ä»¥å…ˆå®‰è£ä¸€äº›æˆ–åŸ·è¡Œç¨‹å¼ Install: å¾è‡¨æ™‚æ–‡ä»¶å¤¾å®‰è£åˆ°å¯¦éš›æ–‡ä»¶å¤¾ AfterInstall : å¯ä»¥ä¿®æ”¹ä¸€äº›è¨­å®šæˆ–ä¿®æ”¹ä¸€äº›æª”æ¡ˆæ¬Šé™ç­‰ ApplicationStart: æœå‹™é‡å•Ÿ ValidateService: é©—è­‰æœå‹™ å¦‚æœæœ‰ ELB BeforeBlockTraffic: å¾ ELB ä¸‹æ‰ä¹‹å‰ BlockTraffic: åœæ­¢æµé‡åˆ° Instance AfterBlockTraffic: : å¾ ELB ä¸‹æ‰ä¹‹å¾Œ BeforeAllowTraffic: åœ¨ä¸Šå› ELB ä¹‹å‰ AllowTraffic: é–‹å§‹æ¥æµé‡ AfterAllowTraffic: åœ¨ä¸Šå› ELB ä¹‹å¾Œ å¯¦éš›é †åº BeforeBlockTraffic BlockTraffic AfterBlockTraffic ApplicationStop DownloadBundle BeforeInstall Install AfterInstall ApplicationStart ValidateService BeforeAllowTraffic AllowTraffic AfterAllowTraffic Lambda Function Hook BeforeAllowTraffic BlockTraffic AfterBlockTraffic Environment Variable APPLICATION_NAME DEPLOYMENT_ID DEPLOYMENT_GROUP_NAME : ç¨‹å¼å¯ä»¥æ ¹æ“š Group ä¾†åˆ¤æ–·è¦åšçš„äº‹æƒ…ï¼Œä¾‹å¦‚ä¸åŒç’°å¢ƒ DEPLOYMENT_GROUP_ID LIFECYCLE_EVENT: Hook åå­— ","date":"September 18, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/codedeploy-certification-note/","smallImg":"","tags":[{"title":"CodeDeploy","url":"/tags/codedeploy/"}],"timestamp":1663459200,"title":"CodeDeploy Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"Basic Stage è£¡é¢å¯ä»¥æœ‰è¨±å¤š Actionï¼Œ Stage è·Ÿ Stage ä¹‹é–“æ˜¯å¯ä»¥é—œè¯çš„ runOrder å¯ä»¥ç”¨ä¾†æ±ºå®šé †åºæ€§ï¼Œ é è¨­æ˜¯1 ï¼ŒåŒæ¨£çš„ runOrder ä»£è¡¨åŒæ™‚è·‘ Artifacts: S3 é è¨­ä½¿ç”¨ AWS/S3 key åŠ å¯†ï¼Œä½†å¯ä»¥é¸æ“‡ä½¿ç”¨ KMS ä¹Ÿå¯ä»¥å»ºç«‹ä¸€å€‹ S3 çš„ Action ï¼Œ Copy artifacts åˆ°å…¶ä»– S3 Bucket CodePipeline å¯ä»¥é€é ColudFormation å»ºç«‹ Action Approval Action: å¯ä»¥è¨­å®šéœ€è¦ Manual Approval æ‰å¯ä»¥é€²å»åŸ·è¡Œ\nSource Action : GitHub, CodeCommit, S3, ECR\nCodePipeline ç›£æ¸¬æ”¹è®Šé¸æ“‡ æ ¹æ“š CloudWatch Events CodePipeline é€±æœŸæ€§å»æª¢æŸ¥ Build Action : CodeBuild, and Jenkins\nDeploy Action: AWS CodeDeploy, Beanstalk, CloudFormation, ECS\nå¯ä»¥å»ºç«‹ä¸åŒ Region çš„åŒæ™‚éƒ¨ç½² CloudFormation å¯ä»¥åŸ·è¡Œ Create or update a stack Delete a stack Replace a failed stack Create or replace a change set execute a change set ç‰¹å®šæŒ‡å®š S# template Invoke Action : è§¸ç™¼ Lambda Function\nTest Action: CodeBuild, Jenkins and or open source\nå¯ä»¥è¨­å®š Input artifacts and output artifacts Custom Action: éœ€è¦å»ºç«‹ä¸€å€‹ Job Worker å»åŸ·è¡Œç¨‹å¼\nExample sequenceDiagram CodePipeline-\u003e\u003e+CodeCommit: Trigger loop CodeCommit-\u003e\u003e CodeCommit: package source code end CodeCommit-\u003e\u003e+S3 : push to artifacts CodeCommit-\u003e\u003e+CodePipeline:Success CodePipeline-\u003e\u003e+CodeBuild: Trigger CodeBuild-\u003e\u003e+S3: pull artifacts loop CodeBuild-\u003e\u003e CodeBuild: build end CodeBuild-\u003e\u003e+S3: push to artifacts CodeBuild-\u003e\u003e+CodePipeline:Success CodePipeline-\u003e\u003e+CodeDeploy: Trigger CodeDeploy-\u003e\u003e+Instance: Deploy ","date":"September 18, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/codepipeline-certification-note/","smallImg":"","tags":[{"title":"CodePipeline","url":"/tags/codepipeline/"}],"timestamp":1663459200,"title":"CodePipeline Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"CodeBuild Basic AWS è¨—ç®¡ Build Serviceé¡ä¼¼ Jenkinsã€‚å¯ä»¥ç·¨è­¯ï¼Œè·‘å–®å…ƒæ¸¬è©¦ï¼Œæˆ–è€…æ‰“åŒ… package åˆ° artifacts. æ ¹æ“š é‹è¡ŒåŠ› å’Œ åŸ·è¡Œæ™‚é–“ä¾†è¨ˆåƒ¹ Build Log å¯ä»¥é€åˆ° CloudWatch or S3 CodeBuild æ˜¯ä½¿ç”¨ Docker æŠ€è¡“ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ Local åŸ·è¡Œã€‚ä¹Ÿå¯ä»¥å®¢è£½åŒ–å€‹äºº Docker Image å»ç•¶ Build ç’°å¢ƒ Source å¯ä»¥å¾ Github, CodeCommit, S3, Bitbucket å’Œ Github Enterprise æ‹‰ å¯ä»¥è¨­å®š Build Timeout æˆ– Queue Timeout ä¹Ÿå¯ä»¥è¨­å®šç‰¹å®š VPC åŸ·è¡Œ AWS æœ‰é è¨­ Environment Variable ï¼Œä¹Ÿå¯ä»¥å®¢è£½åŒ–å€‹äººçš„ç’°å¢ƒè®Šæ•¸ Cloud Watch Monitor Metrix type Succeeded Builds Sum Failed Builds Sum Build Sum Duration Average å¯ä»¥æ ¹æ“š Matrix è¨­å®š Alert é€šçŸ¥ CloudWatch Event å¯ä»¥è¨­å®š Scheduler å»è§¸ç™¼ Build å¯ä»¥è½ç‰¹å®š Event å» Trigger å…¶ä»– AWS æœå‹™ é¡ä¼¼ Lambda , SNS ç­‰ç­‰ Buildspec Example Java Package to Artifacts 1version: 0.2 2 3env: 4 variables: 5 JAVA_HOME: \u0026#34;/usr/lib/jvm/java-8-openjdk-amd64\u0026#34; 6 parameter-store: 7 LOGIN_PASSWORD: /CodeBuild/dockerLoginPassword 8 9phases: 10 install: 11 commands: 12 - echo Entered the install phase... 13 - apt-get update -y 14 - apt-get install -y maven 15 finally: 16 - echo This always runs even if the update or install command fails 17 pre_build: 18 commands: 19 - echo Entered the pre_build phase... 20 - docker login -u User -p $LOGIN_PASSWORD 21 finally: 22 - echo This always runs even if the login command fails 23 build: 24 commands: 25 - echo Entered the build phase... 26 - echo Build started on `date` 27 - mvn install 28 finally: 29 - echo This always runs even if the install command fails 30 post_build: 31 commands: 32 - echo Entered the post_build phase... 33 - echo Build completed on `date` 34 35reports: 36 arn:aws:codebuild:your-region:your-aws-account-id:report-group/report-group-name-1: 37 files: 38 - \u0026#34;**/*\u0026#34; 39 base-directory: \u0026#39;target/tests/reports\u0026#39; 40 discard-paths: no 41 reportGroupCucumberJson: 42 files: 43 - \u0026#39;cucumber/target/cucumber-tests.xml\u0026#39; 44 discard-paths: yes 45 file-format: CUCUMBERJSON # default is JUNITXML 46artifacts: 47 files: 48 - target/messageUtil-1.0.jar 49 discard-paths: yes 50 secondary-artifacts: 51 artifact1: 52 files: 53 - target/artifact-1.0.jar 54 discard-paths: yes 55 artifact2: 56 files: 57 - target/artifact-2.0.jar 58 discard-paths: yes 59cache: 60 paths: 61 - \u0026#39;/root/.m2/**/*\u0026#39; Buildspec Example Build Docker Image to ECR 1version: 0.2 2 3phases: 4 pre_build: 5 commands: 6 - echo Logging in to Amazon ECR... 7 - aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com 8 build: 9 commands: 10 - echo Build started on `date` 11 - echo Building the Docker image... 12 - docker build -t $IMAGE_REPO_NAME:$IMAGE_TAG . 13 - docker tag $IMAGE_REPO_NAME:$IMAGE_TAG $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG 14 post_build: 15 commands: 16 - echo Build completed on `date` 17 - echo Pushing the Docker image... 18 - docker push $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG ä½¿ç”¨ Code Build é©—è­‰ Code Commit Pull Request åŸå§‹ AWS æ–‡ç«  Validating AWS CodeCommit Pull Requests with AWS CodeBuild and AWS Lambda\n","date":"September 13, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/codebuild-certification-note/","smallImg":"","tags":[{"title":"CodeBuild","url":"/tags/codebuild/"}],"timestamp":1663027200,"title":"CodeBuild Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"Basic AWS çš„ Git Version Control æœå‹™ï¼Œåƒæ˜¯ Github å¯ä»¥è·Ÿ CodeBuild ã€ Jenkins æˆ–è€…å…¶ä»– CI æ•´åˆ å¯ä»¥é€é HTTPS or SSH connectï¼Œå¯ä»¥å»ºç«‹ IAM User ä¸¦åœ¨è£¡é¢è¨­å®š ssh key https git credential (user name and password) å¯ä»¥é€é CloudTail ç›£æ§å“ªå€‹ IAM User åœ¨æ“ä½œä»€éº¼ Repository æ¯å€‹ Repository æ²’æœ‰ Size é™åˆ¶ å¯ä»¥å»ºç«‹ Notification Rule ï¼Œæ ¹æ“šè¨­å®šçš„ Event ç™¼å‡º SNS SNS å¿…é ˆè·Ÿ CodeCommit åœ¨åŒä¸€å€‹ Region å¯ä»¥å»ºç«‹ Event Trigger è§¸ç™¼ SNS æˆ– Lambda å¯ä»¥çµ¦äºˆå…¶ä»– AWS Account User è®€å–æ¬Šé™ å¯ä»¥é€é KMS åŠ å¯† Repository è£¡é¢çš„ File Pull Request å¯ä»¥æ•´åˆ CodeGuru Reviewï¼Œåœ¨ pull request å»ºç«‹æ™‚ï¼Œå¯ä»¥é€é CodeGuru å»åˆ†æ Code ä¸¦æŠ“å‡ºå¸¸è¦‹å•é¡Œã€‚ å»ºç«‹ approval rules ï¼ŒæŒ‡å®šçš„ User æ‰å¯ä»¥ Merge pull request 1aws codecommit create-pull-request-approval-rule \\ 2--pull-request-id 27 \\ 3--approval-rule-name \u0026#34;Require two approved approvers\u0026#34; \\ 4--approval-rule-content \u0026#34;{\\\u0026#34;Version\\\u0026#34;: \\\u0026#34;2018-11-08\\\u0026#34;,\\\u0026#34;Statements\\\u0026#34;: [{\\\u0026#34;Type\\\u0026#34;: \\\u0026#34;Approvers\\\u0026#34;,\\\u0026#34;NumberOfApprovalsNeeded\\\u0026#34;: 2,\\\u0026#34;ApprovalPoolMembers\\\u0026#34;: [\\\u0026#34;CodeCommitApprovers:123456789012:Nikhil_Jayashankar\\\u0026#34;, \\\u0026#34;arn:aws:sts::123456789012:assumed-role/CodeCommitReview/*\\\u0026#34;]}]}\u0026#34; ä¹Ÿå¯ä»¥å»ºç«‹ approval rules template ä¸¦é‡è¤‡ä½¿ç”¨ï¼Œç¶å®šåœ¨ä¸åŒ repository ä¸Š 1aws codecommit create-approval-rule-template \\ 2--approval-rule-template-name 2-approver-rule-for-main \\ 3--approval-rule-template-description \u0026#34;Requires two developers from the team to approve the pull request if the destination branch is main\u0026#34; \\ 4--approval-rule-template-content \u0026#34;{\\\u0026#34;Version\\\u0026#34;: \\\u0026#34;2018-11-08\\\u0026#34;,\\\u0026#34;DestinationReferences\\\u0026#34;: [\\\u0026#34;refs/heads/main\\\u0026#34;],\\\u0026#34;Statements\\\u0026#34;: [{\\\u0026#34;Type\\\u0026#34;: \\\u0026#34;Approvers\\\u0026#34;,\\\u0026#34;NumberOfApprovalsNeeded\\\u0026#34;: 2,\\\u0026#34;ApprovalPoolMembers\\\u0026#34;: [\\\u0026#34;arn:aws:sts::123456789012:assumed-role/CodeCommitReview/*\\\u0026#34;]}]}\u0026#34; é€é IAM é™åˆ¶ Push \u0026 Merge Master 1{ 2 \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, 3 \u0026#34;Statement\u0026#34;: [ 4 { 5 \u0026#34;Effect\u0026#34;: \u0026#34;Deny\u0026#34;, 6 \u0026#34;Action\u0026#34;: [ 7 \u0026#34;codecommit:GitPush\u0026#34;, 8 \u0026#34;codecommit:DeleteBranch\u0026#34;, 9 \u0026#34;codecommit:PutFile\u0026#34;, 10 \u0026#34;codecommit:MergeBranchesByFastForward\u0026#34;, 11 \u0026#34;codecommit:MergeBranchesBySquash\u0026#34;, 12 \u0026#34;codecommit:MergeBranchesByThreeWay\u0026#34;, 13 \u0026#34;codecommit:MergePullRequestByFastForward\u0026#34;, 14 \u0026#34;codecommit:MergePullRequestBySquash\u0026#34;, 15 \u0026#34;codecommit:MergePullRequestByThreeWay\u0026#34; 16 ], 17 \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:codecommit:us-east-2:111111111111:MyDemoRepo\u0026#34;, 18 \u0026#34;Condition\u0026#34;: { 19 \u0026#34;StringEqualsIfExists\u0026#34;: { 20 \u0026#34;codecommit:References\u0026#34;: [ 21 \u0026#34;refs/heads/main\u0026#34;, 22 ] 23 }, 24 \u0026#34;Null\u0026#34;: { 25 \u0026#34;codecommit:References\u0026#34;: \u0026#34;false\u0026#34; 26 } 27 } 28 } 29 ] 30} IAM Policy AWSCodeCommitFullAccess : Admin æ¬Šé™ AwSCodeCommitPowerUser: ä¸å¯ä»¥å»ºç«‹å’Œåˆªé™¤ repository AWSCodeCommitReadOnly: åªå¯ä»¥è®€è³‡è¨Š ","date":"September 13, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/codecommit-certification-note/","smallImg":"","tags":[{"title":"CodeCommit","url":"/tags/codecommit/"}],"timestamp":1663027200,"title":"CodeCommit Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"Basic of VPC æ¯å€‹ Region é è¨­ä¸Šé™äº”å€‹ VPC æ”¯æ´ IPv4 or IPv6 æ¯å€‹ VPC å¯ä»¥æœ‰äº”å€‹ CIDR ï¼Œæ¯å€‹ CIDR æœ€å¤§ /16 (65536 IP) , æœ€å° /28 (16 IP) VPC æ˜¯ ç§æœ‰ç¶²è·¯ï¼Œæ‰€ä»¥åªæœ‰ä»¥ä¸‹ Range æ˜¯å…è¨±çš„ 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 è¦æ³¨æ„ï¼ŒVPC CIDR ä¸èƒ½è·Ÿå…¶ä»–å·²å­˜åœ¨ç¶²ä½é‡ç–Š AWS æœ‰é ç•™äº”å€‹ IP ex: 10.0.0.0/24 =\u0026gt; 256 å€‹ IP æ¸›å»é è¨­äº”å€‹ï¼Œå¯¦éš›åªæœ‰251 å€‹ IP å¯ä½¿ç”¨ 10.0.0.0 : Network Address 10.0.0.1 : é è¨­çµ¦ VPC Router 10.0.0.2 : é è¨­çµ¦ DNS 10.0.0.3 : å…ˆé ç•™ï¼Œæš«æ™‚ç„¡ä½¿ç”¨ 10.0.0.255 : Network broadcast addressï¼Œä½† AWS ä¸æ”¯æ´ å¦‚æœä½ éœ€è¦ 29 IPï¼Œ Submaskä¸å¯ä»¥é¸ /27 ï¼Œ /27 é›–ç„¶æœ‰ 32 å€‹ IP ï¼Œä½†æ‰£é™¤äº”å€‹é ç•™çš„ä»¥å¾Œï¼Œåªå‰©ä¸‹ 27 å€‹ IP Route Table VPC éƒ½æœ‰ä¸€å€‹é è¨­ Main Route Table æ¯å€‹ Route Table éƒ½æœ‰é è¨­ Local Route å¦‚æœå»ºç«‹ Subnet æ™‚ï¼Œæ²’æœ‰æŒ‡å®šè‡ªå®šç¾© Route Tableï¼Œéƒ½æœƒè‡ªå‹•ä½¿ç”¨ Main Route Table Default VPC æ–°å¸³è™Ÿæ¯å€‹ Region éƒ½æœƒæœ‰ Default VPCï¼ŒIP Range 172.31.0.0/16 Default Subnet çš„ Subnet Mask æ˜¯ /20 Default VPC å·²ç¶“æœ‰ Main Route Table è€Œä¸”è¨­å®šå¥½ Internet Gateway åœ¨ Default VPC å•Ÿç”¨çš„ EC2 æœƒè‡ªå‹• assign Public IPv4 IP Default Network Access List =\u0026gt; Allow all inbound/outbound Traffic æœ‰é è¨­ DHCP Internet Gateway ä¸€å€‹ VPC åªèƒ½é€£çµä¸€å€‹ Internet Gateway Internet Gateway åŒæ™‚ä¹Ÿæ˜¯ Network Address Translation (NAT)ï¼Œæœ‰ IPv4 åœ°å€ æ”¯æ´ IPv4 \u0026amp; IPv6 Nat Gateway v.s Instance NAT ä¸»è¦è½‰æ› Private IP to Public IPï¼Œè®“ Private Subnet EC2 å¯ä»¥å–®å‘é€£ä¸Šç¶²è·¯ Private Subnet EC2 \u0026ndash;\u0026gt; NAT \u0026ndash;\u0026gt; IGW \u0026ndash;\u0026gt; Internet éƒ½å¿…é ˆåœ¨ Public Subset åªæ”¯æ´ IPv4 åŠŸèƒ½ NAT Gateway NAT Instance Available AWS è¨—ç®¡æœå‹™ï¼Œå»ºç«‹åœ¨ä¸€å€‹ AZï¼Œæœ‰ HAï¼Œä½†å¦‚æœåªæœ‰ä¸€å€‹NAT gateway ï¼Œæœ‰å¯èƒ½å› ç‚ºä¸€æ•´å€‹ AZ æ›æ‰è€Œæ²’æœ‰ç¶²è·¯ è‡ªå·±éœ€è¦ç®¡æ§ Failoverï¼Œå¦‚æœåªæœ‰ä¸€å°å£æ‰å°±æ²’æœ‰ç¶²è·¯ é »å¯¬ å¾ 5Gbps åˆ°æœ€é«˜ 45 Gbps. å–æ±ºæ–¼ Instance Type Maintains AWS ç®¡ç† éœ€è¦è‡ªå·±å‡ç´šå…§éƒ¨è»Ÿé«”å’Œæ“ä½œç³»çµ±ç­‰ç­‰ Cost. å–æ±ºæ–¼ç”¨é‡å’Œé »å¯¬ å–æ±ºæ–¼ Instance Type Public IP Elastic IP. Elastic IP or Public IP Security Group X V EC2 è¨­å®š X éœ€è¦é—œé–‰ EC2 çš„ Source/ Destination Check Egree Only Internet Gateway åªæ”¯æ´ IPv6 è·Ÿ NAT Gateway ç›¸ä¼¼ï¼Œä½† NAT Gateway åªæ”¯æ´ IPv4 NCAL v.s Security Group . NCAL Security Group Scope ä¸€å€‹ Subnet ä¸€å€‹ NCAL ä¸€å€‹ Instance æœ€å¤šäº”å€‹ Security Group ç‰¹æ€§ Stateless: inbound \u0026amp; outbound éƒ½éœ€è¦ç‰¹åˆ¥è¨­å®š Stateful: åªé©—é€²å‡ºä¸¦è¨˜éŒ„ request ï¼Œè®“ response å¯ä»¥è¿”å› Default VPC å»ºç«‹çš„ é è¨­å…è¨±æ‰€æœ‰çš„ inbound \u0026amp; outbound X æ‰‹å‹•å»ºç«‹çš„ é è¨­ä¸å…è¨±ä»»ä½• inbound \u0026amp; outbound é è¨­æ²’æœ‰ä»»ä½• Allow è¨­å®š å¯ä»¥è¨­å®š Allow æˆ– DENY ï¼Œå¦å¤–æœ‰ rule çš„æ¦‚å¿µ ï¼Œrule range (1-32766) æ•¸å­—è¶Šä½è¶Šå„ªå…ˆï¼ŒEx: #100 Allow x, #200 DENY x æœ€å¾Œæ˜¯ ALLOW åªèƒ½è¨­å®š Allow ä¸èƒ½ DENY Securit Group å¯ä»¥ Reference å…¶ä»– Security Group VPC Peering é€é AWS ç§æœ‰ç¶²è·¯é€£çµå…©å€‹ VPC å…©å€‹VPC CIDR ä¸èƒ½é‡ç–Š VPC Peering ä¸æ˜¯ transitive EX : VPC_A \u0026lt;\u0026mdash;VPC Peering\u0026mdash;\u0026gt; VPC_B \u0026lt;\u0026mdash;VPC Peering\u0026mdash;\u0026gt; VPC_C VPC_A ä¸èƒ½é€é VPC_B é€£åˆ° VPC_C ï¼Œå¦‚æœéœ€è¦é€£ç·šï¼Œå°±è¦åœ¨ VPC_A \u0026amp; VPC_C ä¸­é–“å†å»ºç«‹ä¸€å€‹ VPC Peering æ‰å¯ä»¥äº’ç›¸é€£åˆ° VPC Peering ä¸é™åˆ¶åœ¨åŒä¸€å€‹ Region ä¹Ÿä¸é™åˆ¶åœ¨åŒä¸€å€‹ AWS å¸³è™Ÿä¸‹çš„ VPC VPC Peering è¨­å®šå®Œï¼Œé‚„éœ€è¦è¨­å®š Route Table æ‰å¯ä»¥é€£ç·š å…©å€‹ VPC ä¸èƒ½æœ‰é‡ç–Šçš„ CIDR VPC Endpoint ä¸»è¦è§£æ±º VPC å…§éƒ¨çš„ Instance å¯ä»¥é€é AWS ç§æœ‰ç¶²è·¯ä¸å¿…é€éå…¬æœ‰ç¶²è·¯é€£åˆ°å…¶ä»–AWS è¨—ç®¡æœå‹™ å¦‚ S3, DynamoDB ç­‰ç­‰ å…©ç¨® Type Interface : é€é AWS PrivateLink å»é€£åˆ° å…¶ä»– AWS æœå‹™ã€‚ Endpoint : Server Side éœ€è¦ä½¿ç”¨ Load Balancer è€Œ Client Side éœ€è¦ä½¿ç”¨ Elastic Network Ineterface ä¸­é–“é€é PrivateLink å»é€£èµ·ä¾† gateway : æä¾›ç‰¹å®šç›®æ¨™ï¼Œç›®å‰åªæœ‰ S3, DynamoDB ï¼Œè‡ªå‹•è¨­å®š Route Table è¨­å®š Flow Log æ“·å–å‚³å…¥åŠå‚³å‡º VPC ä¸­ç¶²è·¯ç•Œé¢ä¹‹ IP æµé‡ç›¸é—œè³‡è¨Šçš„åŠŸèƒ½ VPC Flow log Subnet Flow Log Elastic Network Interface Flow log æ—¥èªŒå¯ä»¥å­˜åœ¨ S3 (å¯ä»¥æ•´åˆ Athena å» Query) / CloudWatch Log DNS support in VPC enableDnsSupport è¨­å®šé è¨­æ˜¯ True AWS DNS Server (169.254.169.253 enableDnsHostname æ‰‹å‹•å»ºç«‹çš„é è¨­æ˜¯ False, Default VPC é è¨­æ˜¯ True å¦‚æœ ture æœƒè‡ªå‹•çµ¦ EC2 Instance åˆ†æ´¾ Hostname å¦‚æœæœ‰ public ip å¦‚æœæƒ³ä½¿ç”¨å®¢è£½åŒ– Private Route53 DNS Domain ï¼Œé€™å…©å€‹è¨­å®šéƒ½å¿…é ˆæ‰“é–‹ VPN åœ¨å…¬å¸é‚£é‚Šå»ºç«‹ Customer Gateway ï¼ˆå¯ä»¥æ˜¯è»Ÿé«”ï¼Œæˆ–ä¸€å€‹å¯¦é«”è£ç½® åœ¨AWSé€™é‚Šå»ºç«‹ Virtual Private Gateway ï¼Œä¸¦é€£çµåœ¨VPCä¸Š é€é site to site VPN Connection å°‡ VPN Gateway \u0026amp; customer gateway å»ºèµ·é€£ç·š Direct Connect å»ºç«‹å°ˆç”¨ç¶²è·¯é€£ç·šåˆ°AWSï¼ŒAWS åœ¨ä¸åŒåœ°å€éƒ½æœ‰ä¸åŒçš„åˆä½œå¤¥ä¼´ï¼Œæ‰€ä»¥é€£ç·šæ–¹å¼åƒæ˜¯ å…¬å¸ \u0026ndash;\u0026gt; åˆä½œå¤¥ä¼´ \u0026ndash;\u0026gt; AWS å°ˆç·šå¥½è™•æ˜¯ : é »å¯¬é«˜ï¼Œç¶²è·¯è²»ç”¨æ¯”è¼ƒä¾¿å®œï¼Œä¸¦ä¸”æ¯”è¼ƒå®‰å…¨ ","date":"September 7, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/vpc-certification-note/","smallImg":"","tags":[{"title":"VPC","url":"/tags/vpc/"}],"timestamp":1662508800,"title":"VPC Certification Note"},{"categories":[{"title":"AWS","url":"/categories/aws/"}],"content":"EC2 Purchase Option On-Demand Instances ç”¨å¤šå°‘ä»˜å¤šå°‘ï¼Œä¸éœ€è¦æå‰é ä»˜ä¹Ÿä¹Ÿä¸éœ€è¦åˆç´„ï¼Œæ ¹æ“šç§’ä¾†è¨ˆè²» ä¸åŒ Region æœ‰ä¸åŒçš„ Instance \u0026amp; CPU é™åˆ¶æ•¸é‡ï¼Œå¯ä»¥é€é AWS Support Center æé«˜ä¸Šé™ Reserved Instances éœ€è¦ä¸€å¹´æˆ–ä¸‰å¹´çš„åˆç´„ ï¼Œä»¥å°æ™‚è¨ˆè²» ä»˜æ¬¾é¸é … All Upfront (ä¸€æ¬¡ä»˜æ¸…) Partial Upfront (éƒ¨åˆ†å…ˆä»˜æ¸…ï¼‰ No Upfront (ç”¨å¤šå°‘ä»˜å¤šå°‘ï¼‰ æ–¹æ¡ˆé¡åˆ¥ Standard (æ¨™æº–) æŠ˜æ‰£è¼ƒå¤šï¼Œä½†ç„¡æ³•æ›´æ”¹ Instance Type å¯ä»¥åœ¨ Reserved Instance Marketplace è²©è³£ Convertible (å¯è½‰æ›) æŠ˜æ‰£è¼ƒå°‘ï¼Œä½†éš¨æ™‚å¯ä»¥ç¡¬é«”å‡é™ç´š ä¸å¯ä»¥åœ¨ Reserved Instance Marketplace è²©è³£ ç¯„åœ (Scope) Zonal Instance åªèƒ½åœ¨æŒ‡å®šçš„ AZ å¯ä»¥é ç•™ capacity Regional åªèƒ½åœ¨æŒ‡å®šçš„ Region åŒä¸€ Region, ä¸åŒ AZ å¯ä»¥ä¸€èµ·æŠ˜æ‰£ åŒä¸€ç³»åˆ—EC2 æ ¹æ“š æ­£è¦åŒ–å› ç´  åœ¨ä¸åŒç¡¬é«”è¦æ ¼å¯ä»¥æœ‰æŠ˜æ‰£ï¼Œ ä¾‹å¦‚ t2.medium æ­£è¦åŒ–å› ç´ ç‚º 2 è€Œ t2.small ç‚º 1 ï¼Œç•¶ä½ è³¼è²·ä¸€å€‹ t2.medium çš„ Reserved Instancesï¼Œå¯ä»¥æŠ˜æ‰£åœ¨å…©å€‹ t2.small çš„ instanceã€‚ Spot Instance ç«¶åƒ¹æ¨¡å¼: è«‹æ±‚æ™‚æœƒè‡ªå®šç¾©ä¸€å€‹æ¯å°æ™‚æœ€é«˜å¯æ¥å—çš„åƒ¹æ ¼(Spot Price)ï¼Œè€Œ Spot Price æœƒéš¨è‘—å¸‚å ´è€Œè®Šå‹•ï¼Œç•¶æœ€é«˜åƒ¹æ ¼é«˜æ–¼ Spot price ï¼Œå°±æœ‰æ©Ÿæœƒç²å¾— Instanceã€‚ç•¶ç„¶ç•¶ Spot Price ä½æ–¼æœ€é«˜åƒ¹æ ¼ï¼Œ AWS æœƒéš¨æ™‚çµ‚æ­¢ä½ çš„ Instanceï¼Œæ‰€ä»¥è·‘åœ¨ Spot Instance ä¸Šçš„æœå‹™ï¼Œéœ€è¦è¨­è¨ˆå¯ä»¥éš¨æ™‚å¯ä»¥è¢«çµ‚æ­¢\nå¦‚æœå›  AWS è€Œçµ‚æ­¢ï¼Œæœªæ»¿ä¸€å°æ™‚çš„è²»ç”¨ï¼Œ AWS ä¸æœƒæ”¶å–ä»»ä½•è²»ç”¨ã€‚ æ¯å€‹ Region å¯ä»¥é™åˆ¶ 20 Spot Instanceï¼Œå¯å‘ AWS ç”³è«‹èª¿é«˜\nSpot Instance è¢«çµ‚æ­¢ EC2 èƒ½ç‹€æ…‹æœ‰ä¸‰ç¨®é¸æ“‡ :\nHibernate Stop Terminate (default) Spot Block Mode : å¯ä»¥æŒ‡å®šä¸€åˆ°å…­å°æ™‚å…§ï¼Œä¸æœƒè¢« AWS çµ‚æ­¢\nSpot Request Type\none-time persistent åœ¨ persistent å•Ÿç”¨çš„ç‹€æ…‹ä¸‹çµ‚æ­¢ Instanceï¼ŒAWS æœƒé‡æ–°åˆ†é…ä¸€å€‹ Instance çµ¦ä½ ã€‚ Spot Instance åœ¨è¢«çµ‚æ­¢å‰å…©åˆ†é˜ (grace period)ï¼Œæœƒæœ‰ warningï¼Œå¯ä»¥é€é Cloud Watch æˆ–è€… é€é EC2 metadata å–å¾—\nAWS å»ºè­°æ¯äº”ç§’æª¢æŸ¥ä¸€æ¬¡ warning EC2 å–å¾— metadataï¼Œå¦‚æœæ²’æœ‰ä»»ä½• Action æœƒæ˜¯ 404 1curl : http://169.254.169.254/lasest/meta-data/spot/instance-action Dedicated Hosts \u0026 Instance Dedicated Hosts \u0026amp; Dedicated Instance éƒ½æ˜¯åªåœ¨å¯¦é«”æ©Ÿä¸ŠåŸ·è¡Œä½ çš„ç¨‹å¼ï¼Œä½†å…©è€…æœ‰é»å°å°çš„å·®åˆ¥\nDedicated Hosts æ˜¯å›ºå®šä¸€å° EC2 çµ¦ä½ ä½¿ç”¨ï¼Œè€Œ Dedicated Instance åªä¿è­‰é€™å° EC2 ä¸Šé¢çš„ç¨‹å¼ä¸æœƒæœ‰å…¶ä»–äººçš„ï¼Œæ‰€ä»¥ç•¶ä½ é‡å•Ÿ EC2 æ™‚ï¼Œæœ‰å¯èƒ½æ˜¯å¦ä¸€å° EC2ã€‚ Dedicated Hosts å¯ä»¥è£è‡ªå·±çš„ Software Licenses è€Œ Dedicated Instance ä¸è¡Œã€‚ Note Dedicate Hosts æœ‰è‡ªå‹•å®¹éŒ¯åŠŸèƒ½ï¼Œç™¼ç¾EC2 å£æ‰æ™‚æœƒè‡ªå‹•æ›´æ›ä¸€å°æ–°çš„ EC2ï¼Œé€™é‚Šå¯ä»¥æ•´åˆ AWS License Manager è‡ªå‹•éƒ¨ç½²æ–°çš„ Software Licenses Dedicated Hosts å¦‚æœè³¼è²· On-Demand æ˜¯å·²å°æ™‚è¨ˆç®— Dedicate Hosts æ¯” Dedicate Instance è²´ Capacity Reservations å› ç‚º AWS åœ¨ AZ è£¡é¢çš„å¯¦é«”ç¡¬é«”æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥æ˜¯æœ‰å¯èƒ½ç•¶ä½ å•Ÿå‹• EC2 Instance æ™‚æ˜¯æœ‰å¯èƒ½æ²’æœ‰è¶³å¤ è³‡æºçš„ï¼Œé€™æ™‚å€™åªèƒ½ç­‰å¾…å…¶ä»–äººé‡‹æ”¾ Instance æˆ–è€… é¸æ“‡ä¸åŒé¡å‹çš„ Instanceã€‚Capacity Reservations å¯ä»¥è®“ä½ å…ˆæå‰å…ˆé ä»˜æŸäº›è³‡æºï¼Œé€™æ¨£å°±ä¸ç”¨æ“”å¿ƒè¦å•Ÿç”¨ EC2 Instanceæ™‚æ²’æœ‰è³‡æºã€‚åœ¨å•Ÿç”¨æ–°çš„ EC2 Instance æ™‚å¯ä»¥ç›´æ¥é¸æ“‡å¾ Capacity Reservations è£¡é¢ç›´æ¥æ‰£é™¤ï¼Œå°±ä¸éœ€è¦é¡å¤–å†ä»˜è²»äº†ã€‚ä½†è¦æ³¨æ„ï¼Œåœ¨ Capacity Reservations çš„ç‹€æ…‹æ˜¯å•Ÿç”¨æ™‚ï¼Œå°±å·²ç¶“ç”¢ç”Ÿæ”¶è²»ã€‚\nSaving Plan Compute Savings Plans æœ€é«˜çœ66% æŠ˜æ‰£æœƒè‡ªå‹•å¥—ç”¨åœ¨ä»»ä½• EC2 Instance ä¸Šï¼Œä¸ç®¡æ˜¯ä»€éº¼æ“ä½œç³»çµ±ã€Instance Type æˆ–è€…åœ¨ä»»ä½• Region EC2 Instance Savings Plans æœ€é«˜çœ72% æŠ˜æ‰£é™åˆ¶åœ¨åŒä¸€å€‹ Region ä¸‹çš„ Instance Family å¯ä»¥å’Œ Capacity Reservations æ··è‘—ä½¿ç”¨ã€‚ Spot Feet Spot Feet æœƒæ ¹æ“šè¨­å®š (launch pools) å˜—è©¦è¦åˆ°è¶³å¤ çš„ Spot Instance ï¼Œå‰©é¤˜çš„æœƒä½¿ç”¨ On-Demand Instance è£œé½Šã€‚ å¯ä»¥é¸æ“‡çš„ç­–ç•¥ lowestPrice: å¾ Pool ä¸­é¸å‡ºæœ€ä¾¿å®œçš„æ–¹æ¡ˆ diversified: åˆ†æ•£åˆ°å¤šå€‹ Pool ä¸­ capacityOptimized: AWS æœƒå„ªåŒ–æœ€ä½³ Capacity å»å•Ÿç”¨ Spot Instance Instance Type Type æè¿° R RAM C CPU M General I I/O G GUP T can burst Burstable Instance (T2/T3) : ç•¶æ©Ÿå™¨é–’ç½®æ™‚ AWS æœƒçµ¦ Burst Credits (æœ‰ä¸Šé™ï¼‰ï¼Œä¹‹å¾Œæœ‰å¤§é‡çš„ CPU éœ€æ±‚æ™‚å¯ä»¥å¾—åˆ°é¡å¤–çš„CPU ä¸¦å¾ Credit ä¸­æ‰£é™¤ã€‚ T3 å¯ä»¥ç„¡é™ Burst ï¼Œä½†ç•¶ç„¶æœƒéœ€è¦æ”¯ä»˜é¡å¤–çš„è²»ç”¨ Instance Lifecycle ä»¥ä¸‹ç‹€æ…‹æœƒæ”¶è²» :\nrunning stop-Hibernate ä½¿ç”¨ instance store ç•¶ root volume çš„ Instance æ˜¯ä¸èƒ½ stop çš„\nUser Data : EC2 å•Ÿç”¨æ™‚åŸ·è¡Œçš„ Script\nåœ¨ EC2 è£¡é¢å–å¾— User Data è³‡è¨Š 1http://169.254.169.254/latest/user-data 16 KB å¤§å°é™åˆ¶ ç•¶ä½ åœæ­¢(Stop) EC2 Instanceï¼Œä¹‹å¾Œä¿®æ”¹ User Data ä»¥å¾Œï¼Œå†é‡æ–°å•Ÿå‹• (Start) EC2 Instanceï¼Œé€™æ™‚å€™ EC2 Instance é‚„æ˜¯æœƒåŸ·è¡ŒèˆŠçš„ User Data Hibernate : ï¼ˆåªé™åˆ¶åœ¨ä½¿ç”¨ EBS çš„ Instance) : åœ¨ Instance åœæ­¢æ™‚ï¼Œå°‡ç•¶ä¸‹çš„RAMè£¡é¢çš„ç‹€æ…‹è¤‡è£½ä¸€ä»½åˆ° EBSï¼Œä¹‹å¾Œé‡æ–°å•Ÿç”¨æ™‚ï¼Œæœƒå°‡ EC2 é‚„åŸåˆ°åœæ­¢æ™‚çš„ç‹€æ…‹ã€‚\nEBS éœ€è¦æ˜¯åŠ å¯†çš„ Hibernate ä¸èƒ½è¶…éå…­åå¤© Instance Ram å¿…é ˆå°æ–¼ 150 GB ç‰¹å¾µ\\è¡Œç‚º Reboot Stop/Start Hibernate Terminate å¯¦é«”æ©Ÿå™¨ åŒä¸€å°å¯¦é«”æ©Ÿå™¨ æ™‚é€šå¸¸æ˜¯ä¸åŒå¯¦é«”æ©Ÿå™¨ æ™‚é€šå¸¸æ˜¯ä¸åŒå¯¦é«”æ©Ÿå™¨ X IPV4 Address å…©å€‹å›ºå®šä¸€æ¨£ Private IPV4: ä¸€æ¨£ Public IPV4: æ–°çš„ï¼Œé™¤éæœ‰ Elastic IP address Private IPV4: ä¸€æ¨£ Public IPV4: æ–°çš„ é™¤éæœ‰ Elastic IP address X Instance store volumes è³‡æ–™ä¿ç•™ è³‡æ–™åˆªé™¤ è³‡æ–™åˆªé™¤ è³‡æ–™åˆªé™¤ Root device volume è³‡æ–™ä¿ç•™ è³‡æ–™ä¿ç•™ è³‡æ–™ä¿ç•™ è³‡æ–™é è¨­åˆªé™¤ RAM è³‡æ–™åˆªé™¤ è³‡æ–™åˆªé™¤ è³‡æ–™ä¿ç•™åœ¨ EBS è³‡æ–™åˆªé™¤ Placement Group Cluster : æ‰€æœ‰çš„ Instance æ”¾åœ¨åŒä¸€å€‹ AZ ï¼Œä»¥æä¾›æ›´å¿«çš„ç¶²è·¯é€Ÿåº¦ Spread : å°‡æ‰€æœ‰çš„ Instance æ”¾åœ¨ä¸åŒçš„å¯¦é«”ç¡¬é«”ï¼Œä¸€å€‹ AZ æœ€å¤šä¸ƒå€‹ Instance Partitioned : å°‡ Ec2 Instance æŒ‰ç…§è‡ªå·±çš„é‚è¼¯åˆ†é–‹(partition) ï¼Œæ¯å€‹ AZ ä¸Šé™ä¸ƒå€‹ partition Storage ç‰¹å¾µ\\Type EBS Instance Store å•Ÿç”¨æ™‚é–“ ç´„ä¸€åˆ†é˜ æ­£å¸¸å°‘æ–¼äº”åˆ†é˜ æ•¸æ“šä¿å­˜ é è¨­: ç•¶ Ec2 è¢« Terminate æ™‚ï¼Œ EBS ä¹Ÿæœƒè¢«ç æ‰ã€‚ä½†å¯ä»¥è¨­å®šä¸ç æ‰ï¼Œä¸¦å­˜ç•™ç¾åœ¨æœ‰çš„è³‡æ–™ è³‡æ–™æœƒéš¨è‘— Ec2 è¢«è¢« Terminate æ™‚ä¸€èµ·åˆªé™¤ ä¿®æ”¹è¨­å®š åœ¨ EC2 åœæ­¢æ™‚å¯ä»¥è¢«ä¿®æ”¹ å›ºå®šçš„ä¸èƒ½ä¿®æ”¹ SnapShot æ”¯æ´ snapshot ä¸æ”¯æ´ snapshot Monitor AWS æä¾›çš„ Metrics åŒ…å«è³‡è¨Š CPU Utilization Burst Credit ä½¿ç”¨ å’Œ é¤˜é¡ Network In/Out (bytes) Status Check Instance Status : æª¢æŸ¥ EC2 VM æ˜¯å¦æ­£å¸¸ System Status : æª¢æŸ¥ç¡¬é«”è¨­å‚™ \"RAM ä¸åŒ…å«åœ¨ AWS æä¾›çš„ Metrics æ¨¡å¼ Basic : å…è²»ï¼ŒMetrics æ¯äº”åˆ†é˜é–“éš” Detailed : éœ€è¦ä»˜è²»ï¼ŒMetrics æ¯ä¸€åˆ†é˜é–“éš” å®¢è£½åŒ–ï¼Œè‡ªå·±è£ Unified CloudWatch Agentï¼Œå°‡æƒ³è¦çš„ Metrics æˆ– Log æ¨åˆ° Cloud Watch ä¸Š CloudWatch Agent è¨­å®šå¯ä»¥çµ±ä¸€æ–¹åœ¨ SSM Parameter Store ä¸Š å¯ä»¥å–å¾—æ›´è©³ç´°çš„è³‡è¨Šï¼Œä¾‹å¦‚æ¯å€‹ Process çš„ CPU ä½¿ç”¨é‡ Others Elastic IP address : å›ºå®š IPv4 Address, ä¸€å€‹ Region é™åˆ¶äº”å€‹ Enhanced Network - Elastic Network Adapter: å¯ä»¥æå‡ç¶²è·¯æ•¸åº¦è‡³ 100 Gbps - Virtual Function: å¯ä»¥æå‡ç¶²è·¯æ•¸åº¦è‡³ 10 Gbps Elastic Fabric Adapter : é«˜æ•ˆèƒ½é‹ç®—ä½¿ç”¨ Troubleshooting ä¸èƒ½å•Ÿç”¨æ–°çš„EC2 InstanceLimitedExceeded Error : æ¯ä¸€å€‹å¸³è™Ÿåœ¨æ¯ä¸€å€‹ Region éƒ½æœ‰ä¸€äº›é™åˆ¶ï¼Œæ­¤éŒ¯èª¤ä»£è¡¨é”åˆ°ä¸Šé™ï¼Œå¯ä»¥è·Ÿ AWS æå‡ºå°‡ä¸Šé™æé«˜ InsufficientInstanceCapacity Error : ä»£è¡¨ç¾åœ¨ AWS åœ¨é€™å€‹ AZ æ²’æœ‰è¶³å¤ çš„è³‡æºæä¾›ï¼Œå¯ä»¥ç­‰ä¸€æ®µæ™‚é–“æˆ–è€…æ›å…¶ä»–AZ å˜—è©¦ã€‚ Instance ç›´æ¥ Terminate æœ‰å¯èƒ½æœ‰ä»¥ä¸‹å¹¾å€‹åŸå›  é”åˆ° EBS Volume Limit EBS snapshot å£æ‰äº† EBS æœ‰åŠ å¯†ï¼Œä½†æ²’æœ‰ KMS æ¬Šé™ AMI æœ‰å•é¡Œ ä¸èƒ½ SSH åˆ° EC2 \u0026ldquo;Unprotected private key file\u0026rdquo; error : ssh key éœ€è¦æ˜¯400 æ¬Šé™ \u0026ldquo;Too many authentication failures\u0026rdquo; æœ‰å¯èƒ½æ˜¯ Username ä¸å° \u0026ldquo;Connection timeout\u0026rdquo; æœ‰å¯èƒ½æ˜¯ Security Group æ²’æœ‰è¨­å®šå° NACL æ²’æœ‰è¨­å®šå° Route Table æ²’æœ‰è¨­å®šå° æ²’æœ‰ Public IPv4 CPU Loading å¤ªé«˜ï¼Œæ©Ÿå™¨ç„¡æ³•å›æ‡‰ ","date":"September 3, 2022","img":"https://allenhsieh1992.com/images/aws.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/aws/ec2-certification-note/","smallImg":"","tags":[{"title":"EC2","url":"/tags/ec2/"}],"timestamp":1662163200,"title":"EC2 Certification Note"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Given two strings s and t, determine if they are isomorphic.\nTwo strings s and t are isomorphic if the characters in s can be replaced to get t.\nAll occurrences of a character must be replaced with another character while preserving the order of characters. No two characters may map to the same character, but a character may map to itself.\nExample 1:\n1Input: s = \u0026#34;egg\u0026#34;, t = \u0026#34;add\u0026#34; 2Output: true Example 2:\n1Input: s = \u0026#34;foo\u0026#34;, t = \u0026#34;bar\u0026#34; 2Output: false Example 3: Input: s = \u0026ldquo;paper\u0026rdquo;, t = \u0026ldquo;title\u0026rdquo; Output: true\nConstraints:\nConstraints: $$ \\begin{array}{l} 1 \u003c= s.length \u003c= 5 * 10^4 \\\\ t.length == s.length \\\\ s and t consist of any valid ascii character. \\end{array} $$ æˆ‘çš„æ€è·¯ åŒæ™‚ Loop å…©å€‹ Array ï¼Œç”¨å…©å€‹ HashMap åŒæ™‚å­˜å·²ç¶“å‡ºç¾éçš„å­—æ¯æœ€æ–°ä½ç½®ï¼Œæ¯æ¬¡éƒ½æ¯”è¼ƒç›®å‰å­—æ¯æ˜¯å¦å·²å‡ºç¾éã€‚å¦‚æœå·²ç¶“å‡ºç¾éæ˜¯å¦å…©å€‹ä¸Šæ¬¡å‡ºç¾éçš„ä½å­æ˜¯ä¸€æ¨£çš„ï¼Œå¦‚æœæœ‰ä»»ä½•ä¸ä¸€æ¨£å°±è¿”å› Falseã€‚æœ€å¾Œå¦‚æœæ²’æœ‰æ‰¾åˆ°ä»»ä½•ä¸ä¸€æ¨£å°±ä»£è¡¨ä¸€æ¨£ï¼Œè¿”å›Trueã€‚\nç¨‹å¼ç¢¼ 1class Solution { 2 public boolean isIsomorphic(String s, String t) { 3 HashMap\u0026lt;Character, Integer\u0026gt; cacheSCharLastPosition = new HashMap\u0026lt;\u0026gt;(); 4 HashMap\u0026lt;Character, Integer\u0026gt; cacheTCharLastPosition = new HashMap\u0026lt;\u0026gt;(); 5 6 char[] sCharArray = s.toCharArray(); 7 char[] tCharArray = t.toCharArray(); 8 9 for (int i = 0; i \u0026lt; s.length(); i++) { 10 char sChar = sCharArray[i]; 11 char tChar = tCharArray[i]; 12 13 if ((cacheSCharLastPosition.containsKey(sChar) \u0026amp;\u0026amp; cacheTCharLastPosition.containsKey(tChar))) { 14 if (!cacheSCharLastPosition.get(sChar).equals(cacheTCharLastPosition.get(tChar))) { 15 return false; 16 } 17 } else if ((!cacheSCharLastPosition.containsKey(sChar) \u0026amp;\u0026amp; cacheTCharLastPosition.containsKey(tChar)) || 18 (cacheSCharLastPosition.containsKey(sChar) \u0026amp;\u0026amp; !cacheTCharLastPosition.containsKey(tChar))) { 19 return false; 20 } 21 cacheSCharLastPosition.put(sChar, i); 22 cacheTCharLastPosition.put(tChar, i); 23 } 24 return true; 25 } 26} ","date":"June 26, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/easy/205_isomorphic_strings/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1656201600,"title":"æ¼”ç®—æ³• [Java] LeetCode #205. Isomorphic Strings"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Given two strings s and t, return true if s is a subsequence of t, or false otherwise.\nA subsequence of a string is a new string that is formed from the original string by deleting some (can be none) of the characters without disturbing the relative positions of the remaining characters. (i.e., \u0026ldquo;ace\u0026rdquo; is a subsequence of \u0026ldquo;abcde\u0026rdquo; while \u0026ldquo;aec\u0026rdquo; is not).\nExample 1:\n1Input: s = \u0026#34;abc\u0026#34;, t = \u0026#34;ahbgdc\u0026#34; 2Output: true Example 2:\n1Input: s = \u0026#34;axc\u0026#34;, t = \u0026#34;ahbgdc\u0026#34; 2Output: false Constraints:\n0 \u0026lt;= s.length \u0026lt;= 100 0 \u0026lt;= t.length \u0026lt;= 104 s and t consist only of lowercase English letters. æˆ‘çš„æ€è·¯ é€™é¡Œæˆ‘å°±æ¯”è¼ƒç›´è§€ï¼Œ loop ä¸€é tï¼Œç”¨ä¸€å€‹ Varabile å»ç´€éŒ„ç¾åœ¨ç¬¬å¹¾å€‹å­—å…ƒåœ¨ String s è£¡é¢å·²ç¶“è¢«æ‰¾åˆ°äº†ã€‚loop çµæŸæ™‚ï¼Œç¢ºå¯¦æ˜¯å¦æ‰¾åˆ°çš„æ•¸é‡ç­‰æ–¼ String s çš„é•·åº¦ï¼Œå¦‚æœæ˜¯è¿”å› true å¦å‰‡è¿”å› false\nç¨‹å¼ç¢¼ 1class Solution { 2 public boolean isSubsequence(String s, String t) { 3 if (s.isEmpty()) { 4 return true; 5 } 6 7 char[] sCharArray = s.toCharArray(); 8 char[] tCharArray = t.toCharArray(); 9 int sPosition = 0; 10 11 for(int i = 0; i \u0026lt; t.length(); i++) { 12 if (tCharArray[i] == sCharArray[sPosition]) { 13 sPosition++; 14 } 15 16 if (sPosition == s.length()) { 17 return true; 18 } 19 } 20 21 return false; 22 } 23} ","date":"June 26, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/easy/392_is_subsequence/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1656201600,"title":"æ¼”ç®—æ³• [Java] LeetCode #392. Is Subsequence"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Given an array of integers nums, calculate the pivot index of this array.\nThe pivot index is the index where the sum of all the numbers strictly to the left of the index is equal to the sum of all the numbers strictly to the index\u0026rsquo;s right.\nIf the index is on the left edge of the array, then the left sum is 0 because there are no elements to the left. This also applies to the right edge of the array.\nReturn the leftmost pivot index. If no such index exists, return -1.\nExample 1:\n1Input: nums = [1,7,3,6,5,6] 2Output: 3 3Explanation: 4The pivot index is 3. 5Left sum = nums[0] + nums[1] + nums[2] = 1 + 7 + 3 = 11 6Right sum = nums[4] + nums[5] = 5 + 6 = 11 Example 2:\n1Input: nums = [1,2,3] 2Output: -1 3Explanation: 4There is no index that satisfies the conditions in the problem statement. Example 3:\n1Input: nums = [2,1,-1] 2Output: 0 3Explanation: 4The pivot index is 0. 5Left sum = 0 (no elements to the left of index 0) 6Right sum = nums[1] + nums[2] = 1 + -1 = 0 Constraints:\n1 \u0026lt;= nums.length \u0026lt;= 104 -1000 \u0026lt;= nums[i] \u0026lt;= 1000 æˆ‘çš„æ€è·¯ ç¾åœ¨è¦å¾ Array æ‰¾ pivot , å°±ä»£è¡¨æœ‰å€‹ index i å·¦é‚Šæ‰€æœ‰æ•¸å­—çš„ç¸½å’Œè¦ç­‰æ–¼å³é‚Šæ•¸å­—çš„ç¸½å’Œã€‚\nç”¨æ•¸å­¸è¡¨ç¤ºå°±æœƒæ˜¯ leftSum + rightSum + pivot = TotalSum\nå› ç‚ºæˆ‘å€‘è¦æ‰¾ leftSum = rightSum\næ‰€ä»¥ leftSum + rightSum + pivot = TotalSum\n=\u0026gt; leftSum + leftSum + pivot = TotalSum\n=\u0026gt; 2 * leftSum = TotalSum - pivot\n=\u0026gt; leftSum = (TotalSum - privot) / 2\næˆ‘å€‘å…ˆ loop ä¸€é Array æ±‚å‡º totalSum\næ¥è‘—åœ¨ loop ç¬¬äºŒæ¬¡ Array ç”±å·¦åˆ°å³ï¼Œç”¨ä¸€å€‹ Varaible leftSum å»è¨ˆç®—åˆ° index i ç‚ºæ­¢å·¦é‚Šç´¯åŠ çš„ç¸½æ•¸ ï¼Œæ‰€ä»¥æ ¹æ“šå‰›å‰›å¾—åˆ°çš„å…¬å¼ï¼Œå¦‚æœ totalSum æ¸›å»ç•¶ä¸‹ index i çš„å€¼ä¸¦é™¤äºŒå¦‚æœç­‰æ–¼ leftSum å°±ä»£è¡¨é€™å€‹ index å°±æ˜¯ provitã€‚\nå¦‚æœ loop å®Œä¸€éäº†å°±ä»£è¡¨æ‰¾ä¸åˆ° provitï¼Œé‚£å°±è¿”å› -1\nç¨‹å¼ç¢¼ 1class Solution { 2 public int pivotIndex(int[] nums) { 3 int totalSum = 0; 4 for(int num : nums) { 5 totalSum += num; 6 } 7 8 //å¦‚æœç”¨ intï¼Œé™¤2æ™‚æœƒå°è‡´å°æ•¸é»ç„¡æ¢ä»¶è¢«æ¨å»è€Œæˆèª¤åˆ¤ 9 float leftSum = 0; 10 for(int i = 0; i \u0026lt; nums.length; i++) { 11 if (leftSum == ((float)(totalSum - nums[i]))/2 ) { 12 return i; 13 } 14 leftSum += nums[i]; 15 } 16 return -1; 17 } 18} ","date":"June 25, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/easy/724_find_pivot_index/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1656115200,"title":"æ¼”ç®—æ³• [Java] LeetCode #724. Find Pivot Index"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Roman numerals are represented by seven different symbols: I, V, X, L, C, D and M.\nSymbol Value I 1 V 5 X 10 L 50 C 100 D 500 M 1000 For example, 2 is written as II in Roman numeral, just two one\u0026rsquo;s added together. 12 is written as XII, which is simply X + II. The number 27 is written as XXVII, which is XX + V + II.\nRoman numerals are usually written largest to smallest from left to right. However, the numeral for four is not IIII. Instead, the number four is written as IV. Because the one is before the five we subtract it making four. The same principle applies to the number nine, which is written as IX. There are six instances where subtraction is used:\nI can be placed before V (5) and X (10) to make 4 and 9. X can be placed before L (50) and C (100) to make 40 and 90. C can be placed before D (500) and M (1000) to make 400 and 900. Given an integer, convert it to a roman numeral.\nExample 1:\n1Input: num = 3 2Output: \u0026#34;III\u0026#34; 3Explanation: 3 is represented as 3 ones. Example 2:\n1Input: num = 58 2Output: \u0026#34;LVIII\u0026#34; 3Explanation: L = 50, V = 5, III = 3. Example 3:\n1Input: num = 1994 2Output: \u0026#34;MCMXCIV\u0026#34; 3Explanation: M = 1000, CM = 900, XC = 90 and IV = 4. Constraints:\n1 \u0026lt;= num \u0026lt;= 3999 æˆ‘çš„æ€è·¯ é™¤äº†åƒä½æ•¸ï¼Œæ¯ä¸€å€‹ä½æ•¸å…ˆçœ‹æœ‰æ²’æœ‰ 9 å’Œ 4 ï¼Œå¦‚æœæœ‰å°±ç›´æ¥ Append å°æ‡‰çš„ç¾…é¦¬æ•¸å­—ã€‚å¦‚æœæ²’æœ‰å°±çœ‹æœ‰æ²’æœ‰å¤§æ–¼äº”ï¼Œæœ‰å°±å°‡äº”çš„æ•¸å­—ç¾…é¦¬æ•¸å­—åŠ ä¸Šå»ï¼Œç„¶å¾Œå†æŠŠå‰©ä¸‹ä¸€åŠ ä¸Šã€‚\nä¾‹å¦‚:\n80: ç”±æ–¼ 80 çš„åä½æ•¸ç‚º 8ï¼Œé‚£å°±å…ˆåŠ ä¸Š 50(L) ï¼Œç„¶å¾Œ 8 - 5 = 3 ï¼Œå°±ä»£è¡¨è¦åŠ ä¸Š 3 å€‹ 10(X)ï¼Œæœ€å¾Œç­‰æ–¼ LXXX ç¨‹å¼ç¢¼ 1class Solution { 2 public String intToRoman(int num) { 3 StringBuilder result = new StringBuilder(); 4 appendThousandsRoman(num, result); 5 appendHundredsRoman(num, result); 6 appendTensRoman(num, result); 7 appendDigitsRoman(num, result); 8 return result.toString(); 9 } 10 11 public void appendThousandsRoman(int num, StringBuilder result) { 12 int nums_of_thousands_roman = num / 1000; 13 for(int i = 0; i \u0026lt; nums_of_thousands_roman; i++) { 14 result.append(\u0026#34;M\u0026#34;); 15 } 16 } 17 18 public void appendHundredsRoman(int num, StringBuilder result) { 19 int nums_of_hundreds_roman = (num % 1000) / 100; 20 if (nums_of_hundreds_roman == 9) { 21 result.append(\u0026#34;CM\u0026#34;); 22 return; 23 } else if (nums_of_hundreds_roman == 4) { 24 result.append(\u0026#34;CD\u0026#34;); 25 return; 26 } else if (nums_of_hundreds_roman \u0026gt;= 5) { 27 result.append(\u0026#34;D\u0026#34;); 28 nums_of_hundreds_roman -= 5; 29 } 30 31 for(int i = 0; i \u0026lt; nums_of_hundreds_roman; i++) { 32 result.append(\u0026#34;C\u0026#34;); 33 } 34 } 35 36 public void appendTensRoman(int num, StringBuilder result) { 37 int nums_of_hundreds_roman = (num % 100) / 10; 38 if (nums_of_hundreds_roman == 9) { 39 result.append(\u0026#34;XC\u0026#34;); 40 return; 41 } else if (nums_of_hundreds_roman == 4) { 42 result.append(\u0026#34;XL\u0026#34;); 43 return; 44 } else if (nums_of_hundreds_roman \u0026gt;= 5) { 45 result.append(\u0026#34;L\u0026#34;); 46 nums_of_hundreds_roman -= 5; 47 } 48 49 for(int i = 0; i \u0026lt; nums_of_hundreds_roman; i++) { 50 result.append(\u0026#34;X\u0026#34;); 51 } 52 } 53 54 public void appendDigitsRoman(int num, StringBuilder result) { 55 int nums_of_hundreds_roman = num % 10; 56 if (nums_of_hundreds_roman == 9) { 57 result.append(\u0026#34;IX\u0026#34;); 58 return; 59 } else if (nums_of_hundreds_roman == 4) { 60 result.append(\u0026#34;IV\u0026#34;); 61 return; 62 } else if (nums_of_hundreds_roman \u0026gt;= 5) { 63 result.append(\u0026#34;V\u0026#34;); 64 nums_of_hundreds_roman -= 5; 65 } 66 67 for(int i = 0; i \u0026lt; nums_of_hundreds_roman; i++) { 68 result.append(\u0026#34;I\u0026#34;); 69 } 70 } 71} ","date":"June 21, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/medium/12_integer_to_roman/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1655769600,"title":"æ¼”ç®—æ³• [Java] LeetCode #12. Integer to Roman"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Roman numerals are represented by seven different symbols: I, V, X, L, C, D and M.\nSymbol Value I 1 V 5 X 10 L 50 C 100 D 500 M 1000 For example, 2 is written as II in Roman numeral, just two ones added together. 12 is written as XII, which is simply X + II. The number 27 is written as XXVII, which is XX + V + II.\nRoman numerals are usually written largest to smallest from left to right. However, the numeral for four is not IIII. Instead, the number four is written as IV. Because the one is before the five we subtract it making four. The same principle applies to the number nine, which is written as IX. There are six instances where subtraction is used:\nI can be placed before V (5) and X (10) to make 4 and 9. X can be placed before L (50) and C (100) to make 40 and 90. C can be placed before D (500) and M (1000) to make 400 and 900. Given a roman numeral, convert it to an integer.\nExample 1:\n1Input: s = \u0026#34;III\u0026#34; 2Output: 3 3Explanation: III = 3. Example 2:\n1Input: s = \u0026#34;LVIII\u0026#34; 2Output: 58 3Explanation: L = 50, V= 5, III = 3. Example 3:\n1Input: s = \u0026#34;MCMXCIV\u0026#34; 2Output: 1994 3Explanation: M = 1000, CM = 900, XC = 90 and IV = 4. Constraints:\n1 \u0026lt;= s.length \u0026lt;= 15 s contains only the characters (\u0026lsquo;I\u0026rsquo;, \u0026lsquo;V\u0026rsquo;, \u0026lsquo;X\u0026rsquo;, \u0026lsquo;L\u0026rsquo;, \u0026lsquo;C\u0026rsquo;, \u0026lsquo;D\u0026rsquo;, \u0026lsquo;M\u0026rsquo;). It is guaranteed that s is a valid roman numeral in the range [1, 3999]. æˆ‘çš„æ€è·¯ å…ˆç”¨ HashMap å°‡æ‰€æœ‰çš„ç¬¦è™Ÿè·Ÿå€¼åš Mapping å­˜èµ·ä¾†ã€‚\nLoop ä¸€é Input çš„ String\nå¦‚æœé‡åˆ° Iã€ï¼¸ æˆ– C å…ˆç”¨ä¸€å€‹ Varaible previousChar å­˜èµ·ä¾†ä¸¦ä¸”ä¸åšä»»ä½•äº‹æƒ…è·³é å¦‚æœä¸æ˜¯å°±ç›´æ¥æŠŠç•¶ä¸‹ä»£è¡¨çš„æ•¸å­—åŠ ä¸Šã€‚ ç„¶å¾Œç•¶ç™¼ç¾ previousChar ä¸ç­‰æ–¼ç©ºæ™‚ï¼Œä»£è¡¨è‘—å‰ä¸€å€‹å­—æ¯ç‚º Iã€ï¼¸ æˆ– Cï¼Œé€™æ™‚å€™æœ‰ä¸€ä¸‹å…©ç¨®å¯èƒ½\né‚£å…­ç¨®æ’åˆ—çµ„åˆä¹‹ä¸€ ä¾‹å¦‚ IV ã€ IXã€XLã€XCã€CD æˆ– CMã€‚ é™¤äº†ä»¥ä¸Šå…­ç¨®ä»¥å¤–ï¼Œä»£è¡¨è‘— previousChar å°±ä»£è¡¨åŸæœ¬æ•¸å­—çš„æ„æ€ (ex I =\u0026gt; 1)ï¼Œå°‡ previousChar ä»£è¡¨çš„å€¼ç›´æ¥åŠ å›å»ã€‚ æœ€å¾Œç”±æ–¼æˆ‘å€‘ä¹‹å‰ä¸€ç›´æŠŠ Iã€ï¼¸ æˆ– C è·³éï¼Œç›´åˆ°ä¸‹ä¸€å€‹å­—æ¯ç¢ºèªå¾Œï¼Œæ‰æŠŠå®ƒåŠ æ¸›ä¸Šã€‚ ä½†é€™æœƒé€ æˆæ•´å€‹å­—ä¸²æœ€å¾Œä¸€å€‹å­—æ¯æ²’æœ‰è™•ç†åˆ°ï¼Œæ‰€ä»¥åœ¨ loop å®Œå­—ä¸²ä»¥å¾Œï¼Œè¦ç¢ºèªæœ‰æ²’æœ‰æ²’è™•ç†åˆ°çš„ Iã€ï¼¸ æˆ– Cï¼Œç„¶å¾Œå†åŠ å›å»ã€‚\næˆ‘çš„æ€è·¯ 1class Solution { 2 HashMap\u0026lt;Character, Integer\u0026gt; romanMap = new HashMap\u0026lt;\u0026gt;() {{ 3 put(\u0026#39;I\u0026#39;, 1); 4 put(\u0026#39;V\u0026#39;, 5); 5 put(\u0026#39;X\u0026#39;, 10); 6 put(\u0026#39;L\u0026#39;, 50); 7 put(\u0026#39;C\u0026#39;, 100); 8 put(\u0026#39;D\u0026#39;, 500); 9 put(\u0026#39;M\u0026#39;, 1000); 10 }}; 11 12 public int romanToInt(String s) { 13 int sum = 0; 14 char previousChar = Character.MIN_VALUE; 15 16 for(char c : s.toCharArray()) { 17 if (previousChar != Character.MIN_VALUE) { 18 if ((previousChar == \u0026#39;I\u0026#39; \u0026amp;\u0026amp; (c == \u0026#39;V\u0026#39; || c == \u0026#39;X\u0026#39;)) || 19 (previousChar == \u0026#39;X\u0026#39; \u0026amp;\u0026amp; (c == \u0026#39;L\u0026#39; || c == \u0026#39;C\u0026#39;)) || 20 (previousChar == \u0026#39;C\u0026#39; \u0026amp;\u0026amp; (c == \u0026#39;D\u0026#39; || c == \u0026#39;M\u0026#39;))) { 21 sum += romanMap.get(c) - romanMap.get(previousChar); 22 previousChar = Character.MIN_VALUE; 23 continue; 24 } else { 25 sum += romanMap.get(previousChar); 26 } 27 } 28 29 if (c == \u0026#39;I\u0026#39; || c == \u0026#39;X\u0026#39; || c ==\u0026#39;C\u0026#39;) { 30 previousChar = c; 31 } else { 32 sum += romanMap.get(c); 33 previousChar = Character.MIN_VALUE; 34 } 35 } 36 37 if (previousChar != Character.MIN_VALUE) { 38 sum += romanMap.get(previousChar); 39 } 40 41 return sum; 42 } 43} ","date":"June 20, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/easy/13_roman_to_integer/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1655683200,"title":"æ¼”ç®—æ³• [Java] LeetCode #13. Roman to Integer"},{"categories":[{"title":"JAVA","url":"/categories/java/"},{"title":"SPRING","url":"/categories/spring/"}],"content":"ä¸Šæ¬¡åˆ†äº«äº†å¦‚ä½•é€é Spring CLI å»ºç«‹ Hello World Applicationï¼Œé€™é‚Šæ–‡ç« å°‡å»¶çºŒä¸Šæ¬¡çš„æ–‡ç« ç¹¼çºŒç”¢ç”Ÿç¬¬ä¸€å€‹ endpoint å’Œç”¢ç”Ÿ Swagger é é¢\nå»ºç«‹ç¬¬ä¸€å€‹ Endpoints å»ºç«‹ä¸€å€‹æ–°çš„ package contoller ä¸¦å»ºç«‹ statusController.java\n1package com.example.springboot_demo.contoller; 2 3import org.springframework.web.bind.annotation.GetMapping; 4import org.springframework.web.bind.annotation.RestController; 5 6 7@RestController //1 8public class statusController { 9 10 @GetMapping(\u0026#34;/status\u0026#34;) //2 11 public String status() { 12 return \u0026#34;ok\u0026#34;; 13 } 14} å‚™è¨»1 : RestController ç­‰æ–¼ @Controller + @ResponseBodyï¼Œ\nResponseBody: Spring æœƒè‡ªå‹•å¹«ä½ æŠŠ Response è½‰æ›æˆ Json æ ¼å¼ Controller: å‘Šè¨´ Spring é€™æ˜¯ä¸€å€‹ request é€²å…¥é»çš„ Class ï¼Œè² è²¬èª¿åº¦è«‹æ±‚(RequestDispatcher) å‚™è¨»2 : GetMapping æ˜¯ RequestMapping çš„ alias åªæ˜¯ä¸€ç¨® Method æŒ‡å®šäº†æ˜¯ Http Get Methodï¼Œ RequestMapping å‘Šè¨´ SpringBoot endpoint è¨­å®šï¼Œå¦‚ path ã€header ç­‰ç­‰ï¼Œå¾Œé¢æœƒæåˆ°æ›´å¤šï¼Œç›®å‰å…ˆçŸ¥é“ç•¶æ‰“ /status é€™å€‹ endpoint æ™‚ï¼ŒSpringBoot æœƒæ‰¾åˆ°é€™å€‹å‡½å¼ä¸¦åŸ·è¡Œã€‚\næ¸¬è©¦ ç¾åœ¨å°‡ Web Server å•Ÿå‹•ï¼Œä¸¦æ‰“ status endpointï¼Œæˆ‘å€‘æœƒå¾—åˆ°æˆ‘å€‘å‰›å‰›æ‰€å¯«çš„ \u0026ldquo;OK\u0026rdquo;\n1$ curl http:/127.0.0.1:8080/status 2ok å»ºç«‹ Swagger UI åœ¨ pom.xml çš„ dependencies ä¸­åŠ å…¥ pringdoc-openapi-ui çš„ dependency\n1\u0026lt;!-- Swagger UI --\u0026gt; 2\u0026lt;dependency\u0026gt; 3 \u0026lt;groupId\u0026gt;org.springdoc\u0026lt;/groupId\u0026gt; 4 \u0026lt;artifactId\u0026gt;springdoc-openapi-ui\u0026lt;/artifactId\u0026gt; 5 \u0026lt;version\u0026gt;1.6.9\u0026lt;/version\u0026gt; 6\u0026lt;/dependency\u0026gt; é€™æ™‚å€™å°‡ Application åŸ·è¡Œèµ·ä¾†ï¼Œå°±å¯ä»¥åœ¨ /swagger-ui.html çš„ path çœ‹åˆ° Swagger UIã€‚\nSwagger UI å¯ä»¥çœ‹åˆ°ç¾åœ¨ Application Endpoint è³‡è¨Šï¼Œä¾‹å¦‚é€™å€‹ endpoint æ˜¯ä»€éº¼ methodã€éœ€è¦å¸¶ä»€éº¼åƒæ•¸ï¼Œä¸¦ä¸”æœƒè¿”å›æ¨£çš„è³‡æ–™çµæ§‹ç­‰ç­‰ã€‚ç•¶ç„¶é€™éœ€è¦ä¸€äº›é¡å¤–çš„ Coding æä¾›è³‡è¨Šï¼Œæ‰€ä»¥é€™å€‹ä¹‹å¾Œæ‰¾æ™‚é–“æœƒå†ç´°è¬›\né€™é‚Šé †ä¾¿ä»‹ç´¹ä¸€ä¸‹ application.properties é€™å€‹æ–‡ä»¶ï¼Œæ˜¯ç”¨ä¾†è¨­å®š Spring Boot Application çš„æª”æ¡ˆ\nä¾‹å¦‚æˆ‘æƒ³è¦è‡ªå®šç¾©å‰›å‰›å®‰è£ Swagger é è¨­çš„ URLï¼Œå¯ä»¥åœ¨ application.properties è£¡é¢åŠ ä»¥ä¸‹å…§å®¹\n1# swagger-ui custom path 2springdoc.swagger-ui.path=/swagger æ›´å¤šé€™å¯ä»¥è¨­å®šä»€éº¼å¯ä»¥çœ‹å®˜æ–¹æ–‡ä»¶\n","date":"June 19, 2022","img":"https://allenhsieh1992.com/images/spring.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/java/spring/springboot-with-swagger/","smallImg":"","tags":[{"title":"SPRING","url":"/tags/spring/"}],"timestamp":1655596800,"title":"Spring Boot With Swagger"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® A parentheses string is valid if and only if:\nIt is the empty string, It can be written as AB (A concatenated with B), where A and B are valid strings, or It can be written as (A), where A is a valid string. You are given a parentheses string s. In one move, you can insert a parenthesis at any position of the string.\nFor example, if s = \u0026ldquo;()))\u0026rdquo;, you can insert an opening parenthesis to be \u0026ldquo;(()))\u0026rdquo; or a closing parenthesis to be \u0026ldquo;())))\u0026rdquo;. Return the minimum number of moves required to make s valid.\nExample 1:\n1Input: s = \u0026#34;())\u0026#34; 2Output: 1 Example 2:\n1Input: s = \u0026#34;(((\u0026#34; 2Output: 3 Constraints:\n1 \u0026lt;= s.length \u0026lt;= 1000 s[i] is either \u0026lsquo;(\u0026rsquo; or \u0026lsquo;)\u0026rsquo;. æˆ‘çš„æ€è·¯ å»ºç«‹ä¸€å€‹ Stackï¼Œloop æ•´å€‹ String:\né‡åˆ°å·¦æ‹¬å¼§æ™‚å°‡å·¦æ‹¬å¼§æ”¾å…¥ Stackã€‚ é‡åˆ°å³æ‹¬å¼§æ™‚æª¢æŸ¥ Stack æ˜¯å¦é‚„æœ‰å·¦æ‹¬å¼§: å¦‚æœæ²’æœ‰å°±ä»£è¡¨é€™é‚Šéœ€è¦åŠ ä¸€å€‹å·¦æ‹¬å¼§ï¼Œæ‰€ä»¥çµæœè¦ +1 å¦‚æœæœ‰å°±ä»£è¡¨é€™æ˜¯ä¸€å€‹ pair ï¼Œé‚£å°±å¯ä»¥å¾ Stack ä¸­ pop æ‰é€™å€‹å·¦æ‹¬å¼§ æœ€å¾Œæ•´å€‹ String loop éä¸€éä»¥å¾Œï¼Œçœ‹çœ‹ Stack ä¸­æ˜¯å¦é‚„æœ‰å‰©é¤˜çš„å·¦æ‹¬å¼§ï¼Œå¦‚æœæœ‰é€™äº›å·¦æ‹¬å¼§æ¯ä¸€å€‹éƒ½éœ€è¦é…ä¸€å€‹å³æ‹¬å¼§ï¼Œæ‰€ä»¥è¿”å›çµæœè¦åŠ ä¸Š Stack Size\nç¨‹å¼ç¢¼ 1class Solution { 2 public int minAddToMakeValid(String s) { 3 Stack\u0026lt;Character\u0026gt; stack = new Stack\u0026lt;\u0026gt;(); 4 int sum = 0; 5 for(char c : s.toCharArray()) { 6 if (c == \u0026#39;(\u0026#39;) { 7 stack.add(c); 8 continue; 9 } 10 11 if (stack.empty()) { 12 sum++; 13 } else { 14 stack.pop(); 15 } 16 } 17 18 return sum + stack.size(); 19 } 20} ","date":"June 19, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/medium/921.minimum_add_to_make_parentheses_valid/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1655596800,"title":"æ¼”ç®—æ³• [Java] LeetCode #921. Minimum Add to Make Parentheses Valid"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Given a string s, remove the vowels \u0026lsquo;a\u0026rsquo;, \u0026rsquo;e\u0026rsquo;, \u0026lsquo;i\u0026rsquo;, \u0026lsquo;o\u0026rsquo;, and \u0026lsquo;u\u0026rsquo; from it, and return the new string.\nExample 1:\n1Input: s = \u0026#34;leetcodeisacommunityforcoders\u0026#34; 2Output: \u0026#34;ltcdscmmntyfrcdrs\u0026#34; Example 2:\n1Input: s = \u0026#34;aeiou\u0026#34; 2Output: \u0026#34;\u0026#34; Constraints:\n1 \u0026lt;= s.length \u0026lt;= 1000 s consists of only lowercase English letters. æˆ‘çš„æ€è·¯ ç”±æ–¼æ˜¯å°‡ä¸€å€‹ String ä¸­æ‰€æœ‰çš„æ¯éŸ³éƒ½ç§»é™¤ï¼Œæ‰€ä»¥æˆ‘å€‘ç›´æ¥å»ºç«‹ä¸€å€‹æ–°çš„ StringBuilderï¼Œå°‡ Input loop ä¸€éï¼Œå¦‚æœä¸æ˜¯æ¯éŸ³çš„è©±å°±åŠ å…¥åˆ° StringBuilder è£¡é¢ï¼Œæœ€å¾Œè¿”å› String\nNote: å¦‚æœä¸çŸ¥é“ç‚ºä»€éº¼è¦ä½¿ç”¨ StringBuilderï¼Œå¯ä»¥ google \u0026ldquo;String concat vs StringBuilde\u0026rdquo;ã€‚\nç¨‹å¼ç¢¼ 1class Solution { 2 public String removeVowels(String s) { 3 StringBuilder result = new StringBuilder(); 4 5 for(char c : s.toCharArray()) { 6 if (!isVowels(c)) { 7 result.append(c); 8 } 9 } 10 return result.toString(); 11 } 12 13 public boolean isVowels(char c) { 14 if (c == \u0026#39;a\u0026#39; || 15 c == \u0026#39;e\u0026#39; || 16 c == \u0026#39;i\u0026#39; || 17 c == \u0026#39;o\u0026#39; || 18 c == \u0026#39;u\u0026#39;) { 19 return true; 20 } 21 return false; 22 } 23} ","date":"June 18, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/easy/1119_remove_vowels_from_a_string/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1655510400,"title":"æ¼”ç®—æ³• [Java] LeetCode #1119. Remove Vowels From a String"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® There are n buildings in a line. You are given an integer array heights of size n that represents the heights of the buildings in the line.\nThe ocean is to the right of the buildings. A building has an ocean view if the building can see the ocean without obstructions. Formally, a building has an ocean view if all the buildings to its right have a smaller height.\nReturn a list of indices (0-indexed) of buildings that have an ocean view, sorted in increasing order.\nExample 1:\n1Input: heights = [4,2,3,1] 2Output: [0,2,3] 3Explanation: Building 1 (0-indexed) does not have an ocean view because building 2 is taller. Example 2:\n1Input: heights = [4,3,2,1] 2Output: [0,1,2,3] 3Explanation: All the buildings have an ocean view. Example 3:\n1Input: heights = [1,3,2,4] 2Output: [3] 3Explanation: Only building 3 has an ocean view. Constraints: $$ \\begin{array}{l} 1 \u003c= heights.length \u003c= 10^5 \\\\ 1 \u003c= heights[i] \u003c= 10^9 \\end{array} $$ æˆ‘çš„æ€è·¯ æˆ‘å€‘ç¾åœ¨è¦çœ‹æœ‰å¤šå°‘å»ºç¯‰ç‰©å¯ä»¥çœ‹åˆ°å³é‚Šçš„æµ·æ´‹ï¼Œæ‰€ä»¥ç•¶æˆ‘åœ¨ç¬¬ i å€‹å»ºç¯‰ç‰©æ™‚ï¼Œi å»ºç¯‰ç‰©å³é‚Šçš„å…¨éƒ¨å»ºç¯‰ç‰©éƒ½éœ€è¦æ¯” i å»ºç¯‰ç‰©çŸ®ã€‚\næ‰€ä»¥æˆ‘æœƒå¾æœ€å³é–‹å§‹å¾€å·¦çœ‹ï¼Œç”¨ä¸€å€‹è®Šæ•¸å»è¨˜éŒ„ç•¶ä¸‹æœ€é«˜å»ºç¯‰ç‰©çš„é«˜åº¦ï¼Œå¦‚æœç•¶ä¸‹çš„å»ºç¯‰ç‰©æ²’æœ‰æ¯”è¨˜éŒ„çš„å»ºç¯‰ç‰©é«˜ï¼Œä¹Ÿå°±ä»£è¡¨å¯ä»¥çœ‹åˆ°æµ·æ´‹ã€‚\nç”±æ–¼å›å‚³çš„çµæœå¿…é ˆæ˜¯ç”±å·¦åˆ°å³çš„ï¼Œæ‰€ä»¥é€™é‚Šæˆ‘æœƒå…ˆç”¨ Stack å°‡å¯çœ‹è¦‹æµ·æ´‹çš„å»ºç¯‰ç‰©å­˜ä¸‹ä¾†ï¼Œæœ€å¾Œåœ¨å°‡ Stack è£¡é¢çš„æ±è¥¿è½‰æ›å› Array è¿”å›ã€‚\nç¨‹å¼ç¢¼ 1class Solution { 2 public int[] findBuildings(int[] heights) { 3 // åˆå§‹åŒ–æœ€å³é‚Šçš„å»ºç¯‰ç‰© 4 int heightest = heights[heights.length - 1]; 5 Stack\u0026lt;Integer\u0026gt; stack = new Stack(); 6 // æœ€å³é‚Šçš„æ”¾å­ä¸€å®šçœ‹çš„åˆ°æµ· 7 stack.push(heights.length - 1); 8 9 for(int i = heights.length - 1; i \u0026gt;= 0; i--) { 10 if (heights[i] \u0026gt; heightest) { 11 stack.push(i); 12 heightest = heights[i]; 13 } 14 } 15 16 int size = stack.size(); 17 int[] result = new int[size]; 18 for(int i = 0; i \u0026lt; size; i++) { 19 result[i] = stack.pop(); 20 } 21 return result; 22 } 23} Time complexity: O(N)\nSpace complexity: O(N)\n","date":"June 17, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/medium/1762_buildings_with_an_ocean_view/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1655424000,"title":"æ¼”ç®—æ³• [Java] LeetCode #1762. Buildings With an Ocean View"},{"categories":[{"title":"JAVA","url":"/categories/java/"},{"title":"SPRING","url":"/categories/spring/"}],"content":"å‰ä¸€é™£å­å…¬å¸å°ˆæ¡ˆè®“æˆ‘æœ‰æ©Ÿæœƒä½¿ç”¨ Spring Boot é–‹ç™¼ï¼Œä½†å› ç‚ºç•¶æ™‚å°ˆæ¡ˆæ™‚é–“å¾ˆè¶•ï¼Œæ‰€ä»¥ä¹Ÿä¸€ç›´å°ˆæ³¨åœ¨é–‹ç™¼ä¸Šç•¶æ™‚é–‹ç™¼æ‰€éœ€è¦çš„æŠ€è¡“ã€‚ç”±æ–¼ä¸ç†Ÿ Spring Boot or Spring Coreï¼Œæ‰€ä»¥ç”¨çš„æ±è¥¿éƒ½å¾ˆåŸºç¤ã€‚æ‰€ä»¥æˆ‘æƒ³è¶ç¾åœ¨å¥½å¥½çš„å……å¯¦è‡ªå·±ä¸¦å˜—è©¦å¯«ä¸€å€‹ Spring Boot ç³»åˆ—çš„æ–‡ç« ã€‚\nç’°å¢ƒç¢ºèª é€™ç³»åˆ—çš„æ–‡ç« ï¼Œæœƒä»¥ä»¥ä¸‹çš„ç‰ˆæœ¬ç‚ºä¸»\nJava 11 Spring Boot 2.7 Apache Maven 3.8.2 å»ºç«‹ç¬¬ä¸€å€‹ Hello World ç”±æ–¼è‰¾å€«ä»¥å‰å·²ç¶“ä½¿ç”¨é IDE æˆ– ç¶²é ç‰ˆçš„ Spring Boot Initializr åˆå§‹åŒ–ï¼Œæ‰€ä»¥é€™æ¬¡æœƒä»¥é‚„æœªä½¿ç”¨éçš„ Spring CLIã€‚\nå®‰è£ Spring CLI 1$ brew tap spring-io/tap 2$ brew install springboot 3 4$ spring --version 5Spring CLI v2.7.0 ä½¿ç”¨ Spring CLI åˆå§‹åŒ–å°ˆæ¡ˆ 1$ spring init -dweb -j 11 -v 1.0.0 -a helloworld 2Using service at https://start.spring.io 3Content saved to \u0026#39;helloworld.zip\u0026#39; é€™é‚Šå°åƒæ•¸åšä¸€äº›å°è§£é‡‹\n-d: æ˜¯ Dependenciesï¼ŒæŒ‡å®šå°ˆæ¡ˆæ‰€éœ€è¦çš„ packagesï¼Œç›®å‰å…ˆé¸æ“‡æœ€åŸºæœ¬çš„ web starter -j: æ˜¯ Java ç‰ˆæœ¬ï¼Œé€™é‚Šæˆ‘å€‘é¸æ“‡ Java 11 -v: æ­¤å°ˆæ¡ˆçš„ç‰ˆæœ¬åˆå§‹åŒ– -a: æ˜¯ artifact Id æ›´å¤šçš„åƒæ•¸æˆ–è€… dependencies çš„é¸æ“‡ï¼Œå¯ä»¥é€é spring init -list çœ‹åˆ°ã€‚\nåŸ·è¡Œ Spring Boot å»ºç«‹ä¸€å€‹æ–°çš„è³‡æ–™å¤¾å¦‚ demoï¼Œå°‡å‰›å‰› Spring CLI æ‰€ç”¢ç”Ÿçš„ ZIP æª”æ¡ˆæ”¾å…¥è³‡æ–™å¤¾ä¸­ï¼Œä¸¦è§£å£“ç¸®ã€‚ åœ¨ Terminal ä¸­ç§»å‹•åˆ°é‚£å€‹ folder ä¸¦åœ¨è£¡é¢åŸ·è¡Œ \u0026ldquo;./mvnw spring-boot:run\u0026rdquo; ï¼Œæœ€å¾Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç•«é¢\n1 . ____ _ __ _ _ 2 /\\\\ / ___\u0026#39;_ __ _ _(_)_ __ __ _ \\ \\ \\ \\ 3( ( )\\___ | \u0026#39;_ | \u0026#39;_| | \u0026#39;_ \\/ _` | \\ \\ \\ \\ 4 \\\\/ ___)| |_)| | | | | || (_| | ) ) ) ) 5 \u0026#39; |____| .__|_| |_|_| |_\\__, | / / / / 6 =========|_|==============|___/=/_/_/_/ 7 :: Spring Boot :: (v2.7.0) 8 92022-06-12 22:08:28.328 INFO 85059 --- [ main] com.example.helloworld.DemoApplication : Starting DemoApplication using Java 17 on ChangdeMacBook-Pro.local with PID 85059 (/Users/allen/helloworld/target/classes started by allen in /Users/allen/helloworld) 102022-06-12 22:08:28.331 INFO 85059 --- [ main] com.example.helloworld.DemoApplication : No active profile set, falling back to 1 default profile: \u0026#34;default\u0026#34; 112022-06-12 22:08:29.023 INFO 85059 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http) 122022-06-12 22:08:29.035 INFO 85059 --- [ main] o.apache.catalina.core.StandardService : Starting service [Tomcat] 132022-06-12 22:08:29.035 INFO 85059 --- [ main] org.apache.catalina.core.StandardEngine : Starting Servlet engine: [Apache Tomcat/9.0.63] 142022-06-12 22:08:29.107 INFO 85059 --- [ main] o.a.c.c.C.[Tomcat].[localhost].[/] : Initializing Spring embedded WebApplicationContext 152022-06-12 22:08:29.107 INFO 85059 --- [ main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 721 ms 162022-06-12 22:08:29.395 INFO 85059 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path \u0026#39;\u0026#39; 172022-06-12 22:08:29.404 INFO 85059 --- [ main] com.example.helloworld.DemoApplication : Started DemoApplication in 1.627 seconds (JVM running for 1.887) å¾ä¸Šé¢çš„è¨Šæ¯ä¾†çœ‹ï¼Œå¯ä»¥çœ‹åˆ° Spring Application å·²ç¶“ç”¨ Tomcat èµ·ä¾†ï¼Œä¸”æ­£åœ¨è½ 8080 portã€‚\né€™æ™‚æˆ‘å€‘å˜—è©¦æ‰“ 8080 port\n1 ~ î‚° curl http://127.0.0. 2{\u0026#34;timestamp\u0026#34;:\u0026#34;2022-06-12T14:10:55.321+00:00\u0026#34;,\u0026#34;status\u0026#34;:404,\u0026#34;error\u0026#34;:\u0026#34;Not Found\u0026#34;,\u0026#34;path\u0026#34;:\u0026#34;/\u0026#34;} æœƒå¾—åˆ° 404 Error Msgï¼Œé€™æ˜¯æ­£å¸¸çš„ï¼Œå› ç‚ºç›®å‰æˆ‘å€‘é‚„æ²’æœ‰å»ºç«‹ä»»ä½•çš„ endpoint ï½ ä½†è‡³å°‘ç¢ºèª Tomcat æœ‰èµ·ä¾†ã€‚\nSpring CLI ç”¢ç”Ÿæª”æ¡ˆ æˆ‘å€‘å¯ä»¥çœ‹åˆ° Spring CLI å·²ç¶“å¹«æˆ‘å€‘ç”¢ç”Ÿäº†ä»¥ä¸‹çš„æª”æ¡ˆ\n1$ tree 2. 3â”œâ”€â”€ HELP.md 4â”œâ”€â”€ mvnw 5â”œâ”€â”€ mvnw.cmd 6â”œâ”€â”€ pom.xml 7â””â”€â”€ src 8 â”œâ”€â”€ main 9 â”‚Â â”œâ”€â”€ java 10 â”‚Â â”‚Â â””â”€â”€ com 11 â”‚Â â”‚Â â””â”€â”€ example 12 â”‚Â â”‚Â â””â”€â”€ helloworld 13 â”‚Â â”‚Â â””â”€â”€ DemoApplication.java 14 â”‚Â â””â”€â”€ resources 15 â”‚Â â”œâ”€â”€ application.properties 16 â”‚Â â”œâ”€â”€ static 17 â”‚Â â””â”€â”€ templates 18 â””â”€â”€ test 19 â””â”€â”€ java 20 â””â”€â”€ com 21 â””â”€â”€ example 22 â””â”€â”€ helloworld 23 â””â”€â”€ DemoApplicationTests.java DemoApplication.java æˆ‘å€‘å¯ä»¥çœ‹åˆ° Spring Boot çš„é€²å…¥é» SpringApplication.runã€‚\nå¦‚æœå° Spring Boot å•Ÿå‹•æ™‚åšäº†ä»€éº¼äº‹æƒ…æœ‰èˆˆè¶£ï¼Œå¯ä»¥çœ‹çœ‹é€™ç¯‡æ–‡ç«  å¾ SpringBootApplication è«‡è«‡ Spring Boot å•“å‹•æ™‚éƒ½åšäº†å“ªäº›äº‹ï¼Ÿ\n1package com.example.helloworld; 2 3import org.springframework.boot.SpringApplication; 4import org.springframework.boot.autoconfigure.SpringBootApplication; 5 6@SpringBootApplication 7public class DemoApplication { 8 9\tpublic static void main(String[] args) { 10\tSpringApplication.run(DemoApplication.class, args); 11\t} 12 13} Pom.xml 1\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; 2\u0026lt;project xmlns=\u0026#34;http://maven.apache.org/POM/4.0.0\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; 3\txsi:schemaLocation=\u0026#34;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\u0026#34;\u0026gt; 4\t\u0026lt;modelVersion\u0026gt;4.0.0\u0026lt;/modelVersion\u0026gt; 5\t\u0026lt;parent\u0026gt; 6\t\u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; 7\t\u0026lt;artifactId\u0026gt;spring-boot-starter-parent\u0026lt;/artifactId\u0026gt; 8\t\u0026lt;version\u0026gt;2.7.0\u0026lt;/version\u0026gt; 9\t\u0026lt;relativePath/\u0026gt; \u0026lt;!-- lookup parent from repository --\u0026gt; 10\t\u0026lt;/parent\u0026gt; 11\t\u0026lt;groupId\u0026gt;com.example\u0026lt;/groupId\u0026gt; 12\t\u0026lt;artifactId\u0026gt;helloworld\u0026lt;/artifactId\u0026gt; 13\t\u0026lt;version\u0026gt;1.0.0\u0026lt;/version\u0026gt; 14\t\u0026lt;name\u0026gt;demo\u0026lt;/name\u0026gt; 15\t\u0026lt;description\u0026gt;Demo project for Spring Boot\u0026lt;/description\u0026gt; 16\t\u0026lt;properties\u0026gt; 17\t\u0026lt;java.version\u0026gt;11\u0026lt;/java.version\u0026gt; 18\t\u0026lt;/properties\u0026gt; 19\t\u0026lt;dependencies\u0026gt; 20\t\u0026lt;dependency\u0026gt; 21\t\u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; 22\t\u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; 23\t\u0026lt;/dependency\u0026gt; 24 25\t\u0026lt;dependency\u0026gt; 26\t\u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; 27\t\u0026lt;artifactId\u0026gt;spring-boot-starter-test\u0026lt;/artifactId\u0026gt; 28\t\u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; 29\t\u0026lt;/dependency\u0026gt; 30\t\u0026lt;/dependencies\u0026gt; 31 32\t\u0026lt;build\u0026gt; 33\t\u0026lt;plugins\u0026gt; 34\t\u0026lt;plugin\u0026gt; 35\t\u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; 36\t\u0026lt;artifactId\u0026gt;spring-boot-maven-plugin\u0026lt;/artifactId\u0026gt; 37\t\u0026lt;/plugin\u0026gt; 38\t\u0026lt;/plugins\u0026gt; 39\t\u0026lt;/build\u0026gt; 40 41\u0026lt;/project\u0026gt; å¾ä¸Šé¢çœ‹åˆ°ï¼Œæˆ‘å€‘ç¹¼æ‰¿äº† starter parentï¼Œä¸” dependencies å¦‚é æœŸè£¡é¢åŒ…å«äº† web starter è·Ÿæˆ‘å€‘ä¸€é–‹å§‹åˆå§‹åŒ–å°ˆæ¡ˆæ™‚æ‰€è¦æ±‚çš„ä¸€æ¨£ã€‚\næœ€å¾Œé€™é‚Šå¯ä»¥çœ‹åˆ°ï¼Œæœ‰è£ spring boot maven pluginï¼Œé€™æ˜¯æˆ‘å€‘åŸ·è¡Œ mvn spring-boot:run æ‰€éœ€è¦çš„ pluginã€‚\nMaven dependency tree ç•¶æˆ‘å€‘ä¸‹ \u0026ldquo;./mvnw dependency:tree\u0026rdquo; æ™‚ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°æ•´å€‹å°ˆæ¡ˆæ‰€éœ€è¦çš„æ‰€åŒ…å«çš„ packageï¼Œä¹Ÿå¯ä»¥çœ‹åˆ° package ä¸­æ‰€æ‹‰åˆ°çš„å…¶ä»– package æˆ–è€…æˆ‘å€‘å« transitive dependenciesã€‚\nä»¥ä¸‹é¢çš„çµæœç‚ºç¯„ä¾‹ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ° spring-boot-starter-web è£¡é¢æœ‰åŒ…å« spring-boot-starter-tomcatã€‚\n1$ ./mvnw dependency:tree 2[INFO] com.example:helloworld:jar:1.0.0 3[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:2.7.0:compile 4[INFO] | +- org.springframework.boot:spring-boot-starter:jar:2.7.0:compile 5[INFO] | | +- org.springframework.boot:spring-boot:jar:2.7.0:compile 6[INFO] | | +- org.springframework.boot:spring-boot-autoconfigure:jar:2.7.0:compile 7[INFO] | | +- org.springframework.boot:spring-boot-starter-logging:jar:2.7.0:compile 8[INFO] | | | +- ch.qos.logback:logback-classic:jar:1.2.11:compile 9[INFO] | | | | \\- ch.qos.logback:logback-core:jar:1.2.11:compile 10[INFO] | | | +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.17.2:compile 11[INFO] | | | | \\- org.apache.logging.log4j:log4j-api:jar:2.17.2:compile 12[INFO] | | | \\- org.slf4j:jul-to-slf4j:jar:1.7.36:compile 13[INFO] | | +- jakarta.annotation:jakarta.annotation-apiğŸ«™1.3.5:compile 14[INFO] | | \\- org.yaml:snakeyaml:jar:1.30:compile 15[INFO] | +- org.springframework.boot:spring-boot-starter-json:jar:2.7.0:compile 16[INFO] | | +- com.fasterxml.jackson.core:jackson-databind:jar:2.13.3:compile 17[INFO] | | | +- com.fasterxml.jackson.core:jackson-annotations:jar:2.13.3:compile 18[INFO] | | | \\- com.fasterxml.jackson.core:jackson-core:jar:2.13.3:compile 19[INFO] | | +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.13.3:compile 20[INFO] | | +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.13.3:compile 21[INFO] | | \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.13.3:compile 22[INFO] | +- org.springframework.boot:spring-boot-starter-tomcat:jar:2.7.0:compile 23[INFO] | | +- org.apache.tomcat.embed:tomcat-embed-core:jar:9.0.63:compile 24[INFO] | | +- org.apache.tomcat.embed:tomcat-embed-el:jar:9.0.63:compile 25[INFO] | | \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:9.0.63:compile 26[INFO] | +- org.springframework:spring-web:jar:5.3.20:compile 27[INFO] | | \\- org.springframework:spring-beans:jar:5.3.20:compile 28[INFO] | \\- org.springframework:spring-webmvc:jar:5.3.20:compile 29[INFO] | +- org.springframework:spring-aop:jar:5.3.20:compile 30[INFO] | +- org.springframework:spring-context:jar:5.3.20:compile 31[INFO] | \\- org.springframework:spring-expression:jar:5.3.20:compile å°‡ Tomcat æ›æˆ Jetty å¾ dependency tree æˆ‘å€‘å·²ç¶“çœ‹åˆ° tomcat æ˜¯ç”± web start æ‹‰å…¥çš„ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥é€é exclusion å°‡ tomcat starter å¾ web starter ä¸­æ’é™¤ï¼Œä¸¦æ‰‹å‹•æ‹‰å…¥ jetty starterã€‚\n1\u0026lt;dependencies\u0026gt; 2\t\u0026lt;dependency\u0026gt; 3\t\u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; 4\t\u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; 5\t\u0026lt;exclusions\u0026gt; 6\t\u0026lt;!-- å»é™¤Tomcatå®¹å™¨ --\u0026gt; 7\t\u0026lt;exclusion\u0026gt; 8\t\u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; 9\t\u0026lt;artifactId\u0026gt;spring-boot-starter-tomcat\u0026lt;/artifactId\u0026gt; 10\t\u0026lt;/exclusion\u0026gt; 11\t\u0026lt;/exclusions\u0026gt; 12\t\u0026lt;/dependency\u0026gt; 13\t\u0026lt;!-- å¢åŠ Jettyå®¹å™¨ --\u0026gt; 14\t\u0026lt;dependency\u0026gt; 15\t\u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; 16\t\u0026lt;artifactId\u0026gt;spring-boot-starter-jetty\u0026lt;/artifactId\u0026gt; 17\t\u0026lt;/dependency\u0026gt; 18\t\u0026lt;dependency\u0026gt; 19\t\u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; 20\t\u0026lt;artifactId\u0026gt;spring-boot-starter-test\u0026lt;/artifactId\u0026gt; 21\t\u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; 22\t\u0026lt;/dependency\u0026gt; 23\u0026lt;/dependencies\u0026gt; é€™æ™‚æˆ‘å€‘é‡æ–°åŸ·è¡Œ ./mvnw spring-boot:run\n1 . ____ _ __ _ _ 2 /\\\\ / ___\u0026#39;_ __ _ _(_)_ __ __ _ \\ \\ \\ \\ 3( ( )\\___ | \u0026#39;_ | \u0026#39;_| | \u0026#39;_ \\/ _` | \\ \\ \\ \\ 4 \\\\/ ___)| |_)| | | | | || (_| | ) ) ) ) 5 \u0026#39; |____| .__|_| |_|_| |_\\__, | / / / / 6 =========|_|==============|___/=/_/_/_/ 7 :: Spring Boot :: (v2.7.0) 8 92022-06-12 22:49:19.224 INFO 87278 --- [ main] com.example.helloworld.DemoApplication : Starting DemoApplication using Java 17 on ChangdeMacBook-Pro.local with PID 87278 (/Users/allen/helloworld/target/classes started by allen in /Users/allen/helloworld) 102022-06-12 22:49:19.226 INFO 87278 --- [ main] com.example.helloworld.DemoApplication : No active profile set, falling back to 1 default profile: \u0026#34;default\u0026#34; 112022-06-12 22:49:19.740 INFO 87278 --- [ main] org.eclipse.jetty.util.log : Logging initialized @1029ms to org.eclipse.jetty.util.log.Slf4jLog 122022-06-12 22:49:19.857 INFO 87278 --- [ main] o.s.b.w.e.j.JettyServletWebServerFactory : Server initialized with port: 8080 132022-06-12 22:49:19.860 INFO 87278 --- [ main] org.eclipse.jetty.server.Server : jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 17+0 142022-06-12 22:49:19.896 INFO 87278 --- [ main] o.e.j.s.h.ContextHandler.application : Initializing Spring embedded WebApplicationContext 152022-06-12 22:49:19.897 INFO 87278 --- [ main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 633 ms 162022-06-12 22:49:19.958 INFO 87278 --- [ main] org.eclipse.jetty.server.session : DefaultSessionIdManager workerName=node0 172022-06-12 22:49:19.958 INFO 87278 --- [ main] org.eclipse.jetty.server.session : No SessionScavenger set, using defaults 182022-06-12 22:49:19.959 INFO 87278 --- [ main] org.eclipse.jetty.server.session : node0 Scavenging every 600000ms 192022-06-12 22:49:19.966 INFO 87278 --- [ main] o.e.jetty.server.handler.ContextHandler : Started o.s.b.w.e.j.JettyEmbeddedWebAppContext@69da0b12{application,/,[file:///private/var/folders/dx/18qvmm_55hz74r3xdx9wn6x40000gn/T/jetty-docbase.8080.12428220257398218881/],AVAILABLE} 202022-06-12 22:49:19.966 INFO 87278 --- [ main] org.eclipse.jetty.server.Server : Started @1256ms 212022-06-12 22:49:20.187 INFO 87278 --- [ main] o.e.j.s.h.ContextHandler.application : Initializing Spring DispatcherServlet \u0026#39;dispatcherServlet\u0026#39; 222022-06-12 22:49:20.187 INFO 87278 --- [ main] o.s.web.servlet.DispatcherServlet : Initializing Servlet \u0026#39;dispatcherServlet\u0026#39; 232022-06-12 22:49:20.188 INFO 87278 --- [ main] o.s.web.servlet.DispatcherServlet : Completed initialization in 1 ms 242022-06-12 22:49:20.219 INFO 87278 --- [ main] o.e.jetty.server.AbstractConnector : Started ServerConnector@17ca8b92{HTTP/1.1, (http/1.1)}{0.0.0.0:8080} 252022-06-12 22:49:20.220 INFO 87278 --- [ main] o.s.b.web.embedded.jetty.JettyWebServer : Jetty started on port(s) 8080 (http/1.1) with context path \u0026#39;/\u0026#39; 262022-06-12 22:49:20.230 INFO 87278 --- [ main] com.example.helloworld.DemoApplication : Started DemoApplication in 1.274 seconds (JVM running for 1.52) æˆ‘å€‘å¯ä»¥çœ‹åˆ° Application ç¾åœ¨ç”± Jetty 9.4 èµ·ä¾†ï½\n","date":"June 8, 2022","img":"https://allenhsieh1992.com/images/spring.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/java/spring/springboot-hello-world/","smallImg":"","tags":[{"title":"SPRING","url":"/tags/spring/"}],"timestamp":1654646400,"title":"é€é Spring CLI å»ºç«‹ Spring Boot Hello World"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Given a 2D matrix matrix, handle multiple queries of the following type:\nCalculate the sum of the elements of matrix inside the rectangle defined by its upper left corner (row1, col1) and lower right corner (row2, col2). Implement the NumMatrix class:\nNumMatrix(int[][] matrix) Initializes the object with the integer matrix matrix. int sumRegion(int row1, int col1, int row2, int col2) Returns the sum of the elements of matrix inside the rectangle defined by its upper left corner (row1, col1) and lower right corner (row2, col2). Example:\n1Input 2[\u0026#34;NumMatrix\u0026#34;, \u0026#34;sumRegion\u0026#34;, \u0026#34;sumRegion\u0026#34;, \u0026#34;sumRegion\u0026#34;] 3[[[[3, 0, 1, 4, 2], [5, 6, 3, 2, 1], [1, 2, 0, 1, 5], [4, 1, 0, 1, 7], [1, 0, 3, 0, 5]]], [2, 1, 4, 3], [1, 1, 2, 2], [1, 2, 2, 4]] 4Output 5[null, 8, 11, 12] 6 7Explanation 8NumMatrix numMatrix = new NumMatrix([[3, 0, 1, 4, 2], [5, 6, 3, 2, 1], [1, 2, 0, 1, 5], [4, 1, 0, 1, 7], [1, 0, 3, 0, 5]]); 9numMatrix.sumRegion(2, 1, 4, 3); // return 8 (i.e sum of the red rectangle) 10numMatrix.sumRegion(1, 1, 2, 2); // return 11 (i.e sum of the green rectangle) 11numMatrix.sumRegion(1, 2, 2, 4); // return 12 (i.e sum of the blue rectangle) Constraints:\nm == matrix.length n == matrix[i].length 1 \u0026lt;= m, n \u0026lt;= 200 -104 \u0026lt;= matrix[i][j] \u0026lt;= 104 0 \u0026lt;= row1 \u0026lt;= row2 \u0026lt; m 0 \u0026lt;= col1 \u0026lt;= col2 \u0026lt; n At most 104 calls will be made to sumRegion. æˆ‘çš„æ€è·¯ ç”±æ–¼æä¾›äº† row1, row2, col1, col2ï¼Œæ¯æ¬¡ call sumRegion çš„æ™‚å€™ï¼Œloop ä¸€éå°‡æ‰€æœ‰çš„æ•¸å­—åŠ èµ·ä¾†\nç¨‹å¼ç¢¼ 1class NumMatrix { 2 int[][] matrix; 3 4 public NumMatrix(int[][] matrix) { 5 this.matrix = matrix; 6 } 7 8 public int sumRegion(int row1, int col1, int row2, int col2) { 9 int sum = 0; 10 for(int row = row1; row \u0026lt;= row2; row++) { 11 for(int col = col1; col \u0026lt;= col2; col++) { 12 sum += matrix[row][col]; 13 } 14 } 15 return sum; 16 } 17} æˆ‘çš„æ€è·¯2 ç”±æ–¼å¾ç¯„ä¾‹å¯ä»¥çœ‹åˆ° sumRegion æ˜¯åœ¨åŒä¸€å€‹ matrix é‡è¤‡å»è¨ˆç®—ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ call NumMatrix constructor æ™‚äº‹å…ˆåšä¸€äº›è¨ˆç®—ä¸¦å­˜èµ·ä¾†ï¼Œä»¥ä¾¿åŠ å¿« sumRegion æ™‚çš„è¨ˆç®—ã€‚\nç¾åœ¨æˆ‘æ‰“ç®—å»ºç«‹ 2D Array cacheï¼Œè€Œ cache[m][n] ä»£è¡¨çš„æ˜¯ [0][0] åˆ° [m][n] çš„æ‰€æœ‰æ•¸å­—çš„ç¸½å’Œã€‚\nå¾ä¸‹é¢çš„åœ–æˆ‘å€‘å¯ä»¥çœ‹åˆ° cache[d1][d2] = A + B + C + D\nå¦‚æœæˆ‘å€‘åªæ˜¯æƒ³è¦åœ–ä¸­ D çš„é¢ç©çš„è©±ï¼Œå¯ä»¥ç­‰æ–¼\n= (A + B + C + D) - (A + C) - (A + B) + A = cache[d1][d2] - cache[c1][c2] - cache[b1][b2] + cache[a1][a2] ![example]example.webp?width=1024px#center)\nç¨‹å¼ç¢¼2 1class NumMatrix { 2 int[][] cache; 3 4 public NumMatrix(int[][] matrix) { 5 int m = matrix.length; 6 int n = matrix[0].length; 7 cache = new int[m][n]; 8 cache[0][0] = matrix[0][0]; 9 10 for(int row = 0; row \u0026lt; m; row++) { 11 for(int col = 0; col \u0026lt; n; col++) { 12 if (row == 0 \u0026amp;\u0026amp; col ==0) { 13 continue; 14 } 15 if(row == 0) { 16 cache[row][col] = cache[row][col-1] + matrix[row][col]; 17 } else if (col == 0) { 18 cache[row][col] = cache[row -1][col] + matrix[row][col]; 19 } else { 20 cache[row][col] = cache[row][col -1] + cache[row -1][col] - cache[row -1][col -1] + matrix[row][col]; 21 } 22 } 23 } 24 } 25 26 public int sumRegion(int row1, int col1, int row2, int col2) { 27 if (row1 == 0 \u0026amp;\u0026amp; col1 == 0) { 28 return cache[row2][col2]; 29 } else if (row1 == 0) { 30 return cache[row2][col2] - cache[row2][col1-1]; 31 } else if (col1 == 0) { 32 return cache[row2][col2] - cache[row1-1][col2]; 33 } else { 34 return cache[row2][col2] - cache[row1-1][col2] - cache[row2][col1-1] + cache[row1-1][col1-1]; 35 } 36 37 } 38} ç”±æ–¼ä¸ç”¨æ¯æ¬¡éƒ½å¾é ­è¨ˆç®—ï¼Œåœ¨ Leetcodeä¸ŠåŸ·è¡Œçš„æ•¸åº¦æ˜¯ ç¨‹å¼ç¢¼1 çš„ 20å€å¿«\n","date":"June 3, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/medium/304_range_sum_query_2d_immutable/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1654214400,"title":"æ¼”ç®—æ³• [Java] LeetCode #304. Range Sum Query 2D - Immutable"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Given a 2D integer array matrix, return the transpose of matrix.\nThe transpose of a matrix is the matrix flipped over its main diagonal, switching the matrix\u0026rsquo;s row and column indices.\nExample 1:\n1Input: matrix = [[1,2,3],[4,5,6],[7,8,9]] 2Output: [[1,4,7],[2,5,8],[3,6,9]] Example 2:\n1Input: matrix = [[1,2,3],[4,5,6]] 2Output: [[1,4],[2,5],[3,6]] Constraints: $$ \\begin{array}{l} m == matrix.length \\\\ n == matrix[i].length \\\\ 1 \u003c= m, n \u003c= 1000 \\\\ 1 \u003c= m * n \u003c= 105 \\\\ -109 \u003c= matrix[i][j] \u003c= 109 \\end{array} $$ æˆ‘çš„æ€è·¯ å‡è¨­ç¾åœ¨å·²ç¶“çµ¦äº† N * M çš„ Array ï¼Œé‚£å°±å»ºç«‹ä¸€å€‹æ–°çš„ 2D Array M * Nã€‚\nLoop ä¸€éæ•´å€‹ Arrayï¼Œå°‡ è¦è¿”å›çš„Array[m][n] è¨­å®šæˆ Input Array[n][m];\nç¨‹å¼ç¢¼ 1class Solution { 2 public int[][] transpose(int[][] matrix) { 3 int[][] result = new int[matrix[0].length][matrix.length]; 4 5 for(int n = 0; n \u0026lt; matrix.length; n++) { 6 for(int m = 0; m \u0026lt; matrix[0].length; m++) { 7 result[m][n] = matrix[n][m]; 8 } 9 } 10 11 return result; 12 } 13} ","date":"June 2, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/easy/867_transpose_matrix/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1654128000,"title":"æ¼”ç®—æ³• [Java] LeetCode #867. Transpose Matrix"},{"categories":[{"title":"LEETCODE","url":"/categories/leetcode/"}],"content":"é¡Œç›® Given an array nums. We define a running sum of an array as runningSum[i] = sum(nums[0]â€¦nums[i]).\nReturn the running sum of nums.\nExample 1:\n1Input: nums = [1,2,3,4] 2Output: [1,3,6,10] 3Explanation: Running sum is obtained as follows: [1, 1+2, 1+2+3, 1+2+3+4]. Example 2:\n1Input: nums = [1,1,1,1,1] 2Output: [1,2,3,4,5] 3Explanation: Running sum is obtained as follows: [1, 1+1, 1+1+1, 1+1+1+1, 1+1+1+1+1]. Example 3:\n1Input: nums = [3,1,2,10,1] 2Output: [3,4,6,16,17] Constraints: $$ \\begin{array}{l} 1 \u003c= nums.length \u003c= 1000 \\\\ -10^6 \u003c= nums[i] \u003c= 10^6 \\end{array} $$ æˆ‘çš„æ€è·¯ ç¬¬ i å€‹ runningSum ç­‰æ–¼ nums[0] + \u0026hellip; + nums[i-1] + nums[i];\nè€Œ nums[0] + nums[i-1] ç­‰æ–¼ runningSum[i-1];\næ‰€ä»¥å¯ä»¥å¾—åˆ° runningSum[i] = runningSum[i-1] + nums[i];\nç¨‹å¼ç¢¼ 1class Solution { 2 public int[] runningSum(int[] nums) { 3 int[] runningSum = new int[nums.length]; 4 runningSum[0] = nums[0]; 5 for(int i = 1; i \u0026lt; nums.length; i++) { 6 runningSum[i] = runningSum[i-1] + nums[i]; 7 } 8 return runningSum; 9 } 10} ","date":"June 1, 2022","img":"https://allenhsieh1992.com/images/leetcode.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/leetcode/easy/1480_running_sum_of_1d_array/","smallImg":"","tags":[{"title":"LEETCODE","url":"/tags/leetcode/"}],"timestamp":1654041600,"title":"æ¼”ç®—æ³• [Java] LeetCode #1480. Running Sum of 1d Array"},{"categories":[{"title":"TOOLS","url":"/categories/tools/"}],"content":"ä½¿ç”¨ Git ç•¶ä½œ Soruce Control ä¹Ÿæœ‰ä¸€æ®µæ™‚é–“äº†ï¼Œä½†ä»¥å‰éƒ½åªæ˜¯åŸºæœ¬çš„äº†è§£ Git åŸºæœ¬ä½¿ç”¨ï¼Œä¸¦æ²’æœ‰æ·±å…¥äº†è§£ Git å¾Œé¢å¯¦ä½œåŸç†ã€‚æœ€è¿‘åœ¨ Pluralsight ä¸Šçœ‹åˆ° Paolo Perrotta è¬›è§£ Git æ˜¯å¦‚ä½•é‹ä½œçš„ï¼Œè¦ºå¾—è¬›å¾—ä¸éŒ¯~ é€™é‚Šä¹Ÿç®—æ˜¯å°‡é€™æ¬¡å¸æ”¶åˆ°çš„çŸ¥è­˜åšå€‹ç­†è¨˜ã€‚\nGit Databases Git init æ˜¯åˆå§‹åŒ– Git çš„ Databases æˆ–è€…åˆç¨± Repository ï¼Œè€Œ Git çš„æ‰€æœ‰è³‡æ–™éƒ½å­˜å–åœ¨ .git çš„ç›®éŒ„ä¸‹ã€‚ç•¶åŸ·è¡Œ git init å¾Œï¼Œå¯ä»¥çœ‹åˆ° .git è³‡æ–™å¤¾ç”¢ç”Ÿ\n1.git 2â”œâ”€â”€ HEAD 3â”œâ”€â”€ config 4â”œâ”€â”€ description 5â”œâ”€â”€ hooks 6â”‚Â â”œâ”€â”€ applypatch-msg.sample 7â”‚Â â”œâ”€â”€ commit-msg.sample 8â”‚Â â”œâ”€â”€ fsmonitor-watchman.sample 9â”‚Â â”œâ”€â”€ post-update.sample 10â”‚Â â”œâ”€â”€ pre-applypatch.sample 11â”‚Â â”œâ”€â”€ pre-commit.sample 12â”‚Â â”œâ”€â”€ pre-merge-commit.sample 13â”‚Â â”œâ”€â”€ pre-push.sample 14â”‚Â â”œâ”€â”€ pre-rebase.sample 15â”‚Â â”œâ”€â”€ pre-receive.sample 16â”‚Â â”œâ”€â”€ prepare-commit-msg.sample 17â”‚Â â”œâ”€â”€ push-to-checkout.sample 18â”‚Â â””â”€â”€ update.sample 19â”œâ”€â”€ info 20â”‚Â â””â”€â”€ exclude 21â”œâ”€â”€ objects 22â”‚Â â”œâ”€â”€ info 23â”‚Â â””â”€â”€ pack 24â””â”€â”€ refs 25 â”œâ”€â”€ heads 26 â””â”€â”€ tags å…§å®¹è¿½è¹¤ æœ‰åŸ·è¡Œé \u0026ldquo;man git\u0026rdquo; çš„è©±ï¼Œå¯ä»¥çœ‹åˆ° Name é‚£é‚Šå¯«è‘— \u0026ldquo;git - the stupid content tracker\u0026rdquo;ã€‚é€™ä¹Ÿæ˜¯ Git æœ€æ ¸å¿ƒçš„åƒ¹å€¼ï¼Œå¯ä»¥è®“æˆ‘å€‘çŸ¥é“æ‰€æœ‰æª”æ¡ˆçš„ä¿®æ”¹ç´€éŒ„ï¼Œä½†é€™æ˜¯æ€éº¼åšåˆ°çš„å‘¢ï¼Ÿ\nHash-Obejct Git ä½¿ç”¨ SHA1 ä¾† hash æª”æ¡ˆå…§å®¹ï¼Œä¸¦é€éé›œæ¹Šå€¼çš„çµæœï¼Œä¾†å»ºç«‹èµ· Databaseï¼Œä»¥ä¸‹é¢ç‚ºä¾‹å­\n1$ echo \u0026#34;hello world\u0026#34; | git hash-object --stdin 23b18e512dba79e4c8300dd08aeb37f8e728b8dad Commit æˆ‘å€‘å¯ä»¥çœ‹åˆ° \u0026ldquo;hello world\u0026rdquo; çš„é›œæ¹Šå€¼æ˜¯ 3b18e512dba79e4c8300dd08aeb37f8e728b8dadã€‚\né€™æ™‚æˆ‘å€‘åœ¨ local ç”¢ç”Ÿä¸€å€‹ helloWorld.txt ï¼Œä¸¦ commit \u0026ldquo;first file\u0026rdquo; é€²å»ã€‚\né€™æ™‚æˆ‘å€‘çœ‹çœ‹ .git/objectsï¼Œé€™æ™‚æœƒç™¼ç¾å¤šäº†ä¸€äº› Folder\n1tree .git/objects 2.git/objects 3â”œâ”€â”€ 3b 4â”‚Â â””â”€â”€ 18e512dba79e4c8300dd08aeb37f8e728b8dad 5â”œâ”€â”€ 48 6â”‚Â â””â”€â”€ 971f01848a55ac80698bd8c8b999b431f14723 7â”œâ”€â”€ a6 8â”‚Â â””â”€â”€ 10f3aeab960b6dd657d6f371419954e923bcdf 9â”œâ”€â”€ info 10â””â”€â”€ pack Log é€™æ™‚åŸ·è¡Œ Git Log å¯ä»¥çœ‹åˆ°æˆ‘å€‘çš„ Commit ç´€éŒ„\n1$ git log 2commit 48971f01848a55ac80698bd8c8b999b431f14723 (HEAD -\u0026gt; master) 3Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 4Date: Tue Feb 22 22:00:22 2022 +0800 5 6 first file åœ¨ Commit å¾Œé¢æœ‰ä¸€å€‹é›œæ¹Šå€¼æ˜¯ \u0026ldquo;48971f01848a55ac80698bd8c8b999b431f14723\u0026rdquo; ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰ç™¼ç¾é€™å€‹æ•¸å­—åœ¨å“ªè£¡è¦‹éï¼Ÿ\nç­”æ¡ˆå°±æ˜¯åœ¨å‰›å‰›çš„ .git/objects è£¡é¢ï¼Œå‰å…©ä½æ•¸ \u0026ldquo;48\u0026rdquo; æ˜¯è³‡æ–™å¤¾çš„åå­—ï¼Œå‰©é¤˜çš„æ˜¯æª”æ¡ˆåç¨±ã€‚\né€™æ™‚æˆ‘å€‘ä¾†çœ‹çœ‹æª”æ¡ˆè£¡é¢æœ‰ä»€éº¼å§\nCat-File å¦‚æœå¤§å®¶ç›´æ¥å»è®€ objects ä¸‹é¢çš„è³‡æ–™ï¼Œæœƒç™¼ç¾è£¡é¢æ˜¯ä¸€å †ä¸å¯è®€äº‚ç¢¼ï¼æª”æ¡ˆçš„å…§å®¹æ˜¯æœ‰ç¶“éç‰¹æ®Šè™•ç†éçš„ï¼Œä½†é€™æ™‚å¯ä»¥ä½¿ç”¨ cat-file ä¾†è®€å–è£¡é¢çš„è³‡æ–™\n1# ä½¿ç”¨æ–¹å¼ç‚º git cat-file options \u0026lt;é›œæ¹Šå€¼\u0026gt; 2# optins é€™æ¬¡é€™é‚Šåªæœƒ Demo -t é¡¯ç¤ºç‰©ä»¶é¡å‹ -p ç‰©ä»¶å…§å®¹ã€‚æ›´å¤šè³‡è¨Šå¯ä»¥ç›´æ¥åŸ·è¡Œ git cat-fileï¼Œæœƒæœ‰ä½¿ç”¨æ•™å­¸ 3 4$ git cat-file -t 48971f01848a55ac80698bd8c8b999b431f14723 5commit 6 7$ git cat-file -p 48971f01848a55ac80698bd8c8b999b431f14723 8tree a610f3aeab960b6dd657d6f371419954e923bcdf 9author Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645538422 +0800 10committer Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645538422 +0800 11 12first file line5 : æˆ‘å€‘å¯ä»¥çœ‹åˆ° \u0026ldquo;48971f01848a55ac80698bd8c8b999b431f14723\u0026rdquo; é€™å€‹ç‰©ä»¶ä»£è¡¨çš„æ˜¯ commit line8 : æˆ‘å€‘å¯ä»¥çœ‹åˆ°é›œæ¹Šå€¼å‰é¢æœ‰å€‹ Treeï¼Œæ˜¯ä»£è¡¨é€™å€‹é¡å‹ã€‚ Tree è¨˜éŒ„è©²ç›®éŒ„ä¸‹æœ‰å“ªäº›æª”æ¡ˆ(blob) å’Œ Tree line9-10: æ˜¯ä½œè€…å’Œ Commit äººçš„è³‡è¨Š line12: æ˜¯ commit çš„è¨Šæ¯ é‚£æ¥è‘—ä¾†çœ‹çœ‹ line8 tree çš„å…§å®¹å§\n1$ git cat-file -p a610f3aeab960b6dd657d6f371419954e923bcdf 2100644 blob 3b18e512dba79e4c8300dd08aeb37f8e728b8dad\thelloWorld.txt é€™é‚Šå¯ä»¥çœ‹åˆ° blob é€™å€‹é¡å‹ï¼Œä»£è¡¨ç´€éŒ„æª”æ¡ˆå…§å®¹ï¼Œè€Œæœ€å¾Œé¢æ˜¯æª”æ¡ˆåç¨±ã€‚\nå¤§å®¶å¯ä»¥ä»”ç´°çœ‹ï¼ŒhelloWorldçš„é›œæ¹Šå€¼æœƒè·Ÿå‰é¢ Hash-Obejct ä½¿ç”¨çš„ç¯„ä¾‹æ˜¯ä¸€æ¨£çš„ï¼Œå› ç‚º Git æ˜¯æ‹¿æª”æ¡ˆè£¡é¢çš„å…§å®¹å»åš Hashã€‚åŒæ¨£çš„å€¼ Hash å‡ºä¾†çš„é›œæ¹Šå€¼éœ€è¦æ˜¯ä¸€æ¨£çš„ã€‚\n1$ git cat-file -p 3b18e512dba79e4c8300dd08aeb37f8e728b8dad 2hello world ç‰ˆæœ¬å¯¦ç¾ æˆ‘å€‘ç¾åœ¨åœ¨ Local å»ºç«‹ä¸€å€‹ Folder å« I_AM_FOLDER ä¸¦åœ¨è£¡é¢å»ºç«‹ä¸€å€‹ helloWorld2.txt ä½†å…§å®¹è·Ÿ helloWorld.txt ä¸€æ¨£ï¼Œä¸¦ commit çœ‹çœ‹æœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…ã€‚\nç›®å‰è³‡æ–™çµæ§‹\n1$ tree 2. 3â”œâ”€â”€ I_AM_FOLDER 4â”‚Â â””â”€â”€ helloWorld2.txt 5â””â”€â”€ helloWorld.txt æ–°çš„ File Commit ä¹‹å¾Œçš„ Log\n1$ git log 2commit 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a (HEAD -\u0026gt; master) 3Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 4Date: Tue Feb 22 22:50:02 2022 +0800 5 6 add helloWorld2.txt 7 8commit 48971f01848a55ac80698bd8c8b999b431f14723 9Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 10Date: Tue Feb 22 22:00:22 2022 +0800 11 12 first file æ¥ä¸‹ä¾†æˆ‘å€‘ä¾†çœ‹çœ‹æ–°çš„ commit å…§å®¹å§\n1$ git cat-file -p 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a 2tree bbdf0c43f735049c51bca17ea7543621c38efdd3 3parent 48971f01848a55ac80698bd8c8b999b431f14723 4author Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645541402 +0800 5committer Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645541402 +0800 6 7add helloWorld2.txt Line3: æˆ‘å€‘å¯ä»¥çœ‹åˆ° parentï¼Œ parent ä»£è¡¨é€™å€‹ commit çš„çˆ¶æ˜¯èª°ï¼Œæ‰€ä»¥é€éé€™æ¨£çš„æ–¹å¼ï¼Œå¯ä»¥çŸ¥é“ä¹‹å‰çš„ commit å…§å®¹ï¼Œé€™ä¹Ÿæ˜¯ Git å¯¦ç¾ç‰ˆæœ¬çš„æ–¹å¼ã€‚ æ¥è‘—æˆ‘å€‘ä¾†çœ‹çœ‹ tree è£¡é¢çš„å…§å®¹\n1$ git cat-file -p bbdf0c43f735049c51bca17ea7543621c38efdd3 2040000 tree 41758064447cf1624a474c3732dc2aead98e701e\tI_AM_FOLDER 3100644 blob 3b18e512dba79e4c8300dd08aeb37f8e728b8dad\thelloWorld.txt æˆ‘å€‘å¯ä»¥çœ‹åˆ° line2 ï¼Œ I_AM_FOLDER çš„å±¬æ€§ä¹Ÿæ˜¯ treeã€‚æ¥è‘—æˆ‘å€‘ä¾†çœ‹çœ‹I_AM_FOLDER è£¡é¢æœ‰ä»€éº¼å§ã€‚\n1$ git cat-file -p 41758064447cf1624a474c3732dc2aead98e701e 2100644 blob 3b18e512dba79e4c8300dd08aeb37f8e728b8dad\thelloWorld2.txt æˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼Œ I_AM_FOLDER è£¡é¢æœ‰ helloWorld2.txt ï¼Œè€Œ helloWorld2.txt å’Œ helloWorld.txt çš„å…§å®¹æ˜¯ä¸€æ¨£çš„ï¼Œæ‰€ä»¥ä¸æœƒèŠ±é¡å¤–çš„ç©ºé–“å­˜å–ã€‚\nåˆ†æ”¯å¯¦ç¾ ç•¶æˆ‘å€‘ä½¿ç”¨ git branch æ™‚ï¼Œå¯ä»¥çœ‹åˆ°ç¾åœ¨æ‰€æœ‰çš„åˆ†æ”¯ã€‚è€Œæœ‰ä¸€å€‹æœƒæ˜¯ç•¶å‰çš„åˆ†æ”¯ï¼Œå‰é¢æœƒå‚™è¨»æ˜Ÿè™Ÿã€‚é‚£ Git æ€éº¼çŸ¥é“æˆ‘å€‘ç¾åœ¨åœ¨å“ªå€‹åˆ†æ”¯å‘¢ï¼Œæ˜¯é€é .git/HEAD é€™å€‹æª”æ¡ˆ\n1$ git branch 2* master 3 4$ cat .git/HEAD 5ref: refs/heads/master 6 7$ cat .git/refs/heads/master 89c15c7d8323c7f9cd2cb18164e0c8d69c575a15a 9 10$ git log 11commit 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a (HEAD -\u0026gt; master) 12Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 13Date: Tue Feb 22 22:50:02 2022 +0800 14 15 add helloWorld2.txt 16 17commit 48971f01848a55ac80698bd8c8b999b431f14723 18Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 19Date: Tue Feb 22 22:00:22 2022 +0800 20 21 first file line5: ref å¾Œé¢è·Ÿè‘—ä¸€å€‹è·¯å¾‘ï¼Œä»£è¡¨ç¾åœ¨åˆ†æ”¯æ‰€åœ¨çš„æª”æ¡ˆã€‚ line8: æˆ‘å€‘å¯ä»¥çœ‹åˆ° master æª”æ¡ˆè£¡é¢å¯¦éš›åªå­˜äº†ä¸€å€‹é›œæ¹Šå€¼ã€‚ line11: æˆ‘å€‘å¯ä»¥çœ‹åˆ°å¾Œé¢æœ‰æ¨™è¨˜ Head æŒ‡å‘ Master ï¼Œè€Œ Master æŒ‡å‘é€™å€‹ commit å»ºç«‹æ–°çš„åˆ†æ”¯ 1$ git branch I_AM_GOING_TO_UPDATE_HELLO_UPDATE 2 3$ git branch 4 I_AM_GOING_TO_UPDATE_HELLO_UPDATE 5 * master 6 7$ cat .git/HEAD 8ref: refs/heads/master 9 10$ tree .git/refs 11.git/refs 12â”œâ”€â”€ heads 13â”‚Â â”œâ”€â”€ I_AM_GOING_TO_UPDATE_HELLO_UPDATE 14â”‚Â â””â”€â”€ master 15â””â”€â”€ tags 16 17$ cat .git/refs/heads/I_AM_GOING_TO_UPDATE_HELLO_UPDAT 189c15c7d8323c7f9cd2cb18164e0c8d69c575a15a 19 20$ cat .git/refs/heads/master 219c15c7d8323c7f9cd2cb18164e0c8d69c575a15a 22 23$ git log 24commit 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a (HEAD -\u0026gt; master, I_AM_GOING_TO_UPDATE_HELLO_UPDATE) 25Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 26Date: Tue Feb 22 22:50:02 2022 +0800 27 28 add helloWorld2.txt 29 30commit 48971f01848a55ac80698bd8c8b999b431f14723 31Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 32Date: Tue Feb 22 22:00:22 2022 +0800 33 34 first file Line1: æˆ‘å€‘é€™é‚Šå»ºç«‹ä¸€å€‹æ–°çš„åˆ†æ”¯å«åš I_AM_GOING_TO_UPDATE_HELLO_UPDATE Line3 å’Œ line 7: æˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼Œç¾åœ¨çš„ Head é‚„æ˜¯æŒ‡å‘ Master Line10: æˆ‘å€‘å¯ä»¥çœ‹åˆ° refs è£¡é¢æœ‰æ–°çš„æª”æ¡ˆå°±æ˜¯æˆ‘å€‘ Branch çš„åå­— Line 17,20 å’Œ23: æˆ‘å€‘å¯ä»¥çœ‹åˆ°ç›®å‰ I_AM_GOING_TO_UPDATE_HELLO_UPDATE \u0026amp; Master éƒ½æŒ‡å‘åŒä¸€å€‹ Git Commit åˆ‡æ›åˆ†æ”¯ 1$ git checkout I_AM_GOING_TO_UPDATE_HELLO_UPDATE 2Switched to branch \u0026#39;I_AM_GOING_TO_UPDATE_HELLO_UPDATE\u0026#39; 3 4$ git branch 5* I_AM_GOING_TO_UPDATE_HELLO_UPDATE 6 master 7 8$ cat .git/HEAD 9ref: refs/heads/I_AM_GOING_TO_UPDATE_HELLO_UPDATE Line1 : æˆ‘å€‘ä½¿ç”¨ checkout å°‡ç¾åœ¨çš„ Branch åˆ‡æ›åˆ° I_AM_GOING_TO_UPDATE_HELLO_UPDATE Line5\u0026amp; Line7 : æˆ‘å€‘å¯ä»¥çœ‹åˆ°ç¾åœ¨åˆ†ä¹‹åœ¨ I_AM_GOING_TO_UPDATE_HELLO_UPDATE æ–°åˆ†æ”¯ Commit ç¾åœ¨æˆ‘å€‘å˜—è©¦ä¿®æ”¹ helloWorld.txt ä¾†çœ‹çœ‹å›å¦‚ä½•\n1$ cat helloWorld.txt 2hello world2 3 4$ git log 5commit 08e7447af10f14ec4cd6bffc210fddfbae3aa64f (HEAD -\u0026gt; I_AM_GOING_TO_UPDATE_HELLO_UPDATE) 6Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 7Date: Tue Feb 22 23:43:14 2022 +0800 8 9 update helloWorld.txt 10 11commit 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a (master) 12Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 13Date: Tue Feb 22 22:50:02 2022 +0800 14 15 add helloWorld2.txt 16 17commit 48971f01848a55ac80698bd8c8b999b431f14723 18Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 19Date: Tue Feb 22 22:00:22 2022 +0800 20 21 first file Line1: æ–°çš„ helloWorld.txt å…§å®¹ Line5: æˆ‘å€‘å¯ä»¥çœ‹åˆ° HEAD æŒ‡å‘ I_AM_GOING_TO_UPDATE_HELLO_UPDATE å’Œ I_AM_GOING_TO_UPDATE_HELLO_UPDATE æŒ‡å‘æœ€æ–°çš„ Commit 08e7447af10f14ec4cd6bffc210fddfbae3aa64f Line11: æˆ‘å€‘å¯ä»¥çœ‹åˆ° Master ç¾åœ¨é‚„æ˜¯æŒ‡å‘ä¸Šä¸€å€‹ Commit 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a èˆŠåˆ†æ”¯ Commit æˆ‘å€‘ç¾åœ¨åˆ‡å› master branch ä¾†çœ‹çœ‹\n1$ git checkout master 2Switched to branch \u0026#39;master\u0026#39; 3 4$ git log 5commit 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a (HEAD -\u0026gt; master) 6Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 7Date: Tue Feb 22 22:50:02 2022 +0800 8 9 add helloWorld2.txt 10 11commit 48971f01848a55ac80698bd8c8b999b431f14723 12Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 13Date: Tue Feb 22 22:00:22 2022 +0800 14 15 first file 16 17$ git log --oneline --graph --decorate --all 18* 08e7447 (I_AM_GOING_TO_UPDATE_HELLO_UPDATE) update helloWorld.txt 19* 9c15c7d (HEAD -\u0026gt; master) add helloWorld2.txt 20* 48971f0 first file 21 22$ cat helloWorld.txt 23hello world Line1: åˆ‡æ›å› master branch Line4: å¤§å®¶æœƒç™¼ç¾ï¼ŒLog åªé¡¯ç¤ºç•¶ä¸‹ Master ç›¸é—œçš„ Log ï¼Œæœƒçœ‹ä¸åˆ° I_AM_GOING_TO_UPDATE_HELLO_UPDATE Branch ç›¸é—œçš„ Line17: æˆ‘å€‘å¯ä»¥æ›´æ¸…æ¥šçœ‹åˆ°ç¾åœ¨çš„ Commit çµæ§‹ Line22: æˆ‘å€‘æœƒç™¼ç¾ helloWolrd.txt æ¢å¾©æˆåŸæœ¬èˆŠçš„é‚„åœ¨ Master Branch çš„ç‰ˆæœ¬ã€‚ æˆ‘å€‘ç¾åœ¨ä¸€æ¨£ä¾†ä¿®æ”¹ helloWorld.txt ä¸¦ commit çœ‹çœ‹æœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…ã€‚\n1$ cat helloWorld.txt 2hello world3 3 4$ git log --oneline --graph --decorate --all 5* f7c9f13 (HEAD -\u0026gt; master) master update helloWorld.txt 6| * 08e7447 (I_AM_GOING_TO_UPDATE_HELLO_UPDATE) update helloWorld.txt 7|/ 8* 9c15c7d add helloWorld2.txt 9* 48971f0 first file line4 : å¤§å®¶æ‡‰è©²æœƒç™¼ç¾ 9c15c7d é€™é‚Šåˆ†æ”¯æˆå…©å€‹ f7c9f13 å’Œ 08e7447ã€‚\nåˆä½µå…©å€‹åˆ†æ”¯ æˆ‘å€‘ç¾åœ¨ä¾†å°‡ I_AM_GOING_TO_UPDATE_HELLO_UPDATE åˆä½µå› master çœ‹çœ‹æœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…\n1$ git checkout master 2Switched to branch \u0026#39;master\u0026#39; 3 4$ git merge I_AM_GOING_TO_UPDATE_HELLO_UPDATE 5Auto-merging helloWorld.txt 6CONFLICT (content): Merge conflict in helloWorld.txt 7Automatic merge failed; fix conflicts and then commit the result. 8 9$ git diff 10diff --cc helloWorld.txt 11index 923e989,1142904..0000000 12--- a/helloWorld.txt 13+++ b/helloWorld.txt 14@@@ -1,1 -1,1 +1,5 @@@ 15++\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD 16 +hello world3 17++======= 18+ hello world2 19++\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; I_AM_GOING_TO_UPDATE_HELLO_UPDATE Line4: ç”±æ–¼ I_AM_GOING_TO_UPDATE_HELLO_UPDATE å’Œ master éƒ½ä¿®æ”¹é helloWorld.txtã€‚æ‰€ä»¥ Git æœƒä¸çŸ¥é“è¦ä¿ç•™å“ªå€‹ç‰ˆæœ¬ï¼Œè€Œé€™æ™‚å°±å‡ºç¾äº† CONFLICTã€‚ Line9: å¾ Git Diff ä¸­æˆ‘å€‘å¯ä»¥æ˜é¡¯çœ‹åˆ°ï¼Œ Git å·²ç¶“å¹«æˆ‘å€‘ä¿®æ”¹æª”æ¡ˆï¼Œä¸¦ Highlight å‡ºå…©é‚Šçš„ä¸åŒã€‚ ç¾åœ¨å‡è¨­æˆ‘è¦ºå¾— master å¯«å¾—æ¯”è¼ƒå¥½ï¼Œæ‰€ä»¥æˆ‘ä¿ç•™ master çš„å…§å®¹ã€‚\n1$ cat helloWorld.txt 2hello world3 3 4commit 063d5d5307dd178d11bed8ee67a1ed5c614276bf (HEAD -\u0026gt; master) 5Merge: f7c9f13 08e7447 6Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 7Date: Wed Feb 23 09:20:10 2022 +0800 8 9 fix CONFLICT 10 11commit f7c9f13b17ba1fa6641e7c6abb90935321e4f33c 12Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 13Date: Tue Feb 22 23:57:00 2022 +0800 14 15 master update helloWorld.txt 16 17commit 08e7447af10f14ec4cd6bffc210fddfbae3aa64f (I_AM_GOING_TO_UPDATE_HELLO_UPDATE) 18Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 19Date: Tue Feb 22 23:43:14 2022 +0800 20 21 update helloWorld.txt 22 23commit 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a 24Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 25Date: Tue Feb 22 22:50:02 2022 +0800 26 27 add helloWorld2.txt 28 29commit 48971f01848a55ac80698bd8c8b999b431f14723 30Author: Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 31Date: Tue Feb 22 22:00:22 2022 +0800 32 33 first file Line5ï¼š å¤šäº† Mergeçš„æç¤º é€™æ™‚æˆ‘å€‘ä¾†çœ‹çœ‹æœ€æ–°çš„ commit å…§å®¹å§\n1$ git cat-file -p 063d5d5307dd178d11bed8ee67a1ed5c614276bf 2tree e65ced472fc129e23c9074c2cfd3649d4c43ff29 3parent f7c9f13b17ba1fa6641e7c6abb90935321e4f33c 4parent 08e7447af10f14ec4cd6bffc210fddfbae3aa64f 5author Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645579210 +0800 6committer Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645579210 +0800 7 8fix CONFLICT 9 10$ git cat-file -p f7c9f13b17ba1fa6641e7c6abb90935321e4f33c 11tree e65ced472fc129e23c9074c2cfd3649d4c43ff29 12parent 9c15c7d8323c7f9cd2cb18164e0c8d69c575a15a 13author Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645545420 +0800 14committer Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645545420 +0800 15 16master update helloWorld.txt Line1: é€™æ™‚å¯ä»¥æ¸…æ¥šçœ‹åˆ°è£¡é¢æœ‰å…©å€‹parentï¼Œç¬¬ä¸€å€‹ parent (line3) æ˜¯ master è€Œç¬¬äºŒå€‹ parent (line4) æ˜¯ I_AM_GOING_TO_UPDATE_HELLO_UPDATEã€‚æ‰€ä»¥å¾é€™è£¡é€™è£¡çŸ¥é“ï¼Œæˆ‘å€‘æ˜¯å¾ç¬¬äºŒå€‹ parent merge åˆ°ç¬¬ä¸€å€‹ parent Line10: æˆ‘å€‘å†å›é ­çœ‹çœ‹åŸæœ¬ master parent çš„å…§å®¹ï¼Œå› ç‚ºæˆ‘å€‘ä¿ç•™äº† master ï¼Œæ‰€ä»¥ Line11 å’Œ Line2 çš„é›œæ¹Šå€¼æ˜¯ä¸€æ¨£çš„ æ¥ä¸‹ä¾†æˆ‘å€‘ä¾†çœ‹ä¸€ä¸‹æœ€æ–°çš„ Tree çš„æ¨£å­\n1$ git log --oneline --graph --decorate --all 2* 063d5d5 (HEAD -\u0026gt; master) fix CONFLICT 3|\\ 4| * 08e7447 (I_AM_GOING_TO_UPDATE_HELLO_UPDATE) update helloWorld.txt 5* | f7c9f13 master update helloWorld.txt 6|/ 7* 9c15c7d add helloWorld2.txt 8* 48971f0 first file å¯ä»¥çœ‹åˆ°æœ€ä¸Šé¢åˆå°‡å…©å€‹ Tree åˆä½µäº†\nRebase åŸç† æˆ‘å°‡ä¹‹å‰çš„ Merge reset å›å»\n1$ git reset f7c9f13 2 3$ git log --oneline --graph --decorate --all 4* f7c9f13 (HEAD -\u0026gt; master) master update helloWorld.txt 5| * 08e7447 (I_AM_GOING_TO_UPDATE_HELLO_UPDATE) update helloWorld.txt 6|/ 7* 9c15c7d add helloWorld2.txt 8* 48971f0 first file rebase æœƒå…ˆæ‰¾åˆ°å…©å€‹ branch é–‹å§‹åˆ†å·®çš„ commit ï¼Œä»¥ä¸Šé¢çš„ä¾‹å­æ˜¯ 9c15c7dã€‚å¦‚æœè¦å°‡ I_AM_GOING_TO_UPDATE_HELLO_UPDATE rebase åˆ° masterï¼Œæœƒå°‡ 9c15c7d åˆ° I_AM_GOING_TO_UPDATE_HELLO_UPDATE ä¹‹é–“çš„æ‰€æœ‰commit ä¿®æ”¹ï¼Œå¾ Master ä¹‹å¾Œå˜—è©¦åšä¸€æ¬¡ï¼Œæœ€å¾Œåœ¨å°‡ master æŒ‡å‘æœ€æ–°çš„ commit\n1$ git rebase I_AM_GOING_TO_UPDATE_HELLO_UPDATE 2 3Auto-merging helloWorld.txt 4CONFLICT (content): Merge conflict in helloWorld.txt 5error: could not apply f7c9f13... master update helloWorld.txt 6Resolve all conflicts manually, mark them as resolved with 7\u0026#34;git add/rm \u0026lt;conflicted_files\u0026gt;\u0026#34;, then run \u0026#34;git rebase --continue\u0026#34;. 8You can instead skip this commit: run \u0026#34;git rebase --skip\u0026#34;. 9To abort and get back to the state before \u0026#34;git rebase\u0026#34;, run \u0026#34;git rebase --abort\u0026#34;. 10Could not apply f7c9f13... master update helloWorld.txt ç”±æ–¼å…©å€‹åˆ†æ”¯ä¹‹å‰éƒ½ä¿®æ”¹é helloWorld.txt ï¼Œæ‰€ä»¥æœƒæœ‰ conflict ã€‚å¦‚æœæ²’æœ‰ conflictï¼Œ master å°±æœƒ fast forward åˆ°æœ€æ–°çš„ commitã€‚\nä¿®æ”¹å®Œ helloWorld.txt æˆ‘å€‘ç¹¼çºŒåŸ·è¡Œ git rebase \u0026ndash;continue\n1$ git rebase --continue 2Successfully rebased and updated refs/heads/master. 3 4$ git log --oneline --graph --decorate --all 5* 08e7447 (HEAD -\u0026gt; master, I_AM_GOING_TO_UPDATE_HELLO_UPDATE) update helloWorld.txt 6* 9c15c7d add helloWorld2.txt 7* 48971f0 first file Merge v.s. Rebase Merge çš„å¥½è™•å°±æ˜¯æœƒç´€éŒ„æ‰€æœ‰çš„ä¿®æ”¹ï¼ŒåŒ…å«å…©å€‹åˆ†æ”¯åˆä½µæ™‚çš„ä¿®æ”¹ã€‚ä½†æ˜¯ç•¶é–‹ç™¼è€…å¤ªå¤šæ™‚ï¼ŒåŒæ™‚å¤ªå¤š Merge æœƒå¾ˆé›£è¿½ä¸­ï¼Œé€™æ™‚å€™åè€Œ rebase æœƒè®“æ•´å€‹ Histroy çœ‹èµ·ä¾†æ¯”è¼ƒç›´è§€ï¼Œä½†æ˜¯ä»£åƒ¹å°±æ˜¯ä¸èƒ½åƒ merge ä¸€æ¨£ï¼Œæ¸…æ¥šåœ°çŸ¥é“æ‰€æœ‰çš„ä¿®æ”¹ã€‚\nTag åŸç† 1$ git checkout 08e7447 2 3$ git tag tag1 4 5$ git log --oneline --graph --decorate --all 6* ac766f3 (master) master2 7* 19f9d5c (I_AM_GOING_TO_UPDATE_HELLO_UPDATE) helloWorld 8* 08e7447 (HEAD, tag: tag1) update helloWorld.txt 9* 9c15c7d add helloWorld2.txt 10* 48971f0 first file 11 12$ cat .git/refs/tags/tag1 1308e7447af10f14ec4cd6bffc210fddfbae3aa64f line3: æˆ‘å€‘åœ¨ 08e7447 å»ºç«‹ä¸€å€‹ tag å« tag1 line8: æˆ‘å€‘å¯ä»¥çœ‹åˆ° 08e7447 å¾Œé¢å¤šäº†ä¸€å€‹ tag line12: åœ¨ .git/refs/tags æª”æ¡ˆå¤¾è£¡é¢ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€å€‹æª”æ¡ˆå«åš tag1 ï¼Œè€Œè£¡é¢çš„é›œæ¹Šå€¼æ˜¯æˆ‘å€‘ tags çš„ commit å¦‚æœæˆ‘å€‘æƒ³è¦åœ¨ tag ä¸ŠåŠ ä¸Šä¸€äº›æœ‰ç”¨çš„æè¿°å‘¢\n1$ git tag tag2 -a -m \u0026#34;i am tag2\u0026#34; 2# -a Make an unsigned, annotated tag object 3 4$ cat .git/refs/tags/tag2 59a9cf462e7960ddbe7a926dbf46c3ffc8afdb363 6 7$ git cat-file -t 9a9cf462e7960ddbe7a926dbf46c3ffc8afdb363 8tag 9 10$ git cat-file -p 9a9cf462e7960ddbe7a926dbf46c3ffc8afdb363 11object 08e7447af10f14ec4cd6bffc210fddfbae3aa64f 12type commit 13tag tag2 14tagger Chang Lin Hsieh \u0026lt;allen@ChangdeMacBook-Pro.local\u0026gt; 1645628590 +0800 15 16i am tag2 line1: æˆ‘å€‘å»ºç«‹ä¸€å€‹æ–°çš„ tag object ï¼Œä¸¦åŒ…å«äº† \u0026ldquo;i am tag2\u0026rdquo; çš„è³‡è¨Š line4: æˆ‘å€‘å¯ä»¥çœ‹åˆ° tag2 è£¡é¢çš„é›œæ¹Šå€¼ä¸æ˜¯æˆ‘å€‘çš„ commit çš„é›œæ¹Šå€¼ line9: æˆ‘å€‘å¯ä»¥çŸ¥é“ line5 çš„é€™å€‹é›œæ¹Šå€¼æ˜¯ä¸€å€‹ tag ç‰©ä»¶ line11,12: æˆ‘å€‘å¯ä»¥çŸ¥é“é€™å€‹ tag å°æ‡‰åˆ°ä¸€å€‹ commit è€Œé€™å€‹ commit çš„é›œæ¹Šå€¼ç‚º 08e7447af10f14ec4cd6bffc210fddfbae3aa64f Tag v.s Branch ç•¶æœ‰æ–°çš„commit æ™‚ï¼Œ Tag ä¸æœƒæŒ‡å‘æ–°çš„ commit ï¼Œè€Œ Branch æœƒ\nRemote v.s Local ç•¶æˆ‘å€‘åœ¨åŸ·è¡Œ git clone æ™‚ï¼Œæˆ‘å€‘æ˜¯å°‡ Remote çš„ .git folder ç‰¹å®šçš„ Branch è¤‡è£½ä¸‹ä¾† (default master)\n1$ cat .git/config 2[core] 3\trepositoryformatversion = 0 4\tfilemode = true 5\tbare = false 6\tlogallrefupdates = true 7\tignorecase = true 8\tprecomposeunicode = true 9[remote \u0026#34;origin\u0026#34;] 10\turl = git@github.com:allen-hsieh1992/blog.git 11\tfetch = +refs/heads/*:refs/remotes/origin/* 12[branch \u0026#34;master\u0026#34;] 13\tremote = origin 14\tmerge = refs/heads/master 15 16$ tree .git/refs/remotes 17.git/refs/remotes 18â””â”€â”€ origin 19 â”œâ”€â”€ HEAD 20 â””â”€â”€ master æˆ‘ä»¥æˆ‘çš„ github ç‚ºä¾‹å­\nline9: æˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€å€‹ remote å°± origin ä¸¦ä¸”ä»–çš„ url åœ¨ä¸‹é¢ã€‚ line16: æˆ‘å€‘å¯ä»¥çœ‹åˆ° refs è³‡æ–™å¤¾ä¸‹é¢å¤šäº† remotes çš„è³‡æ–™å¤¾ ç¾åœ¨æˆ‘å€‘å˜—è©¦åœ¨local åŠ ä¸€äº›commit\n1## before commit 2$ git show-ref master 310275a905f41267b2b2a12f5cd3e3cbee984203a refs/heads/master 410275a905f41267b2b2a12f5cd3e3cbee984203a refs/remotes/origin/master 5 6## after commit 7$ git show-ref master 81251ab4bdd68fdf8a3175719f47565b6c8af44d2 refs/heads/master 910275a905f41267b2b2a12f5cd3e3cbee984203a refs/remotes/origin/master 10 11## after push 12$ git show-ref master 131251ab4bdd68fdf8a3175719f47565b6c8af44d2 refs/heads/master 141251ab4bdd68fdf8a3175719f47565b6c8af44d2 refs/remotes/origin/master line2: line2 æˆ‘å€‘å¯ä»¥çœ‹åˆ°åœ¨ commit ä¹‹å‰ local \u0026amp; remote çš„ master éƒ½æ˜¯åŒä¸€å€‹ç‰©ä»¶ã€‚ line7: ç•¶æˆ‘å€‘ local commit ä»¥å¾Œï¼Œå¯ä»¥çœ‹åˆ° local çš„ç‰©ä»¶å·²ç¶“æ›´æ–°äº†ï¼Œä½† remote é‚„æ˜¯èˆŠçš„ã€‚ line12 ","date":"March 2, 2022","img":"https://allenhsieh1992.com/images/git.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/tools/how_git_works/","smallImg":"","tags":[{"title":"Git","url":"/tags/git/"}],"timestamp":1646179200,"title":"Git æ˜¯å¦‚ä½•é‹ä½œçš„"},{"categories":[{"title":"CONTAINER","url":"/categories/container/"}],"content":"ç”±æ–¼å…¬å¸çš„ Package Managment éƒ½æ˜¯å®¢è£½åŒ–çš„ï¼Œå¤–åŠ ç¶­è­·çš„æœå‹™æ²’æœ‰ Container åŒ–ï¼Œæ‰€ä»¥ä»¥å‰å¾ˆé›£åœ¨æœ¬æ©Ÿä¸Šé–‹ç™¼ã€‚ä½†æœ€è¿‘å…¬å¸é–‹å§‹å°å…¥äº† Spring Boot ï¼Œæ‰€ä»¥ç¾åœ¨æƒ³åœ¨æœ¬æ©Ÿæ¶èµ·ä¸€å€‹ç’°å¢ƒä¹Ÿä¸åƒä»¥å‰é€™éº¼ç¹ç‘£ï¼Œä¹Ÿå°±é †ä¾¿ç ”ç©¶ä¸€ä¸‹ç›´æ¥ç”¨ Docker åœ¨æœ¬æ©Ÿæ¶èµ·ä¸€å€‹ Mysql Serverï¼Œé€™é‚Šç´€éŒ„ä¸€ä¸‹ã€‚\nå®‰è£ Mysql Client é€é Brew å®‰è£ Mysql Client\n1brew install mysql8-client å®‰è£å¥½ä»¥å¾Œï¼ŒBrew æœ‰æé†’è¦ Export ç’°å¢ƒè®Šæ•¸ï¼Œåˆ¥å¿˜äº†\n1If you need to have mysql-client first in your PATH, run: 2 echo \u0026#39;export PATH=\u0026#34;/usr/local/opt/mysql-client/bin:$PATH\u0026#34;\u0026#39; \u0026gt;\u0026gt; ~/.zshrc 3 4For compilers to find mysql-client you may need to set: 5 export LDFLAGS=\u0026#34;-L/usr/local/opt/mysql-client/lib\u0026#34; 6 export CPPFLAGS=\u0026#34;-I/usr/local/opt/mysql-client/include\u0026#34; å®‰è£èˆ‡é‹è¡Œ Mysql8 1$ docker pull mysql/mysql-server:8.0 2$ docker run -itd --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql/mysql-server:8.0 name: Container çš„åå­— p: æœ¬æ©Ÿçš„ port mapping åˆ° container è£¡é¢çš„ port MYSQL_ROOT_PASSWORD: Mysql Root çš„å¯†ç¢¼ ç¢ºèª Mysql8 é‹è¡Œæ­£å¸¸ 1$ docker ps 2CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 38ec7a52cc3ea mysql/mysql-server:8.0 \u0026#34;/entrypoint.sh mysqâ€¦\u0026#34; 29 minutes ago Up 26 minutes (healthy) 0.0.0.0:3306-\u0026gt;3306/tcp, :::3306-\u0026gt;3306/tcp, 33060-33061/tcp mysql è¦ç¢ºèª Container çš„ Status æ˜¯ healthy å–”\né€£ç·š Mysql Server Container ä¸­å·²ç¶“å®‰è£å¥½ Mysql Client æ‰€ä»¥å¯ä»¥ç›´æ¥é€²å…¥åˆ° Container ä¸­é€£ç·š\n1$ docker exec -it mysql8 mysql -uroot -p è®“ Container æœ¬æ©Ÿå¯ä»¥é€£ç·š ç‚ºäº†è®“ Container ä»¥å¤–çš„æœ¬æ©Ÿå¯ä»¥é€£ç·šï¼Œæ‰€ä»¥éœ€ä¿®æ”¹ Mysql User çš„æ¬Šé™ï¼Œ Root User å¯ä»¥æ¥å—å¤–é¢çš„é€£ç·šã€‚\n1UPDATE mysql.user SET HOST=\u0026#39;%\u0026#39; WHERE USER = \u0026#39;root\u0026#39; LIMIT 1; æ³¨æ„ï¼Œé€™é‚Šè¦é‡å•Ÿ Mysql Server æ‰æœƒç”Ÿæ•ˆï¼Œè‰¾å€«æ˜¯ç›´æ¥é‡å•Ÿæ•´å€‹ Container\n1docker restart mysql Mac æœ¬æ©Ÿæ¸¬è©¦é€£ç·š é€™é‚Šè¦æ³¨æ„ï¼Œç”±æ–¼ Mysql Server æ˜¯åœ¨ Contaienr ä¸­é‹è¡Œçš„ï¼Œå°è‡´æœ¬æ©Ÿæ²’æœ‰ mysq.sock çš„ fileï¼Œæ‰€ä»¥ç›´æ¥é‹è¡Œ mysql client æ²’æŒ‡å®š Host æœƒå‡ºç¾ä»¥ä¸‹éŒ¯èª¤ã€‚\n1$ mysql -u root -p 2Enter password: 3ERROR 2002 (HY000): Can\u0026#39;t connect to local MySQL server through socket \u0026#39;/tmp/mysql.sock\u0026#39; (2) æ‰€ä»¥é€™é‚Šéœ€è¦ç‰¹åˆ¥æŒ‡å®š Host ç‚º 127.0.0.1\n1mysql -h 127.0.0.1 -u root -p ","date":"January 28, 2022","img":"https://allenhsieh1992.com/images/docker.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/container/create_mysql_server_by_docker/","smallImg":"","tags":[{"title":"Docker","url":"/tags/docker/"}],"timestamp":1643328000,"title":"ä½¿ç”¨ Docker åœ¨ Mac ä¸Šè£ Mysql Server"},{"categories":[{"title":"JAVA","url":"/categories/java/"}],"content":"ä½¿ç”¨ Java ä¹Ÿæœ‰ä¸€æ®µæ™‚é–“äº†ï¼Œä¸€ç›´ä¸çŸ¥é“æœ‰ java.lang.ref é€™åŒ… package çš„å­˜åœ¨ï¼Œç›´åˆ°æœ€è¿‘åœ¨ç ”ç©¶ Java Garbage Collection çš„æ™‚å€™ï¼Œæ‰å‰›å¥½çŸ¥é“åŸä¾† Java çš„å¼•ç”¨é‚„æœ‰ç´°åˆ†æˆå››å€‹ï¼Œåˆ†åˆ¥ç”±å¼·åˆ°å¼±ç‚º:\nå¼·å¼•ç”¨ (Strong Reference) è»Ÿå¼•ç”¨ (Soft Reference) å¼±å¼•ç”¨ (Weak Reference) è™›å¼•ç”¨ (Phantom Reference) å¼·å¼•ç”¨ ç›¸ä¿¡å¤§å®¶å°å¼·å¼•ç”¨ä¸€å®šä¸é™Œç”Ÿï¼Œæˆ‘å€‘æ­£å¸¸å»ºç«‹æ–°çš„ç‰©ä»¶æ™‚æ‰€ä½¿ç”¨çš„å¼•ç”¨éƒ½æ˜¯å¼·å¼•ç”¨ã€‚ç•¶è¨˜æ†¶é«”ä¸­çš„ç‰©ä»¶æœ‰å¼·å¼•ç”¨æ™‚ï¼ŒGarbage Collection å°±ä¸€å®šä¸æœƒå›æ”¶æ­¤ç‰©ä»¶ã€‚ç”šè‡³ç•¶è¨˜æ†¶é«”ä¸è¶³æ™‚ Java Virtual Machine å¯§é¡˜å™´å‡º OutOfMemoryError çš„éŒ¯èª¤ï¼Œä¹Ÿä¸æœƒæ¸…é™¤å®ƒã€‚\n1package com.javacore.ref; 2 3import java.util.ArrayList; 4import java.util.List; 5 6public class StrongRef { 7 static class User {} 8 9 public static void main(String[] args) { 10 List\u0026lt;User\u0026gt; userList = new ArrayList\u0026lt;\u0026gt;(); 11 while (userList != null) { 12 User user = new User(); 13 userList.add(user); 14 } 15 } 16} ä¸Šé¢çš„ While Loop çš„ User(Line12) å°±æ˜¯å¼·å¼•ç”¨ï¼Œé›–ç„¶ Loop ä¸­ User æœƒä¸€ç›´æŒ‡å‘æ–°çš„ç‰©ä»¶ï¼Œä½†æ˜¯ Line13 å°‡ User åŠ å…¥ List ä¸­ä¹Ÿæ˜¯å¼·å¼•ç”¨ï¼Œæ‰€ä»¥æ‰€æœ‰çš„ User éƒ½æœƒä¸€ç›´ä¿ç•™åœ¨è¨˜æ†¶é«”ä¸­ã€‚æˆ‘ä½¿ç”¨ 10 MB çš„ Heap åŸ·è¡Œ (jvm option -Xmx10m)ï¼Œå¾—åˆ°ä¸‹é¢çš„çµæœï¼Œä¸å‡ºæ„å¤–ä¸€ä¸‹å°±ç©ºé–“ä¸è¶³äº†ã€‚\n1Exception in thread \u0026#34;main\u0026#34; java.lang.OutOfMemoryError: Java heap space 2\tat java.base/java.util.Arrays.copyOf(Arrays.java:3720) 3\tat java.base/java.util.Arrays.copyOf(Arrays.java:3689) 4\tat java.base/java.util.ArrayList.grow(ArrayList.java:238) 5\tat java.base/java.util.ArrayList.grow(ArrayList.java:243) 6\tat java.base/java.util.ArrayList.add(ArrayList.java:486) 7\tat java.base/java.util.ArrayList.add(ArrayList.java:499) 8\tat com.javacore.ref.StrongRef.main(StrongRef.java:13) è»Ÿå¼•ç”¨ è»Ÿå¼•ç”¨è·Ÿå¼·å¼•ç”¨æœ€å¤§çš„ä¸åŒä¹‹è™•å°±æ˜¯ï¼Œç•¶ Garbage Collection èªç‚ºè¨˜æ†¶é«”æœ‰å£“åŠ›æ™‚ï¼Œæ‰æœƒå°‡è»Ÿå¼•ç”¨çš„ç‰©ä»¶çµ¦æ¸…é™¤ã€‚ä¹Ÿå°±ä»£è¡¨ Garbage Collection åŸ·è¡Œæ™‚ï¼Œä¸ä¸€å®šæœƒå¾è¨˜æ†¶é«”æ¸…é™¤ã€‚ æ³¨æ„:ç•¶è¨˜æ†¶ä¸è¶³æ™‚ï¼ŒJVM æœƒå…ˆå˜—è©¦æ¸…é™¤è»Ÿå¼•ç”¨ï¼Œä½†å¦‚æœæ¸…é™¤å®Œä»¥å¾Œé‚„æ˜¯ä¸è¶³ï¼Œé‚„æ˜¯ç‚ºå™´ OutOfMemoryError\n1package com.javacore.ref; 2 3import java.lang.ref.SoftReference; 4 5public class SoftRef { 6 7 static class User {} 8 9 public static void main(String[] args) { 10 System.out.println(\u0026#34;Available Memory Size \u0026#34; + Runtime.getRuntime().maxMemory()); 11 System.out.println(\u0026#34;Available Memory Size \u0026#34; + Runtime.getRuntime().totalMemory()); 12 13 User user = new User(); 14 SoftReference\u0026lt;User\u0026gt; userSoftReference = new SoftReference\u0026lt;\u0026gt;(user); 15 user = null; 16 17 System.out.println(userSoftReference.get()); 18 System.gc(); 19 System.out.println(userSoftReference.get()); 20 21 byte[] a = new byte[1024 * 1024 * 3]; 22 while (null != userSoftReference.get()) { 23 System.out.println(\u0026#34;Free Memory Size \u0026#34; + Runtime.getRuntime().freeMemory()); 24 byte[] b = new byte[1024 * 1000]; 25 } 26 System.out.println(\u0026#34;The soft reference \u0026#34; + userSoftReference.get()); 27 } 28} é€™é‚Šä½¿ç”¨ 5MB çš„ Heap ä¾†åŸ·è¡Œ(JVM Option -Xmx5m)ï¼Œå¾—åˆ°ä»¥ä¸‹çš„çµæœã€‚\n1Available Memory Size 6291456 2Available Memory Size 6291456 3com.javacore.ref.SoftRef$User@71be98f5 4com.javacore.ref.SoftRef$User@71be98f5 5Free Memory Size 1222280 6Free Memory Size 185952 7Free Memory Size 185952 8The soft reference null å¾ä¸Šé¢çš„ Code ä¾†çœ‹\nLine13 ä¸€é–‹å§‹å¼·å¼•ç”¨ User Line14 å»ºç«‹ä¸€å€‹æ–°çš„è»Ÿå¼•ç”¨åˆ°åŒä¸€å€‹ User Line15 å°‡åŸæœ¬çš„å¼·å¼•ç”¨çµ¦é‡‹æ”¾å‡ºä¾†ï¼Œæ‰€ä»¥ Line13 å»ºç«‹çš„ User ï¼Œå·²ç¶“æ²’æœ‰ä»»ä½•å¼·å¼•ç”¨ï¼Œåªå‰©ä¸‹ Line14 çš„è»Ÿå¼•ç”¨ Line17 å˜—è©¦å¾è»Ÿå¼•ç”¨æ‹‰å‡ºè³‡æ–™ï¼ŒåŸ·è¡Œçš„çµæœç•¶ä¸‹æœƒæ‹¿åˆ° User çš„ç‰©ä»¶ Line19 é›–ç„¶ Line18 å¼·åˆ¶å‘¼å« JVM åŸ·è¡Œäº† Garbage Collectionï¼Œä½†ç”±æ–¼è¨˜æ†¶é«”æ²’æœ‰å£“åŠ›ï¼Œæ‰€ä»¥é‚„æ˜¯å–å¾—åˆ° User çš„ç‰©ä»¶ã€‚ Line21-25 å˜—è©¦çµ¦è¨˜æ†¶é«”æ–½å£“ï¼Œç›´åˆ° Garbage Collection å°‡ User å¾è¨˜æ†¶é«”æ¸…é™¤ å¼±å¼•ç”¨ å¼±å¼•ç”¨è·Ÿè»Ÿå¼•ç”¨æœ€å¤§çš„ä¸åŒé»å°±æ˜¯ï¼Œç•¶ Garbage Collection ç”¢ç”Ÿæ™‚ï¼Œä¸ç®¡è¨˜æ†¶é«”æ˜¯å¦è¶³å¤ ï¼Œéƒ½ä¸€å®šæœƒå°‡å¼±å¼•ç”¨çš„ç‰©ä»¶çµ¦æ¸…é™¤æ‰ã€‚\n1package com.javacore.ref; 2 3import java.lang.ref.WeakReference; 4 5public class WeakRef { 6 static class User {} 7 8 public static void main(String[] args) { 9 User user = new User(); 10 WeakReference\u0026lt;User\u0026gt; userWeakReference = new WeakReference\u0026lt;\u0026gt;(user); 11 user = null; 12 13 System.out.println(userWeakReference.get()); 14 System.gc(); 15 System.out.println(userWeakReference.get()); 16 } 17} å¾ä¸Šé¢çš„ Code ä¾†çœ‹\nLine9 ä¸€é–‹å§‹å¼·å¼•ç”¨ User Line10 å»ºç«‹ä¸€å€‹æ–°çš„å¼±å¼•ç”¨åˆ°åŒä¸€å€‹ User Line11 å°‡åŸæœ¬çš„å¼·å¼•ç”¨çµ¦é‡‹æ”¾å‡ºä¾†ï¼Œæ‰€ä»¥ Line9 å»ºç«‹çš„ User ï¼Œå·²ç¶“æ²’æœ‰ä»»ä½•å¼·å¼•ç”¨ï¼Œåªæœ‰å¼±å¼•ç”¨ Line13 å¦‚æœ Garbage Collection é‚„æ²’è·‘çš„è©±ï¼Œå¼±å¼•ç”¨æœƒæ‹¿åˆ° User çš„ç‰©ä»¶ï¼Œæ‰€ä»¥ç•¶æ‹¿åˆ° Null æ™‚ä¸è¦æ„Ÿåˆ°æ„å¤–ï¼Œå› ç‚ºå·²ç¶“ GC æ‰äº†ã€‚ Line15 é€™æ™‚å¼±å¼•ç”¨æ­£å¸¸æœƒæ‹¿åˆ° Null ï¼Œå› ç‚ºæˆ‘å€‘åœ¨ Line14 è«‹JVM åŸ·è¡Œäº† GC ç”±æ–¼é€™é‚Šä¸ç®¡è¨˜æ†¶é«”å¤§å°éƒ½æœƒæ¸…é™¤ï¼Œæ‰€ä»¥å°±æ²’ç‰¹åˆ¥é™åˆ¶ Heap çš„Sizeï¼ŒCode åŸ·è¡Œçµæœå¦‚ä¸‹\n1com.javacore.ref.WeakRef$User@3f0ee7cb 2null ReferenceQueue åœ¨ä»‹ç´¹è™›å¼•ç”¨å‰ï¼Œé€™é‚Šæƒ³å…ˆä»‹ç´¹ ReferenceQueueã€‚ReferenceQueue æ˜¯ç•¶ç‰©ä»¶è¢« GC ä»¥å¾Œï¼ŒReference æœƒè¢«æ”¾åˆ°é€™å€‹ Queueã€‚æ˜¯ä¸æ˜¯æœ‰é»æŠ½è±¡ï¼Œæˆ‘å€‘ç”¨ä»¥ä¸‹çš„ä¾‹å­ä¾†çœ‹\n1package com.javacore.ref; 2 3import java.lang.ref.ReferenceQueue; 4import java.lang.ref.WeakReference; 5 6public class ReferenceQueueExample { 7 static class User { 8 } 9 10 public static void main(String[] args) { 11 User user = new User(); 12 ReferenceQueue\u0026lt;User\u0026gt; queue = new ReferenceQueue\u0026lt;\u0026gt;(); 13 WeakReference\u0026lt;User\u0026gt; weakReference = new WeakReference\u0026lt;\u0026gt;(user, queue); 14 15 System.out.println(\u0026#34;try to pull from queue \u0026#34; + queue.poll()); 16 user = null; 17 System.gc(); 18 Object result = null; 19 while (result == null) { 20 System.out.println(\u0026#34;trying to get from queue\u0026#34;); 21 result = queue.poll(); 22 } 23 System.out.println(\u0026#34;try to pull from queue \u0026#34; + result); 24 System.out.println(\u0026#34;try to get from weakReference \u0026#34; + weakReference.get()); 25 } 26} åŸ·è¡Œçµæœå¯ä»¥çœ‹å‡ºï¼Œæœ‰æ™‚ GC ä¸¦ä¸æ˜¯é€™éº¼å³æ™‚ï¼Œæ‰€ä»¥æœƒæœ‰éœ€è¦ç­‰ä¸€ä¸‹ä¹‹å¾Œæ‰æœƒæ”¾åˆ°Queueä¸­ã€‚\n1try to pull from queue null 2trying to get from queue. 3trying to get from queue. 4trying to get from queue. 5trying to get from queue. 6try to pull from queue java.lang.ref.WeakReference@7e0ea639 7try to get from weakReference null è™›å¼•ç”¨ è™›å¼•ç”¨è·Ÿå…¶ä»–å¼•ç”¨ä¸åŒï¼Œå®ƒå°±è·Ÿåå­—å¦‚åŒè™›è¨­ï¼Œåœ¨ get() å‡½å¼æ°¸é å›è¿”å› Nullã€‚é‚£å®ƒç©¶ç«Ÿæœ‰ä»€éº¼ç”¨ï¼Ÿ å®ƒè·Ÿå‰é¢ä»‹ç´¹çš„ ReferenceQueue æ˜¯ä¸€èµ·ä½¿ç”¨çš„ï¼Œå¯ä»¥ç”¨ä¾†è¿½ä¸­ç‰©ä»¶çš„å›æ”¶çš„ç”Ÿå‘½é€±æœŸã€‚åœ¨ Java9 æ™‚ finalize çš„å‡½å¼å·²ç¶“è¢«deprecatedï¼Œå»ºè­°ä½¿ç”¨ è™›å¼•ç”¨åŠ ä¸Š ReferenceQueue å–ä»£\n1package com.javacore.ref; 2 3import java.lang.ref.PhantomReference; 4import java.lang.ref.Reference; 5import java.lang.ref.ReferenceQueue; 6 7public class PhantomRef { 8 static class TraceObject {} 9 10 static class PhantomTraceObject extends PhantomReference\u0026lt;TraceObject\u0026gt; { 11 PhantomTraceObject(TraceObject traceObject, ReferenceQueue\u0026lt;? super TraceObject\u0026gt; queue) { 12 super(traceObject, queue); 13 } 14 15 public void cleanup() { 16 System.out.println(\u0026#34;trace object is cleaning up \u0026#34;); 17 } 18 } 19 20 public static void main(String[] args) throws InterruptedException { 21 ReferenceQueue\u0026lt;TraceObject\u0026gt; referenceQueue = new ReferenceQueue(); 22 TraceObject data = new TraceObject(); 23 PhantomTraceObject phantomTraceObject = new PhantomTraceObject(data, referenceQueue); 24 data = null; 25 26 System.gc(); 27 Reference\u0026lt;? extends TraceObject\u0026gt; referenceFromQueue; 28 if ((referenceFromQueue = referenceQueue.remove()) != null) { 29 ((PhantomTraceObject) referenceFromQueue).cleanup(); 30 } 31 } 32} åŸ·è¡Œçµæœå¦‚ä¸‹ï¼Œline28 å¯ä»¥çœ‹åˆ°æˆ‘ä½¿ç”¨ ReferenceQueue ä¸­çš„ remove() è€Œéä¹‹å‰ ReferenceQueue ä¸­çš„ poll()ã€‚ remove() å’Œ poll() æœ€å¤§çš„å·®åˆ¥åœ¨æ–¼ï¼Œremove() æœƒå¡åœ¨é‚£é‚Šç­‰ queue è£¡é¢æœ‰è³‡æ–™è€Œ poll() æ˜¯æ‹‰ç•¶ä¸‹çš„çµæœã€‚\n1trace object is cleaning up WeakHashMap é€™é‚Šæœ€å¾Œè¦ä»‹ç´¹ä¸€å€‹ç‰¹åˆ¥çš„ HashMap WeakHashMapï¼Œçœ‹åˆ°Weakå¤§å®¶ä¸€å®šå°±çŸ¥é“ä»–æ˜¯å¼±å¼•ç”¨ï¼Œå®ƒæ˜¯å°‡ Key ç•¶æˆå¼±å¼•ç”¨ï¼Œæ‰€ä»¥å­˜åœ¨ Map è£¡é¢çš„å€¼æ˜¯æœƒè¢« GC çš„ã€‚\n1package com.javacore.ref; 2 3import java.util.WeakHashMap; 4 5public class WeakHashMapExample { 6 static class Process {} 7 static class Thread {} 8 9 public static void main(String[] args) { 10 Process process = new Process(); 11 Thread thread = new Thread(); 12 13 WeakHashMap\u0026lt;Process, Thread\u0026gt; map = new WeakHashMap\u0026lt;Process, Thread\u0026gt;(); 14 map.put(process, thread); 15 process = null; 16 17 System.out.println(\u0026#34;Does map contain the thread: \u0026#34; + map.containsValue(thread)); 18 System.gc(); 19 while (map.containsValue(thread)) { 20 System.out.println(\u0026#34;map still contains the value\u0026#34;); 21 } 22 System.out.println(\u0026#34;The map now is empty \u0026#34; + map.isEmpty()); 23 } 24} åŸ·è¡Œçš„çµæœå¦‚ä¸‹ï¼Œå¾çµæœå¯ä»¥çœ‹å‡ºï¼Œç•¶ line15 process æ²’æœ‰å¼·å¼•ç”¨ä»¥å¾Œï¼Œmap è£¡é¢çš„å…§å®¹å°±æœƒæ¶ˆå¤±ã€‚\n1Does map contain the thread: true 2map still contains the value 3The map now is empty true ç¸½çµ é›–ç„¶ Java è£¡é¢æœ‰å¼±å¼•ç”¨å’Œè»Ÿå¼•ç”¨çš„æ–¹å¼å¯ä»¥ç•¶ä½œçŸ­æš«çš„ç·©å­˜ï¼Œä½†ç·©å­˜çš„æ™‚é–“æ˜¯ä¸å¯æ§çš„ï¼Œå› ç‚ºæ˜¯æ§åˆ¶åœ¨ Java çš„ Garbage Collectionã€‚è€Œä¸”å¤§é‡çš„ç·©å­˜ä¹Ÿæœƒé€ æˆæ›´é »ç¹çš„GCã€‚ ç›®å‰é‚„æ²’æœ‰åœ¨å¯¦å‹™ä¸Šä½¿ç”¨çš„ç¶“é©—ï¼Œæ‰€ä»¥å¦‚æœå°‡ä¾†æœ‰å¹¸æœ‰ç”¨åˆ°å†ä¾†åˆ†äº«æ›´å¤šç´°ç¯€ã€‚ä¸éç›®å‰å€‹äººè§€é»ï¼Œé€™æ‡‰è©²åªé©åˆç”¨åœ¨ client Sideï¼ŒWeb Server é‚„æ˜¯å»ºè­°ä½¿ç”¨åƒ Redis æˆ– Memcache é€™äº› Cache çš„æŠ€è¡“ã€‚\n","date":"January 27, 2022","img":"https://allenhsieh1992.com/images/java.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/java/java-reference/","smallImg":"","tags":[{"title":"JavaCore","url":"/tags/javacore/"}],"timestamp":1643241600,"title":"ä½ çŸ¥é“ Java çš„å››å€‹å¼•ç”¨å—ï¼Ÿ"},{"categories":[{"title":"JAVA","url":"/categories/java/"}],"content":"ä»€éº¼æ˜¯ Garbage Collection åœ¨å¤§å­¸æ™‚ Algorithm, OS, å’Œ Data Structure ç­‰èª²ç¨‹éƒ½æ˜¯ä½¿ç”¨ C æˆ– C++ ä¾†ç•¶ä½œèª²ç¨‹æ•™æçš„èªè¨€ã€‚è€Œ C èˆ‡ C++ èªè¨€å¯ä»¥æ“æœ‰å¾ˆå¤§çš„æŒæ§æ¬ŠåŠ›åœ¨ Memory ä¸Šï¼Œä½†æ˜¯ä¸€è™•ç†ä¸å¥½å°±å®¹æ˜“é€ æˆ Memory Leakã€‚è®“æˆ‘å°è±¡æœ€æ·±åˆ»çš„æ˜¯ Operating System èª²ç¨‹ï¼Œä½¿ç”¨ OS161 ä¾†ç•¶ä½œåšä½œæ¥­çš„ç·´ç¿’ï¼Œ è€Œæœ€å¾Œä¸€å€‹ä½œæ¥­å°±æ˜¯å¯¦ä½œ Memory Managementã€‚å¤§å®¶é‚£æ™‚å€™æœ€å®³æ€•é‡åˆ°çš„éŒ¯èª¤è¨Šæ¯å°±æ˜¯ \u0026ldquo;I can\u0026rsquo;t handle this\u0026hellip; I think I\u0026rsquo;ll just die now\u0026hellip;\u0026quot;ï¼Œç„¶å¾Œå°±è¦é–‹å§‹è‰±è¾›çš„ Debug è·¯ç¨‹ã€‚\nä¹‹å¾Œç•¶æˆ‘æ¥è§¸ Java ä»¥å¾Œï¼Œæˆ‘å°±å›ä¸å»äº† C å’Œ C++ çš„ä¸–ç•Œäº†ã€‚å› ç‚º Java å·²ç¶“æœ‰ä¸€å¥—éå¸¸å®Œå–„çš„æ©Ÿåˆ¶å¹«æˆ‘å€‘ç®¡ç†è¨˜æ†¶é«”ï¼Œé‚£å°±æ˜¯ Garbage Collectionã€‚ Garbage Collection æ˜¯ä¸€å€‹æ¼”ç®—æ³•ï¼Œæœƒè‡ªå‹•å°‡ä¸éœ€è¦åœ¨ä½¿ç”¨çš„å…§å­˜çµ¦é‡‹æ”¾å‡ºä¾†ï¼Œè€Œæˆ‘å€‘å°±ä¸ç”¨åœ¨ç®¡ç†è¤‡é›œçš„è¨˜æ†¶é«”äº†è¬æ­²~\nGarbage Collection æ¼”ç®—æ³• Reference Counting é€™æ˜¯æœ€ç°¡å–®æ˜“æ‡‚çš„æ¼”ç®—æ³•ï¼Œæ¯å€‹ç‰©ä»¶éƒ½æœ‰å€‹è¨˜åœ°å€å»ç´€éŒ„ç›®å‰è¢«å¤šå°‘å¼•ç”¨ï¼Œç•¶å¼•ç”¨æ•¸é‡ç­‰æ–¼é›¶æ™‚ï¼Œå°±ä»£è¡¨é€™å€‹ç‰©ä»¶å¯ä»¥è¢«æ¸…é™¤æ‰ã€‚\nReference Countingæ¼”ç®—æ³•çš„å•é¡Œæ˜¯ Cycle Referenceã€‚ä¾‹å¦‚A reference B å’Œ B reference Aï¼Œé€™æ¨£ A å’Œ B çš„å¼•ç”¨çš„æ•¸é‡æ°¸é ä¸å¯èƒ½ç‚ºé›¶ï¼Œä¹Ÿä»£è¡¨æ°¸é ä¸æœƒè¢«æ¸…é™¤ã€‚\nMark \u0026 Sweep Mark \u0026amp; Sweep æ¼”ç®—æ³•ä¸€å…±ç”¨å…©å€‹éšæ®µï¼Œå¦‚åŒè‹±æ–‡ Mark å’Œ Sweep åˆ†åˆ¥ä»£è¡¨ä¸åŒçš„éšæ®µ éšæ®µ1. Mark: å°±æ˜¯é€éæ ¹å¼•ç”¨é–‹å§‹ä¸€ä¸€èµ°éä¸€éç›®å‰çš„è¨˜æ†¶é«”ï¼Œå°‡æ‰€æœ‰æœ‰è¢«å¼•ç”¨çš„ç‰©ä»¶åœ°å€æ¨™è¨˜ç‚ºæ­£åœ¨ä½¿ç”¨ã€‚ éšæ®µ2. Sweep: åœ¨èµ°éä¸€æ¬¡å°‡åœ°å€å°‡æ‰€æœ‰æ²’æœ‰è¢«æ¨™è¨˜ç‚ºé‚„æ­£åœ¨ä½¿ç”¨çš„è¨˜æ†¶é«”æ¸…é™¤ã€‚\nMark \u0026amp; Sweep æ¼”ç®—æ³•çš„å•é¡Œæ˜¯è¨˜æ†¶ç¢ç‰‡(fragmentation)ï¼Œç”±æ–¼è¢«æ¸…é™¤çš„è¨˜æ†¶æ˜¯éš¨æ©Ÿçš„ï¼Œé€ æˆå‰©ä¸‹é‚„æ­£åœ¨ä½¿ç”¨çš„è¨˜æ†¶åœ°å€æ˜¯éé€£çºŒæ€§çš„ã€‚\nCopying Copying æ¼”ç®—æ³•æ˜¯å°‡è¨˜æ†¶é«”åˆ‡æˆå…©å€‹å€å¡Š(Region)ï¼Œä¸€æ¬¡åªæœƒæœ‰ä¸€å€‹å€å¡Šåœ¨ä½¿ç”¨ï¼Œé€™é‚Šåˆ†åˆ¥ä½¿ç”¨ \u0026ldquo;æ¿€æ´»å€å¡Š\u0026rdquo; å’Œ \u0026ldquo;æœªæ¿€æ´»å€å¡Š\u0026rdquo; ä¾†è¡¨ç¤ºã€‚ç•¶æ¼”ç®—æ³•åŸ·è¡Œæ™‚ï¼Œæœƒå°‡æ‰€æœ‰åœ¨ \u0026ldquo;æ¿€æ´»å€å¡Š\u0026rdquo; ä¸­é‚„éœ€è¦ä½¿ç”¨çš„ç‰©ä»¶è¤‡è£½åˆ° \u0026ldquo;æœªæ¿€æ´»å€å¡Šä¸­\u0026rdquo;ã€‚åœ¨è¤‡è£½çš„éç¨‹ä¸­ï¼Œæœƒå°‡åœ°å€é‡æ–°æ•´ç†ï¼Œè§£æ±ºäº† Mark \u0026amp; Sweep æ¼”ç®—æ³•ä¸­çš„ Fragmentation çš„å•é¡Œã€‚è¤‡è£½å®Œå¾Œ \u0026ldquo;æœªæ¿€æ´»å€å¡Š\u0026rdquo; å°±æœƒè®Šæˆæ–°çš„ \u0026ldquo;æ¿€æ´»å€å¡Š\u0026rdquo;ï¼Œè€Œ \u0026ldquo;æ¿€æ´»å€å¡Š\u0026rdquo; æœƒè®Šæˆ \u0026ldquo;æœªæ¿€æ´»å€å¡Š\u0026rdquo; é€™æ¨£ä¸€ç›´å¾ªç’°ã€‚\nCopying æ¼”ç®—æ³•çš„å•é¡Œæ˜¯\nç”±æ–¼éœ€è¦å…©å€‹å€å¡Šï¼Œæ‰€ä»¥ä½¿ç”¨çš„è¨˜æ†¶é«”ä¹Ÿæ˜¯å…©å€ã€‚ å¦‚æœæ¯æ¬¡åŸ·è¡Œæ™‚ï¼Œéœ€è¦æ¸…ç†çš„è¨˜æ†¶é«”å¾ˆå°‘ï¼Œé‚£å°±ä»£è¡¨æ¯æ¬¡éœ€è¦è¤‡è£½åˆ° \u0026ldquo;æœªæ¿€æ´»å€å¡Š\u0026rdquo; çš„å¾ˆå¤šï¼Œæ•ˆèƒ½ä¹Ÿæœƒå¾ˆå·® Mark-Compact Mark-Compact æ¼”ç®—æ³•æ˜¯åŸºæ–¼ Mark \u0026amp; Sweep æ¼”ç®—æ³•çš„å„ªåŒ–ï¼Œå¤šå¢åŠ ä¸€å€‹ Compact éšæ®µï¼Œå°‡é‚„éœ€è¦ä½¿ç”¨çš„è¨˜æ†¶é‡æ–°æ•´ç†ï¼Œè§£æ±ºäº†è¨˜æ†¶ç¢ç‰‡ï¼Œä¹Ÿä¸åƒ Copying æ¼”ç®—æ³•ä¾æ¨£éœ€è¦ä½¿ç”¨å…©å€çš„è¨˜æ†¶é«”\nJava Garbage Collection Generation Collector Generation æ¼”ç®—æ³•çš„æ ¸å¿ƒç†è«–åœ¨æ–¼å¤§éƒ¨åˆ†çš„ç‰©ä»¶å¾ˆå¿«å°±æ˜¯è¢«æ¸…æ‰ï¼Œå¦‚æœæ²’è¢«æ¸…æ‰ï¼Œå°±ä¸éœ€è¦é€™éº¼é »ç¹çš„ä¸€ç›´é‡è¤‡ç¢ºèªæ˜¯å¦å­˜åœ¨ã€‚Generation æ¼”ç®—æ³•æœƒå°‡è¨˜æ†¶é«”åˆ†ç‚º Young \u0026amp; Old Generationã€‚Young Generation ç”¨æ–¼å­˜æ”¾æ‰€æœ‰æ–°ç‰©ä»¶ï¼Œåœ¨å¹¾æ¬¡ GC å¾Œé‚„åœ¨ Young Generation æœªæ¸…é™¤çš„ç‰©ä»¶ï¼Œå°‡è¢«å‡ç´šåˆ° Old Generationã€‚\nå¦‚ä¸Šåœ– Java å°‡è¨˜æ†¶é«”è³‡æ–™çµæ§‹åˆ†ç‚º\nYoung Generation æœ‰å…©å€‹ survivor ç©ºé–“ï¼Œä¹Ÿå°±æ˜¯åœ–ä¸Šçš„ S0 \u0026amp; S1 é€™é‚Šä½¿ç”¨ Copying æ¼”ç®—æ³•ï¼Œå°‡ç‰©ä»¶åœ¨ S0 èˆ‡ S1 ä¹‹é–“è¤‡è£½ã€‚ è¤‡è£½åˆ°ä¸€å®šæ¬¡æ•¸æœƒè¢«å‡ç´šåˆ° Olde Generation Eden Space: é€™é‚Šç”¨æ–¼å­˜æ–°çš„ç‰©ä»¶ï¼Œåœ¨ç¬¬ä¸€æ¬¡ GC æ™‚ï¼Œæ²’æœ‰è¢«æ¸…é™¤å°±æœƒç§»åˆ° S0 or S1 Old Generation é€™é‚Šä½¿ç”¨ Mark-Compact æ¼”ç®—æ³•ã€‚ Permanent Generation é€™é‚Šç”¨æ–¼å­˜å– JVM é•·æœŸéœ€è¦ä½¿ç”¨çš„è³‡æ–™ï¼Œä¾‹å¦‚ Class, Method ç­‰ç­‰ã€‚é€™è£¡çš„è³‡æ–™ä¸æœƒè¢« GC æ‰ Generation æ¼”ç®—æ³•ä¸­æœ‰å€‹ç‰¹åˆ¥çš„è³‡æ–™çµæ§‹å«åš Card Tableï¼Œæƒ³åƒå¦‚æœç¾åœ¨è¦ GC Young Generationï¼Œè€Œ Young Generation è¬ä¸€æœ‰ Old Generation è£¡é¢çš„è¨˜æ†¶é«”ä¾†å¼•ç”¨é‚£è¦æ€éº¼è¾¦ï¼Ÿé€™æ¨£æ˜¯å¦æ¯æ¬¡åœ¨ GC Young Generation æ™‚éƒ½è¦å» Full Scan Old Generation æ˜¯å¦æœ‰ä»»ä½•ç´¢å¼•ï¼Ÿä½†é€™æ¨£æ•ˆèƒ½å°±æœƒå¾ˆå·®ï¼Œè€Œ Card Table å°±æ˜¯ç”¨æ–¼è™•ç†é€™æ¨£çš„æƒ…æ³ã€‚åœ¨ Card Table ä¸­æœƒç´€éŒ„ç¾åœ¨ Old Generation çš„åœ°å€æ˜¯å¦æœ‰å¼•ç”¨ Young Generation çš„ï¼Œé€™æ¨£åœ¨ Young Generation GC æ™‚å¯ä»¥é€é Card Table ä¾†å¢åŠ æ•ˆèƒ½ã€‚\nRegion Java9 ç¾åœ¨é è¨­çš„ Garbage Collection G1 æ˜¯ä½¿ç”¨ Region æ¼”ç®—æ³•ã€‚å¦‚ä¸Šåœ–ï¼ŒRegion æ¼”ç®—æ³•é‚„æ˜¯æœ‰ Generation çš„æ¦‚å¿µï¼Œä½†è·Ÿ Generation æ¼”ç®—æ³•ä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œå®ƒå°‡è¨˜æ†¶é«”åˆ‡æˆå¤šå€‹ä¸åŒå¤§å°(1 MB åˆ° 32 MB ä¸ç­‰)çš„ Regionã€‚ç”±æ–¼æ›´å¤šçš„å€å¡Šï¼Œæ‰€ä»¥å¯ä»¥ä¸¦ç™¼GCï¼Œè€Œä¸”ä¹Ÿå› ç‚ºæ¯å€‹ Region æ›´å°ï¼Œæ‰€ä»¥ GC çš„æ•¸åº¦æ›´å¿«ã€‚\nJava å–å¾— Garbage Collection è³‡è¨Š Java æœ‰ç‰¹åˆ¥çš„ Garbage Collection æ¥å£ GarbageCollectorMXBeanï¼Œä»¥ä¸‹æ˜¯ç¯„ä¾‹\n1package com.javacore.gc; 2 3import java.lang.management.GarbageCollectorMXBean; 4import java.lang.management.ManagementFactory; 5import java.util.List; 6 7public class MxBean { 8 9 public static void main(String[] args) { 10 List\u0026lt;GarbageCollectorMXBean\u0026gt; beanList = ManagementFactory.getGarbageCollectorMXBeans(); 11 for (GarbageCollectorMXBean bean: beanList) { 12 System.out.println(\u0026#34;Name: \u0026#34; + bean.getName()); 13 System.out.println(\u0026#34;Number of Collection Count: \u0026#34; + bean.getCollectionCount()); 14 System.out.println(\u0026#34;Collection Time \u0026#34; + bean.getCollectionTime() + \u0026#34;ms\u0026#34;); 15 System.out.println(\u0026#34;Pool Name \u0026#34; + bean.getName()); 16 17 for(String pool : bean.getMemoryPoolNames()) { 18 System.out.println(pool); 19 } 20 System.out.println(); 21 } 22 } 23} getCollectionCount(): ä»¥åŸ·è¡Œæ¬¡æ•¸ getCollectionTime(): é è¨ˆä»¥åŸ·è¡Œ Total æ™‚é–“ï¼Œå–®ä½ç‚ºæ¯«ç§’ ä»¥ä¸‹æ˜¯ Open JDK11 é è¨­ G1 åŸ·è¡Œçµæœ\n1Name: G1 Young Generation 2Number of Collection Count: 0 3Collection Time 0 4Pool Name G1 Young Generation 5G1 Eden Space 6G1 Survivor Space 7G1 Old Gen 8 9Name: G1 Old Generation 10Number of Collection Count: 0 11Collection Time 0 12Pool Name G1 Old Generation 13G1 Eden Space 14G1 Survivor Space 15G1 Old Gen ","date":"January 26, 2022","img":"https://allenhsieh1992.com/images/java.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/java/java-garbage-collection/","smallImg":"","tags":[{"title":"JavaCore","url":"/tags/javacore/"}],"timestamp":1643155200,"title":"Java Garbage Collection åŸºç¤æ¼”ç®—æ³•"},{"categories":[{"title":"JAVA","url":"/categories/java/"}],"content":"é€™æ–°å°ˆæ¡ˆæˆ‘é¸æ“‡ä½¿ç”¨äº†ä¹‹å‰æ²’ä½¿ç”¨éçš„ Jersey Client ~ ç”±æ–¼å¸Œæœ›åˆ†ææ‰“åˆ°å…¶ä»–æœå‹™çš„ P99 latencyï¼Œæ‰€ä»¥æˆ‘ç ”ç©¶äº†ä¸€ä¸‹æ€éº¼å» log ä¸‹ä¾†æ‰€æœ‰çš„ duration (å¦‚æœä¸çŸ¥é“ä»€éº¼æ˜¯ P99 latency å¯ä»¥åƒè€ƒé€™ç¯‡æ–‡ç«  \u0026ldquo;What is P99 latency\u0026quot;)ã€‚é€™é‚Šåˆ†äº«ä¸€ä¸‹ï¼Œæˆ‘æœ€å¾Œä½¿ç”¨çš„æ–¹æ³•ï¼Œç”±æ–¼ä¸å¤ªç†Ÿ Jersey Clientï¼Œæ‰€ä»¥æœ€å¾Œä¹Ÿæ˜¯èŠ±äº†ä¸€é»æ™‚é–“æ‰æ‰¾åˆ°ä½¿ç”¨ ClientRequestFilter \u0026amp; ClientResponseFilter ä¾†è§£æ±ºã€‚\nå‰ç½®ä½œæ¥­ é€™é‚Šä½¿ç”¨ Maven Project ä½œç‚ºç¯„ä¾‹\n1\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; 2\u0026lt;project xmlns=\u0026#34;http://maven.apache.org/POM/4.0.0\u0026#34; 3 xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; 4 xsi:schemaLocation=\u0026#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\u0026#34;\u0026gt; 5 \u0026lt;modelVersion\u0026gt;4.0.0\u0026lt;/modelVersion\u0026gt; 6 7 \u0026lt;groupId\u0026gt;org.example\u0026lt;/groupId\u0026gt; 8 \u0026lt;artifactId\u0026gt;jerseyClient\u0026lt;/artifactId\u0026gt; 9 \u0026lt;version\u0026gt;1.0-SNAPSHOT\u0026lt;/version\u0026gt; 10 11 \u0026lt;dependencies\u0026gt; 12 \u0026lt;dependency\u0026gt; 13 \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt; 14 \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt; 15 \u0026lt;version\u0026gt;1.18.20\u0026lt;/version\u0026gt; 16 \u0026lt;scope\u0026gt;provided\u0026lt;/scope\u0026gt; 17 \u0026lt;/dependency\u0026gt; 18 \u0026lt;dependency\u0026gt; 19 \u0026lt;groupId\u0026gt;org.glassfish.jersey.core\u0026lt;/groupId\u0026gt; 20 \u0026lt;artifactId\u0026gt;jersey-client\u0026lt;/artifactId\u0026gt; 21 \u0026lt;version\u0026gt;2.33\u0026lt;/version\u0026gt; 22 \u0026lt;/dependency\u0026gt; 23 \u0026lt;dependency\u0026gt; 24 \u0026lt;groupId\u0026gt;org.glassfish.jersey.inject\u0026lt;/groupId\u0026gt; 25 \u0026lt;artifactId\u0026gt;jersey-hk2\u0026lt;/artifactId\u0026gt; 26 \u0026lt;version\u0026gt;2.28\u0026lt;/version\u0026gt; 27 \u0026lt;/dependency\u0026gt; 28 \u0026lt;/dependencies\u0026gt; 29 \u0026lt;properties\u0026gt; 30 \u0026lt;maven.compiler.source\u0026gt;11\u0026lt;/maven.compiler.source\u0026gt; 31 \u0026lt;maven.compiler.target\u0026gt;11\u0026lt;/maven.compiler.target\u0026gt; 32 \u0026lt;/properties\u0026gt; 33 34\u0026lt;/project\u0026gt; 1package com.demo; 2 3import javax.ws.rs.client.Client; 4import javax.ws.rs.client.ClientBuilder; 5import javax.ws.rs.client.WebTarget; 6import javax.ws.rs.core.MediaType; 7import java.util.concurrent.TimeUnit; 8 9public class MAIN { 10 public static void main(String[] args) { 11 Client client = ClientBuilder.newBuilder() 12 .connectTimeout(30, TimeUnit.SECONDS) 13 .build(); 14 //Filter åœ¨å¾Œé¢çš„ç¯„ä¾‹ä¸­ 15 WebTarget webTarget = client.target(\u0026#34;https://google.com\u0026#34;).register(new Filter()); 16 webTarget 17 .request(MediaType.APPLICATION_JSON_TYPE) 18 .get(String.class); 19 } 20} ClientResponseFilter å¯¦ä½œ Interface javax.ws.rs.client.ClientResponseFilter å¯ä»¥è™•ç†æ‰€æœ‰çš„æ¯å€‹ Response çš„çµæœ ~ å¯ä»¥æ‹¿åˆ° ClientRequestContext \u0026amp; ClientRequestContextï¼Œä»¥ä¸‹æ˜¯ç¯„ä¾‹ã€‚\n1package com.demo; 2 3import javax.ws.rs.client.ClientRequestContext; 4import javax.ws.rs.client.ClientResponseContext; 5import javax.ws.rs.client.ClientResponseFilter; 6import java.io.IOException; 7 8public class Filter implements ClientResponseFilter { 9 @Override 10 public void filter(ClientRequestContext requestContext, 11 ClientResponseContext responseContext) throws IOException { 12 System.out.println(String.format(\u0026#34;requestUri=\\\u0026#34;%s\\\u0026#34;, method=\\\u0026#34;%s\\\u0026#34;, responseStatus=\\\u0026#34;%s\\\u0026#34;, requestTime=\\\u0026#34;%s\\\u0026#34;, responseTime=\\\u0026#34;%s\\\u0026#34;\u0026#34;, 13 requestContext.getUri(), 14 requestContext.getMethod(), 15 responseContext.getStatus(), 16 requestContext.getDate(), 17 responseContext.getDate())); 18 } 19} é€™é‚Šå¯ä»¥çœ‹åˆ°ï¼ŒClientRequestContext ï¼† ClientResponseContext éƒ½æœ‰ getDate() çš„å‡½å¼è¿”å›ä¸€å€‹ java.util.Dateï¼å¤©çœŸçš„æˆ‘ä¸€é–‹å§‹ä»¥ç‚ºå¯ä»¥é é€™å…©å€‹ getDate() ç®—å‡ºé€™å€‹ response çš„ durationï¼Œä½†å¯¦éš›åŸ·è¡Œçµæœå»å‡ºä¹æˆ‘çš„æ„æ–™ï¼ŒrequestTime ç«Ÿç„¶æ˜¯ nullã€‚\n1requestUri=\u0026#34;https://google.com\u0026#34;, method=\u0026#34;GET\u0026#34;, responseStatus=\u0026#34;200\u0026#34;, requestTime=\u0026#34;null\u0026#34;, responseTime=\u0026#34;Wed Jun 30 22:41:53 CST 2021\u0026#34; ClientRequestFilter ç•¶æ™‚æœ‰é»çŠ¯è ¢ï¼Œæƒ³èªª requestTime æ˜¯ Null å°±å·®é»æ”¾æ£„ï¼Œä¸çŸ¥é“æ€éº¼å®Œå…¨æ²’æƒ³åˆ°ç«Ÿç„¶æœ‰ ClientResponseFilter ï¼Œé‚£æ€éº¼æœƒæ²’æœ‰ ClientRequestFilter å‘¢ï¼æ‰€ä»¥é€™é‚Šæœ€å¾Œé è‘— ClientRequestFilter ï¼Œåœ¨æ¯å€‹ request é€å‡ºå»å‰ï¼ŒæŠŠç³»çµ±ç•¶ä¸‹æ™‚é–“å¡é€²å» requestContext ï¼Œé€™æ¨£å°±å¯ä»¥åœ¨ response å›ä¾†æ™‚æ‹‰åˆ°ç•¶åˆ request é€å‡ºæ™‚é–“ã€‚\n1package com.demo; 2 3import javax.ws.rs.client.ClientRequestContext; 4import javax.ws.rs.client.ClientRequestFilter; 5import javax.ws.rs.client.ClientResponseContext; 6import javax.ws.rs.client.ClientResponseFilter; 7import java.io.IOException; 8 9public class Filter implements ClientResponseFilter, ClientRequestFilter { 10 private static final String REQUEST_TIME = \u0026#34;REQUEST_TIME\u0026#34;; 11 12 @Override 13 public void filter(ClientRequestContext requestContext) throws IOException { 14 long currentTimeMillis = System.currentTimeMillis(); 15 requestContext.setProperty(REQUEST_TIME, currentTimeMillis); 16 } 17 18 @Override 19 public void filter(ClientRequestContext requestContext, 20 ClientResponseContext responseContext) throws IOException { 21 long requestTime = (Long) requestContext.getProperty(REQUEST_TIME); 22 long currentTimeMillis = System.currentTimeMillis(); 23 long duration = currentTimeMillis - requestTime; 24 25 System.out.println(String.format(\u0026#34;requestUri=\\\u0026#34;%s\\\u0026#34;, method=\\\u0026#34;%s\\\u0026#34;, responseStatus=\\\u0026#34;%s\\\u0026#34;, duration=\\\u0026#34;%d\\\u0026#34;\u0026#34;, 26 requestContext.getUri(), 27 requestContext.getMethod(), 28 responseContext.getStatus(), 29 duration)); 30 } 31} é€é ClientResponseFilter \u0026amp; ClientRequestFilter å°±å¯ä»¥ç°¡å–®ç®—å‡ºæ¯å€‹ request duration ~ å¸Œæœ›æœ‰å¹«åŠ©åˆ°çœ‹åˆ°é€™é‚Šæ–‡ç« çš„äºº\n","date":"June 30, 2021","img":"https://allenhsieh1992.com/images/java.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/java/java-jersey-client-log-request-duration/","smallImg":"","tags":[],"timestamp":1625011200,"title":"Java Jersey Client å–å¾—æ¯å€‹ Request Duration"},{"categories":[{"title":"JAVA","url":"/categories/java/"}],"content":"æœ€è¿‘æˆ‘å€‘éƒ¨é–€åœ¨é–‹ç™¼æ–°çš„å¾®æœå‹™éƒ½æ˜¯ä½¿ç”¨ Javaï¼Œä½†è¨±å¤šåŒäº‹éƒ½æ˜¯å¯«ç¿’æ…£ PHP ä¸”ä¹‹å‰æ²’æœ‰ä½¿ç”¨é Java ã€‚ç”±æ–¼åƒ PHP é€™ç¨® Script Language åœ¨è™•ç† Undefined Variable æ™‚ï¼Œåªæ˜¯æç¤ºWarningï¼Œå°è‡´æœ‰çš„åŒäº‹æ²’æœ‰è‰¯å¥½çš„æª¢æŸ¥ null çš„ç¿’æ…£ã€‚æœ‰çš„åŒäº‹æŠ±æ€¨ Null Pointer Exception èŠ±äº†è¨±å¤šçš„æ™‚é–“åœ¨å°‹æ‰¾ï¼Œæ‰€ä»¥æˆ‘æ±ºå®šåœ¨é€™æ¬¡çš„æ–°å°ˆæ¡ˆä¸­ï¼Œä½¿ç”¨ Optional ä¾†æ¸›å°‘ Null Pointer Exceptionã€‚é€™é‚Šè¦ç‰¹åˆ¥æ³¨æ„ï¼Œå¦‚æœæ²’æœ‰æ­£ç¢ºçš„ä½¿ç”¨ Optional çš„è©±ï¼Œé‚„æ˜¯æœ‰å¯èƒ½æœƒé€ æˆ Null Pointer Exception å–”ï¼\nNull Reference is the Billion Dollar Mistake - Tony Hoare\nå»ºç«‹Optional ç‰©ä»¶ å¤§å®¶èªç‚ºä¸‹é¢çš„ Example1 é‹è¡Œçš„çµæœæœƒæ˜¯ä»€éº¼æ¨£çš„å‘¢ï¼Ÿ\n1import java.util.Optional; 2 3public class Example1 { 4 public static void main(String[] args) { 5 String sentence = \u0026#34;I am Optional String\u0026#34;; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.of(sentence); 7 System.out.println(optionalSentence.get()); 8 } 9} åŸ·è¡Œçµæœæœƒæ˜¯ \u0026ldquo;I am Optional String\u0026rdquo;ï¼Œé€™é‚Šå¯ä»¥çœ‹åˆ° line 6 é€é of() method å»ºç«‹äº† ä¸€å€‹ Optional çš„ç‰©ä»¶ã€‚ä½†å¦‚æœ sentence æ˜¯ null çš„æ™‚å€™ï¼Œæœƒæ€éº¼æ¨£å‘¢ï¼Ÿçµæœæœƒæ˜¯ Null Pointer Exception! å› ç‚º of() method é€™é‚Šæ‰€å¸¶å…¥çš„ Value å¿…é ˆæ˜¯ non-nullçš„ï¼Œæ‰€ä»¥å»ºè­°å¤§å®¶åœ¨ä½¿ç”¨ Optional æ™‚ï¼Œæ‡‰è©²é¿é–‹ä½¿ç”¨ of() methodï¼Œè€Œæ˜¯ä½¿ç”¨ ofNullable() methodã€‚\nç¾åœ¨æˆ‘å€‘å°‡ Example1 ä¸­çš„ sentence æ”¹æˆ null ä¸¦ä¸”ä½¿ç”¨ ofNullAble() method ä¾†é‹è¡Œï¼Œé€™æ™‚å¤§å®¶è¦ºå¾—çµæœæ˜¯æ€æ¨£å‘¢ï¼Ÿ\n1import java.util.Optional; 2 3public class Example2 { 4 public static void main(String[] args) { 5 String sentence = null; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 7 System.out.println(optionalSentence.get()); 8 } 9} å¤§å®¶æ˜¯å¦æœƒèªç‚ºè·Ÿ Example1 ä¸€æ¨£ï¼Œæœƒåˆ—å°å‡º\u0026quot;I am Optional String\u0026quot;ï¼Ÿä½†å¯¦éš›åŸ·è¡Œçš„çµæœæœƒæ˜¯ NoSuchElementException : No value presentï¼Œå› ç‚ºåœ¨ call get() method æ™‚å…§éƒ¨æª¢æŸ¥ Value æ˜¯å¦å­˜åœ¨ï¼Œæ‰€ä»¥é€™é‚Šå»ºè­°åœ¨å¯¦éš›ä½¿ç”¨ä¸­ï¼Œä¸è¦ä½¿ç”¨ get() methodï¼Œé™¤éä½ èƒ½ç¢ºèª Value ä¸€å®šä¸ç­‰æ–¼ nullã€‚ é€™é‚Šè¦é †ä¾¿ä»‹ç´¹ Optional ä¸­ç‰¹åˆ¥çš„ç‰©ä»¶: Optional.empty() ï¼Œé€™é‚Šè¦ç‰¹åˆ¥æ³¨æ„ Optional empty é‚„æ˜¯ Optional ç‰©ä»¶ï¼Œåªæ˜¯è£¡é¢çš„ value æ˜¯ nullï¼Œæ‰€ä»¥ Optional empty è·Ÿ null æ˜¯ä¸åŒçš„æ±è¥¿ã€‚\nOptional å®‰å…¨å–å¾—Value é€™é‚Šä¸€é–‹å§‹è¦ä»‹ç´¹Optional ä¸­çš„ isPresent()ï¼Œé€é isPresent æˆ‘å€‘å¯ä»¥å®‰å…¨åœ°ç¢ºèª Value æ˜¯å¦å­˜åœ¨\n1import java.util.Optional; 2 3public class Example3 { 4 public static void main(String[] args) { 5 String sentence = \u0026#34;I am Optional String\u0026#34;; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 7 if (optionalSentence.isPresent()) { 8 System.out.println(optionalSentence.get()); 9 } else { 10 System.out.println(\u0026#34;value is empty\u0026#34;); 11 } 12 } 13} Example3 å› ç‚ºæˆ‘å€‘ç¢ºèªäº† Value å·²ç¶“å­˜åœ¨ Optional ä¸­äº†ï¼Œæ‰€ä»¥æœƒæ­£å¸¸é‹è¡Œï¼Œä½†æ˜¯å¦æœƒè¦ºå¾—é€™æ¨£å¯«æ³•è·Ÿæˆ‘å€‘ä»¥å‰è‡ªå·±æª¢æŸ¥ä¸€äº›å€¼æ˜¯å¦æ˜¯ null æ˜¯ä¸€æ¨£çš„å‘¢ï¼Ÿ é€™é‚Šè¦ä»‹ç´¹ orElse()\n1import java.util.Optional; 2 3public class Example4 { 4 public static void main(String[] args) { 5 String sentence = \u0026#34;I am Optional String\u0026#34;; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 7 String defaultValue = \u0026#34;value is empty\u0026#34;; 8 System.out.println(optionalSentence.orElse(defaultValue)); 9 } 10} å¤§å®¶å¯ä»¥çœ‹åˆ° orElse() ç•¶ Optional ç‰©ä»¶çš„ value æ˜¯ç©ºçš„æ™‚å€™ï¼Œæœƒè¿”å› defaultValueï¼Œé€™æ¨£æˆ‘å€‘å°±å¯ä»¥ä¸ç”¨å¯« if else äº†ã€‚ ä½†æœ‰çš„äººæƒ³ return çš„ defaultValue æ¯”è¼ƒè¤‡é›œæ€éº¼è¾¦? æˆ‘å€‘ä¹Ÿå¯ä»¥ä½¿ç”¨ orElseGet() åŸ·è¡Œä¸€å€‹å‡½ç¤ºå–å¾—æƒ³è¦çš„é è¨­å€¼ã€‚\n1import java.util.Optional; 2 3public class Example5 { 4 public static void main(String[] args) { 5 String sentence = \u0026#34;I am Optional String\u0026#34;; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 7 System.out.println(optionalSentence.orElseGet(()-\u0026gt; getDefaultValue())); 8 } 9 private static String getDefaultValue() { 10 return \u0026#34;I am default value\u0026#34;; 11 } 12} å¤§å®¶ä»¥å‰ä¹Ÿä¸€å®šæœƒç¶“å¸¸åšä¸€äº›å¿…è¦çš„æ¬„ä½æª¢æŸ¥ï¼Œå¦‚æœéƒ½äº›å€¼æ˜¯ Null å°±è¦ä¸Ÿç‰¹å®šçš„ Exceptionï¼Œé€™é‚Šå¯ä»¥ä½¿ç”¨ orElseThrow()\n1import java.util.Optional; 2 3public class Example6 { 4 public static void main(String[] args) throws Exception { 5 String sentence = \u0026#34;I am Optional String\u0026#34;; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 7 System.out.println(optionalSentence.orElseThrow(()-\u0026gt; new myCustomException())); 8 } 9} Optional å®‰å…¨åŸ·è¡Œç‰¹å®šå‡½å¼ åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œæˆ‘å€‘åªæ˜¯å–®ç´”çš„æƒ³è¦æ­£ç¢ºçš„åŸ·è¡Œ System.out.printlnï¼Œé€™é‚Šä»‹ç´¹ifPresent()ã€‚\n1import java.util.Optional; 2 3public class Example7 { 4 public static void main(String[] args) throws Exception { 5 String sentence = \u0026#34;I am Optional String\u0026#34;; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 7 optionalSentence.ifPresent(value -\u0026gt; { 8 System.out.println(value); 9 }); 10 } 11} é€™é‚Šæƒ³ç¨å¾®æä¸€ä¸‹ eta-conversion çš„æ¦‚å¿µï¼Œä½†ç´°ç¯€å¤§å®¶å¯ä»¥åƒè€ƒé€™ç¯‡ å¦‚ä½•ç†è§£ä¸¦ä½¿ç”¨Javaä¸­é›™å†’è™Ÿ(::)é‹ç®—æ“ä½œç¬¦ æ ¹æ“šeta-conversion å¯ä»¥å¯«æˆä»¥ä¸‹code\n1import java.util.Optional; 2 3public class Example8 { 4 public static void main(String[] args) { 5 String sentence = \u0026#34;I am Optional String\u0026#34;; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 7 //åŸæœ¬ 8 optionalSentence.ifPresent(value -\u0026gt; { 9 System.out.println(value); 10 }); 11 //å› ç‚ºåªåŸ·è¡Œä¸€å€‹å‡½å¼ï¼Œæ‰€ä»¥å¯ä»¥å°‡ {} æ‹¿æ‰ 12 optionalSentence.ifPresent(value -\u0026gt; System.out.println(value)); 13 //å› ç‚ºåªæœ‰çš„å‡½å¼åªæœ‰ä¸€å€‹åƒæ•¸ï¼Œé€é eta-conversion å¯ä»¥å¯«æˆ 14 optionalSentence.ifPresent(System.out::println); 15 } 16} ifPresent() åªèƒ½åœ¨ Optional æœ‰ value æ™‚åŸ·è¡Œï¼Œæœ‰æ™‚å€™æˆ‘å€‘ä¹Ÿå¸Œæœ›å¦‚æœ Optional æœ‰ value æ™‚åŸ·è¡Œ å‡½å¼ Aï¼Œæ²’æœ‰å€¼æ™‚ åŸ·è¡Œå‡½å¼ Bï¼Œé€™æ™‚æˆ‘å€‘å°±å¯ä»¥é€é ifPresentOrElse()\n1import java.util.Optional; 2 3public class Example9 { 4 public static void main(String[] args) { 5 String sentence = \u0026#34;I am Optional String\u0026#34;; 6 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 7 optionalSentence.ifPresentOrElse(Example9::methodA, Example9::methodB); 8 } 9 10 public static void methodA(String value) { 11 //do something with value 12 } 13 14 public static void methodB() { 15 //do something without value 16 } 17} Optional é€²éšå‡½å¼ Filter : å¦‚æœ isContainOptional return falseï¼Œfilter çš„çµæœæœƒæ˜¯ Optional empty\n1import java.util.Locale; 2import java.util.Optional; 3 4public class Example10 { 5 public static void main(String[] args) { 6 String sentence = \u0026#34;I am Optional String\u0026#34;; 7 Optional\u0026lt;String\u0026gt; optionalSentence = Optional.ofNullable(sentence); 8 System.out.println(optionalSentence.filter(Example10::isContainOptional)); 9 } 10 11 public static boolean isContainOptional(String input) { 12 return input.toLowerCase(Locale.ENGLISH).contains(\u0026#34;optional\u0026#34;); 13 } 14} 15 16/* output 17Optional[I am Optional String] 18*/ Map: å¦‚æœ Optional çš„ Value æœ‰å€¼ï¼Œé€™é‚Šæ‰æœƒåŸ·è¡Œä½ æ‰€å®šç¾©çš„ Mapping Functionï¼Œå¦‚æœæ²’æœ‰å°±ç›´æ¥è¿”å› Optional Emptyã€‚ æˆ‘åœ¨å·¥ä½œä¸­ï¼Œç¶“å¸¸éœ€è¦å°‡ DTO è½‰æ›æˆ Response ç‰©ä»¶ï¼Œæœƒä½¿ç”¨ Map ä¾†ä½¿ç”¨\n1import lombok.AllArgsConstructor; 2import lombok.Getter; 3 4@AllArgsConstructor 5@Getter 6class Person { 7 private String firstName; 8 private String lastName; 9} 1import lombok.AllArgsConstructor; 2import lombok.Getter; 3import lombok.ToString; 4 5@AllArgsConstructor 6@Getter 7@ToString 8public class FullNamePerson { 9 private String fullName; 10} 1import java.util.Optional; 2 3public class Example11 { 4 public static void main(String[] args) { 5 Optional\u0026lt;Person\u0026gt; person = Optional.ofNullable(new Person(\u0026#34;allen\u0026#34;, \u0026#34;hsieh\u0026#34;)); 6 Optional\u0026lt;FullNamePerson\u0026gt; fullNamePerson = person.map(Example11::convert); 7 fullNamePerson.ifPresent(System.out::println); 8 } 9 10 private static FullNamePerson convert(Person person) { 11 return new FullNamePerson(person.getFirstName() + \u0026#34; \u0026#34; + person.getLastName()); 12 } 13} 14 15/* output 16FullNamePerson(fullName=allen hsieh) 17*/ flatMap: é€™é‚Šæˆ‘æ¯”è¼ƒå¸¸ç”¨åœ¨å–å¾— Optional ç‰©ä»¶ä¸­çš„ Optional\n1import lombok.AllArgsConstructor; 2import java.util.Optional; 3 4@AllArgsConstructor 5class Person { 6 private String firstName; 7 private String lastName; 8 9 public Optional\u0026lt;String\u0026gt; getFirstName() { 10 return Optional.ofNullable(firstName); 11 } 12 13 public String getLastName() { 14 return lastName; 15 } 16} 1import java.util.Optional; 2 3public class Example12 { 4 public static void main(String[] args) { 5 Optional\u0026lt;Person\u0026gt; person = Optional.ofNullable(new Person(\u0026#34;allen\u0026#34;, \u0026#34;hsieh\u0026#34;)); 6 System.out.println(person.flatMap(Person::getFirstName)); 7 System.out.println(person.map(Person::getLastName)); 8 } 9} 10 11/* output 12Optional[allen] 13Optional[hsieh] 14*/ Class Field æ˜¯å¦ä½¿ç”¨ Optional ä¸€é–‹å§‹æˆ‘æ­£åœ¨å˜—è©¦ä½¿ç”¨ Optional æ™‚ï¼Œç”±æ–¼Lombok çš„ Getter ä¸å¯ä»¥è¨­å®šå°‡æ­£å¸¸çš„ Object è¿”å› Optionalï¼Œé‚£æ™‚æˆ‘æ›¾ç¶“æœ‰åœ¨è€ƒæ…®æ˜¯å¦è¦å°‡ Class Field ç›´æ¥éœ€å‘Šæˆ Optionalã€‚æœ€å¾Œåœ¨ç ”ç©¶äº†ä¸€ç•ªä»¥å¾Œï¼Œæˆ‘ç™¼ç¾ class field ä¸æ‡‰è©²é ˆå‘Šæˆ Optional ï¼Œä»¥ä¸‹å…©å€‹åŸå› \nOptional is not Serializableï¼Œé€™é‚Šæœ‰ Stack Overflow çš„è¨è«–ï¼Œå¤§å®¶å¯ä»¥åƒè€ƒ ä½ ä¸èƒ½é¿å…åˆ¥äººå°‡ Instance variable set æˆ null ï¼Œé‚„æ˜¯æœ‰å¯èƒ½é€ æˆ Null Pointer Exception 1import lombok.Data; 2import java.util.Optional; 3 4@Data 5class Person { 6 private Optional\u0026lt;String\u0026gt; name; 7 8 Person() { 9 } 10} 1import java.util.Optional; 2 3public class Example13 { 4 public static void main(String[] args) { 5 Person person = new Person(); 6 person.setName(null); 7 8 Optional\u0026lt;String\u0026gt; optionalName = person.getName(); 9 optionalName.ifPresent(System.out::println); 10 } 11} é€™é‚Šç”±æ–¼ getName return çš„ Optional æ˜¯ç”±å¤–é¢å¸¶å…¥çš„ï¼Œä¸¦ä¸èƒ½æ§åˆ¶è¿”å›çš„ç‰©ä»¶ä¸€å®šæ˜¯ Optionalï¼Œæ‰€ä»¥åœ¨ Line 8 çš„ optionalName æœƒæ˜¯ nullã€‚ç•¶ Line 9 çš„ ifPresent() åŸ·è¡Œæ™‚ï¼Œæœƒé€ æˆ Null Pointer Exceptionã€‚ Optional çš„ä½¿ç”¨æ˜¯ç‚ºäº†æ¸›å°‘ null çš„æƒ…æ³ï¼Œæ‰€ä»¥å¥½çš„è¨­è¨ˆæ˜¯åœ¨æ‹¿åˆ° Optional ç‰©ä»¶æ™‚ï¼Œä¸éœ€è¦åœ¨æª¢æŸ¥æ˜¯å¦æ˜¯ nullã€‚é€™ä¹ŸåŒæ™‚è¡¨ç¤ºå‡½ç¤ºçš„åƒæ•¸ï¼Œä¸æ‡‰è©²æœ‰ Optional å¸¶å…¥ï¼Œå› ç‚ºæœ‰å¯èƒ½æœƒæ˜¯ Null çš„æƒ…æ³\nç¸½çµ é€™é‚Šå°å°çš„ç¸½çµä¸€ä¸‹æˆ‘ç›®å‰ä½¿ç”¨ Optional çš„è¦å‰‡\né¿å…ä½¿ç”¨ of() \u0026amp; get() ä»¥å…é€ æˆ null pointer exception å‡½å¼è¿”å›çš„ç‰©ä»¶ï¼Œæœ‰å¯èƒ½æ˜¯ null çš„æƒ…æ³ï¼Œé¸æ“‡ä½¿ç”¨ Optional ç‰©ä»¶è¿”å› Class Field ä¸ä½¿ç”¨ Optional å‡½å¼åƒæ•¸ä¸å·² Optional ç‰©ä»¶å¸¶å…¥ ","date":"June 27, 2021","img":"https://allenhsieh1992.com/images/java.webp","lang":"zh-tw","langName":"ç¹é«”ä¸­æ–‡","largeImg":"","permalink":"/posts/java/java-optional-basic/","smallImg":"","tags":[{"title":"JavaCore","url":"/tags/javacore/"}],"timestamp":1624752000,"title":"Java Optional åŸºæœ¬ \u0026 å¿ƒå¾—åˆ†äº«"}]
